"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/trpc/[trpc]";
exports.ids = ["pages/api/trpc/[trpc]"];
exports.modules = {

/***/ "@aws-sdk/client-s3":
/*!*************************************!*\
  !*** external "@aws-sdk/client-s3" ***!
  \*************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/client-s3");

/***/ }),

/***/ "@aws-sdk/lib-storage":
/*!***************************************!*\
  !*** external "@aws-sdk/lib-storage" ***!
  \***************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/lib-storage");

/***/ }),

/***/ "@aws-sdk/s3-request-presigner":
/*!************************************************!*\
  !*** external "@aws-sdk/s3-request-presigner" ***!
  \************************************************/
/***/ ((module) => {

module.exports = require("@aws-sdk/s3-request-presigner");

/***/ }),

/***/ "@next-auth/prisma-adapter":
/*!********************************************!*\
  !*** external "@next-auth/prisma-adapter" ***!
  \********************************************/
/***/ ((module) => {

module.exports = require("@next-auth/prisma-adapter");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "@sentry/nextjs":
/*!*********************************!*\
  !*** external "@sentry/nextjs" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@sentry/nextjs");

/***/ }),

/***/ "@sentry/node":
/*!*******************************!*\
  !*** external "@sentry/node" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("@sentry/node");

/***/ }),

/***/ "@sentry/profiling-node":
/*!*****************************************!*\
  !*** external "@sentry/profiling-node" ***!
  \*****************************************/
/***/ ((module) => {

module.exports = require("@sentry/profiling-node");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/azure-ad":
/*!***********************************************!*\
  !*** external "next-auth/providers/azure-ad" ***!
  \***********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/azure-ad");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next-auth/providers/github":
/*!*********************************************!*\
  !*** external "next-auth/providers/github" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/github");

/***/ }),

/***/ "next-auth/providers/google":
/*!*********************************************!*\
  !*** external "next-auth/providers/google" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/google");

/***/ }),

/***/ "next-auth/react":
/*!**********************************!*\
  !*** external "next-auth/react" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("next-auth/react");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("nodemailer");

/***/ }),

/***/ "nodemailer/lib/shared/index.js":
/*!*************************************************!*\
  !*** external "nodemailer/lib/shared/index.js" ***!
  \*************************************************/
/***/ ((module) => {

module.exports = require("nodemailer/lib/shared/index.js");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

module.exports = require("react");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "@react-email/components":
/*!******************************************!*\
  !*** external "@react-email/components" ***!
  \******************************************/
/***/ ((module) => {

module.exports = import("@react-email/components");;

/***/ }),

/***/ "@react-email/render":
/*!**************************************!*\
  !*** external "@react-email/render" ***!
  \**************************************/
/***/ ((module) => {

module.exports = import("@react-email/render");;

/***/ }),

/***/ "@t3-oss/env-nextjs":
/*!*************************************!*\
  !*** external "@t3-oss/env-nextjs" ***!
  \*************************************/
/***/ ((module) => {

module.exports = import("@t3-oss/env-nextjs");;

/***/ }),

/***/ "@trpc/server":
/*!*******************************!*\
  !*** external "@trpc/server" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("@trpc/server");;

/***/ }),

/***/ "@trpc/server/adapters/next":
/*!*********************************************!*\
  !*** external "@trpc/server/adapters/next" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = import("@trpc/server/adapters/next");;

/***/ }),

/***/ "decimal.js":
/*!*****************************!*\
  !*** external "decimal.js" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("decimal.js");;

/***/ }),

/***/ "kysely":
/*!*************************!*\
  !*** external "kysely" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("kysely");;

/***/ }),

/***/ "superjson":
/*!****************************!*\
  !*** external "superjson" ***!
  \****************************/
/***/ ((module) => {

module.exports = import("superjson");;

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "(api)/./src/pages/api/trpc/[trpc].ts":
/*!**************************************!*\
  !*** ./src/pages/api/trpc/[trpc].ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ wrappedHandler$1)\n/* harmony export */ });\n/* harmony import */ var _sentry_server_config_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../../../../sentry.server.config.ts */ \"(api)/./sentry.server.config.ts\");\n/* harmony import */ var _sentry_nextjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sentry/nextjs */ \"@sentry/nextjs\");\n/* harmony import */ var _sentry_nextjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_sentry_nextjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @trpc/server/adapters/next */ \"@trpc/server/adapters/next\");\n/* harmony import */ var _src_env_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/env.mjs */ \"(api)/./src/env.mjs\");\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _src_server_api_root__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/src/server/api/root */ \"(api)/./src/server/api/root.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_sentry_server_config_ts__WEBPACK_IMPORTED_MODULE_0__, _trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_2__, _src_env_mjs__WEBPACK_IMPORTED_MODULE_3__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_4__, _src_server_api_root__WEBPACK_IMPORTED_MODULE_5__]);\n([_sentry_server_config_ts__WEBPACK_IMPORTED_MODULE_0__, _trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_2__, _src_env_mjs__WEBPACK_IMPORTED_MODULE_3__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_4__, _src_server_api_root__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\nconst config$1 = {\n    maxDuration: 120\n};\n// export API handler\nvar __SENTRY_WRAPPING_TARGET_FILE__ = (0,_trpc_server_adapters_next__WEBPACK_IMPORTED_MODULE_2__.createNextApiHandler)({\n    router: _src_server_api_root__WEBPACK_IMPORTED_MODULE_5__.appRouter,\n    createContext: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_4__.createTRPCContext,\n    // batching: {\n    //   enabled: false,\n    // },\n    onError: _src_env_mjs__WEBPACK_IMPORTED_MODULE_3__.env.NODE_ENV === \"development\" ? ({ path, error })=>{\n        console.error(`❌ tRPC failed on ${path ?? \"<no-path>\"}: ${error.message}`);\n    } : undefined\n});\n\nvar serverComponentModule = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    config: config$1,\n    'default': __SENTRY_WRAPPING_TARGET_FILE__\n});\n\n/*\n * This file is a template for the code which will be substituted when our webpack loader handles API files in the\n * `pages/` directory.\n *\n * We use `__SENTRY_WRAPPING_TARGET_FILE__.cjs` as a placeholder for the path to the file being wrapped. Because it's not a real package,\n * this causes both TS and ESLint to complain, hence the pragma comments below.\n */\n\nconst userApiModule = serverComponentModule ;\n\n// Default to undefined. It's possible for Next.js users to not define any exports/handlers in an API route. If that is\n// the case Next.js wil crash during runtime but the Sentry SDK should definitely not crash so we need tohandle it.\nlet userProvidedHandler = undefined;\n\nif ('default' in userApiModule && typeof userApiModule.default === 'function') {\n  // Handle when user defines via ESM export: `export default myFunction;`\n  userProvidedHandler = userApiModule.default;\n} else if (typeof userApiModule === 'function') {\n  // Handle when user defines via CJS export: \"module.exports = myFunction;\"\n  userProvidedHandler = userApiModule;\n}\n\nconst origConfig = userApiModule.config || {};\n\n// Setting `externalResolver` to `true` prevents nextjs from throwing a warning in dev about API routes resolving\n// without sending a response. It's a false positive (a response is sent, but only after we flush our send queue), and\n// we throw a warning of our own to tell folks that, but it's better if we just don't have to deal with it in the first\n// place.\nconst config = {\n  ...origConfig,\n  api: {\n    ...origConfig.api,\n    externalResolver: true,\n  },\n};\n\nlet wrappedHandler = userProvidedHandler;\n\nif (wrappedHandler) {\n  wrappedHandler = _sentry_nextjs__WEBPACK_IMPORTED_MODULE_1__.wrapApiHandlerWithSentry(wrappedHandler, '/api/trpc/[trpc]');\n}\n\nif (wrappedHandler && undefined) {}\n\nconst wrappedHandler$1 = wrappedHandler;\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL3RycGMvW3RycGNdLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNTyxNQUFNQSxRQUFTO0FBQ3BCQyxJQUFBQSxXQUFhO0FBQ2YsQ0FBRTtBQUVGO0FBQ0Esc0NBQWVDLGdGQUFxQjtBQUNsQ0MsSUFBQUEsTUFBUUMsRUFBQUEsMkRBQUFBO0FBQ1JDLElBQUFBLGFBQWVDLEVBQUFBLG1FQUFBQTs7OztBQUlmQyxJQUFBQSxPQUNFQyxFQUFBQSw2Q0FBQUEsQ0FBSUMsUUFBUSxLQUFLLGdCQUNiLENBQUMsRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUU7QUFDZEMsUUFBQUEsT0FBQUEsQ0FBUUQsS0FBSyxDQUNYLENBQUMsaUJBQWlCLEVBQUVELElBQUFBLElBQVEsV0FBWSxHQUFFLEVBQUVDLEtBQUFBLENBQU1FLE9BQU8sQ0FBQyxDQUFDO0FBRy9EQyxLQUFBQSxHQUFBQSxTQUFBQTtBQUNSLENBQUc7Ozs7Ozs7O0FDckJIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGFBQWEsR0FBRyxxQkFBcUIsRUFBRTtBQUM3QztBQUNBO0FBQ0E7QUFDQSxJQUFJLG1CQUFtQixHQUFHLFNBQVMsQ0FBQztBQUNwQztBQUNBLElBQUksU0FBUyxJQUFJLGFBQWEsSUFBSSxPQUFPLGFBQWEsQ0FBQyxPQUFPLEtBQUssVUFBVSxFQUFFO0FBQy9FO0FBQ0EsRUFBRSxtQkFBbUIsR0FBRyxhQUFhLENBQUMsT0FBTyxDQUFDO0FBQzlDLENBQUMsTUFBTSxJQUFJLE9BQU8sYUFBYSxLQUFLLFVBQVUsRUFBRTtBQUNoRDtBQUNBLEVBQUUsbUJBQW1CLEdBQUcsYUFBYSxDQUFDO0FBQ3RDLENBQUM7QUFDRDtBQUNBLE1BQU0sVUFBVSxHQUFHLGFBQWEsQ0FBQyxNQUFNLElBQUksRUFBRSxDQUFDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSyxNQUFDLE1BQU0sR0FBRztBQUNmLEVBQUUsR0FBRyxVQUFVO0FBQ2YsRUFBRSxHQUFHLEVBQUU7QUFDUCxJQUFJLEdBQUcsVUFBVSxDQUFDLEdBQUc7QUFDckIsSUFBSSxnQkFBZ0IsRUFBRSxJQUFJO0FBQzFCLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQSxJQUFJLGNBQWMsR0FBRyxtQkFBbUIsQ0FBQztBQUN6QztBQUNBLElBQUksY0FBYyxFQUFFO0FBQ3BCLEVBQUUsY0FBYyxHQUFHLG9FQUErQixDQUFDLGNBQWMsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO0FBQ3ZGLENBQUM7QUFDRDtBQUNBLElBQUksY0FBYyxJQUFJLFNBQVMsRUFBRSxFQUVoQztBQUNEO0FBQ0ssTUFBQyxnQkFBZ0IsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi9zcmMvcGFnZXMvYXBpL3RycGMvW3RycGNdLnRzPzNjNmMiLCJ3ZWJwYWNrOi8vd2ViL3NlbnRyeS13cmFwcGVyLW1vZHVsZT82Zjk2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZU5leHRBcGlIYW5kbGVyIH0gZnJvbSBcIkB0cnBjL3NlcnZlci9hZGFwdGVycy9uZXh0XCI7XG5cbmltcG9ydCB7IGVudiB9IGZyb20gXCJAL3NyYy9lbnYubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVUUlBDQ29udGV4dCB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3RycGNcIjtcbmltcG9ydCB7IGFwcFJvdXRlciB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3Jvb3RcIjtcblxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgbWF4RHVyYXRpb246IDEyMCxcbn07XG5cbi8vIGV4cG9ydCBBUEkgaGFuZGxlclxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlTmV4dEFwaUhhbmRsZXIoe1xuICByb3V0ZXI6IGFwcFJvdXRlcixcbiAgY3JlYXRlQ29udGV4dDogY3JlYXRlVFJQQ0NvbnRleHQsXG4gIC8vIGJhdGNoaW5nOiB7XG4gIC8vICAgZW5hYmxlZDogZmFsc2UsXG4gIC8vIH0sXG4gIG9uRXJyb3I6XG4gICAgZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCJcbiAgICAgID8gKHsgcGF0aCwgZXJyb3IgfSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICBg4p2MIHRSUEMgZmFpbGVkIG9uICR7cGF0aCA/PyBcIjxuby1wYXRoPlwifTogJHtlcnJvci5tZXNzYWdlfWAsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgOiB1bmRlZmluZWQsXG59KTtcbiIsImltcG9ydCAqIGFzIFNlbnRyeSBmcm9tICdAc2VudHJ5L25leHRqcyc7XG5pbXBvcnQgKiBhcyBzZXJ2ZXJDb21wb25lbnRNb2R1bGUgZnJvbSAnX19TRU5UUllfV1JBUFBJTkdfVEFSR0VUX0ZJTEVfXy5janMnO1xuZXhwb3J0ICogZnJvbSAnX19TRU5UUllfV1JBUFBJTkdfVEFSR0VUX0ZJTEVfXy5janMnO1xuXG4vKlxuICogVGhpcyBmaWxlIGlzIGEgdGVtcGxhdGUgZm9yIHRoZSBjb2RlIHdoaWNoIHdpbGwgYmUgc3Vic3RpdHV0ZWQgd2hlbiBvdXIgd2VicGFjayBsb2FkZXIgaGFuZGxlcyBBUEkgZmlsZXMgaW4gdGhlXG4gKiBgcGFnZXMvYCBkaXJlY3RvcnkuXG4gKlxuICogV2UgdXNlIGBfX1NFTlRSWV9XUkFQUElOR19UQVJHRVRfRklMRV9fLmNqc2AgYXMgYSBwbGFjZWhvbGRlciBmb3IgdGhlIHBhdGggdG8gdGhlIGZpbGUgYmVpbmcgd3JhcHBlZC4gQmVjYXVzZSBpdCdzIG5vdCBhIHJlYWwgcGFja2FnZSxcbiAqIHRoaXMgY2F1c2VzIGJvdGggVFMgYW5kIEVTTGludCB0byBjb21wbGFpbiwgaGVuY2UgdGhlIHByYWdtYSBjb21tZW50cyBiZWxvdy5cbiAqL1xuXG5jb25zdCB1c2VyQXBpTW9kdWxlID0gc2VydmVyQ29tcG9uZW50TW9kdWxlIDtcblxuLy8gRGVmYXVsdCB0byB1bmRlZmluZWQuIEl0J3MgcG9zc2libGUgZm9yIE5leHQuanMgdXNlcnMgdG8gbm90IGRlZmluZSBhbnkgZXhwb3J0cy9oYW5kbGVycyBpbiBhbiBBUEkgcm91dGUuIElmIHRoYXQgaXNcbi8vIHRoZSBjYXNlIE5leHQuanMgd2lsIGNyYXNoIGR1cmluZyBydW50aW1lIGJ1dCB0aGUgU2VudHJ5IFNESyBzaG91bGQgZGVmaW5pdGVseSBub3QgY3Jhc2ggc28gd2UgbmVlZCB0b2hhbmRsZSBpdC5cbmxldCB1c2VyUHJvdmlkZWRIYW5kbGVyID0gdW5kZWZpbmVkO1xuXG5pZiAoJ2RlZmF1bHQnIGluIHVzZXJBcGlNb2R1bGUgJiYgdHlwZW9mIHVzZXJBcGlNb2R1bGUuZGVmYXVsdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAvLyBIYW5kbGUgd2hlbiB1c2VyIGRlZmluZXMgdmlhIEVTTSBleHBvcnQ6IGBleHBvcnQgZGVmYXVsdCBteUZ1bmN0aW9uO2BcbiAgdXNlclByb3ZpZGVkSGFuZGxlciA9IHVzZXJBcGlNb2R1bGUuZGVmYXVsdDtcbn0gZWxzZSBpZiAodHlwZW9mIHVzZXJBcGlNb2R1bGUgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gSGFuZGxlIHdoZW4gdXNlciBkZWZpbmVzIHZpYSBDSlMgZXhwb3J0OiBcIm1vZHVsZS5leHBvcnRzID0gbXlGdW5jdGlvbjtcIlxuICB1c2VyUHJvdmlkZWRIYW5kbGVyID0gdXNlckFwaU1vZHVsZTtcbn1cblxuY29uc3Qgb3JpZ0NvbmZpZyA9IHVzZXJBcGlNb2R1bGUuY29uZmlnIHx8IHt9O1xuXG4vLyBTZXR0aW5nIGBleHRlcm5hbFJlc29sdmVyYCB0byBgdHJ1ZWAgcHJldmVudHMgbmV4dGpzIGZyb20gdGhyb3dpbmcgYSB3YXJuaW5nIGluIGRldiBhYm91dCBBUEkgcm91dGVzIHJlc29sdmluZ1xuLy8gd2l0aG91dCBzZW5kaW5nIGEgcmVzcG9uc2UuIEl0J3MgYSBmYWxzZSBwb3NpdGl2ZSAoYSByZXNwb25zZSBpcyBzZW50LCBidXQgb25seSBhZnRlciB3ZSBmbHVzaCBvdXIgc2VuZCBxdWV1ZSksIGFuZFxuLy8gd2UgdGhyb3cgYSB3YXJuaW5nIG9mIG91ciBvd24gdG8gdGVsbCBmb2xrcyB0aGF0LCBidXQgaXQncyBiZXR0ZXIgaWYgd2UganVzdCBkb24ndCBoYXZlIHRvIGRlYWwgd2l0aCBpdCBpbiB0aGUgZmlyc3Rcbi8vIHBsYWNlLlxuY29uc3QgY29uZmlnID0ge1xuICAuLi5vcmlnQ29uZmlnLFxuICBhcGk6IHtcbiAgICAuLi5vcmlnQ29uZmlnLmFwaSxcbiAgICBleHRlcm5hbFJlc29sdmVyOiB0cnVlLFxuICB9LFxufTtcblxubGV0IHdyYXBwZWRIYW5kbGVyID0gdXNlclByb3ZpZGVkSGFuZGxlcjtcblxuaWYgKHdyYXBwZWRIYW5kbGVyKSB7XG4gIHdyYXBwZWRIYW5kbGVyID0gU2VudHJ5LndyYXBBcGlIYW5kbGVyV2l0aFNlbnRyeSh3cmFwcGVkSGFuZGxlciwgJy9hcGkvdHJwYy9bdHJwY10nKTtcbn1cblxuaWYgKHdyYXBwZWRIYW5kbGVyICYmIHVuZGVmaW5lZCkge1xuICB3cmFwcGVkSGFuZGxlciA9IFNlbnRyeS53cmFwQXBpSGFuZGxlcldpdGhTZW50cnlWZXJjZWxDcm9ucyh3cmFwcGVkSGFuZGxlciwgdW5kZWZpbmVkKTtcbn1cblxuY29uc3Qgd3JhcHBlZEhhbmRsZXIkMSA9IHdyYXBwZWRIYW5kbGVyO1xuXG5leHBvcnQgeyBjb25maWcsIHdyYXBwZWRIYW5kbGVyJDEgYXMgZGVmYXVsdCB9O1xuIl0sIm5hbWVzIjpbImNvbmZpZyIsIm1heER1cmF0aW9uIiwiY3JlYXRlTmV4dEFwaUhhbmRsZXIiLCJyb3V0ZXIiLCJhcHBSb3V0ZXIiLCJjcmVhdGVDb250ZXh0IiwiY3JlYXRlVFJQQ0NvbnRleHQiLCJvbkVycm9yIiwiZW52IiwiTk9ERV9FTlYiLCJwYXRoIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsInVuZGVmaW5lZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/trpc/[trpc].ts\n");

/***/ }),

/***/ "(api)/../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftrpc%2F%5Btrpc%5D.ts&middlewareConfigBase64=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************!*\
  !*** ../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftrpc%2F%5Btrpc%5D.ts&middlewareConfigBase64=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/../node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/../node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/../node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/trpc/[trpc].ts */ \"(api)/./src/pages/api/trpc/[trpc].ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/trpc/[trpc]\",\n        pathname: \"/api/trpc/[trpc]\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_trpc_trpc_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1yb3V0ZS1sb2FkZXIvaW5kZXguanM/a2luZD1QQUdFU19BUEkmcGFnZT0lMkZhcGklMkZ0cnBjJTJGJTVCdHJwYyU1RCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGdHJwYyUyRiU1QnRycGMlNUQudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDMkQ7QUFDM0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx3REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvPzExYzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvdHJwYy9bdHJwY10udHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS90cnBjL1t0cnBjXVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3RycGMvW3RycGNdXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftrpc%2F%5Btrpc%5D.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./sentry.server.config.ts":
/*!*********************************!*\
  !*** ./sentry.server.config.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _src_server_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/server/db */ \"(api)/./src/server/db.ts\");\n/* harmony import */ var _src_utils_zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/utils/zod */ \"(api)/./src/utils/zod.ts\");\n/* harmony import */ var _sentry_nextjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @sentry/nextjs */ \"@sentry/nextjs\");\n/* harmony import */ var _sentry_nextjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_sentry_nextjs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _sentry_profiling_node__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sentry/profiling-node */ \"@sentry/profiling-node\");\n/* harmony import */ var _sentry_profiling_node__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_sentry_profiling_node__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_server_db__WEBPACK_IMPORTED_MODULE_0__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_1__]);\n([_src_server_db__WEBPACK_IMPORTED_MODULE_0__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\nvar _sentryCollisionFreeGlobalObject =  false ? 0 : typeof global != \"undefined\" ? global : typeof self != \"undefined\" ? self : {};\n_sentryCollisionFreeGlobalObject[\"__sentryRewritesTunnelPath__\"] = \"/api/monitoring-tunnel\";\n_sentryCollisionFreeGlobalObject[\"SENTRY_RELEASE\"] = undefined;\n_sentryCollisionFreeGlobalObject[\"__sentryBasePath\"] = undefined;\n_sentryCollisionFreeGlobalObject[\"__rewriteFramesDistDir__\"] = \".next\";\n\n\n\n\nif (process.env.NEXT_PUBLIC_SENTRY_DSN) _sentry_nextjs__WEBPACK_IMPORTED_MODULE_2__.init({\n    // debug: true,\n    dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,\n    // Set tracesSampleRate to 1.0 to capture 100%\n    // of transactions for performance monitoring.\n    // We recommend adjusting this value in production\n    tracesSampleRate: 1.0,\n    tracesSampler: (samplingContext)=>{\n        if (samplingContext.request && samplingContext.request.method === \"POST\" && samplingContext.request.url && samplingContext.request.url.includes(\"api/trpc\")) {\n            return 1.0;\n        }\n        return 0.2;\n    },\n    profilesSampleRate: 0.2,\n    integrations: [\n        // Add profiling integration to list of integrations\n        new _sentry_profiling_node__WEBPACK_IMPORTED_MODULE_3__.ProfilingIntegration(),\n        new _sentry_nextjs__WEBPACK_IMPORTED_MODULE_2__.Integrations.Prisma({\n            client: _src_server_db__WEBPACK_IMPORTED_MODULE_0__.prisma\n        })\n    ],\n    // filter out passwords from the signup request body\n    // transaction events are sentry transactions which include logs and spans.\n    beforeSendTransaction (transaction) {\n        if (transaction.request && typeof transaction.request.data === \"string\" && transaction.request.url && transaction.request.url.includes(\"api/auth/signup\")) {\n            const jsonBody = _src_utils_zod__WEBPACK_IMPORTED_MODULE_1__.jsonSchema.safeParse(transaction.request.data);\n            if (jsonBody.success && typeof jsonBody.data === \"object\" && \"data\" in jsonBody.data) {\n                delete jsonBody.data.password;\n                transaction.request.data = JSON.stringify(jsonBody.data);\n                transaction.request.data = JSON.stringify(jsonBody);\n            } else {\n                console.log(\"Signup: Non Json Request body\");\n            }\n            return transaction;\n        }\n        return transaction;\n    }\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zZW50cnkuc2VydmVyLmNvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsSUFBSUEsbUNBQW1DLE1BQTRCLEdBQUdDLENBQU1BLEdBQUcsT0FBT0MsVUFBVSxjQUFjQSxTQUFTLE9BQU9DLFFBQVEsY0FBY0EsT0FBTyxDQUFDO0FBQzVKSCxnQ0FBZ0MsQ0FBQywrQkFBK0IsR0FBRztBQUNuRUEsZ0NBQWdDLENBQUMsaUJBQWlCLEdBQUdJO0FBQ3JESixnQ0FBZ0MsQ0FBQyxtQkFBbUIsR0FBR0k7QUFDdkRKLGdDQUFnQyxDQUFDLDJCQUEyQixHQUFHO0FBRXRCO0FBQ0k7QUFDSjtBQUNxQjtBQUk5RCxJQUFJUyxRQUFRQyxHQUFHLENBQUNDLHNCQUFzQixFQUNwQ0osZ0RBQVcsQ0FBQztJQUNWLGVBQWU7SUFDZk0sS0FBS0osUUFBUUMsR0FBRyxDQUFDQyxzQkFBc0I7SUFFdkMsOENBQThDO0lBQzlDLDhDQUE4QztJQUM5QyxrREFBa0Q7SUFDbERHLGtCQUFrQjtJQUNsQkMsZUFBZSxDQUFDQztRQUNkLElBQ0VBLGdCQUFnQkMsT0FBTyxJQUN2QkQsZ0JBQWdCQyxPQUFPLENBQUNDLE1BQU0sS0FBSyxVQUNuQ0YsZ0JBQWdCQyxPQUFPLENBQUNFLEdBQUcsSUFDM0JILGdCQUFnQkMsT0FBTyxDQUFDRSxHQUFHLENBQUNDLFFBQVEsQ0FBQyxhQUNyQztZQUNBLE9BQU87UUFDVDtRQUNBLE9BQU87SUFDVDtJQUVBQyxvQkFBb0I7SUFDcEJDLGNBQWM7UUFDWixvREFBb0Q7UUFDcEQsSUFBSWQsd0VBQW9CQTtRQUN4QixJQUFJRCx3REFBbUIsQ0FBQ2lCLE1BQU0sQ0FBQztZQUFFQyxRQUFRcEIsa0RBQU1BO1FBQUM7S0FDakQ7SUFFRCxvREFBb0Q7SUFDcEQsMkVBQTJFO0lBQzNFcUIsdUJBQXNCQyxXQUE2QjtRQUNqRCxJQUNFQSxZQUFZVixPQUFPLElBQ25CLE9BQU9VLFlBQVlWLE9BQU8sQ0FBQ1csSUFBSSxLQUFLLFlBQ3BDRCxZQUFZVixPQUFPLENBQUNFLEdBQUcsSUFDdkJRLFlBQVlWLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDQyxRQUFRLENBQUMsb0JBQ2pDO1lBQ0EsTUFBTVMsV0FBV3ZCLHNEQUFVQSxDQUFDd0IsU0FBUyxDQUFDSCxZQUFZVixPQUFPLENBQUNXLElBQUk7WUFFOUQsSUFDRUMsU0FBU0UsT0FBTyxJQUNoQixPQUFPRixTQUFTRCxJQUFJLEtBQUssWUFDekIsVUFBVUMsU0FBU0QsSUFBSSxFQUN2QjtnQkFDQSxPQUFPQyxTQUFTRCxJQUFJLENBQUNJLFFBQVE7Z0JBQzdCTCxZQUFZVixPQUFPLENBQUNXLElBQUksR0FBR0ssS0FBS0MsU0FBUyxDQUFDTCxTQUFTRCxJQUFJO2dCQUN2REQsWUFBWVYsT0FBTyxDQUFDVyxJQUFJLEdBQUdLLEtBQUtDLFNBQVMsQ0FBQ0w7WUFDNUMsT0FBTztnQkFDTE0sUUFBUUMsR0FBRyxDQUFDO1lBQ2Q7WUFFQSxPQUFPVDtRQUNUO1FBRUEsT0FBT0E7SUFDVDtBQU9GIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc2VudHJ5LnNlcnZlci5jb25maWcudHM/ZGNkYiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX3NlbnRyeUNvbGxpc2lvbkZyZWVHbG9iYWxPYmplY3QgPSB0eXBlb2Ygd2luZG93ICE9IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHt9O1xuX3NlbnRyeUNvbGxpc2lvbkZyZWVHbG9iYWxPYmplY3RbXCJfX3NlbnRyeVJld3JpdGVzVHVubmVsUGF0aF9fXCJdID0gXCIvYXBpL21vbml0b3JpbmctdHVubmVsXCI7XG5fc2VudHJ5Q29sbGlzaW9uRnJlZUdsb2JhbE9iamVjdFtcIlNFTlRSWV9SRUxFQVNFXCJdID0gdW5kZWZpbmVkO1xuX3NlbnRyeUNvbGxpc2lvbkZyZWVHbG9iYWxPYmplY3RbXCJfX3NlbnRyeUJhc2VQYXRoXCJdID0gdW5kZWZpbmVkO1xuX3NlbnRyeUNvbGxpc2lvbkZyZWVHbG9iYWxPYmplY3RbXCJfX3Jld3JpdGVGcmFtZXNEaXN0RGlyX19cIl0gPSBcIi5uZXh0XCI7XG5cbmltcG9ydCB7IHByaXNtYSB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvZGJcIjtcbmltcG9ydCB7IGpzb25TY2hlbWEgfSBmcm9tIFwiQC9zcmMvdXRpbHMvem9kXCI7XG5pbXBvcnQgKiBhcyBTZW50cnkgZnJvbSBcIkBzZW50cnkvbmV4dGpzXCI7XG5pbXBvcnQgeyBQcm9maWxpbmdJbnRlZ3JhdGlvbiB9IGZyb20gXCJAc2VudHJ5L3Byb2ZpbGluZy1ub2RlXCI7XG5cbmltcG9ydCB0eXBlIHsgU2FtcGxpbmdDb250ZXh0LCBUcmFuc2FjdGlvbkV2ZW50IH0gZnJvbSBcIkBzZW50cnkvdHlwZXNcIjtcblxuaWYgKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NFTlRSWV9EU04pXG4gIFNlbnRyeS5pbml0KHtcbiAgICAvLyBkZWJ1ZzogdHJ1ZSxcbiAgICBkc246IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NFTlRSWV9EU04sXG5cbiAgICAvLyBTZXQgdHJhY2VzU2FtcGxlUmF0ZSB0byAxLjAgdG8gY2FwdHVyZSAxMDAlXG4gICAgLy8gb2YgdHJhbnNhY3Rpb25zIGZvciBwZXJmb3JtYW5jZSBtb25pdG9yaW5nLlxuICAgIC8vIFdlIHJlY29tbWVuZCBhZGp1c3RpbmcgdGhpcyB2YWx1ZSBpbiBwcm9kdWN0aW9uXG4gICAgdHJhY2VzU2FtcGxlUmF0ZTogMS4wLFxuICAgIHRyYWNlc1NhbXBsZXI6IChzYW1wbGluZ0NvbnRleHQ6IFNhbXBsaW5nQ29udGV4dCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBzYW1wbGluZ0NvbnRleHQucmVxdWVzdCAmJlxuICAgICAgICBzYW1wbGluZ0NvbnRleHQucmVxdWVzdC5tZXRob2QgPT09IFwiUE9TVFwiICYmXG4gICAgICAgIHNhbXBsaW5nQ29udGV4dC5yZXF1ZXN0LnVybCAmJlxuICAgICAgICBzYW1wbGluZ0NvbnRleHQucmVxdWVzdC51cmwuaW5jbHVkZXMoXCJhcGkvdHJwY1wiKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiAxLjA7XG4gICAgICB9XG4gICAgICByZXR1cm4gMC4yO1xuICAgIH0sXG5cbiAgICBwcm9maWxlc1NhbXBsZVJhdGU6IDAuMiwgLy8gUHJvZmlsaW5nIHNhbXBsZSByYXRlIGlzIHJlbGF0aXZlIHRvIHRyYWNlc1NhbXBsZVJhdGVcbiAgICBpbnRlZ3JhdGlvbnM6IFtcbiAgICAgIC8vIEFkZCBwcm9maWxpbmcgaW50ZWdyYXRpb24gdG8gbGlzdCBvZiBpbnRlZ3JhdGlvbnNcbiAgICAgIG5ldyBQcm9maWxpbmdJbnRlZ3JhdGlvbigpLFxuICAgICAgbmV3IFNlbnRyeS5JbnRlZ3JhdGlvbnMuUHJpc21hKHsgY2xpZW50OiBwcmlzbWEgfSksXG4gICAgXSxcblxuICAgIC8vIGZpbHRlciBvdXQgcGFzc3dvcmRzIGZyb20gdGhlIHNpZ251cCByZXF1ZXN0IGJvZHlcbiAgICAvLyB0cmFuc2FjdGlvbiBldmVudHMgYXJlIHNlbnRyeSB0cmFuc2FjdGlvbnMgd2hpY2ggaW5jbHVkZSBsb2dzIGFuZCBzcGFucy5cbiAgICBiZWZvcmVTZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb246IFRyYW5zYWN0aW9uRXZlbnQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdHJhbnNhY3Rpb24ucmVxdWVzdCAmJlxuICAgICAgICB0eXBlb2YgdHJhbnNhY3Rpb24ucmVxdWVzdC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgIHRyYW5zYWN0aW9uLnJlcXVlc3QudXJsICYmXG4gICAgICAgIHRyYW5zYWN0aW9uLnJlcXVlc3QudXJsLmluY2x1ZGVzKFwiYXBpL2F1dGgvc2lnbnVwXCIpXG4gICAgICApIHtcbiAgICAgICAgY29uc3QganNvbkJvZHkgPSBqc29uU2NoZW1hLnNhZmVQYXJzZSh0cmFuc2FjdGlvbi5yZXF1ZXN0LmRhdGEpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBqc29uQm9keS5zdWNjZXNzICYmXG4gICAgICAgICAgdHlwZW9mIGpzb25Cb2R5LmRhdGEgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICBcImRhdGFcIiBpbiBqc29uQm9keS5kYXRhXG4gICAgICAgICkge1xuICAgICAgICAgIGRlbGV0ZSBqc29uQm9keS5kYXRhLnBhc3N3b3JkO1xuICAgICAgICAgIHRyYW5zYWN0aW9uLnJlcXVlc3QuZGF0YSA9IEpTT04uc3RyaW5naWZ5KGpzb25Cb2R5LmRhdGEpO1xuICAgICAgICAgIHRyYW5zYWN0aW9uLnJlcXVlc3QuZGF0YSA9IEpTT04uc3RyaW5naWZ5KGpzb25Cb2R5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlNpZ251cDogTm9uIEpzb24gUmVxdWVzdCBib2R5XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJhbnNhY3Rpb247XG4gICAgfSxcblxuICAgIC8vIC4uLlxuXG4gICAgLy8gTm90ZTogaWYgeW91IHdhbnQgdG8gb3ZlcnJpZGUgdGhlIGF1dG9tYXRpYyByZWxlYXNlIHZhbHVlLCBkbyBub3Qgc2V0IGFcbiAgICAvLyBgcmVsZWFzZWAgdmFsdWUgaGVyZSAtIHVzZSB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgYFNFTlRSWV9SRUxFQVNFYCwgc29cbiAgICAvLyB0aGF0IGl0IHdpbGwgYWxzbyBnZXQgYXR0YWNoZWQgdG8geW91ciBzb3VyY2UgbWFwc1xuICB9KTtcbiJdLCJuYW1lcyI6WyJfc2VudHJ5Q29sbGlzaW9uRnJlZUdsb2JhbE9iamVjdCIsIndpbmRvdyIsImdsb2JhbCIsInNlbGYiLCJ1bmRlZmluZWQiLCJwcmlzbWEiLCJqc29uU2NoZW1hIiwiU2VudHJ5IiwiUHJvZmlsaW5nSW50ZWdyYXRpb24iLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU0VOVFJZX0RTTiIsImluaXQiLCJkc24iLCJ0cmFjZXNTYW1wbGVSYXRlIiwidHJhY2VzU2FtcGxlciIsInNhbXBsaW5nQ29udGV4dCIsInJlcXVlc3QiLCJtZXRob2QiLCJ1cmwiLCJpbmNsdWRlcyIsInByb2ZpbGVzU2FtcGxlUmF0ZSIsImludGVncmF0aW9ucyIsIkludGVncmF0aW9ucyIsIlByaXNtYSIsImNsaWVudCIsImJlZm9yZVNlbmRUcmFuc2FjdGlvbiIsInRyYW5zYWN0aW9uIiwiZGF0YSIsImpzb25Cb2R5Iiwic2FmZVBhcnNlIiwic3VjY2VzcyIsInBhc3N3b3JkIiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./sentry.server.config.ts\n");

/***/ }),

/***/ "(api)/./src/constants/VERSION.ts":
/*!**********************************!*\
  !*** ./src/constants/VERSION.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VERSION: () => (/* binding */ VERSION)\n/* harmony export */ });\nconst VERSION = \"v2.11.0\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvY29uc3RhbnRzL1ZFUlNJT04udHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLFVBQVUsVUFBVSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9jb25zdGFudHMvVkVSU0lPTi50cz82YzMzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBWRVJTSU9OID0gXCJ2Mi4xMS4wXCI7XG4iXSwibmFtZXMiOlsiVkVSU0lPTiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/constants/VERSION.ts\n");

/***/ }),

/***/ "(api)/./src/constants/index.ts":
/*!********************************!*\
  !*** ./src/constants/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ModelUsageUnit: () => (/* binding */ ModelUsageUnit),\n/* harmony export */   VERSION: () => (/* reexport safe */ _VERSION__WEBPACK_IMPORTED_MODULE_0__.VERSION)\n/* harmony export */ });\n/* harmony import */ var _VERSION__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./VERSION */ \"(api)/./src/constants/VERSION.ts\");\n\nvar ModelUsageUnit;\n(function(ModelUsageUnit) {\n    ModelUsageUnit[\"Characters\"] = \"CHARACTERS\";\n    ModelUsageUnit[\"Tokens\"] = \"TOKENS\";\n    ModelUsageUnit[\"Seconds\"] = \"SECONDS\";\n    ModelUsageUnit[\"Milliseconds\"] = \"MILLISECONDS\";\n    ModelUsageUnit[\"Images\"] = \"IMAGES\";\n})(ModelUsageUnit || (ModelUsageUnit = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvY29uc3RhbnRzL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFvQzs7VUFFeEJDOzs7Ozs7R0FBQUEsbUJBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2NvbnN0YW50cy9pbmRleC50cz82M2ZlIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IFZFUlNJT04gfSBmcm9tIFwiLi9WRVJTSU9OXCI7XG5cbmV4cG9ydCBlbnVtIE1vZGVsVXNhZ2VVbml0IHtcbiAgQ2hhcmFjdGVycyA9IFwiQ0hBUkFDVEVSU1wiLFxuICBUb2tlbnMgPSBcIlRPS0VOU1wiLFxuICBTZWNvbmRzID0gXCJTRUNPTkRTXCIsXG4gIE1pbGxpc2Vjb25kcyA9IFwiTUlMTElTRUNPTkRTXCIsXG4gIEltYWdlcyA9IFwiSU1BR0VTXCIsXG59XG4iXSwibmFtZXMiOlsiVkVSU0lPTiIsIk1vZGVsVXNhZ2VVbml0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/constants/index.ts\n");

/***/ }),

/***/ "(api)/./src/features/audit-logs/auditLog.ts":
/*!*********************************************!*\
  !*** ./src/features/audit-logs/auditLog.ts ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auditLog: () => (/* binding */ auditLog)\n/* harmony export */ });\n/* harmony import */ var _src_server_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/server/db */ \"(api)/./src/server/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_server_db__WEBPACK_IMPORTED_MODULE_0__]);\n_src_server_db__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nasync function auditLog(log, prisma) {\n    await (prisma ?? _src_server_db__WEBPACK_IMPORTED_MODULE_0__.prisma).auditLog.create({\n        data: {\n            projectId: \"projectId\" in log ? log.projectId : log.session.projectId,\n            userId: \"userId\" in log ? log.userId : log.session.user.id,\n            userProjectRole: \"userProjectRole\" in log ? log.userProjectRole : log.session.projectRole,\n            resourceType: log.resourceType,\n            resourceId: log.resourceId,\n            action: log.action,\n            before: log.before ? JSON.stringify(log.before) : undefined,\n            after: log.after ? JSON.stringify(log.after) : undefined\n        }\n    });\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvYXVkaXQtbG9ncy9hdWRpdExvZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFvRDtBQXdDN0MsZUFBZUUsU0FBU0MsR0FBYSxFQUFFSCxNQUF1QjtJQUNuRSxNQUFNLENBQUNBLFVBQVVDLGtEQUFNLEVBQUdDLFFBQVEsQ0FBQ0UsTUFBTSxDQUFDO1FBQ3hDQyxNQUFNO1lBQ0pDLFdBQVcsZUFBZUgsTUFBTUEsSUFBSUcsU0FBUyxHQUFHSCxJQUFJSSxPQUFPLENBQUNELFNBQVM7WUFDckVFLFFBQVEsWUFBWUwsTUFBTUEsSUFBSUssTUFBTSxHQUFHTCxJQUFJSSxPQUFPLENBQUNFLElBQUksQ0FBQ0MsRUFBRTtZQUMxREMsaUJBQ0UscUJBQXFCUixNQUNqQkEsSUFBSVEsZUFBZSxHQUNuQlIsSUFBSUksT0FBTyxDQUFDSyxXQUFXO1lBQzdCQyxjQUFjVixJQUFJVSxZQUFZO1lBQzlCQyxZQUFZWCxJQUFJVyxVQUFVO1lBQzFCQyxRQUFRWixJQUFJWSxNQUFNO1lBQ2xCQyxRQUFRYixJQUFJYSxNQUFNLEdBQUdDLEtBQUtDLFNBQVMsQ0FBQ2YsSUFBSWEsTUFBTSxJQUFJRztZQUNsREMsT0FBT2pCLElBQUlpQixLQUFLLEdBQUdILEtBQUtDLFNBQVMsQ0FBQ2YsSUFBSWlCLEtBQUssSUFBSUQ7UUFDakQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2ZlYXR1cmVzL2F1ZGl0LWxvZ3MvYXVkaXRMb2cudHM/YmQyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcmlzbWEgYXMgX3ByaXNtYSB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvZGJcIjtcbmltcG9ydCB7IHR5cGUgTWVtYmVyc2hpcFJvbGUgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuZXhwb3J0IHR5cGUgQXVkaXRhYmxlUmVzb3VyY2UgPVxuICB8IFwibWVtYmVyc2hpcFwiXG4gIHwgXCJtZW1iZXJzaGlwSW52aXRhdGlvblwiXG4gIHwgXCJkYXRhc2V0SXRlbVwiXG4gIHwgXCJkYXRhc2V0XCJcbiAgfCBcInRyYWNlXCJcbiAgfCBcInByb2plY3RcIlxuICB8IFwib2JzZXJ2YXRpb25cIlxuICB8IFwic2NvcmVcIlxuICB8IFwibW9kZWxcIlxuICB8IFwicHJvbXB0XCJcbiAgfCBcInNlc3Npb25cIlxuICB8IFwiYXBpS2V5XCI7XG5cbnR5cGUgQXVkaXRMb2cgPSB7XG4gIHJlc291cmNlVHlwZTogQXVkaXRhYmxlUmVzb3VyY2U7XG4gIHJlc291cmNlSWQ6IHN0cmluZztcbiAgYWN0aW9uOiBzdHJpbmc7XG4gIGJlZm9yZT86IHVua25vd247XG4gIGFmdGVyPzogdW5rbm93bjtcbn0gJiAoXG4gIHwge1xuICAgICAgcHJvamVjdElkOiBzdHJpbmc7XG4gICAgICB1c2VySWQ6IHN0cmluZztcbiAgICAgIHVzZXJQcm9qZWN0Um9sZTogTWVtYmVyc2hpcFJvbGU7XG4gICAgfVxuICB8IHtcbiAgICAgIHNlc3Npb246IHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgICAgIHByb2plY3RSb2xlOiBNZW1iZXJzaGlwUm9sZTtcbiAgICAgICAgcHJvamVjdElkOiBzdHJpbmc7XG4gICAgICB9O1xuICAgIH1cbik7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhdWRpdExvZyhsb2c6IEF1ZGl0TG9nLCBwcmlzbWE/OiB0eXBlb2YgX3ByaXNtYSkge1xuICBhd2FpdCAocHJpc21hID8/IF9wcmlzbWEpLmF1ZGl0TG9nLmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgcHJvamVjdElkOiBcInByb2plY3RJZFwiIGluIGxvZyA/IGxvZy5wcm9qZWN0SWQgOiBsb2cuc2Vzc2lvbi5wcm9qZWN0SWQsXG4gICAgICB1c2VySWQ6IFwidXNlcklkXCIgaW4gbG9nID8gbG9nLnVzZXJJZCA6IGxvZy5zZXNzaW9uLnVzZXIuaWQsXG4gICAgICB1c2VyUHJvamVjdFJvbGU6XG4gICAgICAgIFwidXNlclByb2plY3RSb2xlXCIgaW4gbG9nXG4gICAgICAgICAgPyBsb2cudXNlclByb2plY3RSb2xlXG4gICAgICAgICAgOiBsb2cuc2Vzc2lvbi5wcm9qZWN0Um9sZSxcbiAgICAgIHJlc291cmNlVHlwZTogbG9nLnJlc291cmNlVHlwZSxcbiAgICAgIHJlc291cmNlSWQ6IGxvZy5yZXNvdXJjZUlkLFxuICAgICAgYWN0aW9uOiBsb2cuYWN0aW9uLFxuICAgICAgYmVmb3JlOiBsb2cuYmVmb3JlID8gSlNPTi5zdHJpbmdpZnkobG9nLmJlZm9yZSkgOiB1bmRlZmluZWQsXG4gICAgICBhZnRlcjogbG9nLmFmdGVyID8gSlNPTi5zdHJpbmdpZnkobG9nLmFmdGVyKSA6IHVuZGVmaW5lZCxcbiAgICB9LFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJfcHJpc21hIiwiYXVkaXRMb2ciLCJsb2ciLCJjcmVhdGUiLCJkYXRhIiwicHJvamVjdElkIiwic2Vzc2lvbiIsInVzZXJJZCIsInVzZXIiLCJpZCIsInVzZXJQcm9qZWN0Um9sZSIsInByb2plY3RSb2xlIiwicmVzb3VyY2VUeXBlIiwicmVzb3VyY2VJZCIsImFjdGlvbiIsImJlZm9yZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1bmRlZmluZWQiLCJhZnRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/features/audit-logs/auditLog.ts\n");

/***/ }),

/***/ "(api)/./src/features/auth/lib/createProjectMembershipsOnSignup.ts":
/*!*******************************************************************!*\
  !*** ./src/features/auth/lib/createProjectMembershipsOnSignup.ts ***!
  \*******************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createProjectMembershipsOnSignup: () => (/* binding */ createProjectMembershipsOnSignup)\n/* harmony export */ });\n/* harmony import */ var _src_env_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/env.mjs */ \"(api)/./src/env.mjs\");\n/* harmony import */ var _src_server_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/server/db */ \"(api)/./src/server/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_env_mjs__WEBPACK_IMPORTED_MODULE_0__, _src_server_db__WEBPACK_IMPORTED_MODULE_1__]);\n([_src_env_mjs__WEBPACK_IMPORTED_MODULE_0__, _src_server_db__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nasync function createProjectMembershipsOnSignup(user) {\n    try {\n        // Langfuse Cloud: Demo project access\n        const demoProjectId = _src_env_mjs__WEBPACK_IMPORTED_MODULE_0__.env.NEXT_PUBLIC_DEMO_PROJECT_ID ? (await _src_server_db__WEBPACK_IMPORTED_MODULE_1__.prisma.project.findUnique({\n            where: {\n                id: _src_env_mjs__WEBPACK_IMPORTED_MODULE_0__.env.NEXT_PUBLIC_DEMO_PROJECT_ID\n            }\n        }))?.id : undefined;\n        if (demoProjectId !== undefined) {\n            await _src_server_db__WEBPACK_IMPORTED_MODULE_1__.prisma.membership.create({\n                data: {\n                    projectId: demoProjectId,\n                    userId: user.id,\n                    role: \"VIEWER\"\n                }\n            });\n        }\n        // set default project access\n        const defaultProjectID = _src_env_mjs__WEBPACK_IMPORTED_MODULE_0__.env.LANGFUSE_DEFAULT_PROJECT_ID ? (await _src_server_db__WEBPACK_IMPORTED_MODULE_1__.prisma.project.findUnique({\n            where: {\n                id: _src_env_mjs__WEBPACK_IMPORTED_MODULE_0__.env.LANGFUSE_DEFAULT_PROJECT_ID\n            }\n        }))?.id : undefined;\n        if (defaultProjectID !== undefined) {\n            await _src_server_db__WEBPACK_IMPORTED_MODULE_1__.prisma.membership.create({\n                data: {\n                    projectId: defaultProjectID,\n                    userId: user.id,\n                    role: _src_env_mjs__WEBPACK_IMPORTED_MODULE_0__.env.LANGFUSE_DEFAULT_PROJECT_ROLE ?? \"VIEWER\"\n                }\n            });\n        }\n        // Invites do not work for users without emails (some future SSO users)\n        if (user.email) await processMembershipInvitations(user.email, user.id);\n    } catch (e) {\n        console.error(\"Error assigning project access to new user\", e);\n    }\n}\nasync function processMembershipInvitations(email, userId) {\n    const invitationsForUser = await _src_server_db__WEBPACK_IMPORTED_MODULE_1__.prisma.membershipInvitation.findMany({\n        where: {\n            email: email.toLowerCase()\n        }\n    });\n    if (invitationsForUser.length > 0) {\n        const membershipsData = invitationsForUser.map((invitation)=>{\n            return {\n                userId: userId,\n                projectId: invitation.projectId,\n                role: invitation.role\n            };\n        });\n        await _src_server_db__WEBPACK_IMPORTED_MODULE_1__.prisma.$transaction([\n            _src_server_db__WEBPACK_IMPORTED_MODULE_1__.prisma.membership.createMany({\n                data: membershipsData\n            }),\n            _src_server_db__WEBPACK_IMPORTED_MODULE_1__.prisma.membershipInvitation.deleteMany({\n                where: {\n                    id: {\n                        in: invitationsForUser.map((invitation)=>invitation.id)\n                    },\n                    email: email.toLowerCase()\n                }\n            })\n        ]);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvYXV0aC9saWIvY3JlYXRlUHJvamVjdE1lbWJlcnNoaXBzT25TaWdudXAudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW9DO0FBQ0s7QUFFbEMsZUFBZUUsaUNBQWlDQyxJQUd0RDtJQUNDLElBQUk7UUFDRixzQ0FBc0M7UUFDdEMsTUFBTUMsZ0JBQWdCSiw2Q0FBR0EsQ0FBQ0ssMkJBQTJCLEdBRS9DLE9BQU1KLGtEQUFNQSxDQUFDSyxPQUFPLENBQUNDLFVBQVUsQ0FBQztZQUM5QkMsT0FBTztnQkFDTEMsSUFBSVQsNkNBQUdBLENBQUNLLDJCQUEyQjtZQUNyQztRQUNGLEVBQUMsR0FDQUksS0FDSEM7UUFDSixJQUFJTixrQkFBa0JNLFdBQVc7WUFDL0IsTUFBTVQsa0RBQU1BLENBQUNVLFVBQVUsQ0FBQ0MsTUFBTSxDQUFDO2dCQUM3QkMsTUFBTTtvQkFDSkMsV0FBV1Y7b0JBQ1hXLFFBQVFaLEtBQUtNLEVBQUU7b0JBQ2ZPLE1BQU07Z0JBQ1I7WUFDRjtRQUNGO1FBRUEsNkJBQTZCO1FBQzdCLE1BQU1DLG1CQUFtQmpCLDZDQUFHQSxDQUFDa0IsMkJBQTJCLEdBRWxELE9BQU1qQixrREFBTUEsQ0FBQ0ssT0FBTyxDQUFDQyxVQUFVLENBQUM7WUFDOUJDLE9BQU87Z0JBQ0xDLElBQUlULDZDQUFHQSxDQUFDa0IsMkJBQTJCO1lBQ3JDO1FBQ0YsRUFBQyxHQUNBVCxLQUNIQztRQUNKLElBQUlPLHFCQUFxQlAsV0FBVztZQUNsQyxNQUFNVCxrREFBTUEsQ0FBQ1UsVUFBVSxDQUFDQyxNQUFNLENBQUM7Z0JBQzdCQyxNQUFNO29CQUNKQyxXQUFXRztvQkFDWEYsUUFBUVosS0FBS00sRUFBRTtvQkFDZk8sTUFBTWhCLDZDQUFHQSxDQUFDbUIsNkJBQTZCLElBQUk7Z0JBQzdDO1lBQ0Y7UUFDRjtRQUNBLHVFQUF1RTtRQUN2RSxJQUFJaEIsS0FBS2lCLEtBQUssRUFBRSxNQUFNQyw2QkFBNkJsQixLQUFLaUIsS0FBSyxFQUFFakIsS0FBS00sRUFBRTtJQUN4RSxFQUFFLE9BQU9hLEdBQUc7UUFDVkMsUUFBUUMsS0FBSyxDQUFDLDhDQUE4Q0Y7SUFDOUQ7QUFDRjtBQUVBLGVBQWVELDZCQUE2QkQsS0FBYSxFQUFFTCxNQUFjO0lBQ3ZFLE1BQU1VLHFCQUFxQixNQUFNeEIsa0RBQU1BLENBQUN5QixvQkFBb0IsQ0FBQ0MsUUFBUSxDQUFDO1FBQ3BFbkIsT0FBTztZQUNMWSxPQUFPQSxNQUFNUSxXQUFXO1FBQzFCO0lBQ0Y7SUFFQSxJQUFJSCxtQkFBbUJJLE1BQU0sR0FBRyxHQUFHO1FBQ2pDLE1BQU1DLGtCQUFrQkwsbUJBQW1CTSxHQUFHLENBQUMsQ0FBQ0M7WUFDOUMsT0FBTztnQkFDTGpCLFFBQVFBO2dCQUNSRCxXQUFXa0IsV0FBV2xCLFNBQVM7Z0JBQy9CRSxNQUFNZ0IsV0FBV2hCLElBQUk7WUFDdkI7UUFDRjtRQUVBLE1BQU1mLGtEQUFNQSxDQUFDZ0MsWUFBWSxDQUFDO1lBQ3hCaEMsa0RBQU1BLENBQUNVLFVBQVUsQ0FBQ3VCLFVBQVUsQ0FBQztnQkFDM0JyQixNQUFNaUI7WUFDUjtZQUNBN0Isa0RBQU1BLENBQUN5QixvQkFBb0IsQ0FBQ1MsVUFBVSxDQUFDO2dCQUNyQzNCLE9BQU87b0JBQ0xDLElBQUk7d0JBQ0YyQixJQUFJWCxtQkFBbUJNLEdBQUcsQ0FBQyxDQUFDQyxhQUFlQSxXQUFXdkIsRUFBRTtvQkFDMUQ7b0JBQ0FXLE9BQU9BLE1BQU1RLFdBQVc7Z0JBQzFCO1lBQ0Y7U0FDRDtJQUNIO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvZmVhdHVyZXMvYXV0aC9saWIvY3JlYXRlUHJvamVjdE1lbWJlcnNoaXBzT25TaWdudXAudHM/OTA5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlbnYgfSBmcm9tIFwiQC9zcmMvZW52Lm1qc1wiO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvc3JjL3NlcnZlci9kYlwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlUHJvamVjdE1lbWJlcnNoaXBzT25TaWdudXAodXNlcjoge1xuICBpZDogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nIHwgbnVsbDtcbn0pIHtcbiAgdHJ5IHtcbiAgICAvLyBMYW5nZnVzZSBDbG91ZDogRGVtbyBwcm9qZWN0IGFjY2Vzc1xuICAgIGNvbnN0IGRlbW9Qcm9qZWN0SWQgPSBlbnYuTkVYVF9QVUJMSUNfREVNT19QUk9KRUNUX0lEXG4gICAgICA/IChcbiAgICAgICAgICBhd2FpdCBwcmlzbWEucHJvamVjdC5maW5kVW5pcXVlKHtcbiAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgIGlkOiBlbnYuTkVYVF9QVUJMSUNfREVNT19QUk9KRUNUX0lELFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KVxuICAgICAgICApPy5pZFxuICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKGRlbW9Qcm9qZWN0SWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgYXdhaXQgcHJpc21hLm1lbWJlcnNoaXAuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHByb2plY3RJZDogZGVtb1Byb2plY3RJZCxcbiAgICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgICAgcm9sZTogXCJWSUVXRVJcIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIHNldCBkZWZhdWx0IHByb2plY3QgYWNjZXNzXG4gICAgY29uc3QgZGVmYXVsdFByb2plY3RJRCA9IGVudi5MQU5HRlVTRV9ERUZBVUxUX1BST0pFQ1RfSURcbiAgICAgID8gKFxuICAgICAgICAgIGF3YWl0IHByaXNtYS5wcm9qZWN0LmZpbmRVbmlxdWUoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgaWQ6IGVudi5MQU5HRlVTRV9ERUZBVUxUX1BST0pFQ1RfSUQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXG4gICAgICAgICk/LmlkXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAoZGVmYXVsdFByb2plY3RJRCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBhd2FpdCBwcmlzbWEubWVtYmVyc2hpcC5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcHJvamVjdElkOiBkZWZhdWx0UHJvamVjdElELFxuICAgICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgICByb2xlOiBlbnYuTEFOR0ZVU0VfREVGQVVMVF9QUk9KRUNUX1JPTEUgPz8gXCJWSUVXRVJcIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBJbnZpdGVzIGRvIG5vdCB3b3JrIGZvciB1c2VycyB3aXRob3V0IGVtYWlscyAoc29tZSBmdXR1cmUgU1NPIHVzZXJzKVxuICAgIGlmICh1c2VyLmVtYWlsKSBhd2FpdCBwcm9jZXNzTWVtYmVyc2hpcEludml0YXRpb25zKHVzZXIuZW1haWwsIHVzZXIuaWQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFzc2lnbmluZyBwcm9qZWN0IGFjY2VzcyB0byBuZXcgdXNlclwiLCBlKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzTWVtYmVyc2hpcEludml0YXRpb25zKGVtYWlsOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IGludml0YXRpb25zRm9yVXNlciA9IGF3YWl0IHByaXNtYS5tZW1iZXJzaGlwSW52aXRhdGlvbi5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgIH0sXG4gIH0pO1xuXG4gIGlmIChpbnZpdGF0aW9uc0ZvclVzZXIubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IG1lbWJlcnNoaXBzRGF0YSA9IGludml0YXRpb25zRm9yVXNlci5tYXAoKGludml0YXRpb24pID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxuICAgICAgICBwcm9qZWN0SWQ6IGludml0YXRpb24ucHJvamVjdElkLFxuICAgICAgICByb2xlOiBpbnZpdGF0aW9uLnJvbGUsXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgYXdhaXQgcHJpc21hLiR0cmFuc2FjdGlvbihbXG4gICAgICBwcmlzbWEubWVtYmVyc2hpcC5jcmVhdGVNYW55KHtcbiAgICAgICAgZGF0YTogbWVtYmVyc2hpcHNEYXRhLFxuICAgICAgfSksXG4gICAgICBwcmlzbWEubWVtYmVyc2hpcEludml0YXRpb24uZGVsZXRlTWFueSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIGluOiBpbnZpdGF0aW9uc0ZvclVzZXIubWFwKChpbnZpdGF0aW9uKSA9PiBpbnZpdGF0aW9uLmlkKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgXSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJlbnYiLCJwcmlzbWEiLCJjcmVhdGVQcm9qZWN0TWVtYmVyc2hpcHNPblNpZ251cCIsInVzZXIiLCJkZW1vUHJvamVjdElkIiwiTkVYVF9QVUJMSUNfREVNT19QUk9KRUNUX0lEIiwicHJvamVjdCIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwidW5kZWZpbmVkIiwibWVtYmVyc2hpcCIsImNyZWF0ZSIsImRhdGEiLCJwcm9qZWN0SWQiLCJ1c2VySWQiLCJyb2xlIiwiZGVmYXVsdFByb2plY3RJRCIsIkxBTkdGVVNFX0RFRkFVTFRfUFJPSkVDVF9JRCIsIkxBTkdGVVNFX0RFRkFVTFRfUFJPSkVDVF9ST0xFIiwiZW1haWwiLCJwcm9jZXNzTWVtYmVyc2hpcEludml0YXRpb25zIiwiZSIsImNvbnNvbGUiLCJlcnJvciIsImludml0YXRpb25zRm9yVXNlciIsIm1lbWJlcnNoaXBJbnZpdGF0aW9uIiwiZmluZE1hbnkiLCJ0b0xvd2VyQ2FzZSIsImxlbmd0aCIsIm1lbWJlcnNoaXBzRGF0YSIsIm1hcCIsImludml0YXRpb24iLCIkdHJhbnNhY3Rpb24iLCJjcmVhdGVNYW55IiwiZGVsZXRlTWFueSIsImluIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/features/auth/lib/createProjectMembershipsOnSignup.ts\n");

/***/ }),

/***/ "(api)/./src/features/auth/lib/emailPassword.ts":
/*!************************************************!*\
  !*** ./src/features/auth/lib/emailPassword.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createUserEmailPassword: () => (/* binding */ createUserEmailPassword),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   isValidPassword: () => (/* binding */ isValidPassword),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _src_features_auth_lib_createProjectMembershipsOnSignup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/features/auth/lib/createProjectMembershipsOnSignup */ \"(api)/./src/features/auth/lib/createProjectMembershipsOnSignup.ts\");\n/* harmony import */ var _src_server_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/server/db */ \"(api)/./src/server/db.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_features_auth_lib_createProjectMembershipsOnSignup__WEBPACK_IMPORTED_MODULE_0__, _src_server_db__WEBPACK_IMPORTED_MODULE_1__]);\n([_src_features_auth_lib_createProjectMembershipsOnSignup__WEBPACK_IMPORTED_MODULE_0__, _src_server_db__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n/**\n * This function creates a user with an email and password.\n * @param {string} email - A string representing the email address of the user that needs to be\n * created.\n * @param {string} password - The `password` parameter is a string that represents the password that\n * the user wants to use for their account. It will be used to authenticate the user when they log in\n * to their account.\n * @returns {Promise<string>} - A promise that resolves to the id of the user that was created.\n */ async function createUserEmailPassword(email, password, name) {\n    if (!isValidPassword(password)) throw new Error(\"Password needs to be at least 8 characters long.\");\n    const hashedPassword = await hashPassword(password);\n    // check that no user exists with this email\n    const user = await _src_server_db__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n        where: {\n            email: email.toLowerCase()\n        }\n    });\n    if (user !== null) {\n        throw new Error(\"User with email already exists. Please sign in.\");\n    }\n    const newUser = await _src_server_db__WEBPACK_IMPORTED_MODULE_1__.prisma.user.create({\n        data: {\n            email: email.toLowerCase(),\n            password: hashedPassword,\n            name\n        }\n    });\n    await (0,_src_features_auth_lib_createProjectMembershipsOnSignup__WEBPACK_IMPORTED_MODULE_0__.createProjectMembershipsOnSignup)(newUser);\n    return newUser.id;\n}\nasync function hashPassword(password) {\n    const hashedPassword = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_2__.hash)(password, 12);\n    return hashedPassword;\n}\nasync function verifyPassword(password, hashedPassword) {\n    const isValid = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_2__.compare)(password, hashedPassword);\n    return isValid;\n}\nfunction isValidPassword(password) {\n    return password.length >= 8;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvYXV0aC9saWIvZW1haWxQYXNzd29yZC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUE0RztBQUNuRTtBQUNBO0FBRXpDOzs7Ozs7OztDQVFDLEdBQ00sZUFBZUksd0JBQ3BCQyxLQUFhLEVBQ2JDLFFBQWdCLEVBQ2hCQyxJQUFZO0lBRVosSUFBSSxDQUFDQyxnQkFBZ0JGLFdBQ25CLE1BQU0sSUFBSUcsTUFBTTtJQUVsQixNQUFNQyxpQkFBaUIsTUFBTUMsYUFBYUw7SUFDMUMsNENBQTRDO0lBQzVDLE1BQU1NLE9BQU8sTUFBTVgsa0RBQU1BLENBQUNXLElBQUksQ0FBQ0MsVUFBVSxDQUFDO1FBQ3hDQyxPQUFPO1lBQ0xULE9BQU9BLE1BQU1VLFdBQVc7UUFDMUI7SUFDRjtJQUNBLElBQUlILFNBQVMsTUFBTTtRQUNqQixNQUFNLElBQUlILE1BQU07SUFDbEI7SUFFQSxNQUFNTyxVQUFVLE1BQU1mLGtEQUFNQSxDQUFDVyxJQUFJLENBQUNLLE1BQU0sQ0FBQztRQUN2Q0MsTUFBTTtZQUNKYixPQUFPQSxNQUFNVSxXQUFXO1lBQ3hCVCxVQUFVSTtZQUNWSDtRQUNGO0lBQ0Y7SUFFQSxNQUFNUCx5SEFBZ0NBLENBQUNnQjtJQUV2QyxPQUFPQSxRQUFRRyxFQUFFO0FBQ25CO0FBRU8sZUFBZVIsYUFBYUwsUUFBZ0I7SUFDakQsTUFBTUksaUJBQWlCLE1BQU1QLDhDQUFJQSxDQUFDRyxVQUFVO0lBQzVDLE9BQU9JO0FBQ1Q7QUFFTyxlQUFlVSxlQUFlZCxRQUFnQixFQUFFSSxjQUFzQjtJQUMzRSxNQUFNVyxVQUFVLE1BQU1uQixpREFBT0EsQ0FBQ0ksVUFBVUk7SUFDeEMsT0FBT1c7QUFDVDtBQUVPLFNBQVNiLGdCQUFnQkYsUUFBZ0I7SUFDOUMsT0FBT0EsU0FBU2dCLE1BQU0sSUFBSTtBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9mZWF0dXJlcy9hdXRoL2xpYi9lbWFpbFBhc3N3b3JkLnRzP2M0MTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlUHJvamVjdE1lbWJlcnNoaXBzT25TaWdudXAgfSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvYXV0aC9saWIvY3JlYXRlUHJvamVjdE1lbWJlcnNoaXBzT25TaWdudXBcIjtcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvZGJcIjtcbmltcG9ydCB7IGNvbXBhcmUsIGhhc2ggfSBmcm9tIFwiYmNyeXB0anNcIjtcblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGNyZWF0ZXMgYSB1c2VyIHdpdGggYW4gZW1haWwgYW5kIHBhc3N3b3JkLlxuICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsIC0gQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSB1c2VyIHRoYXQgbmVlZHMgdG8gYmVcbiAqIGNyZWF0ZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFzc3dvcmQgLSBUaGUgYHBhc3N3b3JkYCBwYXJhbWV0ZXIgaXMgYSBzdHJpbmcgdGhhdCByZXByZXNlbnRzIHRoZSBwYXNzd29yZCB0aGF0XG4gKiB0aGUgdXNlciB3YW50cyB0byB1c2UgZm9yIHRoZWlyIGFjY291bnQuIEl0IHdpbGwgYmUgdXNlZCB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIgd2hlbiB0aGV5IGxvZyBpblxuICogdG8gdGhlaXIgYWNjb3VudC5cbiAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IC0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIGlkIG9mIHRoZSB1c2VyIHRoYXQgd2FzIGNyZWF0ZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyRW1haWxQYXNzd29yZChcbiAgZW1haWw6IHN0cmluZyxcbiAgcGFzc3dvcmQ6IHN0cmluZyxcbiAgbmFtZTogc3RyaW5nLFxuKSB7XG4gIGlmICghaXNWYWxpZFBhc3N3b3JkKHBhc3N3b3JkKSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXNzd29yZCBuZWVkcyB0byBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMgbG9uZy5cIik7XG5cbiAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBoYXNoUGFzc3dvcmQocGFzc3dvcmQpO1xuICAvLyBjaGVjayB0aGF0IG5vIHVzZXIgZXhpc3RzIHdpdGggdGhpcyBlbWFpbFxuICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgIH0sXG4gIH0pO1xuICBpZiAodXNlciAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgd2l0aCBlbWFpbCBhbHJlYWR5IGV4aXN0cy4gUGxlYXNlIHNpZ24gaW4uXCIpO1xuICB9XG5cbiAgY29uc3QgbmV3VXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgZW1haWw6IGVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgICBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQsXG4gICAgICBuYW1lLFxuICAgIH0sXG4gIH0pO1xuXG4gIGF3YWl0IGNyZWF0ZVByb2plY3RNZW1iZXJzaGlwc09uU2lnbnVwKG5ld1VzZXIpO1xuXG4gIHJldHVybiBuZXdVc2VyLmlkO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFzaFBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBoYXNoKHBhc3N3b3JkLCAxMik7XG4gIHJldHVybiBoYXNoZWRQYXNzd29yZDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcsIGhhc2hlZFBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IGNvbXBhcmUocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKTtcbiAgcmV0dXJuIGlzVmFsaWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZykge1xuICByZXR1cm4gcGFzc3dvcmQubGVuZ3RoID49IDg7XG59XG4iXSwibmFtZXMiOlsiY3JlYXRlUHJvamVjdE1lbWJlcnNoaXBzT25TaWdudXAiLCJwcmlzbWEiLCJjb21wYXJlIiwiaGFzaCIsImNyZWF0ZVVzZXJFbWFpbFBhc3N3b3JkIiwiZW1haWwiLCJwYXNzd29yZCIsIm5hbWUiLCJpc1ZhbGlkUGFzc3dvcmQiLCJFcnJvciIsImhhc2hlZFBhc3N3b3JkIiwiaGFzaFBhc3N3b3JkIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsInRvTG93ZXJDYXNlIiwibmV3VXNlciIsImNyZWF0ZSIsImRhdGEiLCJpZCIsInZlcmlmeVBhc3N3b3JkIiwiaXNWYWxpZCIsImxlbmd0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/features/auth/lib/emailPassword.ts\n");

/***/ }),

/***/ "(api)/./src/features/auth/lib/projectNameSchema.ts":
/*!****************************************************!*\
  !*** ./src/features/auth/lib/projectNameSchema.ts ***!
  \****************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   projectNameSchema: () => (/* binding */ projectNameSchema)\n/* harmony export */ });\n/* harmony import */ var _src_utils_zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/utils/zod */ \"(api)/./src/utils/zod.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_utils_zod__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_1__]);\n([_src_utils_zod__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst projectNameSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(3, \"Must have at least 3 characters\").refine((value)=>(0,_src_utils_zod__WEBPACK_IMPORTED_MODULE_0__.noHtmlCheck)(value), {\n        message: \"Input should not contain HTML\"\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvYXV0aC9saWIvcHJvamVjdE5hbWVTY2hlbWEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQThDO0FBQ3JCO0FBRWxCLE1BQU1FLG9CQUFvQkQsdUNBQVEsQ0FBQztJQUN4Q0csTUFBTUgsdUNBQ0csR0FDTkssR0FBRyxDQUFDLEdBQUcsbUNBQ1BDLE1BQU0sQ0FBQyxDQUFDQyxRQUFVUiwyREFBV0EsQ0FBQ1EsUUFBUTtRQUNyQ0MsU0FBUztJQUNYO0FBQ0osR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9mZWF0dXJlcy9hdXRoL2xpYi9wcm9qZWN0TmFtZVNjaGVtYS50cz82MDE0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG5vSHRtbENoZWNrIH0gZnJvbSBcIkAvc3JjL3V0aWxzL3pvZFwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5cbmV4cG9ydCBjb25zdCBwcm9qZWN0TmFtZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgbmFtZTogelxuICAgIC5zdHJpbmcoKVxuICAgIC5taW4oMywgXCJNdXN0IGhhdmUgYXQgbGVhc3QgMyBjaGFyYWN0ZXJzXCIpXG4gICAgLnJlZmluZSgodmFsdWUpID0+IG5vSHRtbENoZWNrKHZhbHVlKSwge1xuICAgICAgbWVzc2FnZTogXCJJbnB1dCBzaG91bGQgbm90IGNvbnRhaW4gSFRNTFwiLFxuICAgIH0pLFxufSk7XG4iXSwibmFtZXMiOlsibm9IdG1sQ2hlY2siLCJ6IiwicHJvamVjdE5hbWVTY2hlbWEiLCJvYmplY3QiLCJuYW1lIiwic3RyaW5nIiwibWluIiwicmVmaW5lIiwidmFsdWUiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/features/auth/lib/projectNameSchema.ts\n");

/***/ }),

/***/ "(api)/./src/features/dashboard/server/dashboard-router.ts":
/*!***********************************************************!*\
  !*** ./src/features/dashboard/server/dashboard-router.ts ***!
  \***********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dashboardRouter: () => (/* binding */ dashboardRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _src_server_api_services_query_builder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/server/api/services/query-builder */ \"(api)/./src/server/api/services/query-builder.ts\");\n/* harmony import */ var _src_server_api_services_sqlInterface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/server/api/services/sqlInterface */ \"(api)/./src/server/api/services/sqlInterface.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _src_server_api_services_query_builder__WEBPACK_IMPORTED_MODULE_2__, _src_server_api_services_sqlInterface__WEBPACK_IMPORTED_MODULE_3__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _src_server_api_services_query_builder__WEBPACK_IMPORTED_MODULE_2__, _src_server_api_services_sqlInterface__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst dashboardRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.createTRPCRouter)({\n    chart: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(_src_server_api_services_sqlInterface__WEBPACK_IMPORTED_MODULE_3__.sqlInterface.extend({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        filter: _src_server_api_services_sqlInterface__WEBPACK_IMPORTED_MODULE_3__.filterInterface.optional()\n    })).query(async ({ input, ctx })=>{\n        return await (0,_src_server_api_services_query_builder__WEBPACK_IMPORTED_MODULE_2__.executeQuery)(ctx.prisma, input.projectId, input);\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvZGFzaGJvYXJkL3NlcnZlci9kYXNoYm9hcmQtcm91dGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXdCO0FBS087QUFDd0M7QUFJdkI7QUFFekMsTUFBTU0sa0JBQWtCTCxzRUFBZ0JBLENBQUM7SUFDOUNNLE9BQU9MLDJFQUF5QkEsQ0FDN0JNLEtBQUssQ0FDSkgsK0VBQVlBLENBQUNJLE1BQU0sQ0FBQztRQUNsQkMsV0FBV1Ysa0NBQUNBLENBQUNXLE1BQU07UUFDbkJDLFFBQVFSLGtGQUFlQSxDQUFDUyxRQUFRO0lBQ2xDLElBRURDLEtBQUssQ0FBQyxPQUFPLEVBQUVOLEtBQUssRUFBRU8sR0FBRyxFQUFFO1FBQzFCLE9BQU8sTUFBTVosb0ZBQVlBLENBQUNZLElBQUlDLE1BQU0sRUFBRVIsTUFBTUUsU0FBUyxFQUFFRjtJQUN6RDtBQUNKLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvZmVhdHVyZXMvZGFzaGJvYXJkL3NlcnZlci9kYXNoYm9hcmQtcm91dGVyLnRzP2ZjOTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcblxuaW1wb3J0IHtcbiAgY3JlYXRlVFJQQ1JvdXRlcixcbiAgcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZSxcbn0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvdHJwY1wiO1xuaW1wb3J0IHsgZXhlY3V0ZVF1ZXJ5IH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvc2VydmljZXMvcXVlcnktYnVpbGRlclwiO1xuaW1wb3J0IHtcbiAgZmlsdGVySW50ZXJmYWNlLFxuICBzcWxJbnRlcmZhY2UsXG59IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3NlcnZpY2VzL3NxbEludGVyZmFjZVwiO1xuXG5leHBvcnQgY29uc3QgZGFzaGJvYXJkUm91dGVyID0gY3JlYXRlVFJQQ1JvdXRlcih7XG4gIGNoYXJ0OiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgc3FsSW50ZXJmYWNlLmV4dGVuZCh7XG4gICAgICAgIHByb2plY3RJZDogei5zdHJpbmcoKSxcbiAgICAgICAgZmlsdGVyOiBmaWx0ZXJJbnRlcmZhY2Uub3B0aW9uYWwoKSxcbiAgICAgIH0pLFxuICAgIClcbiAgICAucXVlcnkoYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgZXhlY3V0ZVF1ZXJ5KGN0eC5wcmlzbWEsIGlucHV0LnByb2plY3RJZCwgaW5wdXQpO1xuICAgIH0pLFxufSk7XG4iXSwibmFtZXMiOlsieiIsImNyZWF0ZVRSUENSb3V0ZXIiLCJwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlIiwiZXhlY3V0ZVF1ZXJ5IiwiZmlsdGVySW50ZXJmYWNlIiwic3FsSW50ZXJmYWNlIiwiZGFzaGJvYXJkUm91dGVyIiwiY2hhcnQiLCJpbnB1dCIsImV4dGVuZCIsInByb2plY3RJZCIsInN0cmluZyIsImZpbHRlciIsIm9wdGlvbmFsIiwicXVlcnkiLCJjdHgiLCJwcmlzbWEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/features/dashboard/server/dashboard-router.ts\n");

/***/ }),

/***/ "(api)/./src/features/datasets/server/dataset-router.ts":
/*!********************************************************!*\
  !*** ./src/features/datasets/server/dataset-router.ts ***!
  \********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   datasetRouter: () => (/* binding */ datasetRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/features/rbac/utils/checkAccess */ \"(api)/./src/features/rbac/utils/checkAccess.ts\");\n/* harmony import */ var _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/features/audit-logs/auditLog */ \"(api)/./src/features/audit-logs/auditLog.ts\");\n/* harmony import */ var _src_server_db__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/src/server/db */ \"(api)/./src/server/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_3__, _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__, _src_server_db__WEBPACK_IMPORTED_MODULE_5__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_3__, _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__, _src_server_db__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\nconst datasetRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.createTRPCRouter)({\n    allDatasets: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        const query = _src_server_db__WEBPACK_IMPORTED_MODULE_5__.DB.selectFrom(\"datasets\").leftJoin(\"dataset_items\", \"datasets.id\", \"dataset_items.dataset_id\").leftJoin(\"dataset_runs\", \"datasets.id\", \"dataset_runs.dataset_id\").select(({ eb })=>[\n                \"datasets.id\",\n                \"datasets.name\",\n                \"datasets.created_at as createdAt\",\n                \"datasets.updated_at as updatedAt\",\n                eb.fn.count(\"dataset_items.id\").distinct().as(\"countDatasetItems\"),\n                eb.fn.count(\"dataset_runs.id\").distinct().as(\"countDatasetRuns\"),\n                eb.fn.max(\"dataset_runs.created_at\").as(\"lastRunAt\")\n            ]).where(\"datasets.project_id\", \"=\", input.projectId).groupBy([\n            \"datasets.id\",\n            \"datasets.name\",\n            \"datasets.created_at\",\n            \"datasets.updated_at\"\n        ]).orderBy(\"datasets.created_at\", \"desc\");\n        const compiledQuery = query.compile();\n        return await ctx.prisma.$queryRawUnsafe(compiledQuery.sql, ...compiledQuery.parameters);\n    }),\n    byId: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        datasetId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        return ctx.prisma.dataset.findUnique({\n            where: {\n                id: input.datasetId,\n                projectId: input.projectId\n            }\n        });\n    }),\n    runsByDatasetId: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        datasetId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        const runs = await ctx.prisma.$queryRaw(_prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.sql`\n        WITH avg_scores_by_run_id AS (\n          SELECT\n            ri.dataset_run_id run_id,\n            s.name score_name,\n            AVG(s.value) AS average_score_value\n          FROM\n            dataset_run_items ri\n            JOIN observations o ON o.id = ri.observation_id\n            JOIN scores s ON s.trace_id = o.trace_id\n          WHERE o.project_id = ${input.projectId}\n          GROUP BY\n            ri.dataset_run_id,\n            s.name\n          ORDER BY\n            1,\n            2\n        ),\n        json_avg_scores_by_run_id AS (\n          SELECT\n            run_id,\n            jsonb_object_agg(score_name,\n              average_score_value) AS scores\n          FROM\n            avg_scores_by_run_id\n          GROUP BY\n            run_id\n          ORDER BY\n            run_id\n        ),\n        latency_and_total_cost_by_run_id AS (\n          SELECT\n            ri.dataset_run_id run_id,\n            AVG(CASE WHEN o.end_time IS NULL THEN NULL ELSE (EXTRACT(EPOCH FROM o.\"end_time\") - EXTRACT(EPOCH FROM o.\"start_time\"))::double precision END)  AS \"avgLatency\",\n            AVG(COALESCE(o.calculated_total_cost, 0)) AS \"avgTotalCost\"\n          FROM\n            dataset_run_items ri\n            JOIN observations_view o ON o.id = ri.observation_id\n          WHERE o.project_id = ${input.projectId}\n          group by 1\n        )\n\n        SELECT\n          runs.id,\n          runs.name,\n          runs.created_at \"createdAt\",\n          runs.updated_at \"updatedAt\",\n          COALESCE(avg_scores.scores, '[]'::jsonb) scores,\n          COALESCE(latency_and_total_cost.\"avgLatency\", 0) \"avgLatency\",\n          COALESCE(latency_and_total_cost.\"avgTotalCost\", 0) \"avgTotalCost\",  \n          count(DISTINCT ri.id)::int \"countRunItems\"\n        FROM\n          dataset_runs runs\n          JOIN datasets ON datasets.id = runs.dataset_id\n          LEFT JOIN dataset_run_items ri ON ri.dataset_run_id = runs.id\n          LEFT JOIN json_avg_scores_by_run_id avg_scores ON avg_scores.run_id = runs.id\n          LEFT JOIN latency_and_total_cost_by_run_id latency_and_total_cost ON latency_and_total_cost.run_id = runs.id\n        WHERE runs.dataset_id = ${input.datasetId}\n          AND datasets.project_id = ${input.projectId}\n        GROUP BY\n          1,\n          2,\n          3,\n          4,\n          5,\n          6,\n          7\n        ORDER BY\n          runs.created_at DESC\n      `);\n        return runs;\n    }),\n    itemById: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        datasetId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        datasetItemId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        return ctx.prisma.datasetItem.findUnique({\n            where: {\n                id: input.datasetItemId,\n                datasetId: input.datasetId,\n                dataset: {\n                    projectId: input.projectId\n                }\n            }\n        });\n    }),\n    itemsByDatasetId: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        datasetId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        return ctx.prisma.datasetItem.findMany({\n            where: {\n                datasetId: input.datasetId,\n                dataset: {\n                    projectId: input.projectId\n                }\n            },\n            orderBy: [\n                {\n                    status: \"asc\"\n                },\n                {\n                    createdAt: \"desc\"\n                }\n            ]\n        });\n    }),\n    updateDatasetItem: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        datasetId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        datasetItemId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        input: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        expectedOutput: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        sourceObservationId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        status: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n            \"ACTIVE\",\n            \"ARCHIVED\"\n        ]).optional()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_3__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"datasets:CUD\"\n        });\n        const datasetItem = await ctx.prisma.datasetItem.update({\n            where: {\n                id: input.datasetItemId,\n                datasetId: input.datasetId,\n                dataset: {\n                    projectId: input.projectId\n                }\n            },\n            data: {\n                input: input.input !== undefined ? JSON.parse(input.input) : undefined,\n                expectedOutput: input.expectedOutput === \"\" ? _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.DbNull : input.expectedOutput !== undefined ? JSON.parse(input.expectedOutput) : undefined,\n                sourceObservationId: input.sourceObservationId,\n                status: input.status\n            }\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__.auditLog)({\n            session: ctx.session,\n            resourceType: \"datasetItem\",\n            resourceId: input.datasetItemId,\n            projectId: input.projectId,\n            action: \"update\",\n            after: datasetItem\n        });\n        return datasetItem;\n    }),\n    createDataset: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_3__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"datasets:CUD\"\n        });\n        const dataset = await ctx.prisma.dataset.create({\n            data: {\n                name: input.name,\n                projectId: input.projectId\n            }\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__.auditLog)({\n            session: ctx.session,\n            resourceType: \"dataset\",\n            resourceId: dataset.id,\n            projectId: input.projectId,\n            action: \"create\",\n            after: dataset\n        });\n        return dataset;\n    }),\n    updateDataset: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        datasetId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_3__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"datasets:CUD\"\n        });\n        const dataset = await ctx.prisma.dataset.update({\n            where: {\n                id: input.datasetId,\n                projectId: input.projectId\n            },\n            data: {\n                name: input.name\n            }\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__.auditLog)({\n            session: ctx.session,\n            resourceType: \"dataset\",\n            resourceId: dataset.id,\n            projectId: input.projectId,\n            action: \"update\",\n            before: {\n                name: input.name\n            },\n            after: dataset\n        });\n        return dataset;\n    }),\n    deleteDataset: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        datasetId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_3__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"datasets:CUD\"\n        });\n        const deletedDataset = await ctx.prisma.dataset.delete({\n            where: {\n                id: input.datasetId,\n                projectId: input.projectId\n            }\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__.auditLog)({\n            session: ctx.session,\n            resourceType: \"dataset\",\n            resourceId: deletedDataset.id,\n            projectId: input.projectId,\n            action: \"delete\",\n            before: deletedDataset\n        });\n        return deletedDataset;\n    }),\n    createDatasetItem: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        datasetId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        input: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        expectedOutput: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().nullish(),\n        sourceObservationId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_3__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"datasets:CUD\"\n        });\n        const dataset = await ctx.prisma.dataset.findUnique({\n            where: {\n                id: input.datasetId,\n                projectId: input.projectId\n            }\n        });\n        if (!dataset) {\n            throw new Error(\"Dataset not found\");\n        }\n        const datasetItem = await ctx.prisma.datasetItem.create({\n            data: {\n                input: JSON.parse(input.input),\n                expectedOutput: input.expectedOutput === \"\" ? _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.DbNull : !!input.expectedOutput ? JSON.parse(input.expectedOutput) : undefined,\n                datasetId: input.datasetId,\n                sourceObservationId: input.sourceObservationId\n            }\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__.auditLog)({\n            session: ctx.session,\n            resourceType: \"datasetItem\",\n            resourceId: datasetItem.id,\n            projectId: input.projectId,\n            action: \"create\",\n            after: datasetItem\n        });\n        return datasetItem;\n    }),\n    runitemsByRunIdOrItemId: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        datasetId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        datasetRunId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        datasetItemId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    }).refine((input)=>input.datasetRunId || input.datasetItemId, \"Must provide either datasetRunId or datasetItemId\")).query(async ({ input, ctx })=>{\n        const runItems = await ctx.prisma.datasetRunItems.findMany({\n            where: {\n                datasetRunId: input.datasetRunId,\n                datasetItemId: input.datasetItemId,\n                datasetRun: {\n                    dataset: {\n                        projectId: input.projectId\n                    }\n                }\n            },\n            include: {\n                datasetItem: true,\n                observation: {\n                    include: {\n                        scores: true\n                    }\n                }\n            },\n            orderBy: {\n                createdAt: \"desc\"\n            }\n        });\n        const observationIds = runItems.map((ri)=>ri.observationId);\n        const observations = await ctx.prisma.observationView.findMany({\n            select: {\n                id: true,\n                calculatedTotalCost: true\n            },\n            where: {\n                id: {\n                    in: observationIds\n                }\n            }\n        });\n        return runItems.map((ri)=>{\n            return {\n                id: ri.id,\n                createdAt: ri.createdAt,\n                datasetItemId: ri.datasetItemId,\n                observation: {\n                    ...ri.observation,\n                    ...observations.find((o)=>o.id === ri.observationId)\n                }\n            };\n        });\n    }),\n    observationInDatasets: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        observationId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        return ctx.prisma.datasetItem.findMany({\n            where: {\n                sourceObservationId: input.observationId,\n                dataset: {\n                    projectId: input.projectId\n                }\n            },\n            select: {\n                dataset: {\n                    select: {\n                        id: true,\n                        name: true\n                    }\n                },\n                id: true\n            },\n            orderBy: {\n                dataset: {\n                    name: \"asc\"\n                }\n            }\n        });\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvZGF0YXNldHMvc2VydmVyL2RhdGFzZXQtcm91dGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBS087QUFDeUM7QUFDQTtBQUNWO0FBQ3pCO0FBRTlCLE1BQU1PLGdCQUFnQk4sc0VBQWdCQSxDQUFDO0lBQzVDTyxhQUFhTiwyRUFBeUJBLENBQ25DTyxLQUFLLENBQ0pULGtDQUFDQSxDQUFDVSxNQUFNLENBQUM7UUFDUEMsV0FBV1gsa0NBQUNBLENBQUNZLE1BQU07SUFDckIsSUFFREMsS0FBSyxDQUFDLE9BQU8sRUFBRUosS0FBSyxFQUFFSyxHQUFHLEVBQUU7UUFDMUIsTUFBTUQsUUFBUVAsOENBQUVBLENBQUNTLFVBQVUsQ0FBQyxZQUN6QkMsUUFBUSxDQUFDLGlCQUFpQixlQUFlLDRCQUN6Q0EsUUFBUSxDQUFDLGdCQUFnQixlQUFlLDJCQUN4Q0MsTUFBTSxDQUFDLENBQUMsRUFBRUMsRUFBRSxFQUFFLEdBQUs7Z0JBQ2xCO2dCQUNBO2dCQUNBO2dCQUNBO2dCQUNBQSxHQUFHQyxFQUFFLENBQUNDLEtBQUssQ0FBQyxvQkFBb0JDLFFBQVEsR0FBR0MsRUFBRSxDQUFDO2dCQUM5Q0osR0FBR0MsRUFBRSxDQUFDQyxLQUFLLENBQUMsbUJBQW1CQyxRQUFRLEdBQUdDLEVBQUUsQ0FBQztnQkFDN0NKLEdBQUdDLEVBQUUsQ0FBQ0ksR0FBRyxDQUFDLDJCQUEyQkQsRUFBRSxDQUFDO2FBQ3pDLEVBQ0FFLEtBQUssQ0FBQyx1QkFBdUIsS0FBS2YsTUFBTUUsU0FBUyxFQUNqRGMsT0FBTyxDQUFDO1lBQ1A7WUFDQTtZQUNBO1lBQ0E7U0FDRCxFQUNBQyxPQUFPLENBQUMsdUJBQXVCO1FBRWxDLE1BQU1DLGdCQUFnQmQsTUFBTWUsT0FBTztRQUVuQyxPQUFPLE1BQU1kLElBQUllLE1BQU0sQ0FBQ0MsZUFBZSxDQVFyQ0gsY0FBY0ksR0FBRyxLQUFLSixjQUFjSyxVQUFVO0lBQ2xEO0lBQ0ZDLE1BQU0vQiwy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Ly4vc3JjL2ZlYXR1cmVzL2RhdGFzZXRzL3NlcnZlci9kYXRhc2V0LXJvdXRlci50cz8zNzM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmltcG9ydCB7XG4gIGNyZWF0ZVRSUENSb3V0ZXIsXG4gIHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUsXG59IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3RycGNcIjtcbmltcG9ydCB7IHR5cGUgRGF0YXNldFJ1bnMsIFByaXNtYSwgdHlwZSBEYXRhc2V0IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5pbXBvcnQgeyB0aHJvd0lmTm9BY2Nlc3MgfSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvcmJhYy91dGlscy9jaGVja0FjY2Vzc1wiO1xuaW1wb3J0IHsgYXVkaXRMb2cgfSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvYXVkaXQtbG9ncy9hdWRpdExvZ1wiO1xuaW1wb3J0IHsgREIgfSBmcm9tIFwiQC9zcmMvc2VydmVyL2RiXCI7XG5cbmV4cG9ydCBjb25zdCBkYXRhc2V0Um91dGVyID0gY3JlYXRlVFJQQ1JvdXRlcih7XG4gIGFsbERhdGFzZXRzOiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICB9KSxcbiAgICApXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgY29uc3QgcXVlcnkgPSBEQi5zZWxlY3RGcm9tKFwiZGF0YXNldHNcIilcbiAgICAgICAgLmxlZnRKb2luKFwiZGF0YXNldF9pdGVtc1wiLCBcImRhdGFzZXRzLmlkXCIsIFwiZGF0YXNldF9pdGVtcy5kYXRhc2V0X2lkXCIpXG4gICAgICAgIC5sZWZ0Sm9pbihcImRhdGFzZXRfcnVuc1wiLCBcImRhdGFzZXRzLmlkXCIsIFwiZGF0YXNldF9ydW5zLmRhdGFzZXRfaWRcIilcbiAgICAgICAgLnNlbGVjdCgoeyBlYiB9KSA9PiBbXG4gICAgICAgICAgXCJkYXRhc2V0cy5pZFwiLFxuICAgICAgICAgIFwiZGF0YXNldHMubmFtZVwiLFxuICAgICAgICAgIFwiZGF0YXNldHMuY3JlYXRlZF9hdCBhcyBjcmVhdGVkQXRcIixcbiAgICAgICAgICBcImRhdGFzZXRzLnVwZGF0ZWRfYXQgYXMgdXBkYXRlZEF0XCIsXG4gICAgICAgICAgZWIuZm4uY291bnQoXCJkYXRhc2V0X2l0ZW1zLmlkXCIpLmRpc3RpbmN0KCkuYXMoXCJjb3VudERhdGFzZXRJdGVtc1wiKSxcbiAgICAgICAgICBlYi5mbi5jb3VudChcImRhdGFzZXRfcnVucy5pZFwiKS5kaXN0aW5jdCgpLmFzKFwiY291bnREYXRhc2V0UnVuc1wiKSxcbiAgICAgICAgICBlYi5mbi5tYXgoXCJkYXRhc2V0X3J1bnMuY3JlYXRlZF9hdFwiKS5hcyhcImxhc3RSdW5BdFwiKSxcbiAgICAgICAgXSlcbiAgICAgICAgLndoZXJlKFwiZGF0YXNldHMucHJvamVjdF9pZFwiLCBcIj1cIiwgaW5wdXQucHJvamVjdElkKVxuICAgICAgICAuZ3JvdXBCeShbXG4gICAgICAgICAgXCJkYXRhc2V0cy5pZFwiLFxuICAgICAgICAgIFwiZGF0YXNldHMubmFtZVwiLFxuICAgICAgICAgIFwiZGF0YXNldHMuY3JlYXRlZF9hdFwiLFxuICAgICAgICAgIFwiZGF0YXNldHMudXBkYXRlZF9hdFwiLFxuICAgICAgICBdKVxuICAgICAgICAub3JkZXJCeShcImRhdGFzZXRzLmNyZWF0ZWRfYXRcIiwgXCJkZXNjXCIpO1xuXG4gICAgICBjb25zdCBjb21waWxlZFF1ZXJ5ID0gcXVlcnkuY29tcGlsZSgpO1xuXG4gICAgICByZXR1cm4gYXdhaXQgY3R4LnByaXNtYS4kcXVlcnlSYXdVbnNhZmU8XG4gICAgICAgIEFycmF5PFxuICAgICAgICAgIERhdGFzZXQgJiB7XG4gICAgICAgICAgICBjb3VudERhdGFzZXRJdGVtczogbnVtYmVyO1xuICAgICAgICAgICAgY291bnREYXRhc2V0UnVuczogbnVtYmVyO1xuICAgICAgICAgICAgbGFzdFJ1bkF0OiBEYXRlIHwgbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgID5cbiAgICAgID4oY29tcGlsZWRRdWVyeS5zcWwsIC4uLmNvbXBpbGVkUXVlcnkucGFyYW1ldGVycyk7XG4gICAgfSksXG4gIGJ5SWQ6IHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIHByb2plY3RJZDogei5zdHJpbmcoKSxcbiAgICAgICAgZGF0YXNldElkOiB6LnN0cmluZygpLFxuICAgICAgfSksXG4gICAgKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIHJldHVybiBjdHgucHJpc21hLmRhdGFzZXQuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWQ6IGlucHV0LmRhdGFzZXRJZCxcbiAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pLFxuICBydW5zQnlEYXRhc2V0SWQ6IHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIHByb2plY3RJZDogei5zdHJpbmcoKSxcbiAgICAgICAgZGF0YXNldElkOiB6LnN0cmluZygpLFxuICAgICAgfSksXG4gICAgKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIGNvbnN0IHJ1bnMgPSBhd2FpdCBjdHgucHJpc21hLiRxdWVyeVJhdzxcbiAgICAgICAgQXJyYXk8XG4gICAgICAgICAgRGF0YXNldFJ1bnMgJiB7XG4gICAgICAgICAgICBjb3VudFJ1bkl0ZW1zOiBudW1iZXI7XG4gICAgICAgICAgICBzY29yZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gICAgICAgICAgICBhdmdMYXRlbmN5OiBudW1iZXI7XG4gICAgICAgICAgICBhdmdUb3RhbENvc3Q6IFByaXNtYS5EZWNpbWFsO1xuICAgICAgICAgIH1cbiAgICAgICAgPlxuICAgICAgPihQcmlzbWEuc3FsYFxuICAgICAgICBXSVRIIGF2Z19zY29yZXNfYnlfcnVuX2lkIEFTIChcbiAgICAgICAgICBTRUxFQ1RcbiAgICAgICAgICAgIHJpLmRhdGFzZXRfcnVuX2lkIHJ1bl9pZCxcbiAgICAgICAgICAgIHMubmFtZSBzY29yZV9uYW1lLFxuICAgICAgICAgICAgQVZHKHMudmFsdWUpIEFTIGF2ZXJhZ2Vfc2NvcmVfdmFsdWVcbiAgICAgICAgICBGUk9NXG4gICAgICAgICAgICBkYXRhc2V0X3J1bl9pdGVtcyByaVxuICAgICAgICAgICAgSk9JTiBvYnNlcnZhdGlvbnMgbyBPTiBvLmlkID0gcmkub2JzZXJ2YXRpb25faWRcbiAgICAgICAgICAgIEpPSU4gc2NvcmVzIHMgT04gcy50cmFjZV9pZCA9IG8udHJhY2VfaWRcbiAgICAgICAgICBXSEVSRSBvLnByb2plY3RfaWQgPSAke2lucHV0LnByb2plY3RJZH1cbiAgICAgICAgICBHUk9VUCBCWVxuICAgICAgICAgICAgcmkuZGF0YXNldF9ydW5faWQsXG4gICAgICAgICAgICBzLm5hbWVcbiAgICAgICAgICBPUkRFUiBCWVxuICAgICAgICAgICAgMSxcbiAgICAgICAgICAgIDJcbiAgICAgICAgKSxcbiAgICAgICAganNvbl9hdmdfc2NvcmVzX2J5X3J1bl9pZCBBUyAoXG4gICAgICAgICAgU0VMRUNUXG4gICAgICAgICAgICBydW5faWQsXG4gICAgICAgICAgICBqc29uYl9vYmplY3RfYWdnKHNjb3JlX25hbWUsXG4gICAgICAgICAgICAgIGF2ZXJhZ2Vfc2NvcmVfdmFsdWUpIEFTIHNjb3Jlc1xuICAgICAgICAgIEZST01cbiAgICAgICAgICAgIGF2Z19zY29yZXNfYnlfcnVuX2lkXG4gICAgICAgICAgR1JPVVAgQllcbiAgICAgICAgICAgIHJ1bl9pZFxuICAgICAgICAgIE9SREVSIEJZXG4gICAgICAgICAgICBydW5faWRcbiAgICAgICAgKSxcbiAgICAgICAgbGF0ZW5jeV9hbmRfdG90YWxfY29zdF9ieV9ydW5faWQgQVMgKFxuICAgICAgICAgIFNFTEVDVFxuICAgICAgICAgICAgcmkuZGF0YXNldF9ydW5faWQgcnVuX2lkLFxuICAgICAgICAgICAgQVZHKENBU0UgV0hFTiBvLmVuZF90aW1lIElTIE5VTEwgVEhFTiBOVUxMIEVMU0UgKEVYVFJBQ1QoRVBPQ0ggRlJPTSBvLlwiZW5kX3RpbWVcIikgLSBFWFRSQUNUKEVQT0NIIEZST00gby5cInN0YXJ0X3RpbWVcIikpOjpkb3VibGUgcHJlY2lzaW9uIEVORCkgIEFTIFwiYXZnTGF0ZW5jeVwiLFxuICAgICAgICAgICAgQVZHKENPQUxFU0NFKG8uY2FsY3VsYXRlZF90b3RhbF9jb3N0LCAwKSkgQVMgXCJhdmdUb3RhbENvc3RcIlxuICAgICAgICAgIEZST01cbiAgICAgICAgICAgIGRhdGFzZXRfcnVuX2l0ZW1zIHJpXG4gICAgICAgICAgICBKT0lOIG9ic2VydmF0aW9uc192aWV3IG8gT04gby5pZCA9IHJpLm9ic2VydmF0aW9uX2lkXG4gICAgICAgICAgV0hFUkUgby5wcm9qZWN0X2lkID0gJHtpbnB1dC5wcm9qZWN0SWR9XG4gICAgICAgICAgZ3JvdXAgYnkgMVxuICAgICAgICApXG5cbiAgICAgICAgU0VMRUNUXG4gICAgICAgICAgcnVucy5pZCxcbiAgICAgICAgICBydW5zLm5hbWUsXG4gICAgICAgICAgcnVucy5jcmVhdGVkX2F0IFwiY3JlYXRlZEF0XCIsXG4gICAgICAgICAgcnVucy51cGRhdGVkX2F0IFwidXBkYXRlZEF0XCIsXG4gICAgICAgICAgQ09BTEVTQ0UoYXZnX3Njb3Jlcy5zY29yZXMsICdbXSc6Ompzb25iKSBzY29yZXMsXG4gICAgICAgICAgQ09BTEVTQ0UobGF0ZW5jeV9hbmRfdG90YWxfY29zdC5cImF2Z0xhdGVuY3lcIiwgMCkgXCJhdmdMYXRlbmN5XCIsXG4gICAgICAgICAgQ09BTEVTQ0UobGF0ZW5jeV9hbmRfdG90YWxfY29zdC5cImF2Z1RvdGFsQ29zdFwiLCAwKSBcImF2Z1RvdGFsQ29zdFwiLCAgXG4gICAgICAgICAgY291bnQoRElTVElOQ1QgcmkuaWQpOjppbnQgXCJjb3VudFJ1bkl0ZW1zXCJcbiAgICAgICAgRlJPTVxuICAgICAgICAgIGRhdGFzZXRfcnVucyBydW5zXG4gICAgICAgICAgSk9JTiBkYXRhc2V0cyBPTiBkYXRhc2V0cy5pZCA9IHJ1bnMuZGF0YXNldF9pZFxuICAgICAgICAgIExFRlQgSk9JTiBkYXRhc2V0X3J1bl9pdGVtcyByaSBPTiByaS5kYXRhc2V0X3J1bl9pZCA9IHJ1bnMuaWRcbiAgICAgICAgICBMRUZUIEpPSU4ganNvbl9hdmdfc2NvcmVzX2J5X3J1bl9pZCBhdmdfc2NvcmVzIE9OIGF2Z19zY29yZXMucnVuX2lkID0gcnVucy5pZFxuICAgICAgICAgIExFRlQgSk9JTiBsYXRlbmN5X2FuZF90b3RhbF9jb3N0X2J5X3J1bl9pZCBsYXRlbmN5X2FuZF90b3RhbF9jb3N0IE9OIGxhdGVuY3lfYW5kX3RvdGFsX2Nvc3QucnVuX2lkID0gcnVucy5pZFxuICAgICAgICBXSEVSRSBydW5zLmRhdGFzZXRfaWQgPSAke2lucHV0LmRhdGFzZXRJZH1cbiAgICAgICAgICBBTkQgZGF0YXNldHMucHJvamVjdF9pZCA9ICR7aW5wdXQucHJvamVjdElkfVxuICAgICAgICBHUk9VUCBCWVxuICAgICAgICAgIDEsXG4gICAgICAgICAgMixcbiAgICAgICAgICAzLFxuICAgICAgICAgIDQsXG4gICAgICAgICAgNSxcbiAgICAgICAgICA2LFxuICAgICAgICAgIDdcbiAgICAgICAgT1JERVIgQllcbiAgICAgICAgICBydW5zLmNyZWF0ZWRfYXQgREVTQ1xuICAgICAgYCk7XG5cbiAgICAgIHJldHVybiBydW5zO1xuICAgIH0pLFxuICBpdGVtQnlJZDogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgICBkYXRhc2V0SWQ6IHouc3RyaW5nKCksXG4gICAgICAgIGRhdGFzZXRJdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgICB9KSxcbiAgICApXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEuZGF0YXNldEl0ZW0uZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWQ6IGlucHV0LmRhdGFzZXRJdGVtSWQsXG4gICAgICAgICAgZGF0YXNldElkOiBpbnB1dC5kYXRhc2V0SWQsXG4gICAgICAgICAgZGF0YXNldDoge1xuICAgICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pLFxuICBpdGVtc0J5RGF0YXNldElkOiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICAgIGRhdGFzZXRJZDogei5zdHJpbmcoKSxcbiAgICAgIH0pLFxuICAgIClcbiAgICAucXVlcnkoYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5kYXRhc2V0SXRlbS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgZGF0YXNldElkOiBpbnB1dC5kYXRhc2V0SWQsXG4gICAgICAgICAgZGF0YXNldDoge1xuICAgICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeTogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHN0YXR1czogXCJhc2NcIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogXCJkZXNjXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0pO1xuICAgIH0pLFxuICB1cGRhdGVEYXRhc2V0SXRlbTogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgICBkYXRhc2V0SWQ6IHouc3RyaW5nKCksXG4gICAgICAgIGRhdGFzZXRJdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgICAgIGlucHV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIGV4cGVjdGVkT3V0cHV0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHNvdXJjZU9ic2VydmF0aW9uSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgc3RhdHVzOiB6LmVudW0oW1wiQUNUSVZFXCIsIFwiQVJDSElWRURcIl0pLm9wdGlvbmFsKCksXG4gICAgICB9KSxcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgdGhyb3dJZk5vQWNjZXNzKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICBzY29wZTogXCJkYXRhc2V0czpDVURcIixcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZGF0YXNldEl0ZW0gPSBhd2FpdCBjdHgucHJpc21hLmRhdGFzZXRJdGVtLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWQ6IGlucHV0LmRhdGFzZXRJdGVtSWQsXG4gICAgICAgICAgZGF0YXNldElkOiBpbnB1dC5kYXRhc2V0SWQsXG4gICAgICAgICAgZGF0YXNldDoge1xuICAgICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGlucHV0OlxuICAgICAgICAgICAgaW5wdXQuaW5wdXQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICA/IChKU09OLnBhcnNlKGlucHV0LmlucHV0KSBhcyBQcmlzbWEuSW5wdXRKc29uT2JqZWN0KVxuICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBleHBlY3RlZE91dHB1dDpcbiAgICAgICAgICAgIGlucHV0LmV4cGVjdGVkT3V0cHV0ID09PSBcIlwiXG4gICAgICAgICAgICAgID8gUHJpc21hLkRiTnVsbFxuICAgICAgICAgICAgICA6IGlucHV0LmV4cGVjdGVkT3V0cHV0ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IChKU09OLnBhcnNlKGlucHV0LmV4cGVjdGVkT3V0cHV0KSBhcyBQcmlzbWEuSW5wdXRKc29uT2JqZWN0KVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgIHNvdXJjZU9ic2VydmF0aW9uSWQ6IGlucHV0LnNvdXJjZU9ic2VydmF0aW9uSWQsXG4gICAgICAgICAgc3RhdHVzOiBpbnB1dC5zdGF0dXMsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IGF1ZGl0TG9nKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHJlc291cmNlVHlwZTogXCJkYXRhc2V0SXRlbVwiLFxuICAgICAgICByZXNvdXJjZUlkOiBpbnB1dC5kYXRhc2V0SXRlbUlkLFxuICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgYWN0aW9uOiBcInVwZGF0ZVwiLFxuICAgICAgICBhZnRlcjogZGF0YXNldEl0ZW0sXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkYXRhc2V0SXRlbTtcbiAgICB9KSxcbiAgY3JlYXRlRGF0YXNldDogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7IHByb2plY3RJZDogei5zdHJpbmcoKSwgbmFtZTogei5zdHJpbmcoKSB9KSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICB0aHJvd0lmTm9BY2Nlc3Moe1xuICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIHNjb3BlOiBcImRhdGFzZXRzOkNVRFwiLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBkYXRhc2V0ID0gYXdhaXQgY3R4LnByaXNtYS5kYXRhc2V0LmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBuYW1lOiBpbnB1dC5uYW1lLFxuICAgICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGF1ZGl0TG9nKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHJlc291cmNlVHlwZTogXCJkYXRhc2V0XCIsXG4gICAgICAgIHJlc291cmNlSWQ6IGRhdGFzZXQuaWQsXG4gICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICBhY3Rpb246IFwiY3JlYXRlXCIsXG4gICAgICAgIGFmdGVyOiBkYXRhc2V0LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkYXRhc2V0O1xuICAgIH0pLFxuICB1cGRhdGVEYXRhc2V0OiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICAgIGRhdGFzZXRJZDogei5zdHJpbmcoKSxcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgIH0pLFxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICB0aHJvd0lmTm9BY2Nlc3Moe1xuICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIHNjb3BlOiBcImRhdGFzZXRzOkNVRFwiLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBkYXRhc2V0ID0gYXdhaXQgY3R4LnByaXNtYS5kYXRhc2V0LnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWQ6IGlucHV0LmRhdGFzZXRJZCxcbiAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG5hbWU6IGlucHV0Lm5hbWUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IGF1ZGl0TG9nKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHJlc291cmNlVHlwZTogXCJkYXRhc2V0XCIsXG4gICAgICAgIHJlc291cmNlSWQ6IGRhdGFzZXQuaWQsXG4gICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICBhY3Rpb246IFwidXBkYXRlXCIsXG4gICAgICAgIGJlZm9yZTogeyBuYW1lOiBpbnB1dC5uYW1lIH0sXG4gICAgICAgIGFmdGVyOiBkYXRhc2V0LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkYXRhc2V0O1xuICAgIH0pLFxuICBkZWxldGVEYXRhc2V0OiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KHoub2JqZWN0KHsgcHJvamVjdElkOiB6LnN0cmluZygpLCBkYXRhc2V0SWQ6IHouc3RyaW5nKCkgfSkpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgdGhyb3dJZk5vQWNjZXNzKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICBzY29wZTogXCJkYXRhc2V0czpDVURcIixcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZGVsZXRlZERhdGFzZXQgPSBhd2FpdCBjdHgucHJpc21hLmRhdGFzZXQuZGVsZXRlKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBpZDogaW5wdXQuZGF0YXNldElkLFxuICAgICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBhd2FpdCBhdWRpdExvZyh7XG4gICAgICAgIHNlc3Npb246IGN0eC5zZXNzaW9uLFxuICAgICAgICByZXNvdXJjZVR5cGU6IFwiZGF0YXNldFwiLFxuICAgICAgICByZXNvdXJjZUlkOiBkZWxldGVkRGF0YXNldC5pZCxcbiAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIGFjdGlvbjogXCJkZWxldGVcIixcbiAgICAgICAgYmVmb3JlOiBkZWxldGVkRGF0YXNldCxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRlbGV0ZWREYXRhc2V0O1xuICAgIH0pLFxuICBjcmVhdGVEYXRhc2V0SXRlbTogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgICBkYXRhc2V0SWQ6IHouc3RyaW5nKCksXG4gICAgICAgIGlucHV0OiB6LnN0cmluZygpLFxuICAgICAgICBleHBlY3RlZE91dHB1dDogei5zdHJpbmcoKS5udWxsaXNoKCksXG4gICAgICAgIHNvdXJjZU9ic2VydmF0aW9uSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIH0pLFxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICB0aHJvd0lmTm9BY2Nlc3Moe1xuICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIHNjb3BlOiBcImRhdGFzZXRzOkNVRFwiLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBkYXRhc2V0ID0gYXdhaXQgY3R4LnByaXNtYS5kYXRhc2V0LmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGlkOiBpbnB1dC5kYXRhc2V0SWQsXG4gICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGlmICghZGF0YXNldCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhc2V0IG5vdCBmb3VuZFwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGF0YXNldEl0ZW0gPSBhd2FpdCBjdHgucHJpc21hLmRhdGFzZXRJdGVtLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpbnB1dDogSlNPTi5wYXJzZShpbnB1dC5pbnB1dCkgYXMgUHJpc21hLklucHV0SnNvbk9iamVjdCxcbiAgICAgICAgICBleHBlY3RlZE91dHB1dDpcbiAgICAgICAgICAgIGlucHV0LmV4cGVjdGVkT3V0cHV0ID09PSBcIlwiXG4gICAgICAgICAgICAgID8gUHJpc21hLkRiTnVsbFxuICAgICAgICAgICAgICA6ICEhaW5wdXQuZXhwZWN0ZWRPdXRwdXRcbiAgICAgICAgICAgICAgICA/IChKU09OLnBhcnNlKGlucHV0LmV4cGVjdGVkT3V0cHV0KSBhcyBQcmlzbWEuSW5wdXRKc29uT2JqZWN0KVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgIGRhdGFzZXRJZDogaW5wdXQuZGF0YXNldElkLFxuICAgICAgICAgIHNvdXJjZU9ic2VydmF0aW9uSWQ6IGlucHV0LnNvdXJjZU9ic2VydmF0aW9uSWQsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IGF1ZGl0TG9nKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHJlc291cmNlVHlwZTogXCJkYXRhc2V0SXRlbVwiLFxuICAgICAgICByZXNvdXJjZUlkOiBkYXRhc2V0SXRlbS5pZCxcbiAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIGFjdGlvbjogXCJjcmVhdGVcIixcbiAgICAgICAgYWZ0ZXI6IGRhdGFzZXRJdGVtLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGF0YXNldEl0ZW07XG4gICAgfSksXG4gIHJ1bml0ZW1zQnlSdW5JZE9ySXRlbUlkOiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICAgICAgZGF0YXNldElkOiB6LnN0cmluZygpLFxuICAgICAgICAgIGRhdGFzZXRSdW5JZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgIGRhdGFzZXRJdGVtSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgfSlcbiAgICAgICAgLnJlZmluZShcbiAgICAgICAgICAoaW5wdXQpID0+IGlucHV0LmRhdGFzZXRSdW5JZCB8fCBpbnB1dC5kYXRhc2V0SXRlbUlkLFxuICAgICAgICAgIFwiTXVzdCBwcm92aWRlIGVpdGhlciBkYXRhc2V0UnVuSWQgb3IgZGF0YXNldEl0ZW1JZFwiLFxuICAgICAgICApLFxuICAgIClcbiAgICAucXVlcnkoYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICBjb25zdCBydW5JdGVtcyA9IGF3YWl0IGN0eC5wcmlzbWEuZGF0YXNldFJ1bkl0ZW1zLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBkYXRhc2V0UnVuSWQ6IGlucHV0LmRhdGFzZXRSdW5JZCxcbiAgICAgICAgICBkYXRhc2V0SXRlbUlkOiBpbnB1dC5kYXRhc2V0SXRlbUlkLFxuICAgICAgICAgIGRhdGFzZXRSdW46IHtcbiAgICAgICAgICAgIGRhdGFzZXQ6IHtcbiAgICAgICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBkYXRhc2V0SXRlbTogdHJ1ZSxcbiAgICAgICAgICBvYnNlcnZhdGlvbjoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICBzY29yZXM6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6IFwiZGVzY1wiLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG9ic2VydmF0aW9uSWRzID0gcnVuSXRlbXMubWFwKChyaSkgPT4gcmkub2JzZXJ2YXRpb25JZCk7XG4gICAgICBjb25zdCBvYnNlcnZhdGlvbnMgPSBhd2FpdCBjdHgucHJpc21hLm9ic2VydmF0aW9uVmlldy5maW5kTWFueSh7XG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgIGNhbGN1bGF0ZWRUb3RhbENvc3Q6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWQ6IHtcbiAgICAgICAgICAgIGluOiBvYnNlcnZhdGlvbklkcyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBydW5JdGVtcy5tYXAoKHJpKSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IHJpLmlkLFxuICAgICAgICAgIGNyZWF0ZWRBdDogcmkuY3JlYXRlZEF0LFxuICAgICAgICAgIGRhdGFzZXRJdGVtSWQ6IHJpLmRhdGFzZXRJdGVtSWQsXG4gICAgICAgICAgb2JzZXJ2YXRpb246IHtcbiAgICAgICAgICAgIC4uLnJpLm9ic2VydmF0aW9uLFxuICAgICAgICAgICAgLi4ub2JzZXJ2YXRpb25zLmZpbmQoKG8pID0+IG8uaWQgPT09IHJpLm9ic2VydmF0aW9uSWQpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9KSxcbiAgb2JzZXJ2YXRpb25JbkRhdGFzZXRzOiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICAgIG9ic2VydmF0aW9uSWQ6IHouc3RyaW5nKCksXG4gICAgICB9KSxcbiAgICApXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgcmV0dXJuIGN0eC5wcmlzbWEuZGF0YXNldEl0ZW0uZmluZE1hbnkoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHNvdXJjZU9ic2VydmF0aW9uSWQ6IGlucHV0Lm9ic2VydmF0aW9uSWQsXG4gICAgICAgICAgZGF0YXNldDoge1xuICAgICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgZGF0YXNldDoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7XG4gICAgICAgICAgZGF0YXNldDoge1xuICAgICAgICAgICAgbmFtZTogXCJhc2NcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSksXG59KTtcbiJdLCJuYW1lcyI6WyJ6IiwiY3JlYXRlVFJQQ1JvdXRlciIsInByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUiLCJQcmlzbWEiLCJ0aHJvd0lmTm9BY2Nlc3MiLCJhdWRpdExvZyIsIkRCIiwiZGF0YXNldFJvdXRlciIsImFsbERhdGFzZXRzIiwiaW5wdXQiLCJvYmplY3QiLCJwcm9qZWN0SWQiLCJzdHJpbmciLCJxdWVyeSIsImN0eCIsInNlbGVjdEZyb20iLCJsZWZ0Sm9pbiIsInNlbGVjdCIsImViIiwiZm4iLCJjb3VudCIsImRpc3RpbmN0IiwiYXMiLCJtYXgiLCJ3aGVyZSIsImdyb3VwQnkiLCJvcmRlckJ5IiwiY29tcGlsZWRRdWVyeSIsImNvbXBpbGUiLCJwcmlzbWEiLCIkcXVlcnlSYXdVbnNhZmUiLCJzcWwiLCJwYXJhbWV0ZXJzIiwiYnlJZCIsImRhdGFzZXRJZCIsImRhdGFzZXQiLCJmaW5kVW5pcXVlIiwiaWQiLCJydW5zQnlEYXRhc2V0SWQiLCJydW5zIiwiJHF1ZXJ5UmF3IiwiaXRlbUJ5SWQiLCJkYXRhc2V0SXRlbUlkIiwiZGF0YXNldEl0ZW0iLCJpdGVtc0J5RGF0YXNldElkIiwiZmluZE1hbnkiLCJzdGF0dXMiLCJjcmVhdGVkQXQiLCJ1cGRhdGVEYXRhc2V0SXRlbSIsIm9wdGlvbmFsIiwiZXhwZWN0ZWRPdXRwdXQiLCJzb3VyY2VPYnNlcnZhdGlvbklkIiwiZW51bSIsIm11dGF0aW9uIiwic2Vzc2lvbiIsInNjb3BlIiwidXBkYXRlIiwiZGF0YSIsInVuZGVmaW5lZCIsIkpTT04iLCJwYXJzZSIsIkRiTnVsbCIsInJlc291cmNlVHlwZSIsInJlc291cmNlSWQiLCJhY3Rpb24iLCJhZnRlciIsImNyZWF0ZURhdGFzZXQiLCJuYW1lIiwiY3JlYXRlIiwidXBkYXRlRGF0YXNldCIsImJlZm9yZSIsImRlbGV0ZURhdGFzZXQiLCJkZWxldGVkRGF0YXNldCIsImRlbGV0ZSIsImNyZWF0ZURhdGFzZXRJdGVtIiwibnVsbGlzaCIsIkVycm9yIiwicnVuaXRlbXNCeVJ1bklkT3JJdGVtSWQiLCJkYXRhc2V0UnVuSWQiLCJyZWZpbmUiLCJydW5JdGVtcyIsImRhdGFzZXRSdW5JdGVtcyIsImRhdGFzZXRSdW4iLCJpbmNsdWRlIiwib2JzZXJ2YXRpb24iLCJzY29yZXMiLCJvYnNlcnZhdGlvbklkcyIsIm1hcCIsInJpIiwib2JzZXJ2YXRpb25JZCIsIm9ic2VydmF0aW9ucyIsIm9ic2VydmF0aW9uVmlldyIsImNhbGN1bGF0ZWRUb3RhbENvc3QiLCJpbiIsImZpbmQiLCJvIiwib2JzZXJ2YXRpb25JbkRhdGFzZXRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/features/datasets/server/dataset-router.ts\n");

/***/ }),

/***/ "(api)/./src/features/email/lib/project-invitation.ts":
/*!******************************************************!*\
  !*** ./src/features/email/lib/project-invitation.ts ***!
  \******************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendProjectInvitation: () => (/* binding */ sendProjectInvitation)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"nodemailer\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nodemailer__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var nodemailer_lib_shared_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nodemailer/lib/shared/index.js */ \"nodemailer/lib/shared/index.js\");\n/* harmony import */ var nodemailer_lib_shared_index_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(nodemailer_lib_shared_index_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_email_render__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-email/render */ \"@react-email/render\");\n/* harmony import */ var _src_env_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/env.mjs */ \"(api)/./src/env.mjs\");\n/* harmony import */ var _src_features_email_templates_ProjectInvitation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/features/email/templates/ProjectInvitation */ \"(api)/./src/features/email/templates/ProjectInvitation.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_react_email_render__WEBPACK_IMPORTED_MODULE_2__, _src_env_mjs__WEBPACK_IMPORTED_MODULE_3__, _src_features_email_templates_ProjectInvitation__WEBPACK_IMPORTED_MODULE_4__]);\n([_react_email_render__WEBPACK_IMPORTED_MODULE_2__, _src_env_mjs__WEBPACK_IMPORTED_MODULE_3__, _src_features_email_templates_ProjectInvitation__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nconst langfuseUrls = {\n    US: \"https://us.cloud.langfuse.com\",\n    EU: \"https://cloud.langfuse.com\",\n    STAGING: \"https://staging.langfuse.com\"\n};\nconst authUrl = _src_env_mjs__WEBPACK_IMPORTED_MODULE_3__.env.NEXT_PUBLIC_LANGFUSE_CLOUD_REGION ? langfuseUrls[_src_env_mjs__WEBPACK_IMPORTED_MODULE_3__.env.NEXT_PUBLIC_LANGFUSE_CLOUD_REGION] : _src_env_mjs__WEBPACK_IMPORTED_MODULE_3__.env.NEXTAUTH_URL;\nconst sendProjectInvitation = async (to, inviterName, inviterEmail, projectName)=>{\n    if (!_src_env_mjs__WEBPACK_IMPORTED_MODULE_3__.env.EMAIL_FROM_ADDRESS || !_src_env_mjs__WEBPACK_IMPORTED_MODULE_3__.env.SMTP_CONNECTION_URL) {\n        console.error(\"Missing environment variables for sending project invitation email.\");\n        return;\n    }\n    try {\n        const mailer = (0,nodemailer__WEBPACK_IMPORTED_MODULE_0__.createTransport)((0,nodemailer_lib_shared_index_js__WEBPACK_IMPORTED_MODULE_1__.parseConnectionUrl)(_src_env_mjs__WEBPACK_IMPORTED_MODULE_3__.env.SMTP_CONNECTION_URL));\n        const htmlTemplate = (0,_react_email_render__WEBPACK_IMPORTED_MODULE_2__.render)((0,_src_features_email_templates_ProjectInvitation__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({\n            invitedByUsername: inviterName,\n            invitedByUserEmail: inviterEmail,\n            projectName: projectName,\n            recieverEmail: to,\n            inviteLink: authUrl\n        }));\n        await mailer.sendMail({\n            to: to,\n            from: {\n                address: _src_env_mjs__WEBPACK_IMPORTED_MODULE_3__.env.EMAIL_FROM_ADDRESS,\n                name: \"Langfuse\"\n            },\n            subject: `${inviterName} invited you to join \"${projectName}\"`,\n            html: htmlTemplate\n        });\n    } catch (error) {\n        console.error(error);\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvZW1haWwvbGliL3Byb2plY3QtaW52aXRhdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUE2QztBQUN1QjtBQUN2QjtBQUVUO0FBQ3FEO0FBRXpGLE1BQU1LLGVBQWU7SUFDbkJDLElBQUk7SUFDSkMsSUFBSTtJQUNKQyxTQUFTO0FBQ1g7QUFFQSxNQUFNQyxVQUFVTiw2Q0FBR0EsQ0FBQ08saUNBQWlDLEdBQ2pETCxZQUFZLENBQUNGLDZDQUFHQSxDQUFDTyxpQ0FBaUMsQ0FBQyxHQUNuRFAsNkNBQUdBLENBQUNRLFlBQVk7QUFFYixNQUFNQyx3QkFBd0IsT0FDbkNDLElBQ0FDLGFBQ0FDLGNBQ0FDO0lBRUEsSUFBSSxDQUFDYiw2Q0FBR0EsQ0FBQ2Msa0JBQWtCLElBQUksQ0FBQ2QsNkNBQUdBLENBQUNlLG1CQUFtQixFQUFFO1FBQ3ZEQyxRQUFRQyxLQUFLLENBQ1g7UUFFRjtJQUNGO0lBRUEsSUFBSTtRQUNGLE1BQU1DLFNBQVNyQiwyREFBZUEsQ0FBQ0Msa0ZBQWtCQSxDQUFDRSw2Q0FBR0EsQ0FBQ2UsbUJBQW1CO1FBRXpFLE1BQU1JLGVBQWVwQiwyREFBTUEsQ0FDekJFLDJGQUF5QkEsQ0FBQztZQUN4Qm1CLG1CQUFtQlQ7WUFDbkJVLG9CQUFvQlQ7WUFDcEJDLGFBQWFBO1lBQ2JTLGVBQWVaO1lBQ2ZhLFlBQVlqQjtRQUNkO1FBR0YsTUFBTVksT0FBT00sUUFBUSxDQUFDO1lBQ3BCZCxJQUFJQTtZQUNKZSxNQUFNO2dCQUNKQyxTQUFTMUIsNkNBQUdBLENBQUNjLGtCQUFrQjtnQkFDL0JhLE1BQU07WUFDUjtZQUNBQyxTQUFTLENBQUMsRUFBRWpCLFlBQVksc0JBQXNCLEVBQUVFLFlBQVksQ0FBQyxDQUFDO1lBQzlEZ0IsTUFBTVY7UUFDUjtJQUNGLEVBQUUsT0FBT0YsT0FBTztRQUNkRCxRQUFRQyxLQUFLLENBQUNBO0lBQ2hCO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9mZWF0dXJlcy9lbWFpbC9saWIvcHJvamVjdC1pbnZpdGF0aW9uLnRzPzk2YTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlVHJhbnNwb3J0IH0gZnJvbSBcIm5vZGVtYWlsZXJcIjtcbmltcG9ydCB7IHBhcnNlQ29ubmVjdGlvblVybCB9IGZyb20gXCJub2RlbWFpbGVyL2xpYi9zaGFyZWQvaW5kZXguanNcIjtcbmltcG9ydCB7IHJlbmRlciB9IGZyb20gXCJAcmVhY3QtZW1haWwvcmVuZGVyXCI7XG5cbmltcG9ydCB7IGVudiB9IGZyb20gXCJAL3NyYy9lbnYubWpzXCI7XG5pbXBvcnQgUHJvamVjdEludml0YXRpb25UZW1wbGF0ZSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvZW1haWwvdGVtcGxhdGVzL1Byb2plY3RJbnZpdGF0aW9uXCI7XG5cbmNvbnN0IGxhbmdmdXNlVXJscyA9IHtcbiAgVVM6IFwiaHR0cHM6Ly91cy5jbG91ZC5sYW5nZnVzZS5jb21cIixcbiAgRVU6IFwiaHR0cHM6Ly9jbG91ZC5sYW5nZnVzZS5jb21cIixcbiAgU1RBR0lORzogXCJodHRwczovL3N0YWdpbmcubGFuZ2Z1c2UuY29tXCIsXG59O1xuXG5jb25zdCBhdXRoVXJsID0gZW52Lk5FWFRfUFVCTElDX0xBTkdGVVNFX0NMT1VEX1JFR0lPTlxuICA/IGxhbmdmdXNlVXJsc1tlbnYuTkVYVF9QVUJMSUNfTEFOR0ZVU0VfQ0xPVURfUkVHSU9OXVxuICA6IGVudi5ORVhUQVVUSF9VUkw7XG5cbmV4cG9ydCBjb25zdCBzZW5kUHJvamVjdEludml0YXRpb24gPSBhc3luYyAoXG4gIHRvOiBzdHJpbmcsXG4gIGludml0ZXJOYW1lOiBzdHJpbmcsXG4gIGludml0ZXJFbWFpbDogc3RyaW5nLFxuICBwcm9qZWN0TmFtZTogc3RyaW5nLFxuKSA9PiB7XG4gIGlmICghZW52LkVNQUlMX0ZST01fQUREUkVTUyB8fCAhZW52LlNNVFBfQ09OTkVDVElPTl9VUkwpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgXCJNaXNzaW5nIGVudmlyb25tZW50IHZhcmlhYmxlcyBmb3Igc2VuZGluZyBwcm9qZWN0IGludml0YXRpb24gZW1haWwuXCIsXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IG1haWxlciA9IGNyZWF0ZVRyYW5zcG9ydChwYXJzZUNvbm5lY3Rpb25VcmwoZW52LlNNVFBfQ09OTkVDVElPTl9VUkwpKTtcblxuICAgIGNvbnN0IGh0bWxUZW1wbGF0ZSA9IHJlbmRlcihcbiAgICAgIFByb2plY3RJbnZpdGF0aW9uVGVtcGxhdGUoe1xuICAgICAgICBpbnZpdGVkQnlVc2VybmFtZTogaW52aXRlck5hbWUsXG4gICAgICAgIGludml0ZWRCeVVzZXJFbWFpbDogaW52aXRlckVtYWlsLFxuICAgICAgICBwcm9qZWN0TmFtZTogcHJvamVjdE5hbWUsXG4gICAgICAgIHJlY2lldmVyRW1haWw6IHRvLFxuICAgICAgICBpbnZpdGVMaW5rOiBhdXRoVXJsLFxuICAgICAgfSksXG4gICAgKTtcblxuICAgIGF3YWl0IG1haWxlci5zZW5kTWFpbCh7XG4gICAgICB0bzogdG8sXG4gICAgICBmcm9tOiB7XG4gICAgICAgIGFkZHJlc3M6IGVudi5FTUFJTF9GUk9NX0FERFJFU1MsXG4gICAgICAgIG5hbWU6IFwiTGFuZ2Z1c2VcIixcbiAgICAgIH0sXG4gICAgICBzdWJqZWN0OiBgJHtpbnZpdGVyTmFtZX0gaW52aXRlZCB5b3UgdG8gam9pbiBcIiR7cHJvamVjdE5hbWV9XCJgLFxuICAgICAgaHRtbDogaHRtbFRlbXBsYXRlLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbImNyZWF0ZVRyYW5zcG9ydCIsInBhcnNlQ29ubmVjdGlvblVybCIsInJlbmRlciIsImVudiIsIlByb2plY3RJbnZpdGF0aW9uVGVtcGxhdGUiLCJsYW5nZnVzZVVybHMiLCJVUyIsIkVVIiwiU1RBR0lORyIsImF1dGhVcmwiLCJORVhUX1BVQkxJQ19MQU5HRlVTRV9DTE9VRF9SRUdJT04iLCJORVhUQVVUSF9VUkwiLCJzZW5kUHJvamVjdEludml0YXRpb24iLCJ0byIsImludml0ZXJOYW1lIiwiaW52aXRlckVtYWlsIiwicHJvamVjdE5hbWUiLCJFTUFJTF9GUk9NX0FERFJFU1MiLCJTTVRQX0NPTk5FQ1RJT05fVVJMIiwiY29uc29sZSIsImVycm9yIiwibWFpbGVyIiwiaHRtbFRlbXBsYXRlIiwiaW52aXRlZEJ5VXNlcm5hbWUiLCJpbnZpdGVkQnlVc2VyRW1haWwiLCJyZWNpZXZlckVtYWlsIiwiaW52aXRlTGluayIsInNlbmRNYWlsIiwiZnJvbSIsImFkZHJlc3MiLCJuYW1lIiwic3ViamVjdCIsImh0bWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/features/email/lib/project-invitation.ts\n");

/***/ }),

/***/ "(api)/./src/features/email/templates/ProjectInvitation.tsx":
/*!************************************************************!*\
  !*** ./src/features/email/templates/ProjectInvitation.tsx ***!
  \************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ProjectInvitationTemplate: () => (/* binding */ ProjectInvitationTemplate),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_email_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-email/components */ \"@react-email/components\");\n/* harmony import */ var _src_env_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/env.mjs */ \"(api)/./src/env.mjs\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_react_email_components__WEBPACK_IMPORTED_MODULE_2__, _src_env_mjs__WEBPACK_IMPORTED_MODULE_3__]);\n([_react_email_components__WEBPACK_IMPORTED_MODULE_2__, _src_env_mjs__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst ProjectInvitationTemplate = ({ invitedByUsername, invitedByUserEmail, projectName, recieverEmail, inviteLink })=>{\n    const previewText = `Join ${invitedByUsername} on Langfuse`;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Html, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Head, {}, void 0, false, {\n                fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                lineNumber: 39,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Preview, {\n                children: previewText\n            }, void 0, false, {\n                fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                lineNumber: 40,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Tailwind, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Body, {\n                    className: \"mx-auto my-auto bg-white font-sans\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Container, {\n                        className: \"mx-auto my-10 w-[465px] rounded border border-solid border-[#eaeaea] p-5\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Section, {\n                                className: \"mt-8\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Img, {\n                                    src: \"https://static.langfuse.com/langfuse_logo_transactional_email.png\",\n                                    width: \"40\",\n                                    height: \"40\",\n                                    alt: \"Langfuse\",\n                                    className: \"mx-auto my-0\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                    lineNumber: 45,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                lineNumber: 44,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Heading, {\n                                className: \"mx-0 my-[30px] p-0 text-center text-2xl font-normal text-black\",\n                                children: [\n                                    \"Join \",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                        children: projectName\n                                    }, void 0, false, {\n                                        fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                        lineNumber: 54,\n                                        columnNumber: 20\n                                    }, undefined),\n                                    \" on \",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                        children: \"Langfuse\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                        lineNumber: 54,\n                                        columnNumber: 54\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                lineNumber: 53,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                                className: \"text-sm leading-6 text-black\",\n                                children: \"Hello,\"\n                            }, void 0, false, {\n                                fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                lineNumber: 56,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                                className: \"text-sm leading-6 text-black\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                        children: invitedByUsername\n                                    }, void 0, false, {\n                                        fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                        lineNumber: 58,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    \" (\",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Link, {\n                                        href: `mailto:${invitedByUserEmail}`,\n                                        className: \"text-blue-600 no-underline\",\n                                        children: invitedByUserEmail\n                                    }, void 0, false, {\n                                        fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                        lineNumber: 59,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    \") has invited you to the \",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                        children: projectName\n                                    }, void 0, false, {\n                                        fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                        lineNumber: 65,\n                                        columnNumber: 40\n                                    }, undefined),\n                                    \" project on Langfuse.\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                lineNumber: 57,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Section, {\n                                className: \"mb-4 mt-8 text-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Button, {\n                                        className: \"rounded bg-black px-5 py-3 text-center text-xs font-semibold text-white no-underline\",\n                                        href: inviteLink,\n                                        children: \"Accept Invitation\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                        lineNumber: 69,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                                        className: \"mt-2 text-xs leading-3 text-gray-600\",\n                                        children: \"(you need to create an account)\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                        lineNumber: 75,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                lineNumber: 68,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                                className: \"text-sm leading-6 text-black\",\n                                children: [\n                                    \"or copy and paste this URL into your browser:\",\n                                    \" \",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Link, {\n                                        href: inviteLink,\n                                        className: \"text-blue-600 no-underline\",\n                                        children: inviteLink\n                                    }, void 0, false, {\n                                        fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                        lineNumber: 81,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                lineNumber: 79,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Hr, {\n                                className: \"mx-0 my-[26px] w-full border border-solid border-[#eaeaea]\"\n                            }, void 0, false, {\n                                fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                lineNumber: 85,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_email_components__WEBPACK_IMPORTED_MODULE_2__.Text, {\n                                className: \"text-xs leading-6 text-[#666666]\",\n                                children: [\n                                    \"This invitation was intended for\",\n                                    \" \",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-black\",\n                                        children: recieverEmail\n                                    }, void 0, false, {\n                                        fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                        lineNumber: 88,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    \". This invite was sent from\",\n                                    \" \",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-black\",\n                                        children: _src_env_mjs__WEBPACK_IMPORTED_MODULE_3__.env.EMAIL_FROM_ADDRESS\n                                    }, void 0, false, {\n                                        fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                        lineNumber: 90,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    \". If you were not expecting this invitation, you can ignore this email.\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                                lineNumber: 86,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                        lineNumber: 43,\n                        columnNumber: 11\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                    lineNumber: 42,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n                lineNumber: 41,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/maximiliandeichmann/development/github.com/langfuse/langfuse/web/src/features/email/templates/ProjectInvitation.tsx\",\n        lineNumber: 38,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ProjectInvitationTemplate);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvZW1haWwvdGVtcGxhdGVzL1Byb2plY3RJbnZpdGF0aW9uLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBK0I7QUFlRTtBQUVHO0FBVTdCLE1BQU1lLDRCQUE0QixDQUFDLEVBQ3hDQyxpQkFBaUIsRUFDakJDLGtCQUFrQixFQUNsQkMsV0FBVyxFQUNYQyxhQUFhLEVBQ2JDLFVBQVUsRUFDcUI7SUFDL0IsTUFBTUMsY0FBYyxDQUFDLEtBQUssRUFBRUwsa0JBQWtCLFlBQVksQ0FBQztJQUUzRCxxQkFDRSw4REFBQ1QseURBQUlBOzswQkFDSCw4REFBQ0gseURBQUlBOzs7OzswQkFDTCw4REFBQ00sNERBQU9BOzBCQUFFVzs7Ozs7OzBCQUNWLDhEQUFDVCw2REFBUUE7MEJBQ1AsNEVBQUNYLHlEQUFJQTtvQkFBQ3FCLFdBQVU7OEJBQ2QsNEVBQUNuQiw4REFBU0E7d0JBQUNtQixXQUFVOzswQ0FDbkIsOERBQUNYLDREQUFPQTtnQ0FBQ1csV0FBVTswQ0FDakIsNEVBQUNkLHdEQUFHQTtvQ0FDRmUsS0FBSTtvQ0FDSkMsT0FBTTtvQ0FDTkMsUUFBTztvQ0FDUEMsS0FBSTtvQ0FDSkosV0FBVTs7Ozs7Ozs7Ozs7MENBR2QsOERBQUNqQiw0REFBT0E7Z0NBQUNpQixXQUFVOztvQ0FBaUU7a0RBQzdFLDhEQUFDSztrREFBUVQ7Ozs7OztvQ0FBcUI7a0RBQUksOERBQUNTO2tEQUFPOzs7Ozs7Ozs7Ozs7MENBRWpELDhEQUFDZCx5REFBSUE7Z0NBQUNTLFdBQVU7MENBQStCOzs7Ozs7MENBQy9DLDhEQUFDVCx5REFBSUE7Z0NBQUNTLFdBQVU7O2tEQUNkLDhEQUFDSztrREFBUVg7Ozs7OztvQ0FBMkI7a0RBQ3BDLDhEQUFDUCx5REFBSUE7d0NBQ0htQixNQUFNLENBQUMsT0FBTyxFQUFFWCxtQkFBbUIsQ0FBQzt3Q0FDcENLLFdBQVU7a0RBRVRMOzs7Ozs7b0NBQ0k7a0RBQ2tCLDhEQUFDVTtrREFBUVQ7Ozs7OztvQ0FBcUI7Ozs7Ozs7MENBR3pELDhEQUFDUCw0REFBT0E7Z0NBQUNXLFdBQVU7O2tEQUNqQiw4REFBQ3BCLDJEQUFNQTt3Q0FDTG9CLFdBQVU7d0NBQ1ZNLE1BQU1SO2tEQUNQOzs7Ozs7a0RBR0QsOERBQUNQLHlEQUFJQTt3Q0FBQ1MsV0FBVTtrREFBdUM7Ozs7Ozs7Ozs7OzswQ0FJekQsOERBQUNULHlEQUFJQTtnQ0FBQ1MsV0FBVTs7b0NBQStCO29DQUNDO2tEQUM5Qyw4REFBQ2IseURBQUlBO3dDQUFDbUIsTUFBTVI7d0NBQVlFLFdBQVU7a0RBQy9CRjs7Ozs7Ozs7Ozs7OzBDQUdMLDhEQUFDZCx1REFBRUE7Z0NBQUNnQixXQUFVOzs7Ozs7MENBQ2QsOERBQUNULHlEQUFJQTtnQ0FBQ1MsV0FBVTs7b0NBQW1DO29DQUNoQjtrREFDakMsOERBQUNPO3dDQUFLUCxXQUFVO2tEQUFjSDs7Ozs7O29DQUFxQjtvQ0FDckM7a0RBQ2QsOERBQUNVO3dDQUFLUCxXQUFVO2tEQUFjUiw2Q0FBR0EsQ0FBQ2dCLGtCQUFrQjs7Ozs7O29DQUFROzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVExRSxFQUFFO0FBRUYsaUVBQWVmLHlCQUF5QkEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9mZWF0dXJlcy9lbWFpbC90ZW1wbGF0ZXMvUHJvamVjdEludml0YXRpb24udHN4P2M3ZGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge1xuICBCb2R5LFxuICBCdXR0b24sXG4gIENvbnRhaW5lcixcbiAgSGVhZCxcbiAgSGVhZGluZyxcbiAgSHIsXG4gIEh0bWwsXG4gIEltZyxcbiAgTGluayxcbiAgUHJldmlldyxcbiAgU2VjdGlvbixcbiAgVGFpbHdpbmQsXG4gIFRleHQsXG59IGZyb20gXCJAcmVhY3QtZW1haWwvY29tcG9uZW50c1wiO1xuXG5pbXBvcnQgeyBlbnYgfSBmcm9tIFwiQC9zcmMvZW52Lm1qc1wiO1xuXG5pbnRlcmZhY2UgUHJvamVjdEludml0YXRpb25UZW1wbGF0ZVByb3BzIHtcbiAgaW52aXRlZEJ5VXNlcm5hbWU6IHN0cmluZztcbiAgaW52aXRlZEJ5VXNlckVtYWlsOiBzdHJpbmc7XG4gIHByb2plY3ROYW1lOiBzdHJpbmc7XG4gIHJlY2lldmVyRW1haWw6IHN0cmluZztcbiAgaW52aXRlTGluazogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgUHJvamVjdEludml0YXRpb25UZW1wbGF0ZSA9ICh7XG4gIGludml0ZWRCeVVzZXJuYW1lLFxuICBpbnZpdGVkQnlVc2VyRW1haWwsXG4gIHByb2plY3ROYW1lLFxuICByZWNpZXZlckVtYWlsLFxuICBpbnZpdGVMaW5rLFxufTogUHJvamVjdEludml0YXRpb25UZW1wbGF0ZVByb3BzKSA9PiB7XG4gIGNvbnN0IHByZXZpZXdUZXh0ID0gYEpvaW4gJHtpbnZpdGVkQnlVc2VybmFtZX0gb24gTGFuZ2Z1c2VgO1xuXG4gIHJldHVybiAoXG4gICAgPEh0bWw+XG4gICAgICA8SGVhZCAvPlxuICAgICAgPFByZXZpZXc+e3ByZXZpZXdUZXh0fTwvUHJldmlldz5cbiAgICAgIDxUYWlsd2luZD5cbiAgICAgICAgPEJvZHkgY2xhc3NOYW1lPVwibXgtYXV0byBteS1hdXRvIGJnLXdoaXRlIGZvbnQtc2Fuc1wiPlxuICAgICAgICAgIDxDb250YWluZXIgY2xhc3NOYW1lPVwibXgtYXV0byBteS0xMCB3LVs0NjVweF0gcm91bmRlZCBib3JkZXIgYm9yZGVyLXNvbGlkIGJvcmRlci1bI2VhZWFlYV0gcC01XCI+XG4gICAgICAgICAgICA8U2VjdGlvbiBjbGFzc05hbWU9XCJtdC04XCI+XG4gICAgICAgICAgICAgIDxJbWdcbiAgICAgICAgICAgICAgICBzcmM9XCJodHRwczovL3N0YXRpYy5sYW5nZnVzZS5jb20vbGFuZ2Z1c2VfbG9nb190cmFuc2FjdGlvbmFsX2VtYWlsLnBuZ1wiXG4gICAgICAgICAgICAgICAgd2lkdGg9XCI0MFwiXG4gICAgICAgICAgICAgICAgaGVpZ2h0PVwiNDBcIlxuICAgICAgICAgICAgICAgIGFsdD1cIkxhbmdmdXNlXCJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJteC1hdXRvIG15LTBcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9TZWN0aW9uPlxuICAgICAgICAgICAgPEhlYWRpbmcgY2xhc3NOYW1lPVwibXgtMCBteS1bMzBweF0gcC0wIHRleHQtY2VudGVyIHRleHQtMnhsIGZvbnQtbm9ybWFsIHRleHQtYmxhY2tcIj5cbiAgICAgICAgICAgICAgSm9pbiA8c3Ryb25nPntwcm9qZWN0TmFtZX08L3N0cm9uZz4gb24gPHN0cm9uZz5MYW5nZnVzZTwvc3Ryb25nPlxuICAgICAgICAgICAgPC9IZWFkaW5nPlxuICAgICAgICAgICAgPFRleHQgY2xhc3NOYW1lPVwidGV4dC1zbSBsZWFkaW5nLTYgdGV4dC1ibGFja1wiPkhlbGxvLDwvVGV4dD5cbiAgICAgICAgICAgIDxUZXh0IGNsYXNzTmFtZT1cInRleHQtc20gbGVhZGluZy02IHRleHQtYmxhY2tcIj5cbiAgICAgICAgICAgICAgPHN0cm9uZz57aW52aXRlZEJ5VXNlcm5hbWV9PC9zdHJvbmc+IChcbiAgICAgICAgICAgICAgPExpbmtcbiAgICAgICAgICAgICAgICBocmVmPXtgbWFpbHRvOiR7aW52aXRlZEJ5VXNlckVtYWlsfWB9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1ibHVlLTYwMCBuby11bmRlcmxpbmVcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2ludml0ZWRCeVVzZXJFbWFpbH1cbiAgICAgICAgICAgICAgPC9MaW5rPlxuICAgICAgICAgICAgICApIGhhcyBpbnZpdGVkIHlvdSB0byB0aGUgPHN0cm9uZz57cHJvamVjdE5hbWV9PC9zdHJvbmc+IHByb2plY3Qgb25cbiAgICAgICAgICAgICAgTGFuZ2Z1c2UuXG4gICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICA8U2VjdGlvbiBjbGFzc05hbWU9XCJtYi00IG10LTggdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYmctYmxhY2sgcHgtNSBweS0zIHRleHQtY2VudGVyIHRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LXdoaXRlIG5vLXVuZGVybGluZVwiXG4gICAgICAgICAgICAgICAgaHJlZj17aW52aXRlTGlua31cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIEFjY2VwdCBJbnZpdGF0aW9uXG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICA8VGV4dCBjbGFzc05hbWU9XCJtdC0yIHRleHQteHMgbGVhZGluZy0zIHRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICAgICAgICAoeW91IG5lZWQgdG8gY3JlYXRlIGFuIGFjY291bnQpXG4gICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgIDwvU2VjdGlvbj5cbiAgICAgICAgICAgIDxUZXh0IGNsYXNzTmFtZT1cInRleHQtc20gbGVhZGluZy02IHRleHQtYmxhY2tcIj5cbiAgICAgICAgICAgICAgb3IgY29weSBhbmQgcGFzdGUgdGhpcyBVUkwgaW50byB5b3VyIGJyb3dzZXI6e1wiIFwifVxuICAgICAgICAgICAgICA8TGluayBocmVmPXtpbnZpdGVMaW5rfSBjbGFzc05hbWU9XCJ0ZXh0LWJsdWUtNjAwIG5vLXVuZGVybGluZVwiPlxuICAgICAgICAgICAgICAgIHtpbnZpdGVMaW5rfVxuICAgICAgICAgICAgICA8L0xpbms+XG4gICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICA8SHIgY2xhc3NOYW1lPVwibXgtMCBteS1bMjZweF0gdy1mdWxsIGJvcmRlciBib3JkZXItc29saWQgYm9yZGVyLVsjZWFlYWVhXVwiIC8+XG4gICAgICAgICAgICA8VGV4dCBjbGFzc05hbWU9XCJ0ZXh0LXhzIGxlYWRpbmctNiB0ZXh0LVsjNjY2NjY2XVwiPlxuICAgICAgICAgICAgICBUaGlzIGludml0YXRpb24gd2FzIGludGVuZGVkIGZvcntcIiBcIn1cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ibGFja1wiPntyZWNpZXZlckVtYWlsfTwvc3Bhbj4uIFRoaXMgaW52aXRlXG4gICAgICAgICAgICAgIHdhcyBzZW50IGZyb217XCIgXCJ9XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtYmxhY2tcIj57ZW52LkVNQUlMX0ZST01fQUREUkVTU308L3NwYW4+LiBJZlxuICAgICAgICAgICAgICB5b3Ugd2VyZSBub3QgZXhwZWN0aW5nIHRoaXMgaW52aXRhdGlvbiwgeW91IGNhbiBpZ25vcmUgdGhpcyBlbWFpbC5cbiAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICA8L0NvbnRhaW5lcj5cbiAgICAgICAgPC9Cb2R5PlxuICAgICAgPC9UYWlsd2luZD5cbiAgICA8L0h0bWw+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQcm9qZWN0SW52aXRhdGlvblRlbXBsYXRlO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwiQm9keSIsIkJ1dHRvbiIsIkNvbnRhaW5lciIsIkhlYWQiLCJIZWFkaW5nIiwiSHIiLCJIdG1sIiwiSW1nIiwiTGluayIsIlByZXZpZXciLCJTZWN0aW9uIiwiVGFpbHdpbmQiLCJUZXh0IiwiZW52IiwiUHJvamVjdEludml0YXRpb25UZW1wbGF0ZSIsImludml0ZWRCeVVzZXJuYW1lIiwiaW52aXRlZEJ5VXNlckVtYWlsIiwicHJvamVjdE5hbWUiLCJyZWNpZXZlckVtYWlsIiwiaW52aXRlTGluayIsInByZXZpZXdUZXh0IiwiY2xhc3NOYW1lIiwic3JjIiwid2lkdGgiLCJoZWlnaHQiLCJhbHQiLCJzdHJvbmciLCJocmVmIiwic3BhbiIsIkVNQUlMX0ZST01fQUREUkVTUyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/features/email/templates/ProjectInvitation.tsx\n");

/***/ }),

/***/ "(api)/./src/features/feature-flags/available-flags.ts":
/*!*******************************************************!*\
  !*** ./src/features/feature-flags/available-flags.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   availableFlags: () => (/* binding */ availableFlags)\n/* harmony export */ });\nconst availableFlags = [\n    \"templateFlag\"\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvZmVhdHVyZS1mbGFncy9hdmFpbGFibGUtZmxhZ3MudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLGlCQUFpQjtJQUFDO0NBQWUsQ0FBVSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9mZWF0dXJlcy9mZWF0dXJlLWZsYWdzL2F2YWlsYWJsZS1mbGFncy50cz9lZWM3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBhdmFpbGFibGVGbGFncyA9IFtcInRlbXBsYXRlRmxhZ1wiXSBhcyBjb25zdDtcbiJdLCJuYW1lcyI6WyJhdmFpbGFibGVGbGFncyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/features/feature-flags/available-flags.ts\n");

/***/ }),

/***/ "(api)/./src/features/feature-flags/utils.ts":
/*!*********************************************!*\
  !*** ./src/features/feature-flags/utils.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseFlags: () => (/* binding */ parseFlags)\n/* harmony export */ });\n/* harmony import */ var _available_flags__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./available-flags */ \"(api)/./src/features/feature-flags/available-flags.ts\");\n\nconst parseFlags = (dbFlags)=>{\n    const parsedFlags = {};\n    _available_flags__WEBPACK_IMPORTED_MODULE_0__.availableFlags.forEach((flag)=>{\n        parsedFlags[flag] = dbFlags.includes(flag);\n    });\n    return parsedFlags;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvZmVhdHVyZS1mbGFncy91dGlscy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFtRDtBQUc1QyxNQUFNQyxhQUFhLENBQUNDO0lBQ3pCLE1BQU1DLGNBQWMsQ0FBQztJQUVyQkgsNERBQWNBLENBQUNJLE9BQU8sQ0FBQyxDQUFDQztRQUN0QkYsV0FBVyxDQUFDRSxLQUFLLEdBQUdILFFBQVFJLFFBQVEsQ0FBQ0Q7SUFDdkM7SUFFQSxPQUFPRjtBQUNULEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvZmVhdHVyZXMvZmVhdHVyZS1mbGFncy91dGlscy50cz85OGI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF2YWlsYWJsZUZsYWdzIH0gZnJvbSBcIi4vYXZhaWxhYmxlLWZsYWdzXCI7XG5pbXBvcnQgeyB0eXBlIEZsYWdzIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IHBhcnNlRmxhZ3MgPSAoZGJGbGFnczogc3RyaW5nW10pOiBGbGFncyA9PiB7XG4gIGNvbnN0IHBhcnNlZEZsYWdzID0ge30gYXMgRmxhZ3M7XG5cbiAgYXZhaWxhYmxlRmxhZ3MuZm9yRWFjaCgoZmxhZykgPT4ge1xuICAgIHBhcnNlZEZsYWdzW2ZsYWddID0gZGJGbGFncy5pbmNsdWRlcyhmbGFnKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHBhcnNlZEZsYWdzO1xufTtcbiJdLCJuYW1lcyI6WyJhdmFpbGFibGVGbGFncyIsInBhcnNlRmxhZ3MiLCJkYkZsYWdzIiwicGFyc2VkRmxhZ3MiLCJmb3JFYWNoIiwiZmxhZyIsImluY2x1ZGVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/features/feature-flags/utils.ts\n");

/***/ }),

/***/ "(api)/./src/features/filters/server/filterToPrisma.ts":
/*!*******************************************************!*\
  !*** ./src/features/filters/server/filterToPrisma.ts ***!
  \*******************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   datetimeFilterToPrismaSql: () => (/* binding */ datetimeFilterToPrismaSql),\n/* harmony export */   tableColumnsToSqlFilter: () => (/* binding */ tableColumnsToSqlFilter),\n/* harmony export */   tableColumnsToSqlFilterAndPrefix: () => (/* binding */ tableColumnsToSqlFilterAndPrefix)\n/* harmony export */ });\n/* harmony import */ var _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/server/api/interfaces/filters */ \"(api)/./src/server/api/interfaces/filters.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_0__]);\n_src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst operatorReplacements = {\n    \"any of\": \"IN\",\n    \"none of\": \"NOT IN\",\n    contains: \"ILIKE\",\n    \"does not contain\": \"NOT ILIKE\",\n    \"starts with\": \"ILIKE\",\n    \"ends with\": \"ILIKE\"\n};\nconst arrayOperatorReplacements = {\n    \"any of\": \"&&\",\n    \"all of\": \"@>\",\n    \"none of\": \"&&\"\n};\n/**\n * SECURITY: This function must only be used, when all its inputs were verified with zod.\n */ function tableColumnsToSqlFilterAndPrefix(filters, tableColumns, table) {\n    const sql = tableColumnsToSqlFilter(filters, tableColumns, table);\n    if (sql === _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.empty) {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.empty;\n    }\n    return _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.join([\n        _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.raw(\"AND \"),\n        sql\n    ], \"\");\n}\n/**\n * SECURITY: This function must only be used, when all its inputs were verified with zod.\n * Converts filter state and table columns to a Prisma SQL filter.\n */ function tableColumnsToSqlFilter(filters, tableColumns, table) {\n    const internalFilters = filters.map((filter)=>{\n        // Get column definition to map column to internal name, e.g. \"t.id\"\n        const col = tableColumns.find((c)=>// TODO: Only use id instead of name\n            c.name === filter.column || c.id === filter.column);\n        if (!col) {\n            console.error(\"Invalid filter column\", filter.column);\n            throw new Error(\"Invalid filter column: \" + filter.column);\n        }\n        const colPrisma = _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.raw(col.internal);\n        return {\n            condition: filter,\n            internalColumn: colPrisma,\n            column: col,\n            table: table\n        };\n    });\n    const statements = internalFilters.map((filterAndColumn)=>{\n        const filter = filterAndColumn.condition;\n        const operatorPrisma = filter.type === \"arrayOptions\" ? _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.raw(arrayOperatorReplacements[filter.operator]) : filter.operator in operatorReplacements ? _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.raw(operatorReplacements[filter.operator]) : _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.raw(filter.operator); //checked by zod\n        // Get prisma value\n        let valuePrisma;\n        switch(filter.type){\n            case \"datetime\":\n                valuePrisma = _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.sql`${filter.value}::timestamp with time zone at time zone 'UTC'`;\n                break;\n            case \"number\":\n            case \"numberObject\":\n                valuePrisma = _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.sql`${filter.value.toString()}::DOUBLE PRECISION`;\n                break;\n            case \"string\":\n            case \"stringObject\":\n                valuePrisma = _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.sql`${filter.value}`;\n                break;\n            case \"stringOptions\":\n                valuePrisma = _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.sql`(${_prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.join(filter.value.map((v)=>_prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.sql`${v}`))})`;\n                break;\n            case \"arrayOptions\":\n                valuePrisma = _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.sql`ARRAY[${_prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.join(filter.value.map((v)=>_prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.sql`${v}`), \", \")}] `;\n                break;\n            case \"boolean\":\n                valuePrisma = _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.sql`${filter.value}`;\n                break;\n        }\n        const jsonKeyPrisma = filter.type === \"stringObject\" || filter.type === \"numberObject\" ? _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.sql`->>${filter.key}` : _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.empty;\n        const [cast1, cast2] = filter.type === \"numberObject\" ? [\n            _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.raw(\"cast(\"),\n            _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.raw(\" as double precision)\")\n        ] : [\n            _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.empty,\n            _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.empty\n        ];\n        const [valuePrefix, valueSuffix] = filter.type === \"string\" || filter.type === \"stringObject\" ? [\n            [\n                \"contains\",\n                \"does not contain\",\n                \"ends with\"\n            ].includes(filter.operator) ? _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.raw(\"'%' || \") : _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.empty,\n            [\n                \"contains\",\n                \"does not contain\",\n                \"starts with\"\n            ].includes(filter.operator) ? _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.raw(\" || '%'\") : _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.empty\n        ] : [\n            _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.empty,\n            _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.empty\n        ];\n        const [funcPrisma1, funcPrisma2] = filter.type === \"arrayOptions\" && filter.operator === \"none of\" ? [\n            _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.raw(\"NOT (\"),\n            _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.raw(\")\")\n        ] : [\n            _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.empty,\n            _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.empty\n        ];\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.sql`${funcPrisma1}${cast1}${filterAndColumn.internalColumn}${jsonKeyPrisma}${cast2} ${operatorPrisma} ${valuePrefix}${valuePrisma}${castValueToPostgresTypes(filterAndColumn.column, filterAndColumn.table)}${valueSuffix}${funcPrisma2}`;\n    });\n    if (statements.length === 0) {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.empty;\n    }\n    // FOR SECURITY: We join the statements with \" AND \" to prevent SQL injection.\n    // IF WE EVER CHANGE THIS, WE MUST ENSURE THAT USERS ONLY ACCESS THE DATA THEY ARE ALLOWED TO.\n    // Example: Or condition on charts API on projectId would break this.\n    return _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.join(statements, \" AND \");\n}\nconst castValueToPostgresTypes = (column, table)=>{\n    return column.name === \"type\" && (table === \"observations\" || table === \"traces_observations\" || table === \"traces_observationsview\" || table === \"traces_parent_observation_scores\") ? _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.sql`::\"ObservationType\"` : _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.empty;\n};\nconst dateOperators = _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_0__.filterOperators[\"datetime\"];\nconst datetimeFilterToPrismaSql = (safeColumn, operator, value)=>{\n    if (!dateOperators.includes(operator)) {\n        throw new Error(\"Invalid operator: \" + operator);\n    }\n    if (isNaN(value.getTime())) {\n        throw new Error(\"Invalid date: \" + value.toString());\n    }\n    return _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.sql`AND ${_prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.raw(safeColumn)} ${_prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.raw(operator)} ${value}::timestamp with time zone at time zone 'UTC'`;\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvZmlsdGVycy9zZXJ2ZXIvZmlsdGVyVG9QcmlzbWEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQ3NFO0FBSzlCO0FBRXhDLE1BQU1FLHVCQUF1QjtJQUMzQixVQUFVO0lBQ1YsV0FBVztJQUNYQyxVQUFVO0lBQ1Ysb0JBQW9CO0lBQ3BCLGVBQWU7SUFDZixhQUFhO0FBQ2Y7QUFFQSxNQUFNQyw0QkFBNEI7SUFDaEMsVUFBVTtJQUNWLFVBQVU7SUFDVixXQUFXO0FBQ2I7QUFFQTs7Q0FFQyxHQUNNLFNBQVNDLGlDQUNkQyxPQUFvQixFQUNwQkMsWUFBZ0MsRUFDaENDLEtBQWdCO0lBRWhCLE1BQU1DLE1BQU1DLHdCQUF3QkosU0FBU0MsY0FBY0M7SUFDM0QsSUFBSUMsUUFBUVIsa0RBQU1BLENBQUNVLEtBQUssRUFBRTtRQUN4QixPQUFPVixrREFBTUEsQ0FBQ1UsS0FBSztJQUNyQjtJQUNBLE9BQU9WLGtEQUFNQSxDQUFDVyxJQUFJLENBQUM7UUFBQ1gsa0RBQU1BLENBQUNZLEdBQUcsQ0FBQztRQUFTSjtLQUFJLEVBQUU7QUFDaEQ7QUFFQTs7O0NBR0MsR0FDTSxTQUFTQyx3QkFDZEosT0FBb0IsRUFDcEJDLFlBQWdDLEVBQ2hDQyxLQUFnQjtJQUVoQixNQUFNTSxrQkFBa0JSLFFBQVFTLEdBQUcsQ0FBQyxDQUFDQztRQUNuQyxvRUFBb0U7UUFDcEUsTUFBTUMsTUFBTVYsYUFBYVcsSUFBSSxDQUMzQixDQUFDQyxJQUNDLG9DQUFvQztZQUNwQ0EsRUFBRUMsSUFBSSxLQUFLSixPQUFPSyxNQUFNLElBQUlGLEVBQUVHLEVBQUUsS0FBS04sT0FBT0ssTUFBTTtRQUV0RCxJQUFJLENBQUNKLEtBQUs7WUFDUk0sUUFBUUMsS0FBSyxDQUFDLHlCQUF5QlIsT0FBT0ssTUFBTTtZQUNwRCxNQUFNLElBQUlJLE1BQU0sNEJBQTRCVCxPQUFPSyxNQUFNO1FBQzNEO1FBQ0EsTUFBTUssWUFBWXpCLGtEQUFNQSxDQUFDWSxHQUFH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QUMvQlIsa0RBQU1BLENBQUNVLEtBQUs7QUFDbEI7QUFFQSxNQUFNdUMsZ0JBQWdCbEQsK0VBQWUsQ0FBQyxXQUFXO0FBRTFDLE1BQU1tRCw0QkFBNEIsQ0FDdkNDLFlBQ0FsQixVQUNBRTtJQUVBLElBQUksQ0FBQ2MsY0FBY0wsUUFBUSxDQUFDWCxXQUFXO1FBQ3JDLE1BQU0sSUFBSVQsTUFBTSx1QkFBdUJTO0lBQ3pDO0lBQ0EsSUFBSW1CLE1BQU1qQixNQUFNa0IsT0FBTyxLQUFLO1FBQzFCLE1BQU0sSUFBSTdCLE1BQU0sbUJBQW1CVyxNQUFNQyxRQUFRO0lBQ25EO0lBRUEsT0FBT3BDLGtEQUFNQSxDQUFDUSxHQUFHLENBQUMsSUFBSSxFQUFFUixrREFBTUEsQ0FBQ1ksR0FBRyxDQUFDdUMsWUFBWSxDQUFDLEVBQUVuRCxrREFBTUEsQ0FBQ1ksR0FBRyxDQUMxRHFCLFVBQ0EsQ0FBQyxFQUFFRSxNQUFNLDZDQUE2QyxDQUFDO0FBQzNELEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvZmVhdHVyZXMvZmlsdGVycy9zZXJ2ZXIvZmlsdGVyVG9QcmlzbWEudHM/ZWU0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIEZpbHRlclN0YXRlIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL2ZpbHRlcnMvdHlwZXNcIjtcbmltcG9ydCB7IGZpbHRlck9wZXJhdG9ycyB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL2ludGVyZmFjZXMvZmlsdGVyc1wiO1xuaW1wb3J0IHtcbiAgdHlwZSBUYWJsZU5hbWVzIGFzIFRhYmxlTmFtZSxcbiAgdHlwZSBDb2x1bW5EZWZpbml0aW9uLFxufSBmcm9tIFwiQC9zcmMvc2VydmVyL2FwaS9pbnRlcmZhY2VzL3RhYmxlRGVmaW5pdGlvblwiO1xuaW1wb3J0IHsgUHJpc21hIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5cbmNvbnN0IG9wZXJhdG9yUmVwbGFjZW1lbnRzID0ge1xuICBcImFueSBvZlwiOiBcIklOXCIsXG4gIFwibm9uZSBvZlwiOiBcIk5PVCBJTlwiLFxuICBjb250YWluczogXCJJTElLRVwiLFxuICBcImRvZXMgbm90IGNvbnRhaW5cIjogXCJOT1QgSUxJS0VcIixcbiAgXCJzdGFydHMgd2l0aFwiOiBcIklMSUtFXCIsXG4gIFwiZW5kcyB3aXRoXCI6IFwiSUxJS0VcIixcbn07XG5cbmNvbnN0IGFycmF5T3BlcmF0b3JSZXBsYWNlbWVudHMgPSB7XG4gIFwiYW55IG9mXCI6IFwiJiZcIixcbiAgXCJhbGwgb2ZcIjogXCJAPlwiLFxuICBcIm5vbmUgb2ZcIjogXCImJlwiLFxufTtcblxuLyoqXG4gKiBTRUNVUklUWTogVGhpcyBmdW5jdGlvbiBtdXN0IG9ubHkgYmUgdXNlZCwgd2hlbiBhbGwgaXRzIGlucHV0cyB3ZXJlIHZlcmlmaWVkIHdpdGggem9kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdGFibGVDb2x1bW5zVG9TcWxGaWx0ZXJBbmRQcmVmaXgoXG4gIGZpbHRlcnM6IEZpbHRlclN0YXRlLFxuICB0YWJsZUNvbHVtbnM6IENvbHVtbkRlZmluaXRpb25bXSxcbiAgdGFibGU6IFRhYmxlTmFtZSxcbik6IFByaXNtYS5TcWwge1xuICBjb25zdCBzcWwgPSB0YWJsZUNvbHVtbnNUb1NxbEZpbHRlcihmaWx0ZXJzLCB0YWJsZUNvbHVtbnMsIHRhYmxlKTtcbiAgaWYgKHNxbCA9PT0gUHJpc21hLmVtcHR5KSB7XG4gICAgcmV0dXJuIFByaXNtYS5lbXB0eTtcbiAgfVxuICByZXR1cm4gUHJpc21hLmpvaW4oW1ByaXNtYS5yYXcoXCJBTkQgXCIpLCBzcWxdLCBcIlwiKTtcbn1cblxuLyoqXG4gKiBTRUNVUklUWTogVGhpcyBmdW5jdGlvbiBtdXN0IG9ubHkgYmUgdXNlZCwgd2hlbiBhbGwgaXRzIGlucHV0cyB3ZXJlIHZlcmlmaWVkIHdpdGggem9kLlxuICogQ29udmVydHMgZmlsdGVyIHN0YXRlIGFuZCB0YWJsZSBjb2x1bW5zIHRvIGEgUHJpc21hIFNRTCBmaWx0ZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0YWJsZUNvbHVtbnNUb1NxbEZpbHRlcihcbiAgZmlsdGVyczogRmlsdGVyU3RhdGUsXG4gIHRhYmxlQ29sdW1uczogQ29sdW1uRGVmaW5pdGlvbltdLFxuICB0YWJsZTogVGFibGVOYW1lLFxuKTogUHJpc21hLlNxbCB7XG4gIGNvbnN0IGludGVybmFsRmlsdGVycyA9IGZpbHRlcnMubWFwKChmaWx0ZXIpID0+IHtcbiAgICAvLyBHZXQgY29sdW1uIGRlZmluaXRpb24gdG8gbWFwIGNvbHVtbiB0byBpbnRlcm5hbCBuYW1lLCBlLmcuIFwidC5pZFwiXG4gICAgY29uc3QgY29sID0gdGFibGVDb2x1bW5zLmZpbmQoXG4gICAgICAoYykgPT5cbiAgICAgICAgLy8gVE9ETzogT25seSB1c2UgaWQgaW5zdGVhZCBvZiBuYW1lXG4gICAgICAgIGMubmFtZSA9PT0gZmlsdGVyLmNvbHVtbiB8fCBjLmlkID09PSBmaWx0ZXIuY29sdW1uLFxuICAgICk7XG4gICAgaWYgKCFjb2wpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbnZhbGlkIGZpbHRlciBjb2x1bW5cIiwgZmlsdGVyLmNvbHVtbik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGZpbHRlciBjb2x1bW46IFwiICsgZmlsdGVyLmNvbHVtbik7XG4gICAgfVxuICAgIGNvbnN0IGNvbFByaXNtYSA9IFByaXNtYS5yYXcoY29sLmludGVybmFsKTtcbiAgICByZXR1cm4ge1xuICAgICAgY29uZGl0aW9uOiBmaWx0ZXIsXG4gICAgICBpbnRlcm5hbENvbHVtbjogY29sUHJpc21hLFxuICAgICAgY29sdW1uOiBjb2wsXG4gICAgICB0YWJsZTogdGFibGUsXG4gICAgfTtcbiAgfSk7XG5cbiAgY29uc3Qgc3RhdGVtZW50cyA9IGludGVybmFsRmlsdGVycy5tYXAoKGZpbHRlckFuZENvbHVtbikgPT4ge1xuICAgIGNvbnN0IGZpbHRlciA9IGZpbHRlckFuZENvbHVtbi5jb25kaXRpb247XG4gICAgY29uc3Qgb3BlcmF0b3JQcmlzbWEgPVxuICAgICAgZmlsdGVyLnR5cGUgPT09IFwiYXJyYXlPcHRpb25zXCJcbiAgICAgICAgPyBQcmlzbWEucmF3KFxuICAgICAgICAgICAgYXJyYXlPcGVyYXRvclJlcGxhY2VtZW50c1tcbiAgICAgICAgICAgICAgZmlsdGVyLm9wZXJhdG9yIGFzIGtleW9mIHR5cGVvZiBhcnJheU9wZXJhdG9yUmVwbGFjZW1lbnRzXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIClcbiAgICAgICAgOiBmaWx0ZXIub3BlcmF0b3IgaW4gb3BlcmF0b3JSZXBsYWNlbWVudHNcbiAgICAgICAgICA/IFByaXNtYS5yYXcoXG4gICAgICAgICAgICAgIG9wZXJhdG9yUmVwbGFjZW1lbnRzW1xuICAgICAgICAgICAgICAgIGZpbHRlci5vcGVyYXRvciBhcyBrZXlvZiB0eXBlb2Ygb3BlcmF0b3JSZXBsYWNlbWVudHNcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICA6IFByaXNtYS5yYXcoZmlsdGVyLm9wZXJhdG9yKTsgLy9jaGVja2VkIGJ5IHpvZFxuXG4gICAgLy8gR2V0IHByaXNtYSB2YWx1ZVxuICAgIGxldCB2YWx1ZVByaXNtYTogUHJpc21hLlNxbDtcbiAgICBzd2l0Y2ggKGZpbHRlci50eXBlKSB7XG4gICAgICBjYXNlIFwiZGF0ZXRpbWVcIjpcbiAgICAgICAgdmFsdWVQcmlzbWEgPSBQcmlzbWEuc3FsYCR7ZmlsdGVyLnZhbHVlfTo6dGltZXN0YW1wIHdpdGggdGltZSB6b25lIGF0IHRpbWUgem9uZSAnVVRDJ2A7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgY2FzZSBcIm51bWJlck9iamVjdFwiOlxuICAgICAgICB2YWx1ZVByaXNtYSA9IFByaXNtYS5zcWxgJHtmaWx0ZXIudmFsdWUudG9TdHJpbmcoKX06OkRPVUJMRSBQUkVDSVNJT05gO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgIGNhc2UgXCJzdHJpbmdPYmplY3RcIjpcbiAgICAgICAgdmFsdWVQcmlzbWEgPSBQcmlzbWEuc3FsYCR7ZmlsdGVyLnZhbHVlfWA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInN0cmluZ09wdGlvbnNcIjpcbiAgICAgICAgdmFsdWVQcmlzbWEgPSBQcmlzbWEuc3FsYCgke1ByaXNtYS5qb2luKFxuICAgICAgICAgIGZpbHRlci52YWx1ZS5tYXAoKHYpID0+IFByaXNtYS5zcWxgJHt2fWApLFxuICAgICAgICApfSlgO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJhcnJheU9wdGlvbnNcIjpcbiAgICAgICAgdmFsdWVQcmlzbWEgPSBQcmlzbWEuc3FsYEFSUkFZWyR7UHJpc21hLmpvaW4oXG4gICAgICAgICAgZmlsdGVyLnZhbHVlLm1hcCgodikgPT4gUHJpc21hLnNxbGAke3Z9YCksXG4gICAgICAgICAgXCIsIFwiLFxuICAgICAgICApfV0gYDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgIHZhbHVlUHJpc21hID0gUHJpc21hLnNxbGAke2ZpbHRlci52YWx1ZX1gO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgY29uc3QganNvbktleVByaXNtYSA9XG4gICAgICBmaWx0ZXIudHlwZSA9PT0gXCJzdHJpbmdPYmplY3RcIiB8fCBmaWx0ZXIudHlwZSA9PT0gXCJudW1iZXJPYmplY3RcIlxuICAgICAgICA/IFByaXNtYS5zcWxgLT4+JHtmaWx0ZXIua2V5fWBcbiAgICAgICAgOiBQcmlzbWEuZW1wdHk7XG4gICAgY29uc3QgW2Nhc3QxLCBjYXN0Ml0gPVxuICAgICAgZmlsdGVyLnR5cGUgPT09IFwibnVtYmVyT2JqZWN0XCJcbiAgICAgICAgPyBbUHJpc21hLnJhdyhcImNhc3QoXCIpLCBQcmlzbWEucmF3KFwiIGFzIGRvdWJsZSBwcmVjaXNpb24pXCIpXVxuICAgICAgICA6IFtQcmlzbWEuZW1wdHksIFByaXNtYS5lbXB0eV07XG4gICAgY29uc3QgW3ZhbHVlUHJlZml4LCB2YWx1ZVN1ZmZpeF0gPVxuICAgICAgZmlsdGVyLnR5cGUgPT09IFwic3RyaW5nXCIgfHwgZmlsdGVyLnR5cGUgPT09IFwic3RyaW5nT2JqZWN0XCJcbiAgICAgICAgPyBbXG4gICAgICAgICAgICBbXCJjb250YWluc1wiLCBcImRvZXMgbm90IGNvbnRhaW5cIiwgXCJlbmRzIHdpdGhcIl0uaW5jbHVkZXMoXG4gICAgICAgICAgICAgIGZpbHRlci5vcGVyYXRvcixcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgPyBQcmlzbWEucmF3KFwiJyUnIHx8IFwiKVxuICAgICAgICAgICAgICA6IFByaXNtYS5lbXB0eSxcbiAgICAgICAgICAgIFtcImNvbnRhaW5zXCIsIFwiZG9lcyBub3QgY29udGFpblwiLCBcInN0YXJ0cyB3aXRoXCJdLmluY2x1ZGVzKFxuICAgICAgICAgICAgICBmaWx0ZXIub3BlcmF0b3IsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgID8gUHJpc21hLnJhdyhcIiB8fCAnJSdcIilcbiAgICAgICAgICAgICAgOiBQcmlzbWEuZW1wdHksXG4gICAgICAgICAgXVxuICAgICAgICA6IFtQcmlzbWEuZW1wdHksIFByaXNtYS5lbXB0eV07XG4gICAgY29uc3QgW2Z1bmNQcmlzbWExLCBmdW5jUHJpc21hMl0gPVxuICAgICAgZmlsdGVyLnR5cGUgPT09IFwiYXJyYXlPcHRpb25zXCIgJiYgZmlsdGVyLm9wZXJhdG9yID09PSBcIm5vbmUgb2ZcIlxuICAgICAgICA/IFtQcmlzbWEucmF3KFwiTk9UIChcIiksIFByaXNtYS5yYXcoXCIpXCIpXVxuICAgICAgICA6IFtQcmlzbWEuZW1wdHksIFByaXNtYS5lbXB0eV07XG5cbiAgICByZXR1cm4gUHJpc21hLnNxbGAke2Z1bmNQcmlzbWExfSR7Y2FzdDF9JHtmaWx0ZXJBbmRDb2x1bW4uaW50ZXJuYWxDb2x1bW59JHtqc29uS2V5UHJpc21hfSR7Y2FzdDJ9ICR7b3BlcmF0b3JQcmlzbWF9ICR7dmFsdWVQcmVmaXh9JHt2YWx1ZVByaXNtYX0ke2Nhc3RWYWx1ZVRvUG9zdGdyZXNUeXBlcyhmaWx0ZXJBbmRDb2x1bW4uY29sdW1uLCBmaWx0ZXJBbmRDb2x1bW4udGFibGUpfSR7dmFsdWVTdWZmaXh9JHtmdW5jUHJpc21hMn1gO1xuICB9KTtcbiAgaWYgKHN0YXRlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFByaXNtYS5lbXB0eTtcbiAgfVxuICAvLyBGT1IgU0VDVVJJVFk6IFdlIGpvaW4gdGhlIHN0YXRlbWVudHMgd2l0aCBcIiBBTkQgXCIgdG8gcHJldmVudCBTUUwgaW5qZWN0aW9uLlxuICAvLyBJRiBXRSBFVkVSIENIQU5HRSBUSElTLCBXRSBNVVNUIEVOU1VSRSBUSEFUIFVTRVJTIE9OTFkgQUNDRVNTIFRIRSBEQVRBIFRIRVkgQVJFIEFMTE9XRUQgVE8uXG4gIC8vIEV4YW1wbGU6IE9yIGNvbmRpdGlvbiBvbiBjaGFydHMgQVBJIG9uIHByb2plY3RJZCB3b3VsZCBicmVhayB0aGlzLlxuICByZXR1cm4gUHJpc21hLmpvaW4oc3RhdGVtZW50cywgXCIgQU5EIFwiKTtcbn1cblxuY29uc3QgY2FzdFZhbHVlVG9Qb3N0Z3Jlc1R5cGVzID0gKFxuICBjb2x1bW46IENvbHVtbkRlZmluaXRpb24sXG4gIHRhYmxlOiBUYWJsZU5hbWUsXG4pID0+IHtcbiAgcmV0dXJuIGNvbHVtbi5uYW1lID09PSBcInR5cGVcIiAmJlxuICAgICh0YWJsZSA9PT0gXCJvYnNlcnZhdGlvbnNcIiB8fFxuICAgICAgdGFibGUgPT09IFwidHJhY2VzX29ic2VydmF0aW9uc1wiIHx8XG4gICAgICB0YWJsZSA9PT0gXCJ0cmFjZXNfb2JzZXJ2YXRpb25zdmlld1wiIHx8XG4gICAgICB0YWJsZSA9PT0gXCJ0cmFjZXNfcGFyZW50X29ic2VydmF0aW9uX3Njb3Jlc1wiKVxuICAgID8gUHJpc21hLnNxbGA6OlwiT2JzZXJ2YXRpb25UeXBlXCJgXG4gICAgOiBQcmlzbWEuZW1wdHk7XG59O1xuXG5jb25zdCBkYXRlT3BlcmF0b3JzID0gZmlsdGVyT3BlcmF0b3JzW1wiZGF0ZXRpbWVcIl07XG5cbmV4cG9ydCBjb25zdCBkYXRldGltZUZpbHRlclRvUHJpc21hU3FsID0gKFxuICBzYWZlQ29sdW1uOiBzdHJpbmcsXG4gIG9wZXJhdG9yOiAodHlwZW9mIGRhdGVPcGVyYXRvcnMpW251bWJlcl0sXG4gIHZhbHVlOiBEYXRlLFxuKSA9PiB7XG4gIGlmICghZGF0ZU9wZXJhdG9ycy5pbmNsdWRlcyhvcGVyYXRvcikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wZXJhdG9yOiBcIiArIG9wZXJhdG9yKTtcbiAgfVxuICBpZiAoaXNOYU4odmFsdWUuZ2V0VGltZSgpKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZGF0ZTogXCIgKyB2YWx1ZS50b1N0cmluZygpKTtcbiAgfVxuXG4gIHJldHVybiBQcmlzbWEuc3FsYEFORCAke1ByaXNtYS5yYXcoc2FmZUNvbHVtbil9ICR7UHJpc21hLnJhdyhcbiAgICBvcGVyYXRvcixcbiAgKX0gJHt2YWx1ZX06OnRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZSBhdCB0aW1lIHpvbmUgJ1VUQydgO1xufTtcbiJdLCJuYW1lcyI6WyJmaWx0ZXJPcGVyYXRvcnMiLCJQcmlzbWEiLCJvcGVyYXRvclJlcGxhY2VtZW50cyIsImNvbnRhaW5zIiwiYXJyYXlPcGVyYXRvclJlcGxhY2VtZW50cyIsInRhYmxlQ29sdW1uc1RvU3FsRmlsdGVyQW5kUHJlZml4IiwiZmlsdGVycyIsInRhYmxlQ29sdW1ucyIsInRhYmxlIiwic3FsIiwidGFibGVDb2x1bW5zVG9TcWxGaWx0ZXIiLCJlbXB0eSIsImpvaW4iLCJyYXciLCJpbnRlcm5hbEZpbHRlcnMiLCJtYXAiLCJmaWx0ZXIiLCJjb2wiLCJmaW5kIiwiYyIsIm5hbWUiLCJjb2x1bW4iLCJpZCIsImNvbnNvbGUiLCJlcnJvciIsIkVycm9yIiwiY29sUHJpc21hIiwiaW50ZXJuYWwiLCJjb25kaXRpb24iLCJpbnRlcm5hbENvbHVtbiIsInN0YXRlbWVudHMiLCJmaWx0ZXJBbmRDb2x1bW4iLCJvcGVyYXRvclByaXNtYSIsInR5cGUiLCJvcGVyYXRvciIsInZhbHVlUHJpc21hIiwidmFsdWUiLCJ0b1N0cmluZyIsInYiLCJqc29uS2V5UHJpc21hIiwia2V5IiwiY2FzdDEiLCJjYXN0MiIsInZhbHVlUHJlZml4IiwidmFsdWVTdWZmaXgiLCJpbmNsdWRlcyIsImZ1bmNQcmlzbWExIiwiZnVuY1ByaXNtYTIiLCJjYXN0VmFsdWVUb1Bvc3RncmVzVHlwZXMiLCJsZW5ndGgiLCJkYXRlT3BlcmF0b3JzIiwiZGF0ZXRpbWVGaWx0ZXJUb1ByaXNtYVNxbCIsInNhZmVDb2x1bW4iLCJpc05hTiIsImdldFRpbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/features/filters/server/filterToPrisma.ts\n");

/***/ }),

/***/ "(api)/./src/features/orderBy/server/orderByToPrisma.ts":
/*!********************************************************!*\
  !*** ./src/features/orderBy/server/orderByToPrisma.ts ***!
  \********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   orderByToPrismaSql: () => (/* binding */ orderByToPrismaSql)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_1__]);\nzod__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n/**\n * Convert orderBy to SQL ORDER BY clause\n * @param orderBy orderBy state\n * @param tableColumns column definitions, used to map orderBy column to internal name\n * @returns Prisma.sql\n */ function orderByToPrismaSql(orderBy, tableColumns) {\n    if (!orderBy) {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`ORDER BY t.timestamp DESC NULLS LAST`;\n    }\n    // Get column definition to map column to internal name, e.g. \"t.id\"\n    const col = tableColumns.find(// TODO: Only use id instead of name.\n    // It's less error-prone & decouples data fetching from the human-readable UI labels\n    (c)=>c.name === orderBy.column || c.id === orderBy.column);\n    if (!col) {\n        console.log(\"Invalid filter column\", orderBy.column);\n        throw new Error(\"Invalid filter column: \" + orderBy.column);\n    }\n    // Assert that orderBy.order is either \"asc\" or \"desc\"\n    const orderByOrder = zod__WEBPACK_IMPORTED_MODULE_1__.z.enum([\n        \"ASC\",\n        \"DESC\"\n    ]);\n    const order = orderByOrder.safeParse(orderBy.order);\n    if (!order.success) {\n        console.log(\"Invalid order\", orderBy.order);\n        throw new Error(\"Invalid order: \" + orderBy.order);\n    }\n    // Both column and order are safe, can use raw SQL\n    return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(`ORDER BY ${col.internal} ${order.data} ${orderBy.order === \"DESC\" ? \"NULLS LAST\" : \"NULLS FIRST\"}`);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvb3JkZXJCeS9zZXJ2ZXIvb3JkZXJCeVRvUHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFFd0M7QUFDaEI7QUFFeEI7Ozs7O0NBS0MsR0FDTSxTQUFTRSxtQkFDZEMsT0FBcUIsRUFDckJDLFlBQWdDO0lBRWhDLElBQUksQ0FBQ0QsU0FBUztRQUNaLE9BQU9ILGtEQUFNQSxDQUFDSyxHQUFHLENBQUMsb0NBQW9DLENBQUM7SUFDekQ7SUFDQSxvRUFBb0U7SUFDcEUsTUFBTUMsTUFBTUYsYUFBYUcsSUFBSSxDQUMzQixxQ0FBcUM7SUFDckMsb0ZBQW9GO0lBQ3BGLENBQUNDLElBQU1BLEVBQUVDLElBQUksS0FBS04sUUFBUU8sTUFBTSxJQUFJRixFQUFFRyxFQUFFLEtBQUtSLFFBQVFPLE1BQU07SUFHN0QsSUFBSSxDQUFDSixLQUFLO1FBQ1JNLFFBQVFDLEdBQUcsQ0FBQyx5QkFBeUJWLFFBQVFPLE1BQU07UUFDbkQsTUFBTSxJQUFJSSxNQUFNLDRCQUE0QlgsUUFBUU8sTUFBTTtJQUM1RDtJQUVBLHNEQUFzRDtJQUN0RCxNQUFNSyxlQUFlZCxrQ0FBQ0EsQ0FBQ2UsSUFBSSxDQUFDO1FBQUM7UUFBTztLQUFPO0lBQzNDLE1BQU1DLFFBQVFGLGFBQWFHLFNBQVMsQ0FBQ2YsUUFBUWMsS0FBSztJQUNsRCxJQUFJLENBQUNBLE1BQU1FLE9BQU8sRUFBRTtRQUNsQlAsUUFBUUMsR0FBRyxDQUFDLGlCQUFpQlYsUUFBUWMsS0FBSztRQUMxQyxNQUFNLElBQUlILE1BQU0sb0JBQW9CWCxRQUFRYyxLQUFLO0lBQ25EO0lBRUEsa0RBQWtEO0lBQ2xELE9BQU9qQixrREFBTUEsQ0FBQ29CLEdBQUcsQ0FDZixDQUFDLFNBQVMsRUFBRWQsSUFBSWUsUUFBUSxDQUFDLENBQUMsRUFBRUosTUFBTUssSUFBSSxDQUFDLENBQUMsRUFBRW5CLFFBQVFjLEtBQUssS0FBSyxTQUFTLGVBQWUsY0FBYyxDQUFDO0FBRXZHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2ZlYXR1cmVzL29yZGVyQnkvc2VydmVyL29yZGVyQnlUb1ByaXNtYS50cz8xYTIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgT3JkZXJCeVN0YXRlIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL29yZGVyQnkvdHlwZXNcIjtcbmltcG9ydCB7IHR5cGUgQ29sdW1uRGVmaW5pdGlvbiB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL2ludGVyZmFjZXMvdGFibGVEZWZpbml0aW9uXCI7XG5pbXBvcnQgeyBQcmlzbWEgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbi8qKlxuICogQ29udmVydCBvcmRlckJ5IHRvIFNRTCBPUkRFUiBCWSBjbGF1c2VcbiAqIEBwYXJhbSBvcmRlckJ5IG9yZGVyQnkgc3RhdGVcbiAqIEBwYXJhbSB0YWJsZUNvbHVtbnMgY29sdW1uIGRlZmluaXRpb25zLCB1c2VkIHRvIG1hcCBvcmRlckJ5IGNvbHVtbiB0byBpbnRlcm5hbCBuYW1lXG4gKiBAcmV0dXJucyBQcmlzbWEuc3FsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcmRlckJ5VG9QcmlzbWFTcWwoXG4gIG9yZGVyQnk6IE9yZGVyQnlTdGF0ZSxcbiAgdGFibGVDb2x1bW5zOiBDb2x1bW5EZWZpbml0aW9uW10sXG4pOiBQcmlzbWEuU3FsIHtcbiAgaWYgKCFvcmRlckJ5KSB7XG4gICAgcmV0dXJuIFByaXNtYS5zcWxgT1JERVIgQlkgdC50aW1lc3RhbXAgREVTQyBOVUxMUyBMQVNUYDtcbiAgfVxuICAvLyBHZXQgY29sdW1uIGRlZmluaXRpb24gdG8gbWFwIGNvbHVtbiB0byBpbnRlcm5hbCBuYW1lLCBlLmcuIFwidC5pZFwiXG4gIGNvbnN0IGNvbCA9IHRhYmxlQ29sdW1ucy5maW5kKFxuICAgIC8vIFRPRE86IE9ubHkgdXNlIGlkIGluc3RlYWQgb2YgbmFtZS5cbiAgICAvLyBJdCdzIGxlc3MgZXJyb3ItcHJvbmUgJiBkZWNvdXBsZXMgZGF0YSBmZXRjaGluZyBmcm9tIHRoZSBodW1hbi1yZWFkYWJsZSBVSSBsYWJlbHNcbiAgICAoYykgPT4gYy5uYW1lID09PSBvcmRlckJ5LmNvbHVtbiB8fCBjLmlkID09PSBvcmRlckJ5LmNvbHVtbixcbiAgKTtcblxuICBpZiAoIWNvbCkge1xuICAgIGNvbnNvbGUubG9nKFwiSW52YWxpZCBmaWx0ZXIgY29sdW1uXCIsIG9yZGVyQnkuY29sdW1uKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGZpbHRlciBjb2x1bW46IFwiICsgb3JkZXJCeS5jb2x1bW4pO1xuICB9XG5cbiAgLy8gQXNzZXJ0IHRoYXQgb3JkZXJCeS5vcmRlciBpcyBlaXRoZXIgXCJhc2NcIiBvciBcImRlc2NcIlxuICBjb25zdCBvcmRlckJ5T3JkZXIgPSB6LmVudW0oW1wiQVNDXCIsIFwiREVTQ1wiXSk7XG4gIGNvbnN0IG9yZGVyID0gb3JkZXJCeU9yZGVyLnNhZmVQYXJzZShvcmRlckJ5Lm9yZGVyKTtcbiAgaWYgKCFvcmRlci5zdWNjZXNzKSB7XG4gICAgY29uc29sZS5sb2coXCJJbnZhbGlkIG9yZGVyXCIsIG9yZGVyQnkub3JkZXIpO1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgb3JkZXI6IFwiICsgb3JkZXJCeS5vcmRlcik7XG4gIH1cblxuICAvLyBCb3RoIGNvbHVtbiBhbmQgb3JkZXIgYXJlIHNhZmUsIGNhbiB1c2UgcmF3IFNRTFxuICByZXR1cm4gUHJpc21hLnJhdyhcbiAgICBgT1JERVIgQlkgJHtjb2wuaW50ZXJuYWx9ICR7b3JkZXIuZGF0YX0gJHtvcmRlckJ5Lm9yZGVyID09PSBcIkRFU0NcIiA/IFwiTlVMTFMgTEFTVFwiIDogXCJOVUxMUyBGSVJTVFwifWAsXG4gICk7XG59XG4iXSwibmFtZXMiOlsiUHJpc21hIiwieiIsIm9yZGVyQnlUb1ByaXNtYVNxbCIsIm9yZGVyQnkiLCJ0YWJsZUNvbHVtbnMiLCJzcWwiLCJjb2wiLCJmaW5kIiwiYyIsIm5hbWUiLCJjb2x1bW4iLCJpZCIsImNvbnNvbGUiLCJsb2ciLCJFcnJvciIsIm9yZGVyQnlPcmRlciIsImVudW0iLCJvcmRlciIsInNhZmVQYXJzZSIsInN1Y2Nlc3MiLCJyYXciLCJpbnRlcm5hbCIsImRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/features/orderBy/server/orderByToPrisma.ts\n");

/***/ }),

/***/ "(api)/./src/features/projects/server/projectsRouter.ts":
/*!********************************************************!*\
  !*** ./src/features/projects/server/projectsRouter.ts ***!
  \********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   projectsRouter: () => (/* binding */ projectsRouter)\n/* harmony export */ });\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/features/rbac/utils/checkAccess */ \"(api)/./src/features/rbac/utils/checkAccess.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var _src_features_auth_lib_projectNameSchema__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/features/auth/lib/projectNameSchema */ \"(api)/./src/features/auth/lib/projectNameSchema.ts\");\n/* harmony import */ var _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/src/features/audit-logs/auditLog */ \"(api)/./src/features/audit-logs/auditLog.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_1__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__, _trpc_server__WEBPACK_IMPORTED_MODULE_3__, _src_features_auth_lib_projectNameSchema__WEBPACK_IMPORTED_MODULE_4__, _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_5__]);\n([_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_1__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__, _trpc_server__WEBPACK_IMPORTED_MODULE_3__, _src_features_auth_lib_projectNameSchema__WEBPACK_IMPORTED_MODULE_4__, _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_5__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\nconst projectsRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.createTRPCRouter)({\n    all: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProcedure.query(async ({ ctx })=>{\n        const memberships = await ctx.prisma.membership.findMany({\n            where: {\n                userId: ctx.session.user.id\n            },\n            include: {\n                project: true\n            }\n        });\n        const projects = memberships.map((membership)=>({\n                id: membership.project.id,\n                name: membership.project.name,\n                role: membership.role\n            }));\n        return projects;\n    }),\n    byId: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_1__.string()\n    })).query(async ({ input, ctx })=>{\n        const project = await ctx.prisma.project.findUnique({\n            where: {\n                id: input.projectId\n            }\n        });\n        if (!project) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_3__.TRPCError({\n            code: \"NOT_FOUND\"\n        });\n        const cloudConfigSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n            plan: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n                \"Hobby\",\n                \"Pro\",\n                \"Team\",\n                \"Enterprise\"\n            ]).optional(),\n            monthlyObservationLimit: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().positive().optional()\n        });\n        const cloudConfig = cloudConfigSchema.safeParse(project.cloudConfig);\n        return {\n            ...project,\n            cloudConfig: cloudConfig.success ? cloudConfig.data : null\n        };\n    }),\n    create: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_1__.string()\n    })).mutation(async ({ input, ctx })=>{\n        const project = await ctx.prisma.project.create({\n            data: {\n                name: input.name,\n                members: {\n                    create: {\n                        userId: ctx.session.user.id,\n                        role: \"OWNER\"\n                    }\n                }\n            }\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_5__.auditLog)({\n            resourceType: \"project\",\n            resourceId: project.id,\n            action: \"create\",\n            userId: ctx.session.user.id,\n            projectId: project.id,\n            userProjectRole: \"OWNER\",\n            after: project\n        });\n        return {\n            id: project.id,\n            name: project.name,\n            role: \"OWNER\"\n        };\n    }),\n    update: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n        newName: _src_features_auth_lib_projectNameSchema__WEBPACK_IMPORTED_MODULE_4__.projectNameSchema.shape.name\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"project:update\"\n        });\n        const project = await ctx.prisma.project.update({\n            where: {\n                id: input.projectId\n            },\n            data: {\n                name: input.newName\n            }\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_5__.auditLog)({\n            session: ctx.session,\n            resourceType: \"project\",\n            resourceId: input.projectId,\n            action: \"update\",\n            after: project\n        });\n        return true;\n    }),\n    delete: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_1__.string()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"project:delete\"\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_5__.auditLog)({\n            session: ctx.session,\n            resourceType: \"project\",\n            resourceId: input.projectId,\n            action: \"delete\"\n        });\n        await ctx.prisma.project.delete({\n            where: {\n                id: input.projectId\n            }\n        });\n        return true;\n    }),\n    transfer: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n        newOwnerEmail: zod__WEBPACK_IMPORTED_MODULE_1__.string().email()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"project:transfer\"\n        });\n        // Check if new owner exists\n        const newOwner = await ctx.prisma.user.findUnique({\n            where: {\n                email: input.newOwnerEmail.toLowerCase()\n            }\n        });\n        if (!newOwner) throw new Error(\"User not found\");\n        if (newOwner.id === ctx.session.user.id) throw new Error(\"You cannot transfer project to yourself\");\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_5__.auditLog)({\n            session: ctx.session,\n            resourceType: \"project\",\n            resourceId: input.projectId,\n            action: \"transfer\",\n            after: {\n                ownerId: newOwner.id\n            }\n        });\n        return ctx.prisma.$transaction([\n            // Add new owner, upsert to update role if already exists\n            ctx.prisma.membership.upsert({\n                where: {\n                    projectId_userId: {\n                        projectId: input.projectId,\n                        userId: newOwner.id\n                    }\n                },\n                update: {\n                    role: \"OWNER\"\n                },\n                create: {\n                    userId: newOwner.id,\n                    projectId: input.projectId,\n                    role: \"OWNER\"\n                }\n            }),\n            // Update old owner to admin\n            ctx.prisma.membership.update({\n                where: {\n                    projectId_userId: {\n                        projectId: input.projectId,\n                        userId: ctx.session.user.id\n                    }\n                },\n                data: {\n                    role: \"ADMIN\"\n                }\n            })\n        ]);\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvcHJvamVjdHMvc2VydmVyL3Byb2plY3RzUm91dGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFJK0I7QUFDTjtBQUMrQztBQUMvQjtBQUNxQztBQUNoQjtBQUV2RCxNQUFNUSxpQkFBaUJSLHNFQUFnQkEsQ0FBQztJQUM3Q1MsS0FBS1Isb0VBQWtCQSxDQUFDUyxLQUFLLENBQUMsT0FBTyxFQUFFQyxHQUFHLEVBQUU7UUFDMUMsTUFBTUMsY0FBYyxNQUFNRCxJQUFJRSxNQUFNLENBQUNDLFVBQVUsQ0FBQ0MsUUFBUSxDQUFDO1lBQ3ZEQyxPQUFPO2dCQUNMQyxRQUFRTixJQUFJTyxPQUFPLENBQUNDLElBQUksQ0FBQ0MsRUFBRTtZQUM3QjtZQUNBQyxTQUFTO2dCQUNQQyxTQUFTO1lBQ1g7UUFDRjtRQUNBLE1BQU1DLFdBQVdYLFlBQVlZLEdBQUcsQ0FBQyxDQUFDVixhQUFnQjtnQkFDaERNLElBQUlOLFdBQVdRLE9BQU8sQ0FBQ0YsRUFBRTtnQkFDekJLLE1BQU1YLFdBQVdRLE9BQU8sQ0FBQ0csSUFBSTtnQkFDN0JDLE1BQU1aLFdBQVdZLElBQUk7WUFDdkI7UUFFQSxPQUFPSDtJQUNUO0lBQ0FJLE1BQU0xQixvRUFBa0JBLENBQ3JCMkIsS0FBSyxDQUNKekIsdUNBQVEsQ0FBQztRQUNQMkIsV0FBVzNCLHVDQUFRO0lBQ3JCLElBRURPLEtBQUssQ0FBQyxPQUFPLEVBQUVrQixLQUFLLEVBQUVqQixHQUFHLEVBQUU7UUFDMUIsTUFBTVcsVUFBVSxNQUFNWCxJQUFJRSxNQUFNLENBQUNTLE9BQU8sQ0FBQ1UsVUFBVSxDQUFDO1lBQ2xEaEIsT0FBTztnQkFDTEksSUFBSVEsTUFBTUUsU0FBUztZQUNyQjtRQUNGO1FBQ0EsSUFBSSxDQUFDUixTQUFTLE1BQU0sSUFBSWpCLG1EQUFTQSxDQUFDO1lBQUU0QixNQUFNO1FBQVk7UUFFdEQsTUFBTUMsb0JBQW9CL0IsdUNBQVEsQ0FBQztZQUNqQ2dDLE1BQU1oQyx3Q0FB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QUNON0IsUUFBUTZDLFNBQVMxQyxFQUFFO29CQUNuQlUsV0FBV0YsTUFBTUUsU0FBUztvQkFDMUJKLE1BQU07Z0JBQ1I7WUFDRjtZQUNBLDRCQUE0QjtZQUM1QmYsSUFBSUUsTUFBTSxDQUFDQyxVQUFVLENBQUN3QyxNQUFNLENBQUM7Z0JBQzNCdEMsT0FBTztvQkFDTG9ELGtCQUFrQjt3QkFDaEJ0QyxXQUFXRixNQUFNRSxTQUFTO3dCQUMxQmIsUUFBUU4sSUFBSU8sT0FBTyxDQUFDQyxJQUFJLENBQUNDLEVBQUU7b0JBQzdCO2dCQUNGO2dCQUNBeUIsTUFBTTtvQkFDSm5CLE1BQU07Z0JBQ1I7WUFDRjtTQUNEO0lBQ0g7QUFDSixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2ZlYXR1cmVzL3Byb2plY3RzL3NlcnZlci9wcm9qZWN0c1JvdXRlci50cz8yY2U0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGNyZWF0ZVRSUENSb3V0ZXIsXG4gIHByb3RlY3RlZFByb2NlZHVyZSxcbiAgcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZSxcbn0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvdHJwY1wiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyB0aHJvd0lmTm9BY2Nlc3MgfSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvcmJhYy91dGlscy9jaGVja0FjY2Vzc1wiO1xuaW1wb3J0IHsgVFJQQ0Vycm9yIH0gZnJvbSBcIkB0cnBjL3NlcnZlclwiO1xuaW1wb3J0IHsgcHJvamVjdE5hbWVTY2hlbWEgfSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvYXV0aC9saWIvcHJvamVjdE5hbWVTY2hlbWFcIjtcbmltcG9ydCB7IGF1ZGl0TG9nIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL2F1ZGl0LWxvZ3MvYXVkaXRMb2dcIjtcblxuZXhwb3J0IGNvbnN0IHByb2plY3RzUm91dGVyID0gY3JlYXRlVFJQQ1JvdXRlcih7XG4gIGFsbDogcHJvdGVjdGVkUHJvY2VkdXJlLnF1ZXJ5KGFzeW5jICh7IGN0eCB9KSA9PiB7XG4gICAgY29uc3QgbWVtYmVyc2hpcHMgPSBhd2FpdCBjdHgucHJpc21hLm1lbWJlcnNoaXAuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgcHJvamVjdDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgY29uc3QgcHJvamVjdHMgPSBtZW1iZXJzaGlwcy5tYXAoKG1lbWJlcnNoaXApID0+ICh7XG4gICAgICBpZDogbWVtYmVyc2hpcC5wcm9qZWN0LmlkLFxuICAgICAgbmFtZTogbWVtYmVyc2hpcC5wcm9qZWN0Lm5hbWUsXG4gICAgICByb2xlOiBtZW1iZXJzaGlwLnJvbGUsXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHByb2plY3RzO1xuICB9KSxcbiAgYnlJZDogcHJvdGVjdGVkUHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICB9KSxcbiAgICApXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgY29uc3QgcHJvamVjdCA9IGF3YWl0IGN0eC5wcmlzbWEucHJvamVjdC5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBpZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBpZiAoIXByb2plY3QpIHRocm93IG5ldyBUUlBDRXJyb3IoeyBjb2RlOiBcIk5PVF9GT1VORFwiIH0pO1xuXG4gICAgICBjb25zdCBjbG91ZENvbmZpZ1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgICAgICAgcGxhbjogei5lbnVtKFtcIkhvYmJ5XCIsIFwiUHJvXCIsIFwiVGVhbVwiLCBcIkVudGVycHJpc2VcIl0pLm9wdGlvbmFsKCksXG4gICAgICAgIG1vbnRobHlPYnNlcnZhdGlvbkxpbWl0OiB6Lm51bWJlcigpLmludCgpLnBvc2l0aXZlKCkub3B0aW9uYWwoKSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgY2xvdWRDb25maWcgPSBjbG91ZENvbmZpZ1NjaGVtYS5zYWZlUGFyc2UocHJvamVjdC5jbG91ZENvbmZpZyk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnByb2plY3QsXG4gICAgICAgIGNsb3VkQ29uZmlnOiBjbG91ZENvbmZpZy5zdWNjZXNzID8gY2xvdWRDb25maWcuZGF0YSA6IG51bGwsXG4gICAgICB9O1xuICAgIH0pLFxuXG4gIGNyZWF0ZTogcHJvdGVjdGVkUHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgICAgfSksXG4gICAgKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjdHgucHJpc21hLnByb2plY3QuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG5hbWU6IGlucHV0Lm5hbWUsXG4gICAgICAgICAgbWVtYmVyczoge1xuICAgICAgICAgICAgY3JlYXRlOiB7XG4gICAgICAgICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcbiAgICAgICAgICAgICAgcm9sZTogXCJPV05FUlwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBhd2FpdCBhdWRpdExvZyh7XG4gICAgICAgIHJlc291cmNlVHlwZTogXCJwcm9qZWN0XCIsXG4gICAgICAgIHJlc291cmNlSWQ6IHByb2plY3QuaWQsXG4gICAgICAgIGFjdGlvbjogXCJjcmVhdGVcIixcbiAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxuICAgICAgICBwcm9qZWN0SWQ6IHByb2plY3QuaWQsXG4gICAgICAgIHVzZXJQcm9qZWN0Um9sZTogXCJPV05FUlwiLFxuICAgICAgICBhZnRlcjogcHJvamVjdCxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogcHJvamVjdC5pZCxcbiAgICAgICAgbmFtZTogcHJvamVjdC5uYW1lLFxuICAgICAgICByb2xlOiBcIk9XTkVSXCIsXG4gICAgICB9O1xuICAgIH0pLFxuXG4gIHVwZGF0ZTogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgICBuZXdOYW1lOiBwcm9qZWN0TmFtZVNjaGVtYS5zaGFwZS5uYW1lLFxuICAgICAgfSksXG4gICAgKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIHRocm93SWZOb0FjY2Vzcyh7XG4gICAgICAgIHNlc3Npb246IGN0eC5zZXNzaW9uLFxuICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgc2NvcGU6IFwicHJvamVjdDp1cGRhdGVcIixcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBwcm9qZWN0ID0gYXdhaXQgY3R4LnByaXNtYS5wcm9qZWN0LnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG5hbWU6IGlucHV0Lm5ld05hbWUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IGF1ZGl0TG9nKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHJlc291cmNlVHlwZTogXCJwcm9qZWN0XCIsXG4gICAgICAgIHJlc291cmNlSWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgYWN0aW9uOiBcInVwZGF0ZVwiLFxuICAgICAgICBhZnRlcjogcHJvamVjdCxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSksXG5cbiAgZGVsZXRlOiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICB9KSxcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgdGhyb3dJZk5vQWNjZXNzKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICBzY29wZTogXCJwcm9qZWN0OmRlbGV0ZVwiLFxuICAgICAgfSk7XG4gICAgICBhd2FpdCBhdWRpdExvZyh7XG4gICAgICAgIHNlc3Npb246IGN0eC5zZXNzaW9uLFxuICAgICAgICByZXNvdXJjZVR5cGU6IFwicHJvamVjdFwiLFxuICAgICAgICByZXNvdXJjZUlkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIGFjdGlvbjogXCJkZWxldGVcIixcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBjdHgucHJpc21hLnByb2plY3QuZGVsZXRlKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBpZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pLFxuXG4gIHRyYW5zZmVyOiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICAgIG5ld093bmVyRW1haWw6IHouc3RyaW5nKCkuZW1haWwoKSxcbiAgICAgIH0pLFxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICB0aHJvd0lmTm9BY2Nlc3Moe1xuICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIHNjb3BlOiBcInByb2plY3Q6dHJhbnNmZXJcIixcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDaGVjayBpZiBuZXcgb3duZXIgZXhpc3RzXG4gICAgICBjb25zdCBuZXdPd25lciA9IGF3YWl0IGN0eC5wcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBlbWFpbDogaW5wdXQubmV3T3duZXJFbWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBpZiAoIW5ld093bmVyKSB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIG5vdCBmb3VuZFwiKTtcbiAgICAgIGlmIChuZXdPd25lci5pZCA9PT0gY3R4LnNlc3Npb24udXNlci5pZClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IGNhbm5vdCB0cmFuc2ZlciBwcm9qZWN0IHRvIHlvdXJzZWxmXCIpO1xuXG4gICAgICBhd2FpdCBhdWRpdExvZyh7XG4gICAgICAgIHNlc3Npb246IGN0eC5zZXNzaW9uLFxuICAgICAgICByZXNvdXJjZVR5cGU6IFwicHJvamVjdFwiLFxuICAgICAgICByZXNvdXJjZUlkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIGFjdGlvbjogXCJ0cmFuc2ZlclwiLFxuICAgICAgICBhZnRlcjogeyBvd25lcklkOiBuZXdPd25lci5pZCB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBjdHgucHJpc21hLiR0cmFuc2FjdGlvbihbXG4gICAgICAgIC8vIEFkZCBuZXcgb3duZXIsIHVwc2VydCB0byB1cGRhdGUgcm9sZSBpZiBhbHJlYWR5IGV4aXN0c1xuICAgICAgICBjdHgucHJpc21hLm1lbWJlcnNoaXAudXBzZXJ0KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgcHJvamVjdElkX3VzZXJJZDoge1xuICAgICAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICAgICAgdXNlcklkOiBuZXdPd25lci5pZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICAgIHJvbGU6IFwiT1dORVJcIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNyZWF0ZToge1xuICAgICAgICAgICAgdXNlcklkOiBuZXdPd25lci5pZCxcbiAgICAgICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICAgICAgcm9sZTogXCJPV05FUlwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgICAvLyBVcGRhdGUgb2xkIG93bmVyIHRvIGFkbWluXG4gICAgICAgIGN0eC5wcmlzbWEubWVtYmVyc2hpcC51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBwcm9qZWN0SWRfdXNlcklkOiB7XG4gICAgICAgICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgcm9sZTogXCJBRE1JTlwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgXSk7XG4gICAgfSksXG59KTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVUUlBDUm91dGVyIiwicHJvdGVjdGVkUHJvY2VkdXJlIiwicHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZSIsInoiLCJ0aHJvd0lmTm9BY2Nlc3MiLCJUUlBDRXJyb3IiLCJwcm9qZWN0TmFtZVNjaGVtYSIsImF1ZGl0TG9nIiwicHJvamVjdHNSb3V0ZXIiLCJhbGwiLCJxdWVyeSIsImN0eCIsIm1lbWJlcnNoaXBzIiwicHJpc21hIiwibWVtYmVyc2hpcCIsImZpbmRNYW55Iiwid2hlcmUiLCJ1c2VySWQiLCJzZXNzaW9uIiwidXNlciIsImlkIiwiaW5jbHVkZSIsInByb2plY3QiLCJwcm9qZWN0cyIsIm1hcCIsIm5hbWUiLCJyb2xlIiwiYnlJZCIsImlucHV0Iiwib2JqZWN0IiwicHJvamVjdElkIiwic3RyaW5nIiwiZmluZFVuaXF1ZSIsImNvZGUiLCJjbG91ZENvbmZpZ1NjaGVtYSIsInBsYW4iLCJlbnVtIiwib3B0aW9uYWwiLCJtb250aGx5T2JzZXJ2YXRpb25MaW1pdCIsIm51bWJlciIsImludCIsInBvc2l0aXZlIiwiY2xvdWRDb25maWciLCJzYWZlUGFyc2UiLCJzdWNjZXNzIiwiZGF0YSIsImNyZWF0ZSIsIm11dGF0aW9uIiwibWVtYmVycyIsInJlc291cmNlVHlwZSIsInJlc291cmNlSWQiLCJhY3Rpb24iLCJ1c2VyUHJvamVjdFJvbGUiLCJhZnRlciIsInVwZGF0ZSIsIm5ld05hbWUiLCJzaGFwZSIsInNjb3BlIiwiZGVsZXRlIiwidHJhbnNmZXIiLCJuZXdPd25lckVtYWlsIiwiZW1haWwiLCJuZXdPd25lciIsInRvTG93ZXJDYXNlIiwiRXJyb3IiLCJvd25lcklkIiwiJHRyYW5zYWN0aW9uIiwidXBzZXJ0IiwicHJvamVjdElkX3VzZXJJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/features/projects/server/projectsRouter.ts\n");

/***/ }),

/***/ "(api)/./src/features/prompts/server/prompt-router.ts":
/*!******************************************************!*\
  !*** ./src/features/prompts/server/prompt-router.ts ***!
  \******************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CreatePrompt: () => (/* binding */ CreatePrompt),\n/* harmony export */   createPrompt: () => (/* binding */ createPrompt),\n/* harmony export */   promptRouter: () => (/* binding */ promptRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/features/rbac/utils/checkAccess */ \"(api)/./src/features/rbac/utils/checkAccess.ts\");\n/* harmony import */ var _src_utils_zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/utils/zod */ \"(api)/./src/utils/zod.ts\");\n/* harmony import */ var _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/features/audit-logs/auditLog */ \"(api)/./src/features/audit-logs/auditLog.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_3__, _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_3__, _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nconst CreatePrompt = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    isActive: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean(),\n    prompt: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    config: _src_utils_zod__WEBPACK_IMPORTED_MODULE_3__.jsonSchema\n});\nconst promptRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.createTRPCRouter)({\n    all: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"prompts:read\"\n        });\n        const prompts = await ctx.prisma.$queryRaw`\n        SELECT id, name, version, project_id as \"projectId\", prompt, updated_at as \"updatedAt\", created_at AS \"createdAt\", is_active AS \"isActive\"\n        FROM prompts\n        WHERE (name, version) IN (\n          SELECT name, MAX(version)\n          FROM prompts\n          WHERE \"project_id\" = ${input.projectId}\n          GROUP BY name\n        )\n        AND \"project_id\" = ${input.projectId}\n        ORDER BY name ASC`;\n        return prompts;\n    }),\n    byId: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"prompts:read\"\n        });\n        return ctx.prisma.prompt.findFirst({\n            where: {\n                id: input.id,\n                projectId: input.projectId\n            }\n        });\n    }),\n    create: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(CreatePrompt).mutation(async ({ input, ctx })=>{\n        try {\n            (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n                session: ctx.session,\n                projectId: input.projectId,\n                scope: \"prompts:CUD\"\n            });\n            const prompt = await createPrompt({\n                projectId: input.projectId,\n                name: input.name,\n                prompt: input.prompt,\n                isActive: input.isActive,\n                createdBy: ctx.session.user.id,\n                config: _src_utils_zod__WEBPACK_IMPORTED_MODULE_3__.jsonSchema.parse(input.config),\n                prisma: ctx.prisma\n            });\n            if (!prompt) {\n                throw new Error(\"Failed to create prompt\");\n            }\n            await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__.auditLog)({\n                session: ctx.session,\n                resourceType: \"prompt\",\n                resourceId: prompt.id,\n                action: \"create\",\n                after: prompt\n            }, ctx.prisma);\n            return prompt;\n        } catch (e) {\n            console.log(e);\n            throw e;\n        }\n    }),\n    delete: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        promptName: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).mutation(async ({ input, ctx })=>{\n        try {\n            (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n                session: ctx.session,\n                projectId: input.projectId,\n                scope: \"prompts:CUD\"\n            });\n            // fetch prompts before deletion to enable audit logging\n            const prompts = await ctx.prisma.prompt.findMany({\n                where: {\n                    projectId: input.projectId,\n                    name: input.promptName\n                }\n            });\n            for (const prompt of prompts){\n                await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__.auditLog)({\n                    session: ctx.session,\n                    resourceType: \"prompt\",\n                    resourceId: prompt.id,\n                    action: \"delete\",\n                    before: prompt\n                }, ctx.prisma);\n            }\n            await ctx.prisma.prompt.deleteMany({\n                where: {\n                    projectId: input.projectId,\n                    id: {\n                        in: prompts.map((p)=>p.id)\n                    }\n                }\n            });\n        } catch (e) {\n            console.log(e);\n            throw e;\n        }\n    }),\n    deleteVersion: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        promptVersionId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).mutation(async ({ input, ctx })=>{\n        try {\n            (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n                session: ctx.session,\n                projectId: input.projectId,\n                scope: \"prompts:CUD\"\n            });\n            const promptVersion = await ctx.prisma.prompt.findFirstOrThrow({\n                where: {\n                    id: input.promptVersionId,\n                    projectId: input.projectId\n                }\n            });\n            await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__.auditLog)({\n                session: ctx.session,\n                resourceType: \"prompt\",\n                resourceId: input.promptVersionId,\n                action: \"delete\",\n                before: promptVersion\n            }, ctx.prisma);\n            await ctx.prisma.prompt.delete({\n                where: {\n                    id: input.promptVersionId,\n                    projectId: input.projectId\n                }\n            });\n        } catch (e) {\n            console.log(e);\n            throw e;\n        }\n    }),\n    promote: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        promptId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).mutation(async ({ input, ctx })=>{\n        try {\n            (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n                session: ctx.session,\n                projectId: input.projectId,\n                scope: \"prompts:CUD\"\n            });\n            const toBePromotedPrompt = await ctx.prisma.prompt.findUniqueOrThrow({\n                where: {\n                    id: input.promptId\n                }\n            });\n            await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_4__.auditLog)({\n                session: ctx.session,\n                resourceType: \"prompt\",\n                resourceId: toBePromotedPrompt.id,\n                action: \"promote\",\n                after: {\n                    ...toBePromotedPrompt,\n                    isActive: true\n                }\n            }, ctx.prisma);\n            const latestActivePrompt = await ctx.prisma.prompt.findFirst({\n                where: {\n                    projectId: input.projectId,\n                    name: toBePromotedPrompt.name,\n                    isActive: true\n                },\n                orderBy: [\n                    {\n                        version: \"desc\"\n                    }\n                ]\n            });\n            const toBeExecuted = [\n                ctx.prisma.prompt.update({\n                    where: {\n                        id: toBePromotedPrompt.id\n                    },\n                    data: {\n                        isActive: true\n                    }\n                })\n            ];\n            if (latestActivePrompt) toBeExecuted.push(ctx.prisma.prompt.update({\n                where: {\n                    id: latestActivePrompt.id\n                },\n                data: {\n                    isActive: false\n                }\n            }));\n            await ctx.prisma.$transaction(toBeExecuted);\n        } catch (e) {\n            console.log(e);\n            throw e;\n        }\n    }),\n    allVersions: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"prompts:read\"\n        });\n        const prompts = await ctx.prisma.prompt.findMany({\n            where: {\n                projectId: input.projectId,\n                name: input.name\n            },\n            orderBy: [\n                {\n                    version: \"desc\"\n                }\n            ]\n        });\n        const users = await ctx.prisma.user.findMany({\n            select: {\n                // never select passwords as they should never be returned to the FE\n                id: true,\n                name: true,\n                email: true\n            },\n            where: {\n                memberships: {\n                    some: {\n                        projectId: input.projectId\n                    }\n                }\n            }\n        });\n        const joinedPromptAndUsers = prompts.map((p)=>{\n            const user = users.find((u)=>u.id === p.createdBy);\n            if (!user && p.createdBy === \"API\") {\n                return {\n                    ...p,\n                    creator: \"API\"\n                };\n            }\n            if (!user) {\n                console.log(`User not found for promptId ${p.id}`);\n                throw new Error(`User not found for promptId ${p.id}`);\n            }\n            return {\n                ...p,\n                creator: user.name\n            };\n        });\n        return joinedPromptAndUsers;\n    })\n});\nconst createPrompt = async ({ projectId, name, prompt, isActive = true, createdBy, config, prisma })=>{\n    const latestPrompt = await prisma.prompt.findFirst({\n        where: {\n            projectId: projectId,\n            name: name\n        },\n        orderBy: [\n            {\n                version: \"desc\"\n            }\n        ]\n    });\n    const latestActivePrompt = await prisma.prompt.findFirst({\n        where: {\n            projectId: projectId,\n            name: name,\n            isActive: true\n        },\n        orderBy: [\n            {\n                version: \"desc\"\n            }\n        ]\n    });\n    const create = [\n        prisma.prompt.create({\n            data: {\n                prompt: prompt,\n                name: name,\n                version: latestPrompt?.version ? latestPrompt.version + 1 : 1,\n                isActive: isActive,\n                project: {\n                    connect: {\n                        id: projectId\n                    }\n                },\n                createdBy: createdBy,\n                config: _src_utils_zod__WEBPACK_IMPORTED_MODULE_3__.jsonSchema.parse(config)\n            }\n        })\n    ];\n    if (latestActivePrompt && isActive) // If we're creating a new active prompt, we need to deactivate the old one\n    create.push(prisma.prompt.update({\n        where: {\n            id: latestActivePrompt.id\n        },\n        data: {\n            isActive: false\n        }\n    }));\n    const [createdPrompt] = await prisma.$transaction(create);\n    return createdPrompt;\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvcHJvbXB0cy9zZXJ2ZXIvcHJvbXB0LXJvdXRlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUF3QjtBQUtPO0FBQ3lDO0FBRTNCO0FBQ2lCO0FBRXZELE1BQU1NLGVBQWVOLGtDQUFDQSxDQUFDTyxNQUFNLENBQUM7SUFDbkNDLFdBQVdSLGtDQUFDQSxDQUFDUyxNQUFNO0lBQ25CQyxNQUFNVixrQ0FBQ0EsQ0FBQ1MsTUFBTTtJQUNkRSxVQUFVWCxrQ0FBQ0EsQ0FBQ1ksT0FBTztJQUNuQkMsUUFBUWIsa0NBQUNBLENBQUNTLE1BQU07SUFDaEJLLFFBQVFWLHNEQUFVQTtBQUNwQixHQUFHO0FBRUksTUFBTVcsZUFBZWQsc0VBQWdCQSxDQUFDO0lBQzNDZSxLQUFLZCwyRUFBeUJBLENBQzNCZSxLQUFLLENBQ0pqQixrQ0FBQ0EsQ0FBQ08sTUFBTSxDQUFDO1FBQ1BDLFdBQVdSLGtDQUFDQSxDQUFDUyxNQUFNO0lBQ3JCLElBRURTLEtBQUssQ0FBQyxPQUFPLEVBQUVELEtBQUssRUFBRUUsR0FBRyxFQUFFO1FBQzFCaEIscUZBQWVBLENBQUM7WUFDZGlCLFNBQVNELElBQUlDLE9BQU87WUFDcEJaLFdBQVdTLE1BQU1ULFNBQVM7WUFDMUJhLE9BQU87UUFDVDtRQUNBLE1BQU1DLFVBQVUsTUFBTUgsSUFBSUksTUFBTSxDQUFDQyxTQUFTLENBQWdCOzs7Ozs7K0JBTWpDLEVBQUVQLE1BQU1ULFNBQVMsQ0FBQzs7OzJCQUd0QixFQUFFUyxNQUFNVCxTQUFTLENBQUM7eUJBQ3BCLENBQUM7UUFDcEIsT0FBT2M7SUFDVDtJQUNGRyxNQUFNdkIsMkVBQXlCQSxDQUM1QmUsS0FBSyxDQUNKakIsa0NBQUNBLENBQUNPLE1BQU0sQ0FBQztRQUNQQyxXQUFXUixrQ0FBQ0EsQ0FBQ1MsTUFBTTtRQUNuQmlCLElBQUkxQixrQ0FBQ0EsQ0FBQ1MsTUFBTTtJQUNkLElBRURTLEtBQUssQ0FBQyxPQUFPLEVBQUVELEtBQUssRUFBRUUs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RGxELFVBQVVBO2dCQUNWbUUsU0FBUztvQkFBRUMsU0FBUzt3QkFBRXJELElBQUlsQjtvQkFBVTtnQkFBRTtnQkFDdEN3QixXQUFXQTtnQkFDWGxCLFFBQVFWLHNEQUFVQSxDQUFDOEIsS0FBSyxDQUFDcEI7WUFDM0I7UUFDRjtLQUNEO0lBQ0QsSUFBSTZDLHNCQUFzQmhELFVBQ3hCLDJFQUEyRTtJQUMzRWtCLE9BQU9vQyxJQUFJLENBQ1QxQyxPQUFPVixNQUFNLENBQUNrRCxNQUFNLENBQUM7UUFDbkJuQyxPQUFPO1lBQ0xGLElBQUlpQyxtQkFBbUJqQyxFQUFFO1FBQzNCO1FBQ0FzQyxNQUFNO1lBQ0pyRCxVQUFVO1FBQ1o7SUFDRjtJQUdKLE1BQU0sQ0FBQ3FFLGNBQWMsR0FBRyxNQUFNekQsT0FBTzJDLFlBQVksQ0FBQ3JDO0lBRWxELE9BQU9tRDtBQUNULEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvZmVhdHVyZXMvcHJvbXB0cy9zZXJ2ZXIvcHJvbXB0LXJvdXRlci50cz80ZjZjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmltcG9ydCB7XG4gIGNyZWF0ZVRSUENSb3V0ZXIsXG4gIHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUsXG59IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3RycGNcIjtcbmltcG9ydCB7IHRocm93SWZOb0FjY2VzcyB9IGZyb20gXCJAL3NyYy9mZWF0dXJlcy9yYmFjL3V0aWxzL2NoZWNrQWNjZXNzXCI7XG5pbXBvcnQgeyB0eXBlIFByb21wdCwgdHlwZSBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcbmltcG9ydCB7IGpzb25TY2hlbWEgfSBmcm9tIFwiQC9zcmMvdXRpbHMvem9kXCI7XG5pbXBvcnQgeyBhdWRpdExvZyB9IGZyb20gXCJAL3NyYy9mZWF0dXJlcy9hdWRpdC1sb2dzL2F1ZGl0TG9nXCI7XG5cbmV4cG9ydCBjb25zdCBDcmVhdGVQcm9tcHQgPSB6Lm9iamVjdCh7XG4gIHByb2plY3RJZDogei5zdHJpbmcoKSxcbiAgbmFtZTogei5zdHJpbmcoKSxcbiAgaXNBY3RpdmU6IHouYm9vbGVhbigpLFxuICBwcm9tcHQ6IHouc3RyaW5nKCksXG4gIGNvbmZpZzoganNvblNjaGVtYSxcbn0pO1xuXG5leHBvcnQgY29uc3QgcHJvbXB0Um91dGVyID0gY3JlYXRlVFJQQ1JvdXRlcih7XG4gIGFsbDogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgfSksXG4gICAgKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIHRocm93SWZOb0FjY2Vzcyh7XG4gICAgICAgIHNlc3Npb246IGN0eC5zZXNzaW9uLFxuICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgc2NvcGU6IFwicHJvbXB0czpyZWFkXCIsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHByb21wdHMgPSBhd2FpdCBjdHgucHJpc21hLiRxdWVyeVJhdzxBcnJheTxQcm9tcHQ+PmBcbiAgICAgICAgU0VMRUNUIGlkLCBuYW1lLCB2ZXJzaW9uLCBwcm9qZWN0X2lkIGFzIFwicHJvamVjdElkXCIsIHByb21wdCwgdXBkYXRlZF9hdCBhcyBcInVwZGF0ZWRBdFwiLCBjcmVhdGVkX2F0IEFTIFwiY3JlYXRlZEF0XCIsIGlzX2FjdGl2ZSBBUyBcImlzQWN0aXZlXCJcbiAgICAgICAgRlJPTSBwcm9tcHRzXG4gICAgICAgIFdIRVJFIChuYW1lLCB2ZXJzaW9uKSBJTiAoXG4gICAgICAgICAgU0VMRUNUIG5hbWUsIE1BWCh2ZXJzaW9uKVxuICAgICAgICAgIEZST00gcHJvbXB0c1xuICAgICAgICAgIFdIRVJFIFwicHJvamVjdF9pZFwiID0gJHtpbnB1dC5wcm9qZWN0SWR9XG4gICAgICAgICAgR1JPVVAgQlkgbmFtZVxuICAgICAgICApXG4gICAgICAgIEFORCBcInByb2plY3RfaWRcIiA9ICR7aW5wdXQucHJvamVjdElkfVxuICAgICAgICBPUkRFUiBCWSBuYW1lIEFTQ2A7XG4gICAgICByZXR1cm4gcHJvbXB0cztcbiAgICB9KSxcbiAgYnlJZDogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgIH0pLFxuICAgIClcbiAgICAucXVlcnkoYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICB0aHJvd0lmTm9BY2Nlc3Moe1xuICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIHNjb3BlOiBcInByb21wdHM6cmVhZFwiLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5wcm9tcHQuZmluZEZpcnN0KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBpZDogaW5wdXQuaWQsXG4gICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KSxcbiAgY3JlYXRlOiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KENyZWF0ZVByb21wdClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICB0aHJvd0lmTm9BY2Nlc3Moe1xuICAgICAgICAgIHNlc3Npb246IGN0eC5zZXNzaW9uLFxuICAgICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICAgIHNjb3BlOiBcInByb21wdHM6Q1VEXCIsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHByb21wdCA9IGF3YWl0IGNyZWF0ZVByb21wdCh7XG4gICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgbmFtZTogaW5wdXQubmFtZSxcbiAgICAgICAgICBwcm9tcHQ6IGlucHV0LnByb21wdCxcbiAgICAgICAgICBpc0FjdGl2ZTogaW5wdXQuaXNBY3RpdmUsXG4gICAgICAgICAgY3JlYXRlZEJ5OiBjdHguc2Vzc2lvbi51c2VyLmlkLFxuICAgICAgICAgIGNvbmZpZzoganNvblNjaGVtYS5wYXJzZShpbnB1dC5jb25maWcpLFxuICAgICAgICAgIHByaXNtYTogY3R4LnByaXNtYSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFwcm9tcHQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gY3JlYXRlIHByb21wdFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IGF1ZGl0TG9nKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNlc3Npb246IGN0eC5zZXNzaW9uLFxuICAgICAgICAgICAgcmVzb3VyY2VUeXBlOiBcInByb21wdFwiLFxuICAgICAgICAgICAgcmVzb3VyY2VJZDogcHJvbXB0LmlkLFxuICAgICAgICAgICAgYWN0aW9uOiBcImNyZWF0ZVwiLFxuICAgICAgICAgICAgYWZ0ZXI6IHByb21wdCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGN0eC5wcmlzbWEsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHByb21wdDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfSksXG4gIGRlbGV0ZTogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgICBwcm9tcHROYW1lOiB6LnN0cmluZygpLFxuICAgICAgfSksXG4gICAgKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRocm93SWZOb0FjY2Vzcyh7XG4gICAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgc2NvcGU6IFwicHJvbXB0czpDVURcIixcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gZmV0Y2ggcHJvbXB0cyBiZWZvcmUgZGVsZXRpb24gdG8gZW5hYmxlIGF1ZGl0IGxvZ2dpbmdcbiAgICAgICAgY29uc3QgcHJvbXB0cyA9IGF3YWl0IGN0eC5wcmlzbWEucHJvbXB0LmZpbmRNYW55KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgICBuYW1lOiBpbnB1dC5wcm9tcHROYW1lLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAoY29uc3QgcHJvbXB0IG9mIHByb21wdHMpIHtcbiAgICAgICAgICBhd2FpdCBhdWRpdExvZyhcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgICAgICAgIHJlc291cmNlVHlwZTogXCJwcm9tcHRcIixcbiAgICAgICAgICAgICAgcmVzb3VyY2VJZDogcHJvbXB0LmlkLFxuICAgICAgICAgICAgICBhY3Rpb246IFwiZGVsZXRlXCIsXG4gICAgICAgICAgICAgIGJlZm9yZTogcHJvbXB0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGN0eC5wcmlzbWEsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IGN0eC5wcmlzbWEucHJvbXB0LmRlbGV0ZU1hbnkoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICAgIGlkOiB7XG4gICAgICAgICAgICAgIGluOiBwcm9tcHRzLm1hcCgocCkgPT4gcC5pZCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9KSxcbiAgZGVsZXRlVmVyc2lvbjogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvbXB0VmVyc2lvbklkOiB6LnN0cmluZygpLFxuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICB9KSxcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhyb3dJZk5vQWNjZXNzKHtcbiAgICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICBzY29wZTogXCJwcm9tcHRzOkNVRFwiLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBwcm9tcHRWZXJzaW9uID0gYXdhaXQgY3R4LnByaXNtYS5wcm9tcHQuZmluZEZpcnN0T3JUaHJvdyh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIGlkOiBpbnB1dC5wcm9tcHRWZXJzaW9uSWQsXG4gICAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBhdWRpdExvZyhcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgICAgIHJlc291cmNlVHlwZTogXCJwcm9tcHRcIixcbiAgICAgICAgICAgIHJlc291cmNlSWQ6IGlucHV0LnByb21wdFZlcnNpb25JZCxcbiAgICAgICAgICAgIGFjdGlvbjogXCJkZWxldGVcIixcbiAgICAgICAgICAgIGJlZm9yZTogcHJvbXB0VmVyc2lvbixcbiAgICAgICAgICB9LFxuICAgICAgICAgIGN0eC5wcmlzbWEsXG4gICAgICAgICk7XG5cbiAgICAgICAgYXdhaXQgY3R4LnByaXNtYS5wcm9tcHQuZGVsZXRlKHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgaWQ6IGlucHV0LnByb21wdFZlcnNpb25JZCxcbiAgICAgICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9KSxcbiAgcHJvbW90ZTogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7IHByb21wdElkOiB6LnN0cmluZygpLCBwcm9qZWN0SWQ6IHouc3RyaW5nKCkgfSkpXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhyb3dJZk5vQWNjZXNzKHtcbiAgICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICBzY29wZTogXCJwcm9tcHRzOkNVRFwiLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB0b0JlUHJvbW90ZWRQcm9tcHQgPSBhd2FpdCBjdHgucHJpc21hLnByb21wdC5maW5kVW5pcXVlT3JUaHJvdyh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIGlkOiBpbnB1dC5wcm9tcHRJZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBhdWRpdExvZyhcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgICAgIHJlc291cmNlVHlwZTogXCJwcm9tcHRcIixcbiAgICAgICAgICAgIHJlc291cmNlSWQ6IHRvQmVQcm9tb3RlZFByb21wdC5pZCxcbiAgICAgICAgICAgIGFjdGlvbjogXCJwcm9tb3RlXCIsXG4gICAgICAgICAgICBhZnRlcjoge1xuICAgICAgICAgICAgICAuLi50b0JlUHJvbW90ZWRQcm9tcHQsXG4gICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGN0eC5wcmlzbWEsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgbGF0ZXN0QWN0aXZlUHJvbXB0ID0gYXdhaXQgY3R4LnByaXNtYS5wcm9tcHQuZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgICBuYW1lOiB0b0JlUHJvbW90ZWRQcm9tcHQubmFtZSxcbiAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3JkZXJCeTogW3sgdmVyc2lvbjogXCJkZXNjXCIgfV0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRvQmVFeGVjdXRlZCA9IFtcbiAgICAgICAgICBjdHgucHJpc21hLnByb21wdC51cGRhdGUoe1xuICAgICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgICAgaWQ6IHRvQmVQcm9tb3RlZFByb21wdC5pZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgXTtcbiAgICAgICAgaWYgKGxhdGVzdEFjdGl2ZVByb21wdClcbiAgICAgICAgICB0b0JlRXhlY3V0ZWQucHVzaChcbiAgICAgICAgICAgIGN0eC5wcmlzbWEucHJvbXB0LnVwZGF0ZSh7XG4gICAgICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICAgICAgaWQ6IGxhdGVzdEFjdGl2ZVByb21wdC5pZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlzQWN0aXZlOiBmYWxzZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICk7XG4gICAgICAgIGF3YWl0IGN0eC5wcmlzbWEuJHRyYW5zYWN0aW9uKHRvQmVFeGVjdXRlZCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH0pLFxuICBhbGxWZXJzaW9uczogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7IHByb2plY3RJZDogei5zdHJpbmcoKSwgbmFtZTogei5zdHJpbmcoKSB9KSlcbiAgICAucXVlcnkoYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICB0aHJvd0lmTm9BY2Nlc3Moe1xuICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIHNjb3BlOiBcInByb21wdHM6cmVhZFwiLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBwcm9tcHRzID0gYXdhaXQgY3R4LnByaXNtYS5wcm9tcHQuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICAgIG5hbWU6IGlucHV0Lm5hbWUsXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IFt7IHZlcnNpb246IFwiZGVzY1wiIH1dLFxuICAgICAgfSk7XG4gICAgICBjb25zdCB1c2VycyA9IGF3YWl0IGN0eC5wcmlzbWEudXNlci5maW5kTWFueSh7XG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIC8vIG5ldmVyIHNlbGVjdCBwYXNzd29yZHMgYXMgdGhleSBzaG91bGQgbmV2ZXIgYmUgcmV0dXJuZWQgdG8gdGhlIEZFXG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBtZW1iZXJzaGlwczoge1xuICAgICAgICAgICAgc29tZToge1xuICAgICAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBqb2luZWRQcm9tcHRBbmRVc2VycyA9IHByb21wdHMubWFwKChwKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSB1c2Vycy5maW5kKCh1KSA9PiB1LmlkID09PSBwLmNyZWF0ZWRCeSk7XG4gICAgICAgIGlmICghdXNlciAmJiBwLmNyZWF0ZWRCeSA9PT0gXCJBUElcIikge1xuICAgICAgICAgIHJldHVybiB7IC4uLnAsIGNyZWF0b3I6IFwiQVBJXCIgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgVXNlciBub3QgZm91bmQgZm9yIHByb21wdElkICR7cC5pZH1gKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVzZXIgbm90IGZvdW5kIGZvciBwcm9tcHRJZCAke3AuaWR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5wLFxuICAgICAgICAgIGNyZWF0b3I6IHVzZXIubmFtZSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGpvaW5lZFByb21wdEFuZFVzZXJzO1xuICAgIH0pLFxufSk7XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVQcm9tcHQgPSBhc3luYyAoe1xuICBwcm9qZWN0SWQsXG4gIG5hbWUsXG4gIHByb21wdCxcbiAgaXNBY3RpdmUgPSB0cnVlLFxuICBjcmVhdGVkQnksXG4gIGNvbmZpZyxcbiAgcHJpc21hLFxufToge1xuICBwcm9qZWN0SWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBwcm9tcHQ6IHN0cmluZztcbiAgaXNBY3RpdmU/OiBib29sZWFuO1xuICBjcmVhdGVkQnk6IHN0cmluZztcbiAgY29uZmlnOiB6LmluZmVyPHR5cGVvZiBqc29uU2NoZW1hPjtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQ7XG59KSA9PiB7XG4gIGNvbnN0IGxhdGVzdFByb21wdCA9IGF3YWl0IHByaXNtYS5wcm9tcHQuZmluZEZpcnN0KHtcbiAgICB3aGVyZToge1xuICAgICAgcHJvamVjdElkOiBwcm9qZWN0SWQsXG4gICAgICBuYW1lOiBuYW1lLFxuICAgIH0sXG4gICAgb3JkZXJCeTogW3sgdmVyc2lvbjogXCJkZXNjXCIgfV0sXG4gIH0pO1xuXG4gIGNvbnN0IGxhdGVzdEFjdGl2ZVByb21wdCA9IGF3YWl0IHByaXNtYS5wcm9tcHQuZmluZEZpcnN0KHtcbiAgICB3aGVyZToge1xuICAgICAgcHJvamVjdElkOiBwcm9qZWN0SWQsXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgfSxcbiAgICBvcmRlckJ5OiBbeyB2ZXJzaW9uOiBcImRlc2NcIiB9XSxcbiAgfSk7XG5cbiAgY29uc3QgY3JlYXRlID0gW1xuICAgIHByaXNtYS5wcm9tcHQuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgcHJvbXB0OiBwcm9tcHQsXG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIHZlcnNpb246IGxhdGVzdFByb21wdD8udmVyc2lvbiA/IGxhdGVzdFByb21wdC52ZXJzaW9uICsgMSA6IDEsXG4gICAgICAgIGlzQWN0aXZlOiBpc0FjdGl2ZSxcbiAgICAgICAgcHJvamVjdDogeyBjb25uZWN0OiB7IGlkOiBwcm9qZWN0SWQgfSB9LFxuICAgICAgICBjcmVhdGVkQnk6IGNyZWF0ZWRCeSxcbiAgICAgICAgY29uZmlnOiBqc29uU2NoZW1hLnBhcnNlKGNvbmZpZyksXG4gICAgICB9LFxuICAgIH0pLFxuICBdO1xuICBpZiAobGF0ZXN0QWN0aXZlUHJvbXB0ICYmIGlzQWN0aXZlKVxuICAgIC8vIElmIHdlJ3JlIGNyZWF0aW5nIGEgbmV3IGFjdGl2ZSBwcm9tcHQsIHdlIG5lZWQgdG8gZGVhY3RpdmF0ZSB0aGUgb2xkIG9uZVxuICAgIGNyZWF0ZS5wdXNoKFxuICAgICAgcHJpc21hLnByb21wdC51cGRhdGUoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGlkOiBsYXRlc3RBY3RpdmVQcm9tcHQuaWQsXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICApO1xuXG4gIGNvbnN0IFtjcmVhdGVkUHJvbXB0XSA9IGF3YWl0IHByaXNtYS4kdHJhbnNhY3Rpb24oY3JlYXRlKTtcblxuICByZXR1cm4gY3JlYXRlZFByb21wdDtcbn07XG4iXSwibmFtZXMiOlsieiIsImNyZWF0ZVRSUENSb3V0ZXIiLCJwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlIiwidGhyb3dJZk5vQWNjZXNzIiwianNvblNjaGVtYSIsImF1ZGl0TG9nIiwiQ3JlYXRlUHJvbXB0Iiwib2JqZWN0IiwicHJvamVjdElkIiwic3RyaW5nIiwibmFtZSIsImlzQWN0aXZlIiwiYm9vbGVhbiIsInByb21wdCIsImNvbmZpZyIsInByb21wdFJvdXRlciIsImFsbCIsImlucHV0IiwicXVlcnkiLCJjdHgiLCJzZXNzaW9uIiwic2NvcGUiLCJwcm9tcHRzIiwicHJpc21hIiwiJHF1ZXJ5UmF3IiwiYnlJZCIsImlkIiwiZmluZEZpcnN0Iiwid2hlcmUiLCJjcmVhdGUiLCJtdXRhdGlvbiIsImNyZWF0ZVByb21wdCIsImNyZWF0ZWRCeSIsInVzZXIiLCJwYXJzZSIsIkVycm9yIiwicmVzb3VyY2VUeXBlIiwicmVzb3VyY2VJZCIsImFjdGlvbiIsImFmdGVyIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJkZWxldGUiLCJwcm9tcHROYW1lIiwiZmluZE1hbnkiLCJiZWZvcmUiLCJkZWxldGVNYW55IiwiaW4iLCJtYXAiLCJwIiwiZGVsZXRlVmVyc2lvbiIsInByb21wdFZlcnNpb25JZCIsInByb21wdFZlcnNpb24iLCJmaW5kRmlyc3RPclRocm93IiwicHJvbW90ZSIsInByb21wdElkIiwidG9CZVByb21vdGVkUHJvbXB0IiwiZmluZFVuaXF1ZU9yVGhyb3ciLCJsYXRlc3RBY3RpdmVQcm9tcHQiLCJvcmRlckJ5IiwidmVyc2lvbiIsInRvQmVFeGVjdXRlZCIsInVwZGF0ZSIsImRhdGEiLCJwdXNoIiwiJHRyYW5zYWN0aW9uIiwiYWxsVmVyc2lvbnMiLCJ1c2VycyIsInNlbGVjdCIsImVtYWlsIiwibWVtYmVyc2hpcHMiLCJzb21lIiwiam9pbmVkUHJvbXB0QW5kVXNlcnMiLCJmaW5kIiwidSIsImNyZWF0b3IiLCJsYXRlc3RQcm9tcHQiLCJwcm9qZWN0IiwiY29ubmVjdCIsImNyZWF0ZWRQcm9tcHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/features/prompts/server/prompt-router.ts\n");

/***/ }),

/***/ "(api)/./src/features/public-api/lib/apiKeys.ts":
/*!************************************************!*\
  !*** ./src/features/public-api/lib/apiKeys.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createShaHash: () => (/* binding */ createShaHash),\n/* harmony export */   generateKeySet: () => (/* binding */ generateKeySet),\n/* harmony export */   generatePublicKey: () => (/* binding */ generatePublicKey),\n/* harmony export */   generateSecretKey: () => (/* binding */ generateSecretKey),\n/* harmony export */   getDisplaySecretKey: () => (/* binding */ getDisplaySecretKey),\n/* harmony export */   hashSecretKey: () => (/* binding */ hashSecretKey),\n/* harmony export */   verifySecretKey: () => (/* binding */ verifySecretKey)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nfunction generateSecretKey() {\n    return `sk-lf-${(0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)()}`;\n}\nfunction generatePublicKey() {\n    return `pk-lf-${(0,crypto__WEBPACK_IMPORTED_MODULE_1__.randomUUID)()}`;\n}\nfunction getDisplaySecretKey(secretKey) {\n    return secretKey.slice(0, 6) + \"...\" + secretKey.slice(-4);\n}\nasync function hashSecretKey(key) {\n    const hashedKey = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_0__.hash)(key, 11);\n    return hashedKey;\n}\nasync function generateKeySet() {\n    const pk = generatePublicKey();\n    const sk = generateSecretKey();\n    const hashedSk = await hashSecretKey(sk);\n    const displaySk = getDisplaySecretKey(sk);\n    return {\n        pk,\n        sk,\n        hashedSk,\n        displaySk\n    };\n}\nasync function verifySecretKey(key, hashedKey) {\n    const isValid = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_0__.compare)(key, hashedKey);\n    return isValid;\n}\nfunction createShaHash(privateKey, salt) {\n    const hash = crypto__WEBPACK_IMPORTED_MODULE_1__.createHash(\"sha256\").update(privateKey).update(crypto__WEBPACK_IMPORTED_MODULE_1__.createHash(\"sha256\").update(salt, \"utf8\").digest(\"hex\")).digest(\"hex\");\n    return hash;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvcHVibGljLWFwaS9saWIvYXBpS2V5cy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUF5QztBQUNMO0FBQ0g7QUFFMUIsU0FBU0k7SUFDZCxPQUFPLENBQUMsTUFBTSxFQUFFRixrREFBVUEsR0FBRyxDQUFDO0FBQ2hDO0FBRU8sU0FBU0c7SUFDZCxPQUFPLENBQUMsTUFBTSxFQUFFSCxrREFBVUEsR0FBRyxDQUFDO0FBQ2hDO0FBRU8sU0FBU0ksb0JBQW9CQyxTQUFpQjtJQUNuRCxPQUFPQSxVQUFVQyxLQUFLLENBQUMsR0FBRyxLQUFLLFFBQVFELFVBQVVDLEtBQUssQ0FBQyxDQUFDO0FBQzFEO0FBRU8sZUFBZUMsY0FBY0MsR0FBVztJQUM3QyxNQUFNQyxZQUFZLE1BQU1WLDhDQUFJQSxDQUFDUyxLQUFLO0lBQ2xDLE9BQU9DO0FBQ1Q7QUFFTyxlQUFlQztJQUNwQixNQUFNQyxLQUFLUjtJQUNYLE1BQU1TLEtBQUtWO0lBQ1gsTUFBTVcsV0FBVyxNQUFNTixjQUFjSztJQUNyQyxNQUFNRSxZQUFZVixvQkFBb0JRO0lBRXRDLE9BQU87UUFDTEQ7UUFDQUM7UUFDQUM7UUFDQUM7SUFDRjtBQUNGO0FBRU8sZUFBZUMsZ0JBQWdCUCxHQUFXLEVBQUVDLFNBQWlCO0lBQ2xFLE1BQU1PLFVBQVUsTUFBTWxCLGlEQUFPQSxDQUFDVSxLQUFLQztJQUNuQyxPQUFPTztBQUNUO0FBRU8sU0FBU0MsY0FBY0MsVUFBa0IsRUFBRUMsSUFBWTtJQUM1RCxNQUFNcEIsT0FBT0UsOENBQ0EsQ0FBQyxVQUNYb0IsTUFBTSxDQUFDSCxZQUNQRyxNQUFNLENBQUNwQiw4Q0FBaUIsQ0FBQyxVQUFVb0IsTUFBTSxDQUFDRixNQUFNLFFBQVFHLE1BQU0sQ0FBQyxRQUMvREEsTUFBTSxDQUFDO0lBRVYsT0FBT3ZCO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvZmVhdHVyZXMvcHVibGljLWFwaS9saWIvYXBpS2V5cy50cz8wYjk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbXBhcmUsIGhhc2ggfSBmcm9tIFwiYmNyeXB0anNcIjtcbmltcG9ydCB7IHJhbmRvbVVVSUQgfSBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgKiBhcyBjcnlwdG8gZnJvbSBcImNyeXB0b1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTZWNyZXRLZXkoKSB7XG4gIHJldHVybiBgc2stbGYtJHtyYW5kb21VVUlEKCl9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUHVibGljS2V5KCkge1xuICByZXR1cm4gYHBrLWxmLSR7cmFuZG9tVVVJRCgpfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREaXNwbGF5U2VjcmV0S2V5KHNlY3JldEtleTogc3RyaW5nKSB7XG4gIHJldHVybiBzZWNyZXRLZXkuc2xpY2UoMCwgNikgKyBcIi4uLlwiICsgc2VjcmV0S2V5LnNsaWNlKC00KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc2hTZWNyZXRLZXkoa2V5OiBzdHJpbmcpIHtcbiAgY29uc3QgaGFzaGVkS2V5ID0gYXdhaXQgaGFzaChrZXksIDExKTtcbiAgcmV0dXJuIGhhc2hlZEtleTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlS2V5U2V0KCkge1xuICBjb25zdCBwayA9IGdlbmVyYXRlUHVibGljS2V5KCk7XG4gIGNvbnN0IHNrID0gZ2VuZXJhdGVTZWNyZXRLZXkoKTtcbiAgY29uc3QgaGFzaGVkU2sgPSBhd2FpdCBoYXNoU2VjcmV0S2V5KHNrKTtcbiAgY29uc3QgZGlzcGxheVNrID0gZ2V0RGlzcGxheVNlY3JldEtleShzayk7XG5cbiAgcmV0dXJuIHtcbiAgICBwayxcbiAgICBzayxcbiAgICBoYXNoZWRTayxcbiAgICBkaXNwbGF5U2ssXG4gIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnlTZWNyZXRLZXkoa2V5OiBzdHJpbmcsIGhhc2hlZEtleTogc3RyaW5nKSB7XG4gIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCBjb21wYXJlKGtleSwgaGFzaGVkS2V5KTtcbiAgcmV0dXJuIGlzVmFsaWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTaGFIYXNoKHByaXZhdGVLZXk6IHN0cmluZywgc2FsdDogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgaGFzaCA9IGNyeXB0b1xuICAgIC5jcmVhdGVIYXNoKFwic2hhMjU2XCIpXG4gICAgLnVwZGF0ZShwcml2YXRlS2V5KVxuICAgIC51cGRhdGUoY3J5cHRvLmNyZWF0ZUhhc2goXCJzaGEyNTZcIikudXBkYXRlKHNhbHQsIFwidXRmOFwiKS5kaWdlc3QoXCJoZXhcIikpXG4gICAgLmRpZ2VzdChcImhleFwiKTtcblxuICByZXR1cm4gaGFzaDtcbn1cbiJdLCJuYW1lcyI6WyJjb21wYXJlIiwiaGFzaCIsInJhbmRvbVVVSUQiLCJjcnlwdG8iLCJnZW5lcmF0ZVNlY3JldEtleSIsImdlbmVyYXRlUHVibGljS2V5IiwiZ2V0RGlzcGxheVNlY3JldEtleSIsInNlY3JldEtleSIsInNsaWNlIiwiaGFzaFNlY3JldEtleSIsImtleSIsImhhc2hlZEtleSIsImdlbmVyYXRlS2V5U2V0IiwicGsiLCJzayIsImhhc2hlZFNrIiwiZGlzcGxheVNrIiwidmVyaWZ5U2VjcmV0S2V5IiwiaXNWYWxpZCIsImNyZWF0ZVNoYUhhc2giLCJwcml2YXRlS2V5Iiwic2FsdCIsImNyZWF0ZUhhc2giLCJ1cGRhdGUiLCJkaWdlc3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/features/public-api/lib/apiKeys.ts\n");

/***/ }),

/***/ "(api)/./src/features/public-api/server/apiKeyRouter.ts":
/*!********************************************************!*\
  !*** ./src/features/public-api/server/apiKeyRouter.ts ***!
  \********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   apiKeysRouter: () => (/* binding */ apiKeysRouter)\n/* harmony export */ });\n/* harmony import */ var _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/features/audit-logs/auditLog */ \"(api)/./src/features/audit-logs/auditLog.ts\");\n/* harmony import */ var _src_features_public_api_lib_apiKeys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/features/public-api/lib/apiKeys */ \"(api)/./src/features/public-api/lib/apiKeys.ts\");\n/* harmony import */ var _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/features/rbac/utils/checkAccess */ \"(api)/./src/features/rbac/utils/checkAccess.ts\");\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_0__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__, zod__WEBPACK_IMPORTED_MODULE_4__]);\n([_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_0__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__, zod__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nconst apiKeysRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.createTRPCRouter)({\n    byProjectId: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_4__.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_4__.string()\n    })).query(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"apiKeys:read\"\n        });\n        return ctx.prisma.apiKey.findMany({\n            where: {\n                projectId: input.projectId\n            },\n            select: {\n                id: true,\n                createdAt: true,\n                expiresAt: true,\n                lastUsedAt: true,\n                note: true,\n                publicKey: true,\n                displaySecretKey: true\n            },\n            orderBy: {\n                createdAt: \"asc\"\n            }\n        });\n    }),\n    create: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_4__.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n        note: zod__WEBPACK_IMPORTED_MODULE_4__.string().optional()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"apiKeys:create\"\n        });\n        const { pk, sk, hashedSk, displaySk } = await (0,_src_features_public_api_lib_apiKeys__WEBPACK_IMPORTED_MODULE_1__.generateKeySet)();\n        const apiKey = await ctx.prisma.apiKey.create({\n            data: {\n                projectId: input.projectId,\n                publicKey: pk,\n                hashedSecretKey: hashedSk,\n                displaySecretKey: displaySk,\n                note: input.note\n            }\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_0__.auditLog)({\n            session: ctx.session,\n            resourceType: \"apiKey\",\n            resourceId: apiKey.id,\n            action: \"create\"\n        });\n        return {\n            id: apiKey.id,\n            createdAt: apiKey.createdAt,\n            note: input.note,\n            publicKey: apiKey.publicKey,\n            secretKey: sk,\n            displaySecretKey: displaySk\n        };\n    }),\n    delete: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_4__.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n        id: zod__WEBPACK_IMPORTED_MODULE_4__.string()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"apiKeys:delete\"\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_0__.auditLog)({\n            session: ctx.session,\n            resourceType: \"apiKey\",\n            resourceId: input.id,\n            action: \"delete\"\n        });\n        // Make sure the API key exists and belongs to the project the user has access to\n        const apiKey = await ctx.prisma.apiKey.findFirstOrThrow({\n            where: {\n                id: input.id,\n                projectId: input.projectId\n            }\n        });\n        await ctx.prisma.apiKey.delete({\n            where: {\n                id: apiKey.id\n            }\n        });\n        return true;\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvcHVibGljLWFwaS9zZXJ2ZXIvYXBpS2V5Um91dGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUE4RDtBQUNTO0FBQ0M7QUFJekM7QUFDTjtBQUVsQixNQUFNTSxnQkFBZ0JILHNFQUFnQkEsQ0FBQztJQUM1Q0ksYUFBYUgsMkVBQXlCQSxDQUNuQ0ksS0FBSyxDQUNKSCx1Q0FBUSxDQUFDO1FBQ1BLLFdBQVdMLHVDQUFRO0lBQ3JCLElBRURPLEtBQUssQ0FBQyxPQUFPLEVBQUVKLEtBQUssRUFBRUssR0FBRyxFQUFFO1FBQzFCWCxxRkFBZUEsQ0FBQztZQUNkWSxTQUFTRCxJQUFJQyxPQUFPO1lBQ3BCSixXQUFXRixNQUFNRSxTQUFTO1lBQzFCSyxPQUFPO1FBQ1Q7UUFFQSxPQUFPRixJQUFJRyxNQUFNLENBQUNDLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDO1lBQ2hDQyxPQUFPO2dCQUNMVCxXQUFXRixNQUFNRSxTQUFTO1lBQzVCO1lBQ0FVLFFBQVE7Z0JBQ05DLElBQUk7Z0JBQ0pDLFdBQVc7Z0JBQ1hDLFdBQVc7Z0JBQ1hDLFlBQVk7Z0JBQ1pDLE1BQU07Z0JBQ05DLFdBQVc7Z0JBQ1hDLGtCQUFrQjtZQUNwQjtZQUNBQyxTQUFTO2dCQUNQTixXQUFXO1lBQ2I7UUFDRjtJQUNGO0lBQ0ZPLFFBQVF6QiwyRUFBeUJBLENBQzlCSSxLQUFLLENBQ0pILHVDQUFRLENBQUM7UUFDUEssV0FBV0wsdUNBQVE7UUFDbkJvQixNQUFNcEIsdUNBQVEsR0FBR3lCLFFBQVE7SUFDM0IsSUFFREMsUUFBUSxDQUFDLE9BQU8sRUFBRXZCLEtBQUssRUFBRUssR0FBRyxFQUFFO1FBQzdCWCxxRkFBZUEsQ0FBQztZQUNkWSxTQUFTRCxJQUFJQyxPQUFPO1lBQ3BCSixXQUFXRixNQUFNRSxTQUFTO1lBQzFCSyxPQUFPO1FBQ1Q7UUFFQSxNQUFNLEVBQUVpQixFQUFFLEVBQUVDLEVBQUUsRUFBRUMsUUFBUSxFQUFFQyxTQUFTLEVBQUUsR0FBRyxNQUFNbEMsb0ZBQWNBO1FBRTVELE1BQU1nQixTQUFTLE1BQU1KLElBQUlHLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDWSxNQUFNLENBQUM7WUFDNUNPLE1BQU07Z0JBQ0oxQixXQUFXRixNQUFNRSxTQUFTO2dCQUMxQmdCLFdBQVdNO2dCQUNYSyxpQkFBaUJIO2dCQUNqQlAsa0JBQWtCUTtnQkFDbEJWLE1BQU1qQixNQUFNaUIsSUFBSTtZQUNsQjtRQUNGO1FBRUEsTUFBTXpCLDJFQUFRQSxDQUFDO1lBQ2JjLFNBQVNELElBQUlDLE9BQU87WUFDcEJ3QixjQUFjO1lBQ2RDLFlBQVl0QixPQUFPSSxFQUFFO1lBQ3JCbUIsUUFBUTtRQUNWO1FBRUEsT0FBTztZQUNMbkIsSUFBSUosT0FBT0ksRUFBRTtZQUNiQyxXQUFXTCxPQUFPSyxTQUFTO1lBQzNCRyxNQUFNakIsTUFBTWlCLElBQUk7WUFDaEJDLFdBQVdULE9BQU9TLFNBQVM7WUFDM0JlLFdBQVdSO1lBQ1hOLGtCQUFrQlE7UUFDcEI7SUFDRjtJQUNGTyxRQUFRdEMsMkVBQXlCQSxDQUM5QkksS0FBSyxDQUNKSCx1Q0FBUSxDQUFDO1FBQ1BLLFdBQVdMLHVDQUFRO1FBQ25CZ0IsSUFBSWhCLHVDQUFRO0lBQ2QsSUFFRDBCLFFBQVEsQ0FBQyxPQUFPLEVBQUV2QixLQUFLLEVBQUVLLEdBQUcsRUFBRTtRQUM3QlgscUZBQWVBLENBQUM7WUFDZFksU0FBU0QsSUFBSUMsT0FBTztZQUNwQkosV0FBV0YsTUFBTUUsU0FBUztZQUMxQkssT0FBTztRQUNUO1FBQ0EsTUFBTWYsMkVBQVFBLENBQUM7WUFDYmMsU0FBU0QsSUFBSUMsT0FBTztZQUNwQndCLGNBQWM7WUFDZEMsWUFBWS9CLE1BQU1hLEVBQUU7WUFDcEJtQixRQUFRO1FBQ1Y7UUFFQSxpRkFBaUY7UUFDakYsTUFBTXZCLFNBQVMsTUFBTUosSUFBSUcsTUFBTSxDQUFDQyxNQUFNLENBQUMwQixnQkFBZ0IsQ0FBQztZQUN0RHhCLE9BQU87Z0JBQ0xFLElBQUliLE1BQU1hLEVBQUU7Z0JBQ1pYLFdBQVdGLE1BQU1FLFNBQVM7WUFDNUI7UUFDRjtRQUVBLE1BQU1HLElBQUlHLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDeUIsTUFBTSxDQUFDO1lBQzdCdkIsT0FBTztnQkFDTEUsSUFBSUosT0FBT0ksRUFBRTtZQUNmO1FBQ0Y7UUFFQSxPQUFPO0lBQ1Q7QUFDSixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2ZlYXR1cmVzL3B1YmxpYy1hcGkvc2VydmVyL2FwaUtleVJvdXRlci50cz83Mjc1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF1ZGl0TG9nIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL2F1ZGl0LWxvZ3MvYXVkaXRMb2dcIjtcbmltcG9ydCB7IGdlbmVyYXRlS2V5U2V0IH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL3B1YmxpYy1hcGkvbGliL2FwaUtleXNcIjtcbmltcG9ydCB7IHRocm93SWZOb0FjY2VzcyB9IGZyb20gXCJAL3NyYy9mZWF0dXJlcy9yYmFjL3V0aWxzL2NoZWNrQWNjZXNzXCI7XG5pbXBvcnQge1xuICBjcmVhdGVUUlBDUm91dGVyLFxuICBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlLFxufSBmcm9tIFwiQC9zcmMvc2VydmVyL2FwaS90cnBjXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcblxuZXhwb3J0IGNvbnN0IGFwaUtleXNSb3V0ZXIgPSBjcmVhdGVUUlBDUm91dGVyKHtcbiAgYnlQcm9qZWN0SWQ6IHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIHByb2plY3RJZDogei5zdHJpbmcoKSxcbiAgICAgIH0pLFxuICAgIClcbiAgICAucXVlcnkoYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICB0aHJvd0lmTm9BY2Nlc3Moe1xuICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIHNjb3BlOiBcImFwaUtleXM6cmVhZFwiLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBjdHgucHJpc21hLmFwaUtleS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgICAgICAgICBleHBpcmVzQXQ6IHRydWUsXG4gICAgICAgICAgbGFzdFVzZWRBdDogdHJ1ZSxcbiAgICAgICAgICBub3RlOiB0cnVlLFxuICAgICAgICAgIHB1YmxpY0tleTogdHJ1ZSxcbiAgICAgICAgICBkaXNwbGF5U2VjcmV0S2V5OiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7XG4gICAgICAgICAgY3JlYXRlZEF0OiBcImFzY1wiLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSksXG4gIGNyZWF0ZTogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgICBub3RlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICB9KSxcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgdGhyb3dJZk5vQWNjZXNzKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICBzY29wZTogXCJhcGlLZXlzOmNyZWF0ZVwiLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcGssIHNrLCBoYXNoZWRTaywgZGlzcGxheVNrIH0gPSBhd2FpdCBnZW5lcmF0ZUtleVNldCgpO1xuXG4gICAgICBjb25zdCBhcGlLZXkgPSBhd2FpdCBjdHgucHJpc21hLmFwaUtleS5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgcHVibGljS2V5OiBwayxcbiAgICAgICAgICBoYXNoZWRTZWNyZXRLZXk6IGhhc2hlZFNrLFxuICAgICAgICAgIGRpc3BsYXlTZWNyZXRLZXk6IGRpc3BsYXlTayxcbiAgICAgICAgICBub3RlOiBpbnB1dC5ub3RlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGF1ZGl0TG9nKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHJlc291cmNlVHlwZTogXCJhcGlLZXlcIixcbiAgICAgICAgcmVzb3VyY2VJZDogYXBpS2V5LmlkLFxuICAgICAgICBhY3Rpb246IFwiY3JlYXRlXCIsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGFwaUtleS5pZCxcbiAgICAgICAgY3JlYXRlZEF0OiBhcGlLZXkuY3JlYXRlZEF0LFxuICAgICAgICBub3RlOiBpbnB1dC5ub3RlLFxuICAgICAgICBwdWJsaWNLZXk6IGFwaUtleS5wdWJsaWNLZXksXG4gICAgICAgIHNlY3JldEtleTogc2ssXG4gICAgICAgIGRpc3BsYXlTZWNyZXRLZXk6IGRpc3BsYXlTayxcbiAgICAgIH07XG4gICAgfSksXG4gIGRlbGV0ZTogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgIH0pLFxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICB0aHJvd0lmTm9BY2Nlc3Moe1xuICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIHNjb3BlOiBcImFwaUtleXM6ZGVsZXRlXCIsXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IGF1ZGl0TG9nKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHJlc291cmNlVHlwZTogXCJhcGlLZXlcIixcbiAgICAgICAgcmVzb3VyY2VJZDogaW5wdXQuaWQsXG4gICAgICAgIGFjdGlvbjogXCJkZWxldGVcIixcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNYWtlIHN1cmUgdGhlIEFQSSBrZXkgZXhpc3RzIGFuZCBiZWxvbmdzIHRvIHRoZSBwcm9qZWN0IHRoZSB1c2VyIGhhcyBhY2Nlc3MgdG9cbiAgICAgIGNvbnN0IGFwaUtleSA9IGF3YWl0IGN0eC5wcmlzbWEuYXBpS2V5LmZpbmRGaXJzdE9yVGhyb3coe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGlkOiBpbnB1dC5pZCxcbiAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBjdHgucHJpc21hLmFwaUtleS5kZWxldGUoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGlkOiBhcGlLZXkuaWQsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSksXG59KTtcbiJdLCJuYW1lcyI6WyJhdWRpdExvZyIsImdlbmVyYXRlS2V5U2V0IiwidGhyb3dJZk5vQWNjZXNzIiwiY3JlYXRlVFJQQ1JvdXRlciIsInByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUiLCJ6IiwiYXBpS2V5c1JvdXRlciIsImJ5UHJvamVjdElkIiwiaW5wdXQiLCJvYmplY3QiLCJwcm9qZWN0SWQiLCJzdHJpbmciLCJxdWVyeSIsImN0eCIsInNlc3Npb24iLCJzY29wZSIsInByaXNtYSIsImFwaUtleSIsImZpbmRNYW55Iiwid2hlcmUiLCJzZWxlY3QiLCJpZCIsImNyZWF0ZWRBdCIsImV4cGlyZXNBdCIsImxhc3RVc2VkQXQiLCJub3RlIiwicHVibGljS2V5IiwiZGlzcGxheVNlY3JldEtleSIsIm9yZGVyQnkiLCJjcmVhdGUiLCJvcHRpb25hbCIsIm11dGF0aW9uIiwicGsiLCJzayIsImhhc2hlZFNrIiwiZGlzcGxheVNrIiwiZGF0YSIsImhhc2hlZFNlY3JldEtleSIsInJlc291cmNlVHlwZSIsInJlc291cmNlSWQiLCJhY3Rpb24iLCJzZWNyZXRLZXkiLCJkZWxldGUiLCJmaW5kRmlyc3RPclRocm93Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/features/public-api/server/apiKeyRouter.ts\n");

/***/ }),

/***/ "(api)/./src/features/rbac/constants/roleAccessRights.ts":
/*!*********************************************************!*\
  !*** ./src/features/rbac/constants/roleAccessRights.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   roleAccessRights: () => (/* binding */ roleAccessRights)\n/* harmony export */ });\nconst scopes = [\n    \"members:read\",\n    \"members:create\",\n    \"members:delete\",\n    \"apiKeys:read\",\n    \"apiKeys:create\",\n    \"apiKeys:delete\",\n    \"objects:publish\",\n    \"objects:bookmark\",\n    \"objects:tag\",\n    \"traces:delete\",\n    \"scores:CUD\",\n    \"project:delete\",\n    \"project:update\",\n    \"project:transfer\",\n    \"datasets:CUD\",\n    \"prompts:CUD\",\n    \"prompts:read\",\n    \"models:CUD\"\n];\nconst roleAccessRights = {\n    OWNER: [\n        \"members:read\",\n        \"members:create\",\n        \"members:delete\",\n        \"apiKeys:read\",\n        \"apiKeys:create\",\n        \"apiKeys:delete\",\n        \"objects:publish\",\n        \"objects:bookmark\",\n        \"objects:tag\",\n        \"traces:delete\",\n        \"scores:CUD\",\n        \"project:delete\",\n        \"project:update\",\n        \"project:transfer\",\n        \"datasets:CUD\",\n        \"prompts:CUD\",\n        \"prompts:read\",\n        \"models:CUD\"\n    ],\n    ADMIN: [\n        \"project:update\",\n        \"members:read\",\n        \"members:create\",\n        \"members:delete\",\n        \"apiKeys:read\",\n        \"apiKeys:create\",\n        \"apiKeys:delete\",\n        \"objects:publish\",\n        \"objects:bookmark\",\n        \"objects:tag\",\n        \"traces:delete\",\n        \"scores:CUD\",\n        \"datasets:CUD\",\n        \"prompts:CUD\",\n        \"prompts:read\",\n        \"models:CUD\"\n    ],\n    MEMBER: [\n        \"members:read\",\n        \"objects:publish\",\n        \"objects:bookmark\",\n        \"objects:tag\",\n        \"scores:CUD\",\n        \"datasets:CUD\",\n        \"prompts:CUD\",\n        \"prompts:read\"\n    ],\n    VIEWER: [\n        \"prompts:read\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvcmJhYy9jb25zdGFudHMvcm9sZUFjY2Vzc1JpZ2h0cy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRUEsTUFBTUEsU0FBUztJQUNiO0lBQ0E7SUFDQTtJQUVBO0lBQ0E7SUFDQTtJQUVBO0lBQ0E7SUFDQTtJQUVBO0lBRUE7SUFFQTtJQUNBO0lBQ0E7SUFFQTtJQUVBO0lBQ0E7SUFFQTtDQUNEO0FBS00sTUFBTUMsbUJBQW9EO0lBQy9EQyxPQUFPO1FBQ0w7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0Q7SUFDREMsT0FBTztRQUNMO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0Q7SUFDREMsUUFBUTtRQUNOO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7S0FDRDtJQUNEQyxRQUFRO1FBQUM7S0FBZTtBQUMxQixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL2ZlYXR1cmVzL3JiYWMvY29uc3RhbnRzL3JvbGVBY2Nlc3NSaWdodHMudHM/MjA3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIE1lbWJlcnNoaXBSb2xlIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5cbmNvbnN0IHNjb3BlcyA9IFtcbiAgXCJtZW1iZXJzOnJlYWRcIixcbiAgXCJtZW1iZXJzOmNyZWF0ZVwiLFxuICBcIm1lbWJlcnM6ZGVsZXRlXCIsXG5cbiAgXCJhcGlLZXlzOnJlYWRcIixcbiAgXCJhcGlLZXlzOmNyZWF0ZVwiLFxuICBcImFwaUtleXM6ZGVsZXRlXCIsXG5cbiAgXCJvYmplY3RzOnB1Ymxpc2hcIixcbiAgXCJvYmplY3RzOmJvb2ttYXJrXCIsXG4gIFwib2JqZWN0czp0YWdcIixcblxuICBcInRyYWNlczpkZWxldGVcIixcblxuICBcInNjb3JlczpDVURcIixcblxuICBcInByb2plY3Q6ZGVsZXRlXCIsXG4gIFwicHJvamVjdDp1cGRhdGVcIixcbiAgXCJwcm9qZWN0OnRyYW5zZmVyXCIsXG5cbiAgXCJkYXRhc2V0czpDVURcIixcblxuICBcInByb21wdHM6Q1VEXCIsXG4gIFwicHJvbXB0czpyZWFkXCIsXG5cbiAgXCJtb2RlbHM6Q1VEXCIsXG5dIGFzIGNvbnN0O1xuXG4vLyB0eXBlIHN0cmluZyBvZiBhbGwgUmVzb3VyY2U6QWN0aW9uLCBlLmcuIFwibWVtYmVyczpyZWFkXCJcbmV4cG9ydCB0eXBlIFNjb3BlID0gKHR5cGVvZiBzY29wZXMpW251bWJlcl07XG5cbmV4cG9ydCBjb25zdCByb2xlQWNjZXNzUmlnaHRzOiBSZWNvcmQ8TWVtYmVyc2hpcFJvbGUsIFNjb3BlW10+ID0ge1xuICBPV05FUjogW1xuICAgIFwibWVtYmVyczpyZWFkXCIsXG4gICAgXCJtZW1iZXJzOmNyZWF0ZVwiLFxuICAgIFwibWVtYmVyczpkZWxldGVcIixcbiAgICBcImFwaUtleXM6cmVhZFwiLFxuICAgIFwiYXBpS2V5czpjcmVhdGVcIixcbiAgICBcImFwaUtleXM6ZGVsZXRlXCIsXG4gICAgXCJvYmplY3RzOnB1Ymxpc2hcIixcbiAgICBcIm9iamVjdHM6Ym9va21hcmtcIixcbiAgICBcIm9iamVjdHM6dGFnXCIsXG4gICAgXCJ0cmFjZXM6ZGVsZXRlXCIsXG4gICAgXCJzY29yZXM6Q1VEXCIsXG4gICAgXCJwcm9qZWN0OmRlbGV0ZVwiLFxuICAgIFwicHJvamVjdDp1cGRhdGVcIixcbiAgICBcInByb2plY3Q6dHJhbnNmZXJcIixcbiAgICBcImRhdGFzZXRzOkNVRFwiLFxuICAgIFwicHJvbXB0czpDVURcIixcbiAgICBcInByb21wdHM6cmVhZFwiLFxuICAgIFwibW9kZWxzOkNVRFwiLFxuICBdLFxuICBBRE1JTjogW1xuICAgIFwicHJvamVjdDp1cGRhdGVcIixcbiAgICBcIm1lbWJlcnM6cmVhZFwiLFxuICAgIFwibWVtYmVyczpjcmVhdGVcIixcbiAgICBcIm1lbWJlcnM6ZGVsZXRlXCIsXG4gICAgXCJhcGlLZXlzOnJlYWRcIixcbiAgICBcImFwaUtleXM6Y3JlYXRlXCIsXG4gICAgXCJhcGlLZXlzOmRlbGV0ZVwiLFxuICAgIFwib2JqZWN0czpwdWJsaXNoXCIsXG4gICAgXCJvYmplY3RzOmJvb2ttYXJrXCIsXG4gICAgXCJvYmplY3RzOnRhZ1wiLFxuICAgIFwidHJhY2VzOmRlbGV0ZVwiLFxuICAgIFwic2NvcmVzOkNVRFwiLFxuICAgIFwiZGF0YXNldHM6Q1VEXCIsXG4gICAgXCJwcm9tcHRzOkNVRFwiLFxuICAgIFwicHJvbXB0czpyZWFkXCIsXG4gICAgXCJtb2RlbHM6Q1VEXCIsXG4gIF0sXG4gIE1FTUJFUjogW1xuICAgIFwibWVtYmVyczpyZWFkXCIsXG4gICAgXCJvYmplY3RzOnB1Ymxpc2hcIixcbiAgICBcIm9iamVjdHM6Ym9va21hcmtcIixcbiAgICBcIm9iamVjdHM6dGFnXCIsXG4gICAgXCJzY29yZXM6Q1VEXCIsXG4gICAgXCJkYXRhc2V0czpDVURcIixcbiAgICBcInByb21wdHM6Q1VEXCIsXG4gICAgXCJwcm9tcHRzOnJlYWRcIixcbiAgXSxcbiAgVklFV0VSOiBbXCJwcm9tcHRzOnJlYWRcIl0sXG59O1xuIl0sIm5hbWVzIjpbInNjb3BlcyIsInJvbGVBY2Nlc3NSaWdodHMiLCJPV05FUiIsIkFETUlOIiwiTUVNQkVSIiwiVklFV0VSIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/features/rbac/constants/roleAccessRights.ts\n");

/***/ }),

/***/ "(api)/./src/features/rbac/server/projectMembersRouter.ts":
/*!**********************************************************!*\
  !*** ./src/features/rbac/server/projectMembersRouter.ts ***!
  \**********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   projectMembersRouter: () => (/* binding */ projectMembersRouter)\n/* harmony export */ });\n/* harmony import */ var _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/features/audit-logs/auditLog */ \"(api)/./src/features/audit-logs/auditLog.ts\");\n/* harmony import */ var _src_features_email_lib_project_invitation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/features/email/lib/project-invitation */ \"(api)/./src/features/email/lib/project-invitation.ts\");\n/* harmony import */ var _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/features/rbac/utils/checkAccess */ \"(api)/./src/features/rbac/utils/checkAccess.ts\");\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_0__, _src_features_email_lib_project_invitation__WEBPACK_IMPORTED_MODULE_1__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__, _trpc_server__WEBPACK_IMPORTED_MODULE_5__, zod__WEBPACK_IMPORTED_MODULE_6__]);\n([_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_0__, _src_features_email_lib_project_invitation__WEBPACK_IMPORTED_MODULE_1__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__, _trpc_server__WEBPACK_IMPORTED_MODULE_5__, zod__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\nconst projectMembersRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.createTRPCRouter)({\n    get: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_6__.string()\n    })).query(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"members:read\"\n        });\n        const memberships = await ctx.prisma.membership.findMany({\n            where: {\n                projectId: input.projectId,\n                project: {\n                    members: {\n                        some: {\n                            userId: ctx.session.user.id\n                        }\n                    }\n                }\n            },\n            include: {\n                user: {\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true\n                    }\n                }\n            }\n        });\n        const invitations = await ctx.prisma.membershipInvitation.findMany({\n            where: {\n                projectId: input.projectId\n            },\n            include: {\n                sender: {\n                    select: {\n                        name: true\n                    }\n                }\n            }\n        });\n        return {\n            memberships: memberships,\n            invitations: invitations\n        };\n    }),\n    delete: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_6__.string(),\n        userId: zod__WEBPACK_IMPORTED_MODULE_6__.string()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"members:delete\"\n        });\n        if (input.userId === ctx.session.user.id) throw new Error(\"You cannot remove yourself from a project\");\n        const membership = await ctx.prisma.membership.findFirst({\n            where: {\n                projectId: input.projectId,\n                userId: input.userId,\n                role: {\n                    not: _prisma_client__WEBPACK_IMPORTED_MODULE_4__.MembershipRole.OWNER\n                }\n            }\n        });\n        if (!membership) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_5__.TRPCError({\n            code: \"NOT_FOUND\"\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_0__.auditLog)({\n            session: ctx.session,\n            resourceType: \"membership\",\n            resourceId: membership.projectId + \"--\" + membership.userId,\n            action: \"delete\",\n            before: membership\n        });\n        // use ids from membership to make sure owners cannot delete themselves\n        return await ctx.prisma.membership.delete({\n            where: {\n                projectId_userId: {\n                    projectId: membership.projectId,\n                    userId: membership.userId\n                }\n            }\n        });\n    }),\n    deleteInvitation: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_6__.string(),\n        projectId: zod__WEBPACK_IMPORTED_MODULE_6__.string()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"members:delete\"\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_0__.auditLog)({\n            session: ctx.session,\n            resourceType: \"membershipInvitation\",\n            resourceId: input.id,\n            action: \"delete\"\n        });\n        return await ctx.prisma.membershipInvitation.delete({\n            where: {\n                id: input.id,\n                projectId: input.projectId\n            }\n        });\n    }),\n    create: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_6__.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_6__.string(),\n        email: zod__WEBPACK_IMPORTED_MODULE_6__.string().email(),\n        role: zod__WEBPACK_IMPORTED_MODULE_6__[\"enum\"]([\n            _prisma_client__WEBPACK_IMPORTED_MODULE_4__.MembershipRole.ADMIN,\n            _prisma_client__WEBPACK_IMPORTED_MODULE_4__.MembershipRole.MEMBER,\n            _prisma_client__WEBPACK_IMPORTED_MODULE_4__.MembershipRole.VIEWER\n        ])\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"members:create\"\n        });\n        const user = await ctx.prisma.user.findUnique({\n            where: {\n                email: input.email.toLowerCase()\n            }\n        });\n        if (user) {\n            const membership = await ctx.prisma.membership.create({\n                data: {\n                    userId: user.id,\n                    projectId: input.projectId,\n                    role: input.role\n                }\n            });\n            await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_0__.auditLog)({\n                session: ctx.session,\n                resourceType: \"membership\",\n                resourceId: input.projectId + \"--\" + user.id,\n                action: \"create\",\n                after: membership\n            });\n            return membership;\n        } else {\n            const invitation = await ctx.prisma.membershipInvitation.create({\n                data: {\n                    projectId: input.projectId,\n                    email: input.email.toLowerCase(),\n                    role: input.role,\n                    senderId: ctx.session.user.id\n                }\n            });\n            await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_0__.auditLog)({\n                session: ctx.session,\n                resourceType: \"membershipInvitation\",\n                resourceId: invitation.id,\n                action: \"create\",\n                after: invitation\n            });\n            const project = await ctx.prisma.project.findFirst({\n                where: {\n                    id: input.projectId\n                }\n            });\n            if (!project) throw new Error(\"Project not found\");\n            await (0,_src_features_email_lib_project_invitation__WEBPACK_IMPORTED_MODULE_1__.sendProjectInvitation)(input.email, ctx.session.user.name, ctx.session.user.email, project.name);\n            return invitation;\n        }\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvcmJhYy9zZXJ2ZXIvcHJvamVjdE1lbWJlcnNSb3V0ZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQThEO0FBQ3NCO0FBQ1o7QUFJekM7QUFDaUI7QUFDUDtBQUNoQjtBQUVsQixNQUFNUSx1QkFBdUJMLHNFQUFnQkEsQ0FBQztJQUNuRE0sS0FBS0wsMkVBQXlCQSxDQUMzQk0sS0FBSyxDQUNKSCx1Q0FBUSxDQUFDO1FBQ1BLLFdBQVdMLHVDQUFRO0lBQ3JCLElBRURPLEtBQUssQ0FBQyxPQUFPLEVBQUVKLEtBQUssRUFBRUssR0FBRyxFQUFFO1FBQzFCYixxRkFBZUEsQ0FBQztZQUNkYyxTQUFTRCxJQUFJQyxPQUFPO1lBQ3BCSixXQUFXRixNQUFNRSxTQUFTO1lBQzFCSyxPQUFPO1FBQ1Q7UUFFQSxNQUFNQyxjQUFjLE1BQU1ILElBQUlJLE1BQU0sQ0FBQ0MsVUFBVSxDQUFDQyxRQUFRLENBQUM7WUFDdkRDLE9BQU87Z0JBQ0xWLFdBQVdGLE1BQU1FLFNBQVM7Z0JBQzFCVyxTQUFTO29CQUNQQyxTQUFTO3dCQUNQQyxNQUFNOzRCQUNKQyxRQUFRWCxJQUFJQyxPQUFPLENBQUNXLElBQUksQ0FBQ0MsRUFBRTt3QkFDN0I7b0JBQ0Y7Z0JBQ0Y7WUFDRjtZQUNBQyxTQUFTO2dCQUNQRixNQUFNO29CQUNKRyxRQUFRO3dCQUNORixJQUFJO3dCQUNKRyxNQUFNO3dCQUNOQyxPQUFPO29CQUNUO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBLE1BQU1DLGNBQWMsTUFBTWxCLElBQUlJLE1BQU0sQ0FBQ2Usb0JBQW9CLENBQUNiLFFBQVEsQ0FBQztZQUNqRUMsT0FBTztnQkFDTFYsV0FBV0YsTUFBTUUsU0FBUztZQUM1QjtZQUNBaUIsU0FBUztnQkFDUE0sUUFBUTtvQkFDTkwsUUFBUTt3QkFDTkMsTUFBTTtvQkFDUjtnQkFDRjtZQUNGO1FBQ0Y7UUFFQSxPQUFPO1lBQUViLGFBQWFBO1lBQWFlLGFBQWFBO1FBQVk7SUFDOUQ7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LEVBQ1hqQixJQUFJQyxPQUFPLENBQUNXLElBQUksQ0FBQ0ksSUFBSSxFQUNyQmhCLElBQUlDLE9BQU8sQ0FBQ1csSUFBSSxDQUFDSyxLQUFLLEVBQ3RCVCxRQUFRUSxJQUFJO1lBR2QsT0FBTzRCO1FBQ1Q7SUFDRjtBQUNKLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvZmVhdHVyZXMvcmJhYy9zZXJ2ZXIvcHJvamVjdE1lbWJlcnNSb3V0ZXIudHM/MmVlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhdWRpdExvZyB9IGZyb20gXCJAL3NyYy9mZWF0dXJlcy9hdWRpdC1sb2dzL2F1ZGl0TG9nXCI7XG5pbXBvcnQgeyBzZW5kUHJvamVjdEludml0YXRpb24gfSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvZW1haWwvbGliL3Byb2plY3QtaW52aXRhdGlvblwiO1xuaW1wb3J0IHsgdGhyb3dJZk5vQWNjZXNzIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL3JiYWMvdXRpbHMvY2hlY2tBY2Nlc3NcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZVRSUENSb3V0ZXIsXG4gIHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUsXG59IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3RycGNcIjtcbmltcG9ydCB7IE1lbWJlcnNoaXBSb2xlIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5pbXBvcnQgeyBUUlBDRXJyb3IgfSBmcm9tIFwiQHRycGMvc2VydmVyXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcblxuZXhwb3J0IGNvbnN0IHByb2plY3RNZW1iZXJzUm91dGVyID0gY3JlYXRlVFJQQ1JvdXRlcih7XG4gIGdldDogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgfSksXG4gICAgKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIHRocm93SWZOb0FjY2Vzcyh7XG4gICAgICAgIHNlc3Npb246IGN0eC5zZXNzaW9uLFxuICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgc2NvcGU6IFwibWVtYmVyczpyZWFkXCIsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbWVtYmVyc2hpcHMgPSBhd2FpdCBjdHgucHJpc21hLm1lbWJlcnNoaXAuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICAgIHByb2plY3Q6IHtcbiAgICAgICAgICAgIG1lbWJlcnM6IHtcbiAgICAgICAgICAgICAgc29tZToge1xuICAgICAgICAgICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgaW52aXRhdGlvbnMgPSBhd2FpdCBjdHgucHJpc21hLm1lbWJlcnNoaXBJbnZpdGF0aW9uLmZpbmRNYW55KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHNlbmRlcjoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHsgbWVtYmVyc2hpcHM6IG1lbWJlcnNoaXBzLCBpbnZpdGF0aW9uczogaW52aXRhdGlvbnMgfTtcbiAgICB9KSxcbiAgZGVsZXRlOiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICAgIHVzZXJJZDogei5zdHJpbmcoKSxcbiAgICAgIH0pLFxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICB0aHJvd0lmTm9BY2Nlc3Moe1xuICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIHNjb3BlOiBcIm1lbWJlcnM6ZGVsZXRlXCIsXG4gICAgICB9KTtcblxuICAgICAgaWYgKGlucHV0LnVzZXJJZCA9PT0gY3R4LnNlc3Npb24udXNlci5pZClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IGNhbm5vdCByZW1vdmUgeW91cnNlbGYgZnJvbSBhIHByb2plY3RcIik7XG5cbiAgICAgIGNvbnN0IG1lbWJlcnNoaXAgPSBhd2FpdCBjdHgucHJpc21hLm1lbWJlcnNoaXAuZmluZEZpcnN0KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICB1c2VySWQ6IGlucHV0LnVzZXJJZCxcbiAgICAgICAgICByb2xlOiB7XG4gICAgICAgICAgICBub3Q6IE1lbWJlcnNoaXBSb2xlLk9XTkVSLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFtZW1iZXJzaGlwKSB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogXCJOT1RfRk9VTkRcIiB9KTtcblxuICAgICAgYXdhaXQgYXVkaXRMb2coe1xuICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgcmVzb3VyY2VUeXBlOiBcIm1lbWJlcnNoaXBcIixcbiAgICAgICAgcmVzb3VyY2VJZDogbWVtYmVyc2hpcC5wcm9qZWN0SWQgKyBcIi0tXCIgKyBtZW1iZXJzaGlwLnVzZXJJZCxcbiAgICAgICAgYWN0aW9uOiBcImRlbGV0ZVwiLFxuICAgICAgICBiZWZvcmU6IG1lbWJlcnNoaXAsXG4gICAgICB9KTtcblxuICAgICAgLy8gdXNlIGlkcyBmcm9tIG1lbWJlcnNoaXAgdG8gbWFrZSBzdXJlIG93bmVycyBjYW5ub3QgZGVsZXRlIHRoZW1zZWx2ZXNcbiAgICAgIHJldHVybiBhd2FpdCBjdHgucHJpc21hLm1lbWJlcnNoaXAuZGVsZXRlKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBwcm9qZWN0SWRfdXNlcklkOiB7XG4gICAgICAgICAgICBwcm9qZWN0SWQ6IG1lbWJlcnNoaXAucHJvamVjdElkLFxuICAgICAgICAgICAgdXNlcklkOiBtZW1iZXJzaGlwLnVzZXJJZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSksXG4gIGRlbGV0ZUludml0YXRpb246IHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICB9KSxcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgdGhyb3dJZk5vQWNjZXNzKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICBzY29wZTogXCJtZW1iZXJzOmRlbGV0ZVwiLFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IGF1ZGl0TG9nKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHJlc291cmNlVHlwZTogXCJtZW1iZXJzaGlwSW52aXRhdGlvblwiLFxuICAgICAgICByZXNvdXJjZUlkOiBpbnB1dC5pZCxcbiAgICAgICAgYWN0aW9uOiBcImRlbGV0ZVwiLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBhd2FpdCBjdHgucHJpc21hLm1lbWJlcnNoaXBJbnZpdGF0aW9uLmRlbGV0ZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWQ6IGlucHV0LmlkLFxuICAgICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSksXG4gIGNyZWF0ZTogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgICBlbWFpbDogei5zdHJpbmcoKS5lbWFpbCgpLFxuICAgICAgICByb2xlOiB6LmVudW0oW1xuICAgICAgICAgIE1lbWJlcnNoaXBSb2xlLkFETUlOLFxuICAgICAgICAgIE1lbWJlcnNoaXBSb2xlLk1FTUJFUixcbiAgICAgICAgICBNZW1iZXJzaGlwUm9sZS5WSUVXRVIsXG4gICAgICAgIF0pLFxuICAgICAgfSksXG4gICAgKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIHRocm93SWZOb0FjY2Vzcyh7XG4gICAgICAgIHNlc3Npb246IGN0eC5zZXNzaW9uLFxuICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgc2NvcGU6IFwibWVtYmVyczpjcmVhdGVcIixcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgY3R4LnByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGVtYWlsOiBpbnB1dC5lbWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICBjb25zdCBtZW1iZXJzaGlwID0gYXdhaXQgY3R4LnByaXNtYS5tZW1iZXJzaGlwLmNyZWF0ZSh7XG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgICByb2xlOiBpbnB1dC5yb2xlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBhdWRpdExvZyh7XG4gICAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgICAgcmVzb3VyY2VUeXBlOiBcIm1lbWJlcnNoaXBcIixcbiAgICAgICAgICByZXNvdXJjZUlkOiBpbnB1dC5wcm9qZWN0SWQgKyBcIi0tXCIgKyB1c2VyLmlkLFxuICAgICAgICAgIGFjdGlvbjogXCJjcmVhdGVcIixcbiAgICAgICAgICBhZnRlcjogbWVtYmVyc2hpcCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtZW1iZXJzaGlwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaW52aXRhdGlvbiA9IGF3YWl0IGN0eC5wcmlzbWEubWVtYmVyc2hpcEludml0YXRpb24uY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICAgIGVtYWlsOiBpbnB1dC5lbWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgcm9sZTogaW5wdXQucm9sZSxcbiAgICAgICAgICAgIHNlbmRlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBhdWRpdExvZyh7XG4gICAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgICAgcmVzb3VyY2VUeXBlOiBcIm1lbWJlcnNoaXBJbnZpdGF0aW9uXCIsXG4gICAgICAgICAgcmVzb3VyY2VJZDogaW52aXRhdGlvbi5pZCxcbiAgICAgICAgICBhY3Rpb246IFwiY3JlYXRlXCIsXG4gICAgICAgICAgYWZ0ZXI6IGludml0YXRpb24sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHByb2plY3QgPSBhd2FpdCBjdHgucHJpc21hLnByb2plY3QuZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgaWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXByb2plY3QpIHRocm93IG5ldyBFcnJvcihcIlByb2plY3Qgbm90IGZvdW5kXCIpO1xuXG4gICAgICAgIGF3YWl0IHNlbmRQcm9qZWN0SW52aXRhdGlvbihcbiAgICAgICAgICBpbnB1dC5lbWFpbCxcbiAgICAgICAgICBjdHguc2Vzc2lvbi51c2VyLm5hbWUhLFxuICAgICAgICAgIGN0eC5zZXNzaW9uLnVzZXIuZW1haWwhLFxuICAgICAgICAgIHByb2plY3QubmFtZSxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gaW52aXRhdGlvbjtcbiAgICAgIH1cbiAgICB9KSxcbn0pO1xuIl0sIm5hbWVzIjpbImF1ZGl0TG9nIiwic2VuZFByb2plY3RJbnZpdGF0aW9uIiwidGhyb3dJZk5vQWNjZXNzIiwiY3JlYXRlVFJQQ1JvdXRlciIsInByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUiLCJNZW1iZXJzaGlwUm9sZSIsIlRSUENFcnJvciIsInoiLCJwcm9qZWN0TWVtYmVyc1JvdXRlciIsImdldCIsImlucHV0Iiwib2JqZWN0IiwicHJvamVjdElkIiwic3RyaW5nIiwicXVlcnkiLCJjdHgiLCJzZXNzaW9uIiwic2NvcGUiLCJtZW1iZXJzaGlwcyIsInByaXNtYSIsIm1lbWJlcnNoaXAiLCJmaW5kTWFueSIsIndoZXJlIiwicHJvamVjdCIsIm1lbWJlcnMiLCJzb21lIiwidXNlcklkIiwidXNlciIsImlkIiwiaW5jbHVkZSIsInNlbGVjdCIsIm5hbWUiLCJlbWFpbCIsImludml0YXRpb25zIiwibWVtYmVyc2hpcEludml0YXRpb24iLCJzZW5kZXIiLCJkZWxldGUiLCJtdXRhdGlvbiIsIkVycm9yIiwiZmluZEZpcnN0Iiwicm9sZSIsIm5vdCIsIk9XTkVSIiwiY29kZSIsInJlc291cmNlVHlwZSIsInJlc291cmNlSWQiLCJhY3Rpb24iLCJiZWZvcmUiLCJwcm9qZWN0SWRfdXNlcklkIiwiZGVsZXRlSW52aXRhdGlvbiIsImNyZWF0ZSIsImVudW0iLCJBRE1JTiIsIk1FTUJFUiIsIlZJRVdFUiIsImZpbmRVbmlxdWUiLCJ0b0xvd2VyQ2FzZSIsImRhdGEiLCJhZnRlciIsImludml0YXRpb24iLCJzZW5kZXJJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/features/rbac/server/projectMembersRouter.ts\n");

/***/ }),

/***/ "(api)/./src/features/rbac/utils/checkAccess.ts":
/*!************************************************!*\
  !*** ./src/features/rbac/utils/checkAccess.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hasAccess: () => (/* binding */ hasAccess),\n/* harmony export */   throwIfNoAccess: () => (/* binding */ throwIfNoAccess),\n/* harmony export */   useHasAccess: () => (/* binding */ useHasAccess)\n/* harmony export */ });\n/* harmony import */ var _src_features_rbac_constants_roleAccessRights__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/features/rbac/constants/roleAccessRights */ \"(api)/./src/features/rbac/constants/roleAccessRights.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_trpc_server__WEBPACK_IMPORTED_MODULE_1__]);\n_trpc_server__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n/**\n * Check if user has access to the given scope, for use in TRPC resolvers\n * @throws TRPCError(\"UNAUTHORIZED\") if user does not have access\n */ const throwIfNoAccess = (p)=>{\n    if (!hasAccess(p)) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_1__.TRPCError({\n        code: \"UNAUTHORIZED\",\n        message: \"Unauthorized, user does not have access to this resource or action\"\n    });\n};\n/**\n * React hook to check if user has access to the given scope\n * @returns true if user has access, false otherwise or while loading\n */ const useHasAccess = (p)=>{\n    const session = (0,next_auth_react__WEBPACK_IMPORTED_MODULE_2__.useSession)();\n    return hasAccess({\n        session: session.data,\n        ...p\n    });\n};\n// For use in UI components as function, if session is already available\nfunction hasAccess(p) {\n    const isAdmin = \"role\" in p ? p.admin : p.session?.user?.admin;\n    if (isAdmin && p.scope.endsWith(\":read\")) return true;\n    const projectRole = \"role\" in p ? p.role : p.session?.user?.projects.find((project)=>project.id === p.projectId)?.role;\n    if (projectRole === undefined) return false;\n    return _src_features_rbac_constants_roleAccessRights__WEBPACK_IMPORTED_MODULE_0__.roleAccessRights[projectRole].includes(p.scope);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvcmJhYy91dGlscy9jaGVja0FjY2Vzcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBR3dEO0FBRWY7QUFFSTtBQWM3Qzs7O0NBR0MsR0FDTSxNQUFNRyxrQkFBa0IsQ0FBQ0M7SUFDOUIsSUFBSSxDQUFDQyxVQUFVRCxJQUNiLE1BQU0sSUFBSUgsbURBQVNBLENBQUM7UUFDbEJLLE1BQU07UUFDTkMsU0FDRTtJQUNKO0FBQ0osRUFBRTtBQUVGOzs7Q0FHQyxHQUNNLE1BQU1DLGVBQWUsQ0FBQ0o7SUFDM0IsTUFBTUssVUFBVVAsMkRBQVVBO0lBQzFCLE9BQU9HLFVBQVU7UUFBRUksU0FBU0EsUUFBUUMsSUFBSTtRQUFFLEdBQUdOLENBQUM7SUFBQztBQUNqRCxFQUFFO0FBRUYsd0VBQXdFO0FBQ2pFLFNBQVNDLFVBQVVELENBQWtCO0lBQzFDLE1BQU1PLFVBQVUsVUFBVVAsSUFBSUEsRUFBRVEsS0FBSyxHQUFHUixFQUFFSyxPQUFPLEVBQUVJLE1BQU1EO0lBQ3pELElBQUlELFdBQVdQLEVBQUVVLEtBQUssQ0FBQ0MsUUFBUSxDQUFDLFVBQVUsT0FBTztJQUVqRCxNQUFNQyxjQUNKLFVBQVVaLElBQ05BLEVBQUVhLElBQUksR0FDTmIsRUFBRUssT0FBTyxFQUFFSSxNQUFNSyxTQUFTQyxLQUFLLENBQUNDLFVBQVlBLFFBQVFDLEVBQUUsS0FBS2pCLEVBQUVrQixTQUFTLEdBQ2xFTDtJQUNWLElBQUlELGdCQUFnQk8sV0FBVyxPQUFPO0lBRXRDLE9BQU92QiwyRkFBZ0IsQ0FBQ2dCLFlBQVksQ0FBQ1EsUUFBUSxDQUFDcEIsRUFBRVUsS0FBSztBQUN2RCIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9mZWF0dXJlcy9yYmFjL3V0aWxzL2NoZWNrQWNjZXNzLnRzPzkxNzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgcm9sZUFjY2Vzc1JpZ2h0cyxcbiAgdHlwZSBTY29wZSxcbn0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL3JiYWMvY29uc3RhbnRzL3JvbGVBY2Nlc3NSaWdodHNcIjtcbmltcG9ydCB7IHR5cGUgTWVtYmVyc2hpcFJvbGUgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcbmltcG9ydCB7IFRSUENFcnJvciB9IGZyb20gXCJAdHJwYy9zZXJ2ZXJcIjtcbmltcG9ydCB7IHR5cGUgU2Vzc2lvbiB9IGZyb20gXCJuZXh0LWF1dGhcIjtcbmltcG9ydCB7IHVzZVNlc3Npb24gfSBmcm9tIFwibmV4dC1hdXRoL3JlYWN0XCI7XG5cbnR5cGUgSGFzQWNjZXNzUGFyYW1zID1cbiAgfCB7XG4gICAgICByb2xlOiBNZW1iZXJzaGlwUm9sZTtcbiAgICAgIHNjb3BlOiBTY29wZTtcbiAgICAgIGFkbWluPzogYm9vbGVhbjsgLy8gcHJvcCB1c2VyLmFkbWluXG4gICAgfVxuICB8IHtcbiAgICAgIHNlc3Npb246IG51bGwgfCBTZXNzaW9uO1xuICAgICAgcHJvamVjdElkOiBzdHJpbmc7XG4gICAgICBzY29wZTogU2NvcGU7XG4gICAgfTtcblxuLyoqXG4gKiBDaGVjayBpZiB1c2VyIGhhcyBhY2Nlc3MgdG8gdGhlIGdpdmVuIHNjb3BlLCBmb3IgdXNlIGluIFRSUEMgcmVzb2x2ZXJzXG4gKiBAdGhyb3dzIFRSUENFcnJvcihcIlVOQVVUSE9SSVpFRFwiKSBpZiB1c2VyIGRvZXMgbm90IGhhdmUgYWNjZXNzXG4gKi9cbmV4cG9ydCBjb25zdCB0aHJvd0lmTm9BY2Nlc3MgPSAocDogSGFzQWNjZXNzUGFyYW1zKSA9PiB7XG4gIGlmICghaGFzQWNjZXNzKHApKVxuICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgY29kZTogXCJVTkFVVEhPUklaRURcIixcbiAgICAgIG1lc3NhZ2U6XG4gICAgICAgIFwiVW5hdXRob3JpemVkLCB1c2VyIGRvZXMgbm90IGhhdmUgYWNjZXNzIHRvIHRoaXMgcmVzb3VyY2Ugb3IgYWN0aW9uXCIsXG4gICAgfSk7XG59O1xuXG4vKipcbiAqIFJlYWN0IGhvb2sgdG8gY2hlY2sgaWYgdXNlciBoYXMgYWNjZXNzIHRvIHRoZSBnaXZlbiBzY29wZVxuICogQHJldHVybnMgdHJ1ZSBpZiB1c2VyIGhhcyBhY2Nlc3MsIGZhbHNlIG90aGVyd2lzZSBvciB3aGlsZSBsb2FkaW5nXG4gKi9cbmV4cG9ydCBjb25zdCB1c2VIYXNBY2Nlc3MgPSAocDogeyBwcm9qZWN0SWQ6IHN0cmluZzsgc2NvcGU6IFNjb3BlIH0pID0+IHtcbiAgY29uc3Qgc2Vzc2lvbiA9IHVzZVNlc3Npb24oKTtcbiAgcmV0dXJuIGhhc0FjY2Vzcyh7IHNlc3Npb246IHNlc3Npb24uZGF0YSwgLi4ucCB9KTtcbn07XG5cbi8vIEZvciB1c2UgaW4gVUkgY29tcG9uZW50cyBhcyBmdW5jdGlvbiwgaWYgc2Vzc2lvbiBpcyBhbHJlYWR5IGF2YWlsYWJsZVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0FjY2VzcyhwOiBIYXNBY2Nlc3NQYXJhbXMpOiBib29sZWFuIHtcbiAgY29uc3QgaXNBZG1pbiA9IFwicm9sZVwiIGluIHAgPyBwLmFkbWluIDogcC5zZXNzaW9uPy51c2VyPy5hZG1pbjtcbiAgaWYgKGlzQWRtaW4gJiYgcC5zY29wZS5lbmRzV2l0aChcIjpyZWFkXCIpKSByZXR1cm4gdHJ1ZTtcblxuICBjb25zdCBwcm9qZWN0Um9sZTogTWVtYmVyc2hpcFJvbGUgfCB1bmRlZmluZWQgPVxuICAgIFwicm9sZVwiIGluIHBcbiAgICAgID8gcC5yb2xlXG4gICAgICA6IHAuc2Vzc2lvbj8udXNlcj8ucHJvamVjdHMuZmluZCgocHJvamVjdCkgPT4gcHJvamVjdC5pZCA9PT0gcC5wcm9qZWN0SWQpXG4gICAgICAgICAgPy5yb2xlO1xuICBpZiAocHJvamVjdFJvbGUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlO1xuXG4gIHJldHVybiByb2xlQWNjZXNzUmlnaHRzW3Byb2plY3RSb2xlXS5pbmNsdWRlcyhwLnNjb3BlKTtcbn1cbiJdLCJuYW1lcyI6WyJyb2xlQWNjZXNzUmlnaHRzIiwiVFJQQ0Vycm9yIiwidXNlU2Vzc2lvbiIsInRocm93SWZOb0FjY2VzcyIsInAiLCJoYXNBY2Nlc3MiLCJjb2RlIiwibWVzc2FnZSIsInVzZUhhc0FjY2VzcyIsInNlc3Npb24iLCJkYXRhIiwiaXNBZG1pbiIsImFkbWluIiwidXNlciIsInNjb3BlIiwiZW5kc1dpdGgiLCJwcm9qZWN0Um9sZSIsInJvbGUiLCJwcm9qZWN0cyIsImZpbmQiLCJwcm9qZWN0IiwiaWQiLCJwcm9qZWN0SWQiLCJ1bmRlZmluZWQiLCJpbmNsdWRlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/features/rbac/utils/checkAccess.ts\n");

/***/ }),

/***/ "(api)/./src/features/usage-metering/server/usageMeteringRouter.ts":
/*!*******************************************************************!*\
  !*** ./src/features/usage-metering/server/usageMeteringRouter.ts ***!
  \*******************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usageMeteringRouter: () => (/* binding */ usageMeteringRouter)\n/* harmony export */ });\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_1__]);\n([_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst usageMeteringRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.createTRPCRouter)({\n    last30d: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_1__.string()\n    })).query(async ({ input, ctx })=>{\n        const thirtyDaysAgo = new Date();\n        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n        thirtyDaysAgo.setHours(0, 0, 0, 0);\n        const usage = await ctx.prisma.observation.count({\n            where: {\n                projectId: input.projectId,\n                startTime: {\n                    gte: thirtyDaysAgo\n                }\n            }\n        });\n        return usage;\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvZmVhdHVyZXMvdXNhZ2UtbWV0ZXJpbmcvc2VydmVyL3VzYWdlTWV0ZXJpbmdSb3V0ZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRytCO0FBQ047QUFFbEIsTUFBTUcsc0JBQXNCSCxzRUFBZ0JBLENBQUM7SUFDbERJLFNBQVNILDJFQUF5QkEsQ0FDL0JJLEtBQUssQ0FDSkgsdUNBQVEsQ0FBQztRQUNQSyxXQUFXTCx1Q0FBUTtJQUNyQixJQUVETyxLQUFLLENBQUMsT0FBTyxFQUFFSixLQUFLLEVBQUVLLEdBQUcsRUFBRTtRQUMxQixNQUFNQyxnQkFBZ0IsSUFBSUM7UUFDMUJELGNBQWNFLE9BQU8sQ0FBQ0YsY0FBY0csT0FBTyxLQUFLO1FBQ2hESCxjQUFjSSxRQUFRLENBQUMsR0FBRyxHQUFHLEdBQUc7UUFFaEMsTUFBTUMsUUFBUSxNQUFNTixJQUFJTyxNQUFNLENBQUNDLFdBQVcsQ0FBQ0MsS0FBSyxDQUFDO1lBQy9DQyxPQUFPO2dCQUNMYixXQUFXRixNQUFNRSxTQUFTO2dCQUUxQmMsV0FBVztvQkFDVEMsS0FBS1g7Z0JBQ1A7WUFDRjtRQUNGO1FBRUEsT0FBT0s7SUFDVDtBQUNKLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvZmVhdHVyZXMvdXNhZ2UtbWV0ZXJpbmcvc2VydmVyL3VzYWdlTWV0ZXJpbmdSb3V0ZXIudHM/MzUwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBjcmVhdGVUUlBDUm91dGVyLFxuICBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlLFxufSBmcm9tIFwiQC9zcmMvc2VydmVyL2FwaS90cnBjXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcblxuZXhwb3J0IGNvbnN0IHVzYWdlTWV0ZXJpbmdSb3V0ZXIgPSBjcmVhdGVUUlBDUm91dGVyKHtcbiAgbGFzdDMwZDogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgfSksXG4gICAgKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIGNvbnN0IHRoaXJ0eURheXNBZ28gPSBuZXcgRGF0ZSgpO1xuICAgICAgdGhpcnR5RGF5c0Fnby5zZXREYXRlKHRoaXJ0eURheXNBZ28uZ2V0RGF0ZSgpIC0gMzApO1xuICAgICAgdGhpcnR5RGF5c0Fnby5zZXRIb3VycygwLCAwLCAwLCAwKTtcblxuICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBjdHgucHJpc21hLm9ic2VydmF0aW9uLmNvdW50KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcblxuICAgICAgICAgIHN0YXJ0VGltZToge1xuICAgICAgICAgICAgZ3RlOiB0aGlydHlEYXlzQWdvLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHVzYWdlO1xuICAgIH0pLFxufSk7XG4iXSwibmFtZXMiOlsiY3JlYXRlVFJQQ1JvdXRlciIsInByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUiLCJ6IiwidXNhZ2VNZXRlcmluZ1JvdXRlciIsImxhc3QzMGQiLCJpbnB1dCIsIm9iamVjdCIsInByb2plY3RJZCIsInN0cmluZyIsInF1ZXJ5IiwiY3R4IiwidGhpcnR5RGF5c0FnbyIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInNldEhvdXJzIiwidXNhZ2UiLCJwcmlzbWEiLCJvYnNlcnZhdGlvbiIsImNvdW50Iiwid2hlcmUiLCJzdGFydFRpbWUiLCJndGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/features/usage-metering/server/usageMeteringRouter.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/definitions/observationsTable.ts":
/*!*********************************************************!*\
  !*** ./src/server/api/definitions/observationsTable.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   observationsTableCols: () => (/* binding */ observationsTableCols),\n/* harmony export */   observationsTableColsWithOptions: () => (/* binding */ observationsTableColsWithOptions)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\n// to be used server side\nconst observationsTableCols = [\n    {\n        name: \"id\",\n        id: \"id\",\n        type: \"string\",\n        internal: 'o.\"id\"'\n    },\n    {\n        name: \"name\",\n        id: \"name\",\n        type: \"stringOptions\",\n        internal: 'o.\"name\"',\n        options: []\n    },\n    {\n        name: \"traceId\",\n        id: \"traceId\",\n        type: \"string\",\n        internal: 't.\"id\"'\n    },\n    {\n        name: \"traceName\",\n        id: \"traceName\",\n        type: \"stringOptions\",\n        internal: 't.\"name\"',\n        options: []\n    },\n    {\n        name: \"userId\",\n        id: \"userId\",\n        type: \"string\",\n        internal: 't.\"user_id\"'\n    },\n    {\n        name: \"start_time\",\n        id: \"startTime\",\n        type: \"datetime\",\n        internal: 'o.\"start_time\"'\n    },\n    {\n        name: \"end_time\",\n        id: \"endTime\",\n        type: \"datetime\",\n        internal: 'o.\"end_time\"'\n    },\n    {\n        name: \"latency (s)\",\n        id: \"latency\",\n        type: \"number\",\n        internal: '\"latency\"'\n    },\n    {\n        name: \"Cost ($)\",\n        type: \"number\",\n        internal: 'o.\"calculated_total_cost\"'\n    },\n    {\n        name: \"level\",\n        id: \"level\",\n        type: \"stringOptions\",\n        internal: 'o.\"level\"::text',\n        options: Object.values(_prisma_client__WEBPACK_IMPORTED_MODULE_0__.ObservationLevel).map((value)=>({\n                value\n            }))\n    },\n    {\n        name: \"Status Message\",\n        id: \"statusMessage\",\n        type: \"string\",\n        internal: 'o.\"status_message\"'\n    },\n    {\n        name: \"model\",\n        id: \"model\",\n        type: \"stringOptions\",\n        internal: 'o.\"model\"',\n        options: []\n    },\n    {\n        name: \"metadata\",\n        id: \"metadata\",\n        type: \"stringObject\",\n        internal: 'o.\"metadata\"'\n    },\n    {\n        name: \"scores_avg\",\n        id: \"scores_avg\",\n        type: \"numberObject\",\n        internal: \"scores_avg\"\n    },\n    {\n        name: \"version\",\n        id: \"version\",\n        type: \"string\",\n        internal: 'o.\"version\"'\n    }\n];\nfunction observationsTableColsWithOptions(options) {\n    return observationsTableCols.map((col)=>{\n        if (col.name === \"model\") {\n            return {\n                ...col,\n                options: options?.model ?? []\n            };\n        }\n        if (col.name === \"name\") {\n            return {\n                ...col,\n                options: options?.name ?? []\n            };\n        }\n        if (col.name === \"traceName\") {\n            return {\n                ...col,\n                options: options?.traceName ?? []\n            };\n        }\n        if (col.name === \"scores_avg\") {\n            return {\n                ...col,\n                keyOptions: options?.scores_avg ?? []\n            };\n        }\n        return col;\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9kZWZpbml0aW9ucy9vYnNlcnZhdGlvbnNUYWJsZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBSWtEO0FBRWxELHlCQUF5QjtBQUNsQixNQUFNQyx3QkFBNEM7SUFDdkQ7UUFDRUMsTUFBTTtRQUNOQyxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsVUFBVTtJQUNaO0lBQ0E7UUFDRUgsTUFBTTtRQUNOQyxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsVUFBVTtRQUNWQyxTQUFTLEVBQUU7SUFDYjtJQUNBO1FBQUVKLE1BQU07UUFBV0MsSUFBSTtRQUFXQyxNQUFNO1FBQVVDLFVBQVU7SUFBUztJQUNyRTtRQUNFSCxNQUFNO1FBQ05DLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxVQUFVO1FBQ1ZDLFNBQVMsRUFBRTtJQUNiO0lBQ0E7UUFBRUosTUFBTTtRQUFVQyxJQUFJO1FBQVVDLE1BQU07UUFBVUMsVUFBVTtJQUFjO0lBQ3hFO1FBQ0VILE1BQU07UUFDTkMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFVBQVU7SUFDWjtJQUNBO1FBQ0VILE1BQU07UUFDTkMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFVBQVU7SUFDWjtJQUNBO1FBQ0VILE1BQU07UUFDTkMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFVBQVU7SUFDWjtJQUNBO1FBQ0VILE1BQU07UUFDTkUsTUFBTTtRQUNOQyxVQUFVO0lBQ1o7SUFDQTtRQUNFSCxNQUFNO1FBQ05DLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxVQUFVO1FBQ1ZDLFNBQVNDLE9BQU9DLE1BQU0sQ0FBQ1IsNERBQWdCQSxFQUFFUyxHQUFHLENBQUMsQ0FBQ0MsUUFBVztnQkFBRUE7WUFBTTtJQUNuRTtJQUNBO1FBQ0VSLE1BQU07UUFDTkMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFVBQVU7SUFDWjtJQUNBO1FBQ0VILE1BQU07UUFDTkMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFVBQVU7UUFDVkMsU0FBUyxFQUFFO0lBQ2I7SUFDQTtRQUNFSixNQUFNO1FBQ05DLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxVQUFVO0lBQ1o7SUFDQTtRQUNFSCxNQUFNO1FBQ05DLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxVQUFVO0lBQ1o7SUFDQTtRQUNFSCxNQUFNO1FBQ05DLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxVQUFVO0lBQ1o7Q0FDRCxDQUFDO0FBV0ssU0FBU00saUNBQ2RMLE9BQTRCO0lBRTVCLE9BQU9MLHNCQUFzQlEsR0FBRyxDQUFDLENBQUNHO1FBQ2hDLElBQUlBLElBQUlWLElBQUksS0FBSyxTQUFTO1lBQ3hCLE9BQU87Z0JBQUUsR0FBR1UsR0FBRztnQkFBRU4sU0FBU0EsU0FBU08sU0FBUyxFQUFFO1lBQUM7UUFDakQ7UUFDQSxJQUFJRCxJQUFJVixJQUFJLEtBQUssUUFBUTtZQUN2QixPQUFPO2dCQUFFLEdBQUdVLEdBQUc7Z0JBQUVOLFNBQVNBLFNBQVNKLFFBQVEsRUFBRTtZQUFDO1FBQ2hEO1FBQ0EsSUFBSVUsSUFBSVYsSUFBSSxLQUFLLGFBQWE7WUFDNUIsT0FBTztnQkFBRSxHQUFHVSxHQUFHO2dCQUFFTixTQUFTQSxTQUFTUSxhQUFhLEVBQUU7WUFBQztRQUNyRDtRQUNBLElBQUlGLElBQUlWLElBQUksS0FBSyxjQUFjO1lBQzdCLE9BQU87Z0JBQUUsR0FBR1UsR0FBRztnQkFBRUcsWUFBWVQsU0FBU1UsY0FBYyxFQUFFO1lBQUM7UUFDekQ7UUFDQSxPQUFPSjtJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvc2VydmVyL2FwaS9kZWZpbml0aW9ucy9vYnNlcnZhdGlvbnNUYWJsZS50cz8xM2NkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHR5cGUgT3B0aW9uc0RlZmluaXRpb24sXG4gIHR5cGUgQ29sdW1uRGVmaW5pdGlvbixcbn0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvaW50ZXJmYWNlcy90YWJsZURlZmluaXRpb25cIjtcbmltcG9ydCB7IE9ic2VydmF0aW9uTGV2ZWwgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuLy8gdG8gYmUgdXNlZCBzZXJ2ZXIgc2lkZVxuZXhwb3J0IGNvbnN0IG9ic2VydmF0aW9uc1RhYmxlQ29sczogQ29sdW1uRGVmaW5pdGlvbltdID0gW1xuICB7XG4gICAgbmFtZTogXCJpZFwiLFxuICAgIGlkOiBcImlkXCIsXG4gICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICBpbnRlcm5hbDogJ28uXCJpZFwiJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwibmFtZVwiLFxuICAgIGlkOiBcIm5hbWVcIixcbiAgICB0eXBlOiBcInN0cmluZ09wdGlvbnNcIixcbiAgICBpbnRlcm5hbDogJ28uXCJuYW1lXCInLFxuICAgIG9wdGlvbnM6IFtdLCAvLyB0byBiZSBhZGRlZCBhdCBydW50aW1lXG4gIH0sXG4gIHsgbmFtZTogXCJ0cmFjZUlkXCIsIGlkOiBcInRyYWNlSWRcIiwgdHlwZTogXCJzdHJpbmdcIiwgaW50ZXJuYWw6ICd0LlwiaWRcIicgfSxcbiAge1xuICAgIG5hbWU6IFwidHJhY2VOYW1lXCIsXG4gICAgaWQ6IFwidHJhY2VOYW1lXCIsXG4gICAgdHlwZTogXCJzdHJpbmdPcHRpb25zXCIsXG4gICAgaW50ZXJuYWw6ICd0LlwibmFtZVwiJyxcbiAgICBvcHRpb25zOiBbXSwgLy8gdG8gYmUgYWRkZWQgYXQgcnVudGltZVxuICB9LFxuICB7IG5hbWU6IFwidXNlcklkXCIsIGlkOiBcInVzZXJJZFwiLCB0eXBlOiBcInN0cmluZ1wiLCBpbnRlcm5hbDogJ3QuXCJ1c2VyX2lkXCInIH0sXG4gIHtcbiAgICBuYW1lOiBcInN0YXJ0X3RpbWVcIixcbiAgICBpZDogXCJzdGFydFRpbWVcIixcbiAgICB0eXBlOiBcImRhdGV0aW1lXCIsXG4gICAgaW50ZXJuYWw6ICdvLlwic3RhcnRfdGltZVwiJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiZW5kX3RpbWVcIixcbiAgICBpZDogXCJlbmRUaW1lXCIsXG4gICAgdHlwZTogXCJkYXRldGltZVwiLFxuICAgIGludGVybmFsOiAnby5cImVuZF90aW1lXCInLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJsYXRlbmN5IChzKVwiLFxuICAgIGlkOiBcImxhdGVuY3lcIixcbiAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgIGludGVybmFsOiAnXCJsYXRlbmN5XCInLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJDb3N0ICgkKVwiLFxuICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgaW50ZXJuYWw6ICdvLlwiY2FsY3VsYXRlZF90b3RhbF9jb3N0XCInLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJsZXZlbFwiLFxuICAgIGlkOiBcImxldmVsXCIsXG4gICAgdHlwZTogXCJzdHJpbmdPcHRpb25zXCIsXG4gICAgaW50ZXJuYWw6ICdvLlwibGV2ZWxcIjo6dGV4dCcsXG4gICAgb3B0aW9uczogT2JqZWN0LnZhbHVlcyhPYnNlcnZhdGlvbkxldmVsKS5tYXAoKHZhbHVlKSA9PiAoeyB2YWx1ZSB9KSksXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlN0YXR1cyBNZXNzYWdlXCIsXG4gICAgaWQ6IFwic3RhdHVzTWVzc2FnZVwiLFxuICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgaW50ZXJuYWw6ICdvLlwic3RhdHVzX21lc3NhZ2VcIicsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIm1vZGVsXCIsXG4gICAgaWQ6IFwibW9kZWxcIixcbiAgICB0eXBlOiBcInN0cmluZ09wdGlvbnNcIixcbiAgICBpbnRlcm5hbDogJ28uXCJtb2RlbFwiJyxcbiAgICBvcHRpb25zOiBbXSwgLy8gdG8gYmUgYWRkZWQgYXQgcnVudGltZVxuICB9LFxuICB7XG4gICAgbmFtZTogXCJtZXRhZGF0YVwiLFxuICAgIGlkOiBcIm1ldGFkYXRhXCIsXG4gICAgdHlwZTogXCJzdHJpbmdPYmplY3RcIixcbiAgICBpbnRlcm5hbDogJ28uXCJtZXRhZGF0YVwiJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwic2NvcmVzX2F2Z1wiLFxuICAgIGlkOiBcInNjb3Jlc19hdmdcIixcbiAgICB0eXBlOiBcIm51bWJlck9iamVjdFwiLFxuICAgIGludGVybmFsOiBcInNjb3Jlc19hdmdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwidmVyc2lvblwiLFxuICAgIGlkOiBcInZlcnNpb25cIixcbiAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgIGludGVybmFsOiAnby5cInZlcnNpb25cIicsXG4gIH0sXG5dO1xuXG4vLyB0byBiZSB1c2VkIGNsaWVudCBzaWRlLCBpbnNlcnQgb3B0aW9ucyBmb3IgdXNlIGluIGZpbHRlci1idWlsZGVyXG4vLyBhbGxvd3MgZm9yIHVuZGVmaW5lZCBvcHRpb25zLCB0byBvZmZlciBmaWx0ZXJzIHdoaWxlIG9wdGlvbnMgYXJlIHN0aWxsIGxvYWRpbmdcbmV4cG9ydCB0eXBlIE9ic2VydmF0aW9uT3B0aW9ucyA9IHtcbiAgbW9kZWw6IEFycmF5PE9wdGlvbnNEZWZpbml0aW9uPjtcbiAgbmFtZTogQXJyYXk8T3B0aW9uc0RlZmluaXRpb24+O1xuICB0cmFjZU5hbWU6IEFycmF5PE9wdGlvbnNEZWZpbml0aW9uPjtcbiAgc2NvcmVzX2F2ZzogQXJyYXk8c3RyaW5nPjtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBvYnNlcnZhdGlvbnNUYWJsZUNvbHNXaXRoT3B0aW9ucyhcbiAgb3B0aW9ucz86IE9ic2VydmF0aW9uT3B0aW9ucyxcbik6IENvbHVtbkRlZmluaXRpb25bXSB7XG4gIHJldHVybiBvYnNlcnZhdGlvbnNUYWJsZUNvbHMubWFwKChjb2wpID0+IHtcbiAgICBpZiAoY29sLm5hbWUgPT09IFwibW9kZWxcIikge1xuICAgICAgcmV0dXJuIHsgLi4uY29sLCBvcHRpb25zOiBvcHRpb25zPy5tb2RlbCA/PyBbXSB9O1xuICAgIH1cbiAgICBpZiAoY29sLm5hbWUgPT09IFwibmFtZVwiKSB7XG4gICAgICByZXR1cm4geyAuLi5jb2wsIG9wdGlvbnM6IG9wdGlvbnM/Lm5hbWUgPz8gW10gfTtcbiAgICB9XG4gICAgaWYgKGNvbC5uYW1lID09PSBcInRyYWNlTmFtZVwiKSB7XG4gICAgICByZXR1cm4geyAuLi5jb2wsIG9wdGlvbnM6IG9wdGlvbnM/LnRyYWNlTmFtZSA/PyBbXSB9O1xuICAgIH1cbiAgICBpZiAoY29sLm5hbWUgPT09IFwic2NvcmVzX2F2Z1wiKSB7XG4gICAgICByZXR1cm4geyAuLi5jb2wsIGtleU9wdGlvbnM6IG9wdGlvbnM/LnNjb3Jlc19hdmcgPz8gW10gfTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbDtcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiT2JzZXJ2YXRpb25MZXZlbCIsIm9ic2VydmF0aW9uc1RhYmxlQ29scyIsIm5hbWUiLCJpZCIsInR5cGUiLCJpbnRlcm5hbCIsIm9wdGlvbnMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJtYXAiLCJ2YWx1ZSIsIm9ic2VydmF0aW9uc1RhYmxlQ29sc1dpdGhPcHRpb25zIiwiY29sIiwibW9kZWwiLCJ0cmFjZU5hbWUiLCJrZXlPcHRpb25zIiwic2NvcmVzX2F2ZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/api/definitions/observationsTable.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/definitions/scoresTable.ts":
/*!***************************************************!*\
  !*** ./src/server/api/definitions/scoresTable.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   scoresTableCols: () => (/* binding */ scoresTableCols),\n/* harmony export */   scoresTableColsWithOptions: () => (/* binding */ scoresTableColsWithOptions)\n/* harmony export */ });\nconst scoresTableCols = [\n    {\n        name: \"trace_id\",\n        type: \"string\",\n        internal: 's.\"trace_id\"'\n    },\n    {\n        name: \"observation_id\",\n        type: \"string\",\n        internal: 's.\"observation_id\"'\n    },\n    {\n        name: \"timestamp\",\n        type: \"datetime\",\n        internal: 's.\"timestamp\"'\n    },\n    {\n        name: \"name\",\n        type: \"stringOptions\",\n        internal: 's.\"name\"',\n        options: []\n    },\n    {\n        name: \"value\",\n        type: \"number\",\n        internal: 's.\"value\"'\n    },\n    {\n        name: \"userId\",\n        type: \"string\",\n        internal: 't.\"user_id\"'\n    }\n];\nfunction scoresTableColsWithOptions(options) {\n    return scoresTableCols.map((col)=>{\n        if (col.name === \"name\") {\n            return {\n                ...col,\n                options: options?.name ?? []\n            };\n        }\n        return col;\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9kZWZpbml0aW9ucy9zY29yZXNUYWJsZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUtPLE1BQU1BLGtCQUFzQztJQUNqRDtRQUFFQyxNQUFNO1FBQVlDLE1BQU07UUFBVUMsVUFBVTtJQUFlO0lBQzdEO1FBQUVGLE1BQU07UUFBa0JDLE1BQU07UUFBVUMsVUFBVTtJQUFxQjtJQUN6RTtRQUFFRixNQUFNO1FBQWFDLE1BQU07UUFBWUMsVUFBVTtJQUFnQjtJQUNqRTtRQUNFRixNQUFNO1FBQ05DLE1BQU07UUFDTkMsVUFBVTtRQUNWQyxTQUFTLEVBQUU7SUFDYjtJQUNBO1FBQUVILE1BQU07UUFBU0MsTUFBTTtRQUFVQyxVQUFVO0lBQVk7SUFDdkQ7UUFBRUYsTUFBTTtRQUFVQyxNQUFNO1FBQVVDLFVBQVU7SUFBYztDQUMzRCxDQUFDO0FBTUssU0FBU0UsMkJBQ2RELE9BQXNCO0lBRXRCLE9BQU9KLGdCQUFnQk0sR0FBRyxDQUFDLENBQUNDO1FBQzFCLElBQUlBLElBQUlOLElBQUksS0FBSyxRQUFRO1lBQ3ZCLE9BQU87Z0JBQUUsR0FBR00sR0FBRztnQkFBRUgsU0FBU0EsU0FBU0gsUUFBUSxFQUFFO1lBQUM7UUFDaEQ7UUFDQSxPQUFPTTtJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvc2VydmVyL2FwaS9kZWZpbml0aW9ucy9zY29yZXNUYWJsZS50cz9jNTc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHR5cGUgT3B0aW9uc0RlZmluaXRpb24sXG4gIHR5cGUgQ29sdW1uRGVmaW5pdGlvbixcbn0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvaW50ZXJmYWNlcy90YWJsZURlZmluaXRpb25cIjtcblxuZXhwb3J0IGNvbnN0IHNjb3Jlc1RhYmxlQ29sczogQ29sdW1uRGVmaW5pdGlvbltdID0gW1xuICB7IG5hbWU6IFwidHJhY2VfaWRcIiwgdHlwZTogXCJzdHJpbmdcIiwgaW50ZXJuYWw6ICdzLlwidHJhY2VfaWRcIicgfSxcbiAgeyBuYW1lOiBcIm9ic2VydmF0aW9uX2lkXCIsIHR5cGU6IFwic3RyaW5nXCIsIGludGVybmFsOiAncy5cIm9ic2VydmF0aW9uX2lkXCInIH0sXG4gIHsgbmFtZTogXCJ0aW1lc3RhbXBcIiwgdHlwZTogXCJkYXRldGltZVwiLCBpbnRlcm5hbDogJ3MuXCJ0aW1lc3RhbXBcIicgfSxcbiAge1xuICAgIG5hbWU6IFwibmFtZVwiLFxuICAgIHR5cGU6IFwic3RyaW5nT3B0aW9uc1wiLFxuICAgIGludGVybmFsOiAncy5cIm5hbWVcIicsXG4gICAgb3B0aW9uczogW10sIC8vIHRvIGJlIGFkZGVkIGF0IHJ1bnRpbWVcbiAgfSxcbiAgeyBuYW1lOiBcInZhbHVlXCIsIHR5cGU6IFwibnVtYmVyXCIsIGludGVybmFsOiAncy5cInZhbHVlXCInIH0sXG4gIHsgbmFtZTogXCJ1c2VySWRcIiwgdHlwZTogXCJzdHJpbmdcIiwgaW50ZXJuYWw6ICd0LlwidXNlcl9pZFwiJyB9LFxuXTtcblxuZXhwb3J0IHR5cGUgU2NvcmVPcHRpb25zID0ge1xuICBuYW1lOiBBcnJheTxPcHRpb25zRGVmaW5pdGlvbj47XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gc2NvcmVzVGFibGVDb2xzV2l0aE9wdGlvbnMoXG4gIG9wdGlvbnM/OiBTY29yZU9wdGlvbnMsXG4pOiBDb2x1bW5EZWZpbml0aW9uW10ge1xuICByZXR1cm4gc2NvcmVzVGFibGVDb2xzLm1hcCgoY29sKSA9PiB7XG4gICAgaWYgKGNvbC5uYW1lID09PSBcIm5hbWVcIikge1xuICAgICAgcmV0dXJuIHsgLi4uY29sLCBvcHRpb25zOiBvcHRpb25zPy5uYW1lID8/IFtdIH07XG4gICAgfVxuICAgIHJldHVybiBjb2w7XG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbInNjb3Jlc1RhYmxlQ29scyIsIm5hbWUiLCJ0eXBlIiwiaW50ZXJuYWwiLCJvcHRpb25zIiwic2NvcmVzVGFibGVDb2xzV2l0aE9wdGlvbnMiLCJtYXAiLCJjb2wiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/api/definitions/scoresTable.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/definitions/sessionsView.ts":
/*!****************************************************!*\
  !*** ./src/server/api/definitions/sessionsView.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sessionsViewCols: () => (/* binding */ sessionsViewCols)\n/* harmony export */ });\nconst sessionsViewCols = [\n    {\n        name: \"⭐️\",\n        id: \"bookmarked\",\n        type: \"boolean\",\n        internal: \"s.bookmarked\"\n    },\n    {\n        name: \"id\",\n        id: \"id\",\n        type: \"string\",\n        internal: 's.\"id\"'\n    },\n    {\n        name: \"userId\",\n        type: \"string\",\n        internal: \"array_to_string(t.\\\"userIds\\\", ', ')\"\n    },\n    {\n        name: \"Session duration (s)\",\n        id: \"sessionDuration\",\n        type: \"number\",\n        internal: 'o.\"sessionDuration\"'\n    },\n    {\n        name: \"createdAt\",\n        id: \"createdAt\",\n        type: \"datetime\",\n        internal: 's.\"created_at\"'\n    },\n    {\n        name: \"countTraces\",\n        id: \"countTraces\",\n        type: \"number\",\n        internal: 't.\"countTraces\"'\n    },\n    {\n        name: \"Cost (USD)\",\n        id: \"totalCost\",\n        type: \"number\",\n        internal: 'o.\"totalCost\"'\n    }\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9kZWZpbml0aW9ucy9zZXNzaW9uc1ZpZXcudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUVPLE1BQU1BLG1CQUF1QztJQUNsRDtRQUFFQyxNQUFNO1FBQU1DLElBQUk7UUFBY0MsTUFBTTtRQUFXQyxVQUFVO0lBQWU7SUFDMUU7UUFDRUgsTUFBTTtRQUNOQyxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsVUFBVTtJQUNaO0lBQ0E7UUFDRUgsTUFBTTtRQUNORSxNQUFNO1FBQ05DLFVBQVU7SUFDWjtJQUNBO1FBQ0VILE1BQU07UUFDTkMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFVBQVU7SUFDWjtJQUNBO1FBQ0VILE1BQU07UUFDTkMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFVBQVU7SUFDWjtJQUNBO1FBQ0VILE1BQU07UUFDTkMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFVBQVU7SUFDWjtJQUNBO1FBQ0VILE1BQU07UUFDTkMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFVBQVU7SUFDWjtDQUNELENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvc2VydmVyL2FwaS9kZWZpbml0aW9ucy9zZXNzaW9uc1ZpZXcudHM/MjkwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIENvbHVtbkRlZmluaXRpb24gfSBmcm9tIFwiQC9zcmMvc2VydmVyL2FwaS9pbnRlcmZhY2VzL3RhYmxlRGVmaW5pdGlvblwiO1xuXG5leHBvcnQgY29uc3Qgc2Vzc2lvbnNWaWV3Q29sczogQ29sdW1uRGVmaW5pdGlvbltdID0gW1xuICB7IG5hbWU6IFwi4q2Q77iPXCIsIGlkOiBcImJvb2ttYXJrZWRcIiwgdHlwZTogXCJib29sZWFuXCIsIGludGVybmFsOiBcInMuYm9va21hcmtlZFwiIH0sXG4gIHtcbiAgICBuYW1lOiBcImlkXCIsXG4gICAgaWQ6IFwiaWRcIixcbiAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgIGludGVybmFsOiAncy5cImlkXCInLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJ1c2VySWRcIixcbiAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgIGludGVybmFsOiBcImFycmF5X3RvX3N0cmluZyh0LlxcXCJ1c2VySWRzXFxcIiwgJywgJylcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiU2Vzc2lvbiBkdXJhdGlvbiAocylcIixcbiAgICBpZDogXCJzZXNzaW9uRHVyYXRpb25cIixcbiAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgIGludGVybmFsOiAnby5cInNlc3Npb25EdXJhdGlvblwiJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiY3JlYXRlZEF0XCIsXG4gICAgaWQ6IFwiY3JlYXRlZEF0XCIsXG4gICAgdHlwZTogXCJkYXRldGltZVwiLFxuICAgIGludGVybmFsOiAncy5cImNyZWF0ZWRfYXRcIicsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcImNvdW50VHJhY2VzXCIsXG4gICAgaWQ6IFwiY291bnRUcmFjZXNcIixcbiAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgIGludGVybmFsOiAndC5cImNvdW50VHJhY2VzXCInLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJDb3N0IChVU0QpXCIsXG4gICAgaWQ6IFwidG90YWxDb3N0XCIsXG4gICAgdHlwZTogXCJudW1iZXJcIixcbiAgICBpbnRlcm5hbDogJ28uXCJ0b3RhbENvc3RcIicsXG4gIH0sXG5dO1xuIl0sIm5hbWVzIjpbInNlc3Npb25zVmlld0NvbHMiLCJuYW1lIiwiaWQiLCJ0eXBlIiwiaW50ZXJuYWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/api/definitions/sessionsView.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/definitions/tracesTable.ts":
/*!***************************************************!*\
  !*** ./src/server/api/definitions/tracesTable.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   tracesTableCols: () => (/* binding */ tracesTableCols),\n/* harmony export */   tracesTableColsWithOptions: () => (/* binding */ tracesTableColsWithOptions)\n/* harmony export */ });\nconst tracesTableCols = [\n    {\n        name: \"⭐️\",\n        id: \"bookmarked\",\n        type: \"boolean\",\n        internal: \"t.bookmarked\"\n    },\n    {\n        name: \"id\",\n        id: \"id\",\n        type: \"string\",\n        internal: \"t.id\"\n    },\n    {\n        name: \"name\",\n        id: \"name\",\n        type: \"stringOptions\",\n        internal: 't.\"name\"',\n        options: []\n    },\n    {\n        name: \"timestamp\",\n        id: \"timestamp\",\n        type: \"datetime\",\n        internal: 't.\"timestamp\"'\n    },\n    {\n        name: \"userId\",\n        id: \"userId\",\n        type: \"string\",\n        internal: 't.\"user_id\"'\n    },\n    {\n        name: \"metadata\",\n        id: \"metadata\",\n        type: \"stringObject\",\n        internal: 't.\"metadata\"'\n    },\n    {\n        name: \"scores_avg\",\n        id: \"scores_avg\",\n        type: \"numberObject\",\n        internal: \"scores_avg\"\n    },\n    {\n        name: \"Latency (s)\",\n        id: \"latency\",\n        type: \"number\",\n        internal: \"tl.latency\"\n    },\n    {\n        name: \"Cost ($)\",\n        id: \"totalCost\",\n        type: \"number\",\n        internal: '\"calculatedTotalCost\"'\n    },\n    {\n        name: \"version\",\n        id: \"version\",\n        type: \"string\",\n        internal: 't.\"version\"'\n    },\n    {\n        name: \"release\",\n        id: \"release\",\n        type: \"string\",\n        internal: 't.\"release\"'\n    },\n    {\n        name: \"tags\",\n        type: \"arrayOptions\",\n        internal: 't.\"tags\"',\n        options: []\n    }\n];\nfunction tracesTableColsWithOptions(options) {\n    return tracesTableCols.map((col)=>{\n        if (col.name === \"scores_avg\") {\n            return {\n                ...col,\n                keyOptions: options?.scores_avg ?? []\n            };\n        }\n        if (col.name === \"name\") {\n            return {\n                ...col,\n                options: options?.name ?? []\n            };\n        }\n        if (col.name === \"tags\") {\n            return {\n                ...col,\n                options: options?.tags ?? []\n            };\n        }\n        return col;\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9kZWZpbml0aW9ucy90cmFjZXNUYWJsZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUtPLE1BQU1BLGtCQUFzQztJQUNqRDtRQUFFQyxNQUFNO1FBQU1DLElBQUk7UUFBY0MsTUFBTTtRQUFXQyxVQUFVO0lBQWU7SUFDMUU7UUFBRUgsTUFBTTtRQUFNQyxJQUFJO1FBQU1DLE1BQU07UUFBVUMsVUFBVTtJQUFPO0lBQ3pEO1FBQ0VILE1BQU07UUFDTkMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFVBQVU7UUFDVkMsU0FBUyxFQUFFO0lBQ2I7SUFDQTtRQUNFSixNQUFNO1FBQ05DLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxVQUFVO0lBQ1o7SUFDQTtRQUFFSCxNQUFNO1FBQVVDLElBQUk7UUFBVUMsTUFBTTtRQUFVQyxVQUFVO0lBQWM7SUFDeEU7UUFDRUgsTUFBTTtRQUNOQyxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsVUFBVTtJQUNaO0lBQ0E7UUFDRUgsTUFBTTtRQUNOQyxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsVUFBVTtJQUNaO0lBQ0E7UUFDRUgsTUFBTTtRQUNOQyxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsVUFBVTtJQUNaO0lBQ0E7UUFDRUgsTUFBTTtRQUNOQyxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsVUFBVTtJQUNaO0lBQ0E7UUFDRUgsTUFBTTtRQUNOQyxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsVUFBVTtJQUNaO0lBQ0E7UUFDRUgsTUFBTTtRQUNOQyxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsVUFBVTtJQUNaO0lBQ0E7UUFDRUgsTUFBTTtRQUNORSxNQUFNO1FBQ05DLFVBQVU7UUFDVkMsU0FBUyxFQUFFO0lBQ2I7Q0FDRCxDQUFDO0FBUUssU0FBU0MsMkJBQ2RELE9BQXNCO0lBRXRCLE9BQU9MLGdCQUFnQk8sR0FBRyxDQUFDLENBQUNDO1FBQzFCLElBQUlBLElBQUlQLElBQUksS0FBSyxjQUFjO1lBQzdCLE9BQU87Z0JBQUUsR0FBR08sR0FBRztnQkFBRUMsWUFBWUosU0FBU0ssY0FBYyxFQUFFO1lBQUM7UUFDekQ7UUFDQSxJQUFJRixJQUFJUCxJQUFJLEtBQUssUUFBUTtZQUN2QixPQUFPO2dCQUFFLEdBQUdPLEdBQUc7Z0JBQUVILFNBQVNBLFNBQVNKLFFBQVEsRUFBRTtZQUFDO1FBQ2hEO1FBQ0EsSUFBSU8sSUFBSVAsSUFBSSxLQUFLLFFBQVE7WUFDdkIsT0FBTztnQkFBRSxHQUFHTyxHQUFHO2dCQUFFSCxTQUFTQSxTQUFTTSxRQUFRLEVBQUU7WUFBQztRQUNoRDtRQUNBLE9BQU9IO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9zZXJ2ZXIvYXBpL2RlZmluaXRpb25zL3RyYWNlc1RhYmxlLnRzPzhhYjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgdHlwZSBPcHRpb25zRGVmaW5pdGlvbixcbiAgdHlwZSBDb2x1bW5EZWZpbml0aW9uLFxufSBmcm9tIFwiQC9zcmMvc2VydmVyL2FwaS9pbnRlcmZhY2VzL3RhYmxlRGVmaW5pdGlvblwiO1xuXG5leHBvcnQgY29uc3QgdHJhY2VzVGFibGVDb2xzOiBDb2x1bW5EZWZpbml0aW9uW10gPSBbXG4gIHsgbmFtZTogXCLirZDvuI9cIiwgaWQ6IFwiYm9va21hcmtlZFwiLCB0eXBlOiBcImJvb2xlYW5cIiwgaW50ZXJuYWw6IFwidC5ib29rbWFya2VkXCIgfSxcbiAgeyBuYW1lOiBcImlkXCIsIGlkOiBcImlkXCIsIHR5cGU6IFwic3RyaW5nXCIsIGludGVybmFsOiBcInQuaWRcIiB9LFxuICB7XG4gICAgbmFtZTogXCJuYW1lXCIsXG4gICAgaWQ6IFwibmFtZVwiLFxuICAgIHR5cGU6IFwic3RyaW5nT3B0aW9uc1wiLFxuICAgIGludGVybmFsOiAndC5cIm5hbWVcIicsXG4gICAgb3B0aW9uczogW10sIC8vIHRvIGJlIGZpbGxlZCBpbiBhdCBydW50aW1lXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcInRpbWVzdGFtcFwiLFxuICAgIGlkOiBcInRpbWVzdGFtcFwiLFxuICAgIHR5cGU6IFwiZGF0ZXRpbWVcIixcbiAgICBpbnRlcm5hbDogJ3QuXCJ0aW1lc3RhbXBcIicsXG4gIH0sXG4gIHsgbmFtZTogXCJ1c2VySWRcIiwgaWQ6IFwidXNlcklkXCIsIHR5cGU6IFwic3RyaW5nXCIsIGludGVybmFsOiAndC5cInVzZXJfaWRcIicgfSxcbiAge1xuICAgIG5hbWU6IFwibWV0YWRhdGFcIixcbiAgICBpZDogXCJtZXRhZGF0YVwiLFxuICAgIHR5cGU6IFwic3RyaW5nT2JqZWN0XCIsXG4gICAgaW50ZXJuYWw6ICd0LlwibWV0YWRhdGFcIicsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcInNjb3Jlc19hdmdcIixcbiAgICBpZDogXCJzY29yZXNfYXZnXCIsXG4gICAgdHlwZTogXCJudW1iZXJPYmplY3RcIixcbiAgICBpbnRlcm5hbDogXCJzY29yZXNfYXZnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVuY3kgKHMpXCIsXG4gICAgaWQ6IFwibGF0ZW5jeVwiLFxuICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgaW50ZXJuYWw6IFwidGwubGF0ZW5jeVwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJDb3N0ICgkKVwiLFxuICAgIGlkOiBcInRvdGFsQ29zdFwiLFxuICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgaW50ZXJuYWw6ICdcImNhbGN1bGF0ZWRUb3RhbENvc3RcIicsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcInZlcnNpb25cIixcbiAgICBpZDogXCJ2ZXJzaW9uXCIsXG4gICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICBpbnRlcm5hbDogJ3QuXCJ2ZXJzaW9uXCInLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJyZWxlYXNlXCIsXG4gICAgaWQ6IFwicmVsZWFzZVwiLFxuICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgaW50ZXJuYWw6ICd0LlwicmVsZWFzZVwiJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwidGFnc1wiLFxuICAgIHR5cGU6IFwiYXJyYXlPcHRpb25zXCIsXG4gICAgaW50ZXJuYWw6ICd0LlwidGFnc1wiJyxcbiAgICBvcHRpb25zOiBbXSwgLy8gdG8gYmUgZmlsbGVkIGluIGF0IHJ1bnRpbWVcbiAgfSxcbl07XG5cbmV4cG9ydCB0eXBlIFRyYWNlT3B0aW9ucyA9IHtcbiAgc2NvcmVzX2F2ZzogQXJyYXk8c3RyaW5nPjtcbiAgbmFtZTogQXJyYXk8T3B0aW9uc0RlZmluaXRpb24+O1xuICB0YWdzOiBBcnJheTxPcHRpb25zRGVmaW5pdGlvbj47XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhY2VzVGFibGVDb2xzV2l0aE9wdGlvbnMoXG4gIG9wdGlvbnM/OiBUcmFjZU9wdGlvbnMsXG4pOiBDb2x1bW5EZWZpbml0aW9uW10ge1xuICByZXR1cm4gdHJhY2VzVGFibGVDb2xzLm1hcCgoY29sKSA9PiB7XG4gICAgaWYgKGNvbC5uYW1lID09PSBcInNjb3Jlc19hdmdcIikge1xuICAgICAgcmV0dXJuIHsgLi4uY29sLCBrZXlPcHRpb25zOiBvcHRpb25zPy5zY29yZXNfYXZnID8/IFtdIH07XG4gICAgfVxuICAgIGlmIChjb2wubmFtZSA9PT0gXCJuYW1lXCIpIHtcbiAgICAgIHJldHVybiB7IC4uLmNvbCwgb3B0aW9uczogb3B0aW9ucz8ubmFtZSA/PyBbXSB9O1xuICAgIH1cbiAgICBpZiAoY29sLm5hbWUgPT09IFwidGFnc1wiKSB7XG4gICAgICByZXR1cm4geyAuLi5jb2wsIG9wdGlvbnM6IG9wdGlvbnM/LnRhZ3MgPz8gW10gfTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbDtcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsidHJhY2VzVGFibGVDb2xzIiwibmFtZSIsImlkIiwidHlwZSIsImludGVybmFsIiwib3B0aW9ucyIsInRyYWNlc1RhYmxlQ29sc1dpdGhPcHRpb25zIiwibWFwIiwiY29sIiwia2V5T3B0aW9ucyIsInNjb3Jlc19hdmciLCJ0YWdzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/api/definitions/tracesTable.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/interfaces/exportTypes.ts":
/*!**************************************************!*\
  !*** ./src/server/api/interfaces/exportTypes.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exportFileFormats: () => (/* binding */ exportFileFormats),\n/* harmony export */   exportOptions: () => (/* binding */ exportOptions)\n/* harmony export */ });\nconst exportFileFormats = [\n    \"CSV\",\n    \"JSON\",\n    \"OPENAI-JSONL\"\n];\nconst exportOptions = {\n    CSV: {\n        label: \"CSV\",\n        extension: \"csv\",\n        fileType: \"text/csv\"\n    },\n    JSON: {\n        label: \"JSON\",\n        extension: \"json\",\n        fileType: \"application/json\"\n    },\n    \"OPENAI-JSONL\": {\n        label: \"OpenAI JSONL (fine-tuning)\",\n        extension: \"jsonl\",\n        fileType: \"application/json\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9pbnRlcmZhY2VzL2V4cG9ydFR5cGVzLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sTUFBTUEsb0JBQW9CO0lBQUM7SUFBTztJQUFRO0NBQWUsQ0FBVTtBQUduRSxNQUFNQyxnQkFPVDtJQUNGQyxLQUFLO1FBQUVDLE9BQU87UUFBT0MsV0FBVztRQUFPQyxVQUFVO0lBQVc7SUFDNURDLE1BQU07UUFBRUgsT0FBTztRQUFRQyxXQUFXO1FBQVFDLFVBQVU7SUFBbUI7SUFDdkUsZ0JBQWdCO1FBQ2RGLE9BQU87UUFDUEMsV0FBVztRQUNYQyxVQUFVO0lBQ1o7QUFDRixFQUFXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL3NlcnZlci9hcGkvaW50ZXJmYWNlcy9leHBvcnRUeXBlcy50cz80MmFiIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBleHBvcnRGaWxlRm9ybWF0cyA9IFtcIkNTVlwiLCBcIkpTT05cIiwgXCJPUEVOQUktSlNPTkxcIl0gYXMgY29uc3Q7XG5leHBvcnQgdHlwZSBFeHBvcnRGaWxlRm9ybWF0cyA9ICh0eXBlb2YgZXhwb3J0RmlsZUZvcm1hdHMpW251bWJlcl07XG5cbmV4cG9ydCBjb25zdCBleHBvcnRPcHRpb25zOiBSZWNvcmQ8XG4gIEV4cG9ydEZpbGVGb3JtYXRzLFxuICB7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBleHRlbnNpb246IHN0cmluZztcbiAgICBmaWxlVHlwZTogc3RyaW5nO1xuICB9XG4+ID0ge1xuICBDU1Y6IHsgbGFiZWw6IFwiQ1NWXCIsIGV4dGVuc2lvbjogXCJjc3ZcIiwgZmlsZVR5cGU6IFwidGV4dC9jc3ZcIiB9LFxuICBKU09OOiB7IGxhYmVsOiBcIkpTT05cIiwgZXh0ZW5zaW9uOiBcImpzb25cIiwgZmlsZVR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gIFwiT1BFTkFJLUpTT05MXCI6IHtcbiAgICBsYWJlbDogXCJPcGVuQUkgSlNPTkwgKGZpbmUtdHVuaW5nKVwiLFxuICAgIGV4dGVuc2lvbjogXCJqc29ubFwiLFxuICAgIGZpbGVUeXBlOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0gYXMgY29uc3Q7XG4iXSwibmFtZXMiOlsiZXhwb3J0RmlsZUZvcm1hdHMiLCJleHBvcnRPcHRpb25zIiwiQ1NWIiwibGFiZWwiLCJleHRlbnNpb24iLCJmaWxlVHlwZSIsIkpTT04iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/api/interfaces/exportTypes.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/interfaces/filters.ts":
/*!**********************************************!*\
  !*** ./src/server/api/interfaces/filters.ts ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   arrayOptionsFilter: () => (/* binding */ arrayOptionsFilter),\n/* harmony export */   booleanFilter: () => (/* binding */ booleanFilter),\n/* harmony export */   filterOperators: () => (/* binding */ filterOperators),\n/* harmony export */   numberFilter: () => (/* binding */ numberFilter),\n/* harmony export */   numberObjectFilter: () => (/* binding */ numberObjectFilter),\n/* harmony export */   singleFilter: () => (/* binding */ singleFilter),\n/* harmony export */   stringFilter: () => (/* binding */ stringFilter),\n/* harmony export */   stringObjectFilter: () => (/* binding */ stringObjectFilter),\n/* harmony export */   stringOptionsFilter: () => (/* binding */ stringOptionsFilter),\n/* harmony export */   timeFilter: () => (/* binding */ timeFilter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__]);\nzod__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst filterOperators = {\n    datetime: [\n        \">\",\n        \"<\",\n        \">=\",\n        \"<=\"\n    ],\n    string: [\n        \"=\",\n        \"contains\",\n        \"does not contain\",\n        \"starts with\",\n        \"ends with\"\n    ],\n    stringOptions: [\n        \"any of\",\n        \"none of\"\n    ],\n    arrayOptions: [\n        \"any of\",\n        \"none of\",\n        \"all of\"\n    ],\n    number: [\n        \"=\",\n        \">\",\n        \"<\",\n        \">=\",\n        \"<=\"\n    ],\n    stringObject: [\n        \"=\",\n        \"contains\",\n        \"does not contain\",\n        \"starts with\",\n        \"ends with\"\n    ],\n    numberObject: [\n        \"=\",\n        \">\",\n        \"<\",\n        \">=\",\n        \"<=\"\n    ],\n    boolean: [\n        \"=\",\n        \"<>\"\n    ]\n};\nconst timeFilter = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    column: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    operator: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum(filterOperators.datetime),\n    value: zod__WEBPACK_IMPORTED_MODULE_0__.z.date(),\n    type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"datetime\")\n});\nconst stringFilter = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    column: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    operator: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum(filterOperators.string),\n    value: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"string\")\n});\nconst numberFilter = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    column: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    operator: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum(filterOperators.number),\n    value: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n    type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"number\")\n});\nconst stringOptionsFilter = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    column: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    operator: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum(filterOperators.stringOptions),\n    // do not filter on empty arrays, use refine to check this only at runtime (no type checking)\n    value: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).refine((v)=>v.length > 0),\n    type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"stringOptions\")\n});\nconst arrayOptionsFilter = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    column: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    operator: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum(filterOperators.arrayOptions),\n    value: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).refine((v)=>v.length > 0),\n    type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"arrayOptions\")\n});\nconst stringObjectFilter = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"stringObject\"),\n    column: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    key: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    operator: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum(filterOperators.string),\n    value: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nconst numberObjectFilter = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"numberObject\"),\n    column: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    key: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    operator: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum(filterOperators.number),\n    value: zod__WEBPACK_IMPORTED_MODULE_0__.z.number()\n});\nconst booleanFilter = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    type: zod__WEBPACK_IMPORTED_MODULE_0__.z.literal(\"boolean\"),\n    column: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    operator: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum(filterOperators.boolean),\n    value: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean()\n});\nconst singleFilter = zod__WEBPACK_IMPORTED_MODULE_0__.z.discriminatedUnion(\"type\", [\n    timeFilter,\n    stringFilter,\n    numberFilter,\n    stringOptionsFilter,\n    arrayOptionsFilter,\n    stringObjectFilter,\n    numberObjectFilter,\n    booleanFilter\n]);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9pbnRlcmZhY2VzL2ZpbHRlcnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0I7QUFFakIsTUFBTUMsa0JBQWtCO0lBQzdCQyxVQUFVO1FBQUM7UUFBSztRQUFLO1FBQU07S0FBSztJQUNoQ0MsUUFBUTtRQUFDO1FBQUs7UUFBWTtRQUFvQjtRQUFlO0tBQVk7SUFDekVDLGVBQWU7UUFBQztRQUFVO0tBQVU7SUFDcENDLGNBQWM7UUFBQztRQUFVO1FBQVc7S0FBUztJQUM3Q0MsUUFBUTtRQUFDO1FBQUs7UUFBSztRQUFLO1FBQU07S0FBSztJQUNuQ0MsY0FBYztRQUNaO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7S0FDRDtJQUNEQyxjQUFjO1FBQUM7UUFBSztRQUFLO1FBQUs7UUFBTTtLQUFLO0lBQ3pDQyxTQUFTO1FBQUM7UUFBSztLQUFLO0FBQ3RCLEVBQVc7QUFFSixNQUFNQyxhQUFhVixrQ0FBQ0EsQ0FBQ1csTUFBTSxDQUFDO0lBQ2pDQyxRQUFRWixrQ0FBQ0EsQ0FBQ0csTUFBTTtJQUNoQlUsVUFBVWIsa0NBQUNBLENBQUNjLElBQUksQ0FBQ2IsZ0JBQWdCQyxRQUFRO0lBQ3pDYSxPQUFPZixrQ0FBQ0EsQ0FBQ2dCLElBQUk7SUFDYkMsTUFBTWpCLGtDQUFDQSxDQUFDa0IsT0FBTyxDQUFDO0FBQ2xCLEdBQUc7QUFDSSxNQUFNQyxlQUFlbkIsa0NBQUNBLENBQUNXLE1BQU0sQ0FBQztJQUNuQ0MsUUFBUVosa0NBQUNBLENBQUNHLE1BQU07SUFDaEJVLFVBQVViLGtDQUFDQSxDQUFDYyxJQUFJLENBQUNiLGdCQUFnQkUsTUFBTTtJQUN2Q1ksT0FBT2Ysa0NBQUNBLENBQUNHLE1BQU07SUFDZmMsTUFBTWpCLGtDQUFDQSxDQUFDa0IsT0FBTyxDQUFDO0FBQ2xCLEdBQUc7QUFDSSxNQUFNRSxlQUFlcEIsa0NBQUNBLENBQUNXLE1BQU0sQ0FBQztJQUNuQ0MsUUFBUVosa0NBQUNBLENBQUNHLE1BQU07SUFDaEJVLFVBQVViLGtDQUFDQSxDQUFDYyxJQUFJLENBQUNiLGdCQUFnQkssTUFBTTtJQUN2Q1MsT0FBT2Ysa0NBQUNBLENBQUNNLE1BQU07SUFDZlcsTUFBTWpCLGtDQUFDQSxDQUFDa0IsT0FBTyxDQUFDO0FBQ2xCLEdBQUc7QUFDSSxNQUFNRyxzQkFBc0JyQixrQ0FBQ0EsQ0FBQ1csTUFBTSxDQUFDO0lBQzFDQyxRQUFRWixrQ0FBQ0EsQ0FBQ0csTUFBTTtJQUNoQlUsVUFBVWIsa0NBQUNBLENBQUNjLElBQUksQ0FBQ2IsZ0JBQWdCRyxhQUFhO0lBQzlDLDZGQUE2RjtJQUM3RlcsT0FBT2Ysa0NBQUNBLENBQUNzQixLQUFLLENBQUN0QixrQ0FBQ0EsQ0FBQ0csTUFBTSxJQUFJb0IsTUFBTSxDQUFDLENBQUNDLElBQU1BLEVBQUVDLE1BQU0sR0FBRztJQUNwRFIsTUFBTWpCLGtDQUFDQSxDQUFDa0IsT0FBTyxDQUFDO0FBQ2xCLEdBQUc7QUFDSSxNQUFNUSxxQkFBcUIxQixrQ0FBQ0EsQ0FBQ1csTUFBTSxDQUFDO0lBQ3pDQyxRQUFRWixrQ0FBQ0EsQ0FBQ0csTUFBTTtJQUNoQlUsVUFBVWIsa0NBQUNBLENBQUNjLElBQUksQ0FBQ2IsZ0JBQWdCSSxZQUFZO0lBQzdDVSxPQUFPZixrQ0FBQ0EsQ0FBQ3NCLEtBQUssQ0FBQ3RCLGtDQUFDQSxDQUFDRyxNQUFNLElBQUlvQixNQUFNLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRUMsTUFBTSxHQUFHO0lBQ3BEUixNQUFNakIsa0NBQUNBLENBQUNrQixPQUFPLENBQUM7QUFDbEIsR0FBRztBQUNJLE1BQU1TLHFCQUFxQjNCLGtDQUFDQSxDQUFDVyxNQUFNLENBQUM7SUFDekNNLE1BQU1qQixrQ0FBQ0EsQ0FBQ2tCLE9BQU8sQ0FBQztJQUNoQk4sUUFBUVosa0NBQUNBLENBQUNHLE1BQU07SUFDaEJ5QixLQUFLNUIsa0NBQUNBLENBQUNHLE1BQU07SUFDYlUsVUFBVWIsa0NBQUNBLENBQUNjLElBQUksQ0FBQ2IsZ0JBQWdCRSxNQUFNO0lBQ3ZDWSxPQUFPZixrQ0FBQ0EsQ0FBQ0csTUFBTTtBQUNqQixHQUFHO0FBQ0ksTUFBTTBCLHFCQUFxQjdCLGtDQUFDQSxDQUFDVyxNQUFNLENBQUM7SUFDekNNLE1BQU1qQixrQ0FBQ0EsQ0FBQ2tCLE9BQU8sQ0FBQztJQUNoQk4sUUFBUVosa0NBQUNBLENBQUNHLE1BQU07SUFDaEJ5QixLQUFLNUIsa0NBQUNBLENBQUNHLE1BQU07SUFDYlUsVUFBVWIsa0NBQUNBLENBQUNjLElBQUksQ0FBQ2IsZ0JBQWdCSyxNQUFNO0lBQ3ZDUyxPQUFPZixrQ0FBQ0EsQ0FBQ00sTUFBTTtBQUNqQixHQUFHO0FBQ0ksTUFBTXdCLGdCQUFnQjlCLGtDQUFDQSxDQUFDVyxNQUFNLENBQUM7SUFDcENNLE1BQU1qQixrQ0FBQ0EsQ0FBQ2tCLE9BQU8sQ0FBQztJQUNoQk4sUUFBUVosa0NBQUNBLENBQUNHLE1BQU07SUFDaEJVLFVBQVViLGtDQUFDQSxDQUFDYyxJQUFJLENBQUNiLGdCQUFnQlEsT0FBTztJQUN4Q00sT0FBT2Ysa0NBQUNBLENBQUNTLE9BQU87QUFDbEIsR0FBRztBQUNJLE1BQU1zQixlQUFlL0Isa0NBQUNBLENBQUNnQyxrQkFBa0IsQ0FBQyxRQUFRO0lBQ3ZEdEI7SUFDQVM7SUFDQUM7SUFDQUM7SUFDQUs7SUFDQUM7SUFDQUU7SUFDQUM7Q0FDRCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL3NlcnZlci9hcGkvaW50ZXJmYWNlcy9maWx0ZXJzLnRzPzdmNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcblxuZXhwb3J0IGNvbnN0IGZpbHRlck9wZXJhdG9ycyA9IHtcbiAgZGF0ZXRpbWU6IFtcIj5cIiwgXCI8XCIsIFwiPj1cIiwgXCI8PVwiXSxcbiAgc3RyaW5nOiBbXCI9XCIsIFwiY29udGFpbnNcIiwgXCJkb2VzIG5vdCBjb250YWluXCIsIFwic3RhcnRzIHdpdGhcIiwgXCJlbmRzIHdpdGhcIl0sXG4gIHN0cmluZ09wdGlvbnM6IFtcImFueSBvZlwiLCBcIm5vbmUgb2ZcIl0sXG4gIGFycmF5T3B0aW9uczogW1wiYW55IG9mXCIsIFwibm9uZSBvZlwiLCBcImFsbCBvZlwiXSxcbiAgbnVtYmVyOiBbXCI9XCIsIFwiPlwiLCBcIjxcIiwgXCI+PVwiLCBcIjw9XCJdLFxuICBzdHJpbmdPYmplY3Q6IFtcbiAgICBcIj1cIixcbiAgICBcImNvbnRhaW5zXCIsXG4gICAgXCJkb2VzIG5vdCBjb250YWluXCIsXG4gICAgXCJzdGFydHMgd2l0aFwiLFxuICAgIFwiZW5kcyB3aXRoXCIsXG4gIF0sXG4gIG51bWJlck9iamVjdDogW1wiPVwiLCBcIj5cIiwgXCI8XCIsIFwiPj1cIiwgXCI8PVwiXSxcbiAgYm9vbGVhbjogW1wiPVwiLCBcIjw+XCJdLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IHRpbWVGaWx0ZXIgPSB6Lm9iamVjdCh7XG4gIGNvbHVtbjogei5zdHJpbmcoKSxcbiAgb3BlcmF0b3I6IHouZW51bShmaWx0ZXJPcGVyYXRvcnMuZGF0ZXRpbWUpLFxuICB2YWx1ZTogei5kYXRlKCksXG4gIHR5cGU6IHoubGl0ZXJhbChcImRhdGV0aW1lXCIpLFxufSk7XG5leHBvcnQgY29uc3Qgc3RyaW5nRmlsdGVyID0gei5vYmplY3Qoe1xuICBjb2x1bW46IHouc3RyaW5nKCksXG4gIG9wZXJhdG9yOiB6LmVudW0oZmlsdGVyT3BlcmF0b3JzLnN0cmluZyksXG4gIHZhbHVlOiB6LnN0cmluZygpLFxuICB0eXBlOiB6LmxpdGVyYWwoXCJzdHJpbmdcIiksXG59KTtcbmV4cG9ydCBjb25zdCBudW1iZXJGaWx0ZXIgPSB6Lm9iamVjdCh7XG4gIGNvbHVtbjogei5zdHJpbmcoKSxcbiAgb3BlcmF0b3I6IHouZW51bShmaWx0ZXJPcGVyYXRvcnMubnVtYmVyKSxcbiAgdmFsdWU6IHoubnVtYmVyKCksXG4gIHR5cGU6IHoubGl0ZXJhbChcIm51bWJlclwiKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHN0cmluZ09wdGlvbnNGaWx0ZXIgPSB6Lm9iamVjdCh7XG4gIGNvbHVtbjogei5zdHJpbmcoKSxcbiAgb3BlcmF0b3I6IHouZW51bShmaWx0ZXJPcGVyYXRvcnMuc3RyaW5nT3B0aW9ucyksXG4gIC8vIGRvIG5vdCBmaWx0ZXIgb24gZW1wdHkgYXJyYXlzLCB1c2UgcmVmaW5lIHRvIGNoZWNrIHRoaXMgb25seSBhdCBydW50aW1lIChubyB0eXBlIGNoZWNraW5nKVxuICB2YWx1ZTogei5hcnJheSh6LnN0cmluZygpKS5yZWZpbmUoKHYpID0+IHYubGVuZ3RoID4gMCksXG4gIHR5cGU6IHoubGl0ZXJhbChcInN0cmluZ09wdGlvbnNcIiksXG59KTtcbmV4cG9ydCBjb25zdCBhcnJheU9wdGlvbnNGaWx0ZXIgPSB6Lm9iamVjdCh7XG4gIGNvbHVtbjogei5zdHJpbmcoKSxcbiAgb3BlcmF0b3I6IHouZW51bShmaWx0ZXJPcGVyYXRvcnMuYXJyYXlPcHRpb25zKSxcbiAgdmFsdWU6IHouYXJyYXkoei5zdHJpbmcoKSkucmVmaW5lKCh2KSA9PiB2Lmxlbmd0aCA+IDApLFxuICB0eXBlOiB6LmxpdGVyYWwoXCJhcnJheU9wdGlvbnNcIiksXG59KTtcbmV4cG9ydCBjb25zdCBzdHJpbmdPYmplY3RGaWx0ZXIgPSB6Lm9iamVjdCh7XG4gIHR5cGU6IHoubGl0ZXJhbChcInN0cmluZ09iamVjdFwiKSxcbiAgY29sdW1uOiB6LnN0cmluZygpLFxuICBrZXk6IHouc3RyaW5nKCksIC8vIGVnIG1ldGFkYXRhIC0tPiBcImVudmlyb25tZW50XCJcbiAgb3BlcmF0b3I6IHouZW51bShmaWx0ZXJPcGVyYXRvcnMuc3RyaW5nKSxcbiAgdmFsdWU6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBudW1iZXJPYmplY3RGaWx0ZXIgPSB6Lm9iamVjdCh7XG4gIHR5cGU6IHoubGl0ZXJhbChcIm51bWJlck9iamVjdFwiKSxcbiAgY29sdW1uOiB6LnN0cmluZygpLFxuICBrZXk6IHouc3RyaW5nKCksIC8vIGVnIHNjb3JlcyAtLT4gXCJhY2N1cmFjeVwiXG4gIG9wZXJhdG9yOiB6LmVudW0oZmlsdGVyT3BlcmF0b3JzLm51bWJlciksXG4gIHZhbHVlOiB6Lm51bWJlcigpLFxufSk7XG5leHBvcnQgY29uc3QgYm9vbGVhbkZpbHRlciA9IHoub2JqZWN0KHtcbiAgdHlwZTogei5saXRlcmFsKFwiYm9vbGVhblwiKSxcbiAgY29sdW1uOiB6LnN0cmluZygpLFxuICBvcGVyYXRvcjogei5lbnVtKGZpbHRlck9wZXJhdG9ycy5ib29sZWFuKSxcbiAgdmFsdWU6IHouYm9vbGVhbigpLFxufSk7XG5leHBvcnQgY29uc3Qgc2luZ2xlRmlsdGVyID0gei5kaXNjcmltaW5hdGVkVW5pb24oXCJ0eXBlXCIsIFtcbiAgdGltZUZpbHRlcixcbiAgc3RyaW5nRmlsdGVyLFxuICBudW1iZXJGaWx0ZXIsXG4gIHN0cmluZ09wdGlvbnNGaWx0ZXIsXG4gIGFycmF5T3B0aW9uc0ZpbHRlcixcbiAgc3RyaW5nT2JqZWN0RmlsdGVyLFxuICBudW1iZXJPYmplY3RGaWx0ZXIsXG4gIGJvb2xlYW5GaWx0ZXIsXG5dKTtcbiJdLCJuYW1lcyI6WyJ6IiwiZmlsdGVyT3BlcmF0b3JzIiwiZGF0ZXRpbWUiLCJzdHJpbmciLCJzdHJpbmdPcHRpb25zIiwiYXJyYXlPcHRpb25zIiwibnVtYmVyIiwic3RyaW5nT2JqZWN0IiwibnVtYmVyT2JqZWN0IiwiYm9vbGVhbiIsInRpbWVGaWx0ZXIiLCJvYmplY3QiLCJjb2x1bW4iLCJvcGVyYXRvciIsImVudW0iLCJ2YWx1ZSIsImRhdGUiLCJ0eXBlIiwibGl0ZXJhbCIsInN0cmluZ0ZpbHRlciIsIm51bWJlckZpbHRlciIsInN0cmluZ09wdGlvbnNGaWx0ZXIiLCJhcnJheSIsInJlZmluZSIsInYiLCJsZW5ndGgiLCJhcnJheU9wdGlvbnNGaWx0ZXIiLCJzdHJpbmdPYmplY3RGaWx0ZXIiLCJrZXkiLCJudW1iZXJPYmplY3RGaWx0ZXIiLCJib29sZWFuRmlsdGVyIiwic2luZ2xlRmlsdGVyIiwiZGlzY3JpbWluYXRlZFVuaW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/api/interfaces/filters.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/interfaces/orderBy.ts":
/*!**********************************************!*\
  !*** ./src/server/api/interfaces/orderBy.ts ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   orderBy: () => (/* binding */ orderBy)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__]);\nzod__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst orderBy = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    column: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    order: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n        \"ASC\",\n        \"DESC\"\n    ])\n}).nullable();\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9pbnRlcmZhY2VzL29yZGVyQnkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0I7QUFFakIsTUFBTUMsVUFBVUQsa0NBQUNBLENBQ3JCRSxNQUFNLENBQUM7SUFDTkMsUUFBUUgsa0NBQUNBLENBQUNJLE1BQU07SUFDaEJDLE9BQU9MLGtDQUFDQSxDQUFDTSxJQUFJLENBQUM7UUFBQztRQUFPO0tBQU87QUFDL0IsR0FDQ0MsUUFBUSxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL3NlcnZlci9hcGkvaW50ZXJmYWNlcy9vcmRlckJ5LnRzPzAzMzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcblxuZXhwb3J0IGNvbnN0IG9yZGVyQnkgPSB6XG4gIC5vYmplY3Qoe1xuICAgIGNvbHVtbjogei5zdHJpbmcoKSxcbiAgICBvcmRlcjogei5lbnVtKFtcIkFTQ1wiLCBcIkRFU0NcIl0pLFxuICB9KVxuICAubnVsbGFibGUoKTtcbiJdLCJuYW1lcyI6WyJ6Iiwib3JkZXJCeSIsIm9iamVjdCIsImNvbHVtbiIsInN0cmluZyIsIm9yZGVyIiwiZW51bSIsIm51bGxhYmxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/api/interfaces/orderBy.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/root.ts":
/*!********************************!*\
  !*** ./src/server/api/root.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appRouter: () => (/* binding */ appRouter)\n/* harmony export */ });\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _routers_traces__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./routers/traces */ \"(api)/./src/server/api/routers/traces.ts\");\n/* harmony import */ var _routers_generations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./routers/generations */ \"(api)/./src/server/api/routers/generations/index.ts\");\n/* harmony import */ var _routers_scores__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./routers/scores */ \"(api)/./src/server/api/routers/scores.ts\");\n/* harmony import */ var _src_features_dashboard_server_dashboard_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/features/dashboard/server/dashboard-router */ \"(api)/./src/features/dashboard/server/dashboard-router.ts\");\n/* harmony import */ var _src_features_projects_server_projectsRouter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/src/features/projects/server/projectsRouter */ \"(api)/./src/features/projects/server/projectsRouter.ts\");\n/* harmony import */ var _src_features_public_api_server_apiKeyRouter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/src/features/public-api/server/apiKeyRouter */ \"(api)/./src/features/public-api/server/apiKeyRouter.ts\");\n/* harmony import */ var _src_features_rbac_server_projectMembersRouter__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/src/features/rbac/server/projectMembersRouter */ \"(api)/./src/features/rbac/server/projectMembersRouter.ts\");\n/* harmony import */ var _src_server_api_routers_users__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/src/server/api/routers/users */ \"(api)/./src/server/api/routers/users.ts\");\n/* harmony import */ var _src_features_datasets_server_dataset_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/src/features/datasets/server/dataset-router */ \"(api)/./src/features/datasets/server/dataset-router.ts\");\n/* harmony import */ var _src_server_api_routers_environment__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/src/server/api/routers/environment */ \"(api)/./src/server/api/routers/environment.ts\");\n/* harmony import */ var _src_features_usage_metering_server_usageMeteringRouter__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/src/features/usage-metering/server/usageMeteringRouter */ \"(api)/./src/features/usage-metering/server/usageMeteringRouter.ts\");\n/* harmony import */ var _src_server_api_routers_observations__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/src/server/api/routers/observations */ \"(api)/./src/server/api/routers/observations.ts\");\n/* harmony import */ var _src_server_api_routers_sessions__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/src/server/api/routers/sessions */ \"(api)/./src/server/api/routers/sessions.ts\");\n/* harmony import */ var _src_features_prompts_server_prompt_router__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/src/features/prompts/server/prompt-router */ \"(api)/./src/features/prompts/server/prompt-router.ts\");\n/* harmony import */ var _src_server_api_routers_models__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/src/server/api/routers/models */ \"(api)/./src/server/api/routers/models.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, _routers_traces__WEBPACK_IMPORTED_MODULE_1__, _routers_generations__WEBPACK_IMPORTED_MODULE_2__, _routers_scores__WEBPACK_IMPORTED_MODULE_3__, _src_features_dashboard_server_dashboard_router__WEBPACK_IMPORTED_MODULE_4__, _src_features_projects_server_projectsRouter__WEBPACK_IMPORTED_MODULE_5__, _src_features_public_api_server_apiKeyRouter__WEBPACK_IMPORTED_MODULE_6__, _src_features_rbac_server_projectMembersRouter__WEBPACK_IMPORTED_MODULE_7__, _src_server_api_routers_users__WEBPACK_IMPORTED_MODULE_8__, _src_features_datasets_server_dataset_router__WEBPACK_IMPORTED_MODULE_9__, _src_server_api_routers_environment__WEBPACK_IMPORTED_MODULE_10__, _src_features_usage_metering_server_usageMeteringRouter__WEBPACK_IMPORTED_MODULE_11__, _src_server_api_routers_observations__WEBPACK_IMPORTED_MODULE_12__, _src_server_api_routers_sessions__WEBPACK_IMPORTED_MODULE_13__, _src_features_prompts_server_prompt_router__WEBPACK_IMPORTED_MODULE_14__, _src_server_api_routers_models__WEBPACK_IMPORTED_MODULE_15__]);\n([_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, _routers_traces__WEBPACK_IMPORTED_MODULE_1__, _routers_generations__WEBPACK_IMPORTED_MODULE_2__, _routers_scores__WEBPACK_IMPORTED_MODULE_3__, _src_features_dashboard_server_dashboard_router__WEBPACK_IMPORTED_MODULE_4__, _src_features_projects_server_projectsRouter__WEBPACK_IMPORTED_MODULE_5__, _src_features_public_api_server_apiKeyRouter__WEBPACK_IMPORTED_MODULE_6__, _src_features_rbac_server_projectMembersRouter__WEBPACK_IMPORTED_MODULE_7__, _src_server_api_routers_users__WEBPACK_IMPORTED_MODULE_8__, _src_features_datasets_server_dataset_router__WEBPACK_IMPORTED_MODULE_9__, _src_server_api_routers_environment__WEBPACK_IMPORTED_MODULE_10__, _src_features_usage_metering_server_usageMeteringRouter__WEBPACK_IMPORTED_MODULE_11__, _src_server_api_routers_observations__WEBPACK_IMPORTED_MODULE_12__, _src_server_api_routers_sessions__WEBPACK_IMPORTED_MODULE_13__, _src_features_prompts_server_prompt_router__WEBPACK_IMPORTED_MODULE_14__, _src_server_api_routers_models__WEBPACK_IMPORTED_MODULE_15__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * This is the primary router for your server.\n *\n * All routers added in /api/routers should be manually added here.\n */ const appRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.createTRPCRouter)({\n    traces: _routers_traces__WEBPACK_IMPORTED_MODULE_1__.traceRouter,\n    sessions: _src_server_api_routers_sessions__WEBPACK_IMPORTED_MODULE_13__.sessionRouter,\n    generations: _routers_generations__WEBPACK_IMPORTED_MODULE_2__.generationsRouter,\n    scores: _routers_scores__WEBPACK_IMPORTED_MODULE_3__.scoresRouter,\n    dashboard: _src_features_dashboard_server_dashboard_router__WEBPACK_IMPORTED_MODULE_4__.dashboardRouter,\n    projects: _src_features_projects_server_projectsRouter__WEBPACK_IMPORTED_MODULE_5__.projectsRouter,\n    users: _src_server_api_routers_users__WEBPACK_IMPORTED_MODULE_8__.userRouter,\n    apiKeys: _src_features_public_api_server_apiKeyRouter__WEBPACK_IMPORTED_MODULE_6__.apiKeysRouter,\n    projectMembers: _src_features_rbac_server_projectMembersRouter__WEBPACK_IMPORTED_MODULE_7__.projectMembersRouter,\n    datasets: _src_features_datasets_server_dataset_router__WEBPACK_IMPORTED_MODULE_9__.datasetRouter,\n    environment: _src_server_api_routers_environment__WEBPACK_IMPORTED_MODULE_10__.environmentRouter,\n    usageMetering: _src_features_usage_metering_server_usageMeteringRouter__WEBPACK_IMPORTED_MODULE_11__.usageMeteringRouter,\n    observations: _src_server_api_routers_observations__WEBPACK_IMPORTED_MODULE_12__.observationsRouter,\n    prompts: _src_features_prompts_server_prompt_router__WEBPACK_IMPORTED_MODULE_14__.promptRouter,\n    models: _src_server_api_routers_models__WEBPACK_IMPORTED_MODULE_15__.modelRouter\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb290LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXlEO0FBQ1Y7QUFDVztBQUNWO0FBQ21DO0FBQ0o7QUFDRDtBQUNTO0FBQzNCO0FBQ2tCO0FBQ0w7QUFDc0I7QUFDcEI7QUFDVDtBQUNTO0FBQ2I7QUFFOUQ7Ozs7Q0FJQyxHQUNNLE1BQU1nQixZQUFZaEIsc0VBQWdCQSxDQUFDO0lBQ3hDaUIsUUFBUWhCLHdEQUFXQTtJQUNuQmlCLFVBQVVMLDRFQUFhQTtJQUN2Qk0sYUFBYWpCLG1FQUFpQkE7SUFDOUJrQixRQUFRakIseURBQVlBO0lBQ3BCa0IsV0FBV2pCLDRGQUFlQTtJQUMxQmtCLFVBQVVqQix3RkFBY0E7SUFDeEJrQixPQUFPZixxRUFBVUE7SUFDakJnQixTQUFTbEIsdUZBQWFBO0lBQ3RCbUIsZ0JBQWdCbEIsZ0dBQW9CQTtJQUNwQ21CLFVBQVVqQix1RkFBYUE7SUFDdkJrQixhQUFhakIsbUZBQWlCQTtJQUM5QmtCLGVBQWVqQix5R0FBbUJBO0lBQ2xDa0IsY0FBY2pCLHFGQUFrQkE7SUFDaENrQixTQUFTaEIscUZBQVlBO0lBQ3JCaUIsUUFBUWhCLHdFQUFXQTtBQUNyQixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL3NlcnZlci9hcGkvcm9vdC50cz9hOWI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVRSUENSb3V0ZXIgfSBmcm9tIFwiQC9zcmMvc2VydmVyL2FwaS90cnBjXCI7XG5pbXBvcnQgeyB0cmFjZVJvdXRlciB9IGZyb20gXCIuL3JvdXRlcnMvdHJhY2VzXCI7XG5pbXBvcnQgeyBnZW5lcmF0aW9uc1JvdXRlciB9IGZyb20gXCIuL3JvdXRlcnMvZ2VuZXJhdGlvbnNcIjtcbmltcG9ydCB7IHNjb3Jlc1JvdXRlciB9IGZyb20gXCIuL3JvdXRlcnMvc2NvcmVzXCI7XG5pbXBvcnQgeyBkYXNoYm9hcmRSb3V0ZXIgfSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvZGFzaGJvYXJkL3NlcnZlci9kYXNoYm9hcmQtcm91dGVyXCI7XG5pbXBvcnQgeyBwcm9qZWN0c1JvdXRlciB9IGZyb20gXCJAL3NyYy9mZWF0dXJlcy9wcm9qZWN0cy9zZXJ2ZXIvcHJvamVjdHNSb3V0ZXJcIjtcbmltcG9ydCB7IGFwaUtleXNSb3V0ZXIgfSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvcHVibGljLWFwaS9zZXJ2ZXIvYXBpS2V5Um91dGVyXCI7XG5pbXBvcnQgeyBwcm9qZWN0TWVtYmVyc1JvdXRlciB9IGZyb20gXCJAL3NyYy9mZWF0dXJlcy9yYmFjL3NlcnZlci9wcm9qZWN0TWVtYmVyc1JvdXRlclwiO1xuaW1wb3J0IHsgdXNlclJvdXRlciB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvdXNlcnNcIjtcbmltcG9ydCB7IGRhdGFzZXRSb3V0ZXIgfSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvZGF0YXNldHMvc2VydmVyL2RhdGFzZXQtcm91dGVyXCI7XG5pbXBvcnQgeyBlbnZpcm9ubWVudFJvdXRlciB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvZW52aXJvbm1lbnRcIjtcbmltcG9ydCB7IHVzYWdlTWV0ZXJpbmdSb3V0ZXIgfSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvdXNhZ2UtbWV0ZXJpbmcvc2VydmVyL3VzYWdlTWV0ZXJpbmdSb3V0ZXJcIjtcbmltcG9ydCB7IG9ic2VydmF0aW9uc1JvdXRlciB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvb2JzZXJ2YXRpb25zXCI7XG5pbXBvcnQgeyBzZXNzaW9uUm91dGVyIH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvcm91dGVycy9zZXNzaW9uc1wiO1xuaW1wb3J0IHsgcHJvbXB0Um91dGVyIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL3Byb21wdHMvc2VydmVyL3Byb21wdC1yb3V0ZXJcIjtcbmltcG9ydCB7IG1vZGVsUm91dGVyIH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvcm91dGVycy9tb2RlbHNcIjtcblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBwcmltYXJ5IHJvdXRlciBmb3IgeW91ciBzZXJ2ZXIuXG4gKlxuICogQWxsIHJvdXRlcnMgYWRkZWQgaW4gL2FwaS9yb3V0ZXJzIHNob3VsZCBiZSBtYW51YWxseSBhZGRlZCBoZXJlLlxuICovXG5leHBvcnQgY29uc3QgYXBwUm91dGVyID0gY3JlYXRlVFJQQ1JvdXRlcih7XG4gIHRyYWNlczogdHJhY2VSb3V0ZXIsXG4gIHNlc3Npb25zOiBzZXNzaW9uUm91dGVyLFxuICBnZW5lcmF0aW9uczogZ2VuZXJhdGlvbnNSb3V0ZXIsXG4gIHNjb3Jlczogc2NvcmVzUm91dGVyLFxuICBkYXNoYm9hcmQ6IGRhc2hib2FyZFJvdXRlcixcbiAgcHJvamVjdHM6IHByb2plY3RzUm91dGVyLFxuICB1c2VyczogdXNlclJvdXRlcixcbiAgYXBpS2V5czogYXBpS2V5c1JvdXRlcixcbiAgcHJvamVjdE1lbWJlcnM6IHByb2plY3RNZW1iZXJzUm91dGVyLFxuICBkYXRhc2V0czogZGF0YXNldFJvdXRlcixcbiAgZW52aXJvbm1lbnQ6IGVudmlyb25tZW50Um91dGVyLFxuICB1c2FnZU1ldGVyaW5nOiB1c2FnZU1ldGVyaW5nUm91dGVyLFxuICBvYnNlcnZhdGlvbnM6IG9ic2VydmF0aW9uc1JvdXRlcixcbiAgcHJvbXB0czogcHJvbXB0Um91dGVyLFxuICBtb2RlbHM6IG1vZGVsUm91dGVyLFxufSk7XG5cbi8vIGV4cG9ydCB0eXBlIGRlZmluaXRpb24gb2YgQVBJXG5leHBvcnQgdHlwZSBBcHBSb3V0ZXIgPSB0eXBlb2YgYXBwUm91dGVyO1xuIl0sIm5hbWVzIjpbImNyZWF0ZVRSUENSb3V0ZXIiLCJ0cmFjZVJvdXRlciIsImdlbmVyYXRpb25zUm91dGVyIiwic2NvcmVzUm91dGVyIiwiZGFzaGJvYXJkUm91dGVyIiwicHJvamVjdHNSb3V0ZXIiLCJhcGlLZXlzUm91dGVyIiwicHJvamVjdE1lbWJlcnNSb3V0ZXIiLCJ1c2VyUm91dGVyIiwiZGF0YXNldFJvdXRlciIsImVudmlyb25tZW50Um91dGVyIiwidXNhZ2VNZXRlcmluZ1JvdXRlciIsIm9ic2VydmF0aW9uc1JvdXRlciIsInNlc3Npb25Sb3V0ZXIiLCJwcm9tcHRSb3V0ZXIiLCJtb2RlbFJvdXRlciIsImFwcFJvdXRlciIsInRyYWNlcyIsInNlc3Npb25zIiwiZ2VuZXJhdGlvbnMiLCJzY29yZXMiLCJkYXNoYm9hcmQiLCJwcm9qZWN0cyIsInVzZXJzIiwiYXBpS2V5cyIsInByb2plY3RNZW1iZXJzIiwiZGF0YXNldHMiLCJlbnZpcm9ubWVudCIsInVzYWdlTWV0ZXJpbmciLCJvYnNlcnZhdGlvbnMiLCJwcm9tcHRzIiwibW9kZWxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/api/root.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/environment.ts":
/*!***********************************************!*\
  !*** ./src/server/api/routers/environment.ts ***!
  \***********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   environmentRouter: () => (/* binding */ environmentRouter)\n/* harmony export */ });\n/* harmony import */ var _src_env_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/env.mjs */ \"(api)/./src/env.mjs\");\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_env_mjs__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__]);\n([_src_env_mjs__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst environmentRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.createTRPCRouter)({\n    enableExperimentalFeatures: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.publicProcedure.query(()=>_src_env_mjs__WEBPACK_IMPORTED_MODULE_0__.env.LANGFUSE_ENABLE_EXPERIMENTAL_FEATURES === \"true\")\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2Vudmlyb25tZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFvQztBQUNzQztBQUVuRSxNQUFNRyxvQkFBb0JGLHNFQUFnQkEsQ0FBQztJQUNoREcsNEJBQTRCRixpRUFBZUEsQ0FBQ0csS0FBSyxDQUMvQyxJQUFNTCw2Q0FBR0EsQ0FBQ00scUNBQXFDLEtBQUs7QUFFeEQsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvZW52aXJvbm1lbnQudHM/MzkwZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlbnYgfSBmcm9tIFwiQC9zcmMvZW52Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlVFJQQ1JvdXRlciwgcHVibGljUHJvY2VkdXJlIH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvdHJwY1wiO1xuXG5leHBvcnQgY29uc3QgZW52aXJvbm1lbnRSb3V0ZXIgPSBjcmVhdGVUUlBDUm91dGVyKHtcbiAgZW5hYmxlRXhwZXJpbWVudGFsRmVhdHVyZXM6IHB1YmxpY1Byb2NlZHVyZS5xdWVyeShcbiAgICAoKSA9PiBlbnYuTEFOR0ZVU0VfRU5BQkxFX0VYUEVSSU1FTlRBTF9GRUFUVVJFUyA9PT0gXCJ0cnVlXCIsXG4gICksXG59KTtcbiJdLCJuYW1lcyI6WyJlbnYiLCJjcmVhdGVUUlBDUm91dGVyIiwicHVibGljUHJvY2VkdXJlIiwiZW52aXJvbm1lbnRSb3V0ZXIiLCJlbmFibGVFeHBlcmltZW50YWxGZWF0dXJlcyIsInF1ZXJ5IiwiTEFOR0ZVU0VfRU5BQkxFX0VYUEVSSU1FTlRBTF9GRUFUVVJFUyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/environment.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/generations/db/DatabaseReadStream.ts":
/*!*********************************************************************!*\
  !*** ./src/server/api/routers/generations/db/DatabaseReadStream.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DatabaseReadStream: () => (/* binding */ DatabaseReadStream)\n/* harmony export */ });\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ \"stream\");\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_0__);\n\n/**\n * DatabaseReadStream fetches and streams database records in paginated batches,\n * simulating a streaming behavior. This class is designed for efficient, memory-optimized chunking of\n * database queries, ideal for processing large datasets with minimal memory overhead. It operates in\n * object mode, directly streaming database entity objects.\n *\n * Note: Due to Prisma's lack of direct streaming support, this class implements a chunk-based approach\n * rather than true database streaming. It fetches data in paginated batches determined by the pageSize.\n * GitHub issue: https://github.com/prisma/prisma/issues/5055\n *\n * @param prisma - The PrismaClient instance for database queries.\n * @param rawSqlQuery - A Prisma.Sql object representing the base SQL query, excluding OFFSET and LIMIT.\n * @param pageSize - Number of records per batch, defining the chunk size.\n *\n * The class extends Node.js's Readable stream, using async iteration and Prisma's pagination for scalable\n * data processing. It's suitable for applications requiring large dataset processing with a low memory footprint.\n */ class DatabaseReadStream extends stream__WEBPACK_IMPORTED_MODULE_0__.Readable {\n    constructor(// the delegate function takes care of querying the database in a paginated manner\n    queryDelegate, pageSize){\n        super({\n            objectMode: true\n        }); // Set object mode to true to allow pushing objects to the stream rather than strings or buffers\n        this.queryDelegate = queryDelegate;\n        this.pageSize = pageSize;\n        this.isReading = false; // Prevent concurrent read executions\n        this.hasNextPage = true;\n        this.offset = 0;\n    }\n    async _read() {\n        if (!this.hasNextPage || this.isReading) return; // Avoid calling the database if there's no more data or if a read operation is already in progress\n        this.isReading = true;\n        try {\n            const rows = await this.queryDelegate(this.pageSize, this.offset);\n            if (rows.length > 0) {\n                rows.forEach((row)=>this.push(row));\n                this.offset += rows.length;\n            } else {\n                this.hasNextPage = false;\n                this.push(null); // Signal end of stream\n            }\n        } catch (error) {\n            this.emit(\"error\", error);\n        } finally{\n            this.isReading = false;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL2RiL0RhdGFiYXNlUmVhZFN0cmVhbS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBa0M7QUFFbEM7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FnQkMsR0FDTSxNQUFNQywyQkFBdUNELDRDQUFRQTtJQUsxREUsWUFDRSxrRkFBa0Y7SUFDMUVDLGFBR3VCLEVBQy9CLFFBQXdCLENBQ3hCO1FBQ0EsS0FBSyxDQUFDO1lBQUVFLFlBQVk7UUFBSyxJQUFJLGdHQUFnRzthQU5ySEYsZ0JBQUFBO2FBSUFDLFdBQUFBO1FBSVIsSUFBSSxDQUFDRSxTQUFTLEdBQUcsT0FBTyxxQ0FBcUM7UUFDN0QsSUFBSSxDQUFDQyxXQUFXLEdBQUc7UUFDbkIsSUFBSSxDQUFDQyxNQUFNLEdBQUc7SUFDaEI7SUFFQSxNQUFNQyxRQUFRO1FBQ1osSUFBSSxDQUFDLElBQUksQ0FBQ0YsV0FBVyxJQUFJLElBQUksQ0FBQ0QsU0FBUyxFQUFFLFFBQVEsbUdBQW1HO1FBRXBKLElBQUksQ0FBQ0EsU0FBUyxHQUFHO1FBRWpCLElBQUk7WUFDRixNQUFNSSxPQUFPLE1BQU0sSUFBSSxDQUFDUCxhQUFhLENBQUMsSUFBSSxDQUFDQyxRQUFRLEVBQUUsSUFBSSxDQUFDSSxNQUFNO1lBQ2hFLElBQUlFLEtBQUtDLE1BQU0sR0FBRyxHQUFHO2dCQUNuQkQsS0FBS0UsT0FBTyxDQUFDLENBQUNDLE1BQVEsSUFBSSxDQUFDQyxJQUFJLENBQUNEO2dCQUNoQyxJQUFJLENBQUNMLE1BQU0sSUFBSUUsS0FBS0MsTUFBTTtZQUM1QixPQUFPO2dCQUNMLElBQUksQ0FBQ0osV0FBVyxHQUFHO2dCQUNuQixJQUFJLENBQUNPLElBQUksQ0FBQyxPQUFPLHVCQUF1QjtZQUMxQztRQUNGLEVBQUUsT0FBT0MsT0FBTztZQUNkLElBQUksQ0FBQ0MsSUFBSSxDQUFDLFNBQVNEO1FBQ3JCLFNBQVU7WUFDUixJQUFJLENBQUNULFNBQVMsR0FBRztRQUNuQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL2RiL0RhdGFiYXNlUmVhZFN0cmVhbS50cz82NTNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSBcInN0cmVhbVwiO1xuXG4vKipcbiAqIERhdGFiYXNlUmVhZFN0cmVhbSBmZXRjaGVzIGFuZCBzdHJlYW1zIGRhdGFiYXNlIHJlY29yZHMgaW4gcGFnaW5hdGVkIGJhdGNoZXMsXG4gKiBzaW11bGF0aW5nIGEgc3RyZWFtaW5nIGJlaGF2aW9yLiBUaGlzIGNsYXNzIGlzIGRlc2lnbmVkIGZvciBlZmZpY2llbnQsIG1lbW9yeS1vcHRpbWl6ZWQgY2h1bmtpbmcgb2ZcbiAqIGRhdGFiYXNlIHF1ZXJpZXMsIGlkZWFsIGZvciBwcm9jZXNzaW5nIGxhcmdlIGRhdGFzZXRzIHdpdGggbWluaW1hbCBtZW1vcnkgb3ZlcmhlYWQuIEl0IG9wZXJhdGVzIGluXG4gKiBvYmplY3QgbW9kZSwgZGlyZWN0bHkgc3RyZWFtaW5nIGRhdGFiYXNlIGVudGl0eSBvYmplY3RzLlxuICpcbiAqIE5vdGU6IER1ZSB0byBQcmlzbWEncyBsYWNrIG9mIGRpcmVjdCBzdHJlYW1pbmcgc3VwcG9ydCwgdGhpcyBjbGFzcyBpbXBsZW1lbnRzIGEgY2h1bmstYmFzZWQgYXBwcm9hY2hcbiAqIHJhdGhlciB0aGFuIHRydWUgZGF0YWJhc2Ugc3RyZWFtaW5nLiBJdCBmZXRjaGVzIGRhdGEgaW4gcGFnaW5hdGVkIGJhdGNoZXMgZGV0ZXJtaW5lZCBieSB0aGUgcGFnZVNpemUuXG4gKiBHaXRIdWIgaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9wcmlzbWEvcHJpc21hL2lzc3Vlcy81MDU1XG4gKlxuICogQHBhcmFtIHByaXNtYSAtIFRoZSBQcmlzbWFDbGllbnQgaW5zdGFuY2UgZm9yIGRhdGFiYXNlIHF1ZXJpZXMuXG4gKiBAcGFyYW0gcmF3U3FsUXVlcnkgLSBBIFByaXNtYS5TcWwgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgYmFzZSBTUUwgcXVlcnksIGV4Y2x1ZGluZyBPRkZTRVQgYW5kIExJTUlULlxuICogQHBhcmFtIHBhZ2VTaXplIC0gTnVtYmVyIG9mIHJlY29yZHMgcGVyIGJhdGNoLCBkZWZpbmluZyB0aGUgY2h1bmsgc2l6ZS5cbiAqXG4gKiBUaGUgY2xhc3MgZXh0ZW5kcyBOb2RlLmpzJ3MgUmVhZGFibGUgc3RyZWFtLCB1c2luZyBhc3luYyBpdGVyYXRpb24gYW5kIFByaXNtYSdzIHBhZ2luYXRpb24gZm9yIHNjYWxhYmxlXG4gKiBkYXRhIHByb2Nlc3NpbmcuIEl0J3Mgc3VpdGFibGUgZm9yIGFwcGxpY2F0aW9ucyByZXF1aXJpbmcgbGFyZ2UgZGF0YXNldCBwcm9jZXNzaW5nIHdpdGggYSBsb3cgbWVtb3J5IGZvb3RwcmludC5cbiAqL1xuZXhwb3J0IGNsYXNzIERhdGFiYXNlUmVhZFN0cmVhbTxFbnRpdHlUeXBlPiBleHRlbmRzIFJlYWRhYmxlIHtcbiAgcHJpdmF0ZSBoYXNOZXh0UGFnZTogYm9vbGVhbjtcbiAgcHJpdmF0ZSBvZmZzZXQ6IG51bWJlcjtcbiAgcHJpdmF0ZSBpc1JlYWRpbmc6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgLy8gdGhlIGRlbGVnYXRlIGZ1bmN0aW9uIHRha2VzIGNhcmUgb2YgcXVlcnlpbmcgdGhlIGRhdGFiYXNlIGluIGEgcGFnaW5hdGVkIG1hbm5lclxuICAgIHByaXZhdGUgcXVlcnlEZWxlZ2F0ZTogKFxuICAgICAgcGFnZVNpemU6IG51bWJlcixcbiAgICAgIG9mZnNldDogbnVtYmVyLFxuICAgICkgPT4gUHJvbWlzZTxBcnJheTxFbnRpdHlUeXBlPj4sXG4gICAgcHJpdmF0ZSBwYWdlU2l6ZTogbnVtYmVyLFxuICApIHtcbiAgICBzdXBlcih7IG9iamVjdE1vZGU6IHRydWUgfSk7IC8vIFNldCBvYmplY3QgbW9kZSB0byB0cnVlIHRvIGFsbG93IHB1c2hpbmcgb2JqZWN0cyB0byB0aGUgc3RyZWFtIHJhdGhlciB0aGFuIHN0cmluZ3Mgb3IgYnVmZmVyc1xuXG4gICAgdGhpcy5pc1JlYWRpbmcgPSBmYWxzZTsgLy8gUHJldmVudCBjb25jdXJyZW50IHJlYWQgZXhlY3V0aW9uc1xuICAgIHRoaXMuaGFzTmV4dFBhZ2UgPSB0cnVlO1xuICAgIHRoaXMub2Zmc2V0ID0gMDtcbiAgfVxuXG4gIGFzeW5jIF9yZWFkKCkge1xuICAgIGlmICghdGhpcy5oYXNOZXh0UGFnZSB8fCB0aGlzLmlzUmVhZGluZykgcmV0dXJuOyAvLyBBdm9pZCBjYWxsaW5nIHRoZSBkYXRhYmFzZSBpZiB0aGVyZSdzIG5vIG1vcmUgZGF0YSBvciBpZiBhIHJlYWQgb3BlcmF0aW9uIGlzIGFscmVhZHkgaW4gcHJvZ3Jlc3NcblxuICAgIHRoaXMuaXNSZWFkaW5nID0gdHJ1ZTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByb3dzID0gYXdhaXQgdGhpcy5xdWVyeURlbGVnYXRlKHRoaXMucGFnZVNpemUsIHRoaXMub2Zmc2V0KTtcbiAgICAgIGlmIChyb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcm93cy5mb3JFYWNoKChyb3cpID0+IHRoaXMucHVzaChyb3cpKTtcbiAgICAgICAgdGhpcy5vZmZzZXQgKz0gcm93cy5sZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhhc05leHRQYWdlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHVzaChudWxsKTsgLy8gU2lnbmFsIGVuZCBvZiBzdHJlYW1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5lbWl0KFwiZXJyb3JcIiwgZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzUmVhZGluZyA9IGZhbHNlO1xuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbIlJlYWRhYmxlIiwiRGF0YWJhc2VSZWFkU3RyZWFtIiwiY29uc3RydWN0b3IiLCJxdWVyeURlbGVnYXRlIiwicGFnZVNpemUiLCJvYmplY3RNb2RlIiwiaXNSZWFkaW5nIiwiaGFzTmV4dFBhZ2UiLCJvZmZzZXQiLCJfcmVhZCIsInJvd3MiLCJsZW5ndGgiLCJmb3JFYWNoIiwicm93IiwicHVzaCIsImVycm9yIiwiZW1pdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/generations/db/DatabaseReadStream.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/generations/db/getAllGenerationsSqlQuery.ts":
/*!****************************************************************************!*\
  !*** ./src/server/api/routers/generations/db/getAllGenerationsSqlQuery.ts ***!
  \****************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAllGenerations: () => (/* binding */ getAllGenerations)\n/* harmony export */ });\n/* harmony import */ var _src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/features/filters/server/filterToPrisma */ \"(api)/./src/features/filters/server/filterToPrisma.ts\");\n/* harmony import */ var _src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/features/orderBy/server/orderByToPrisma */ \"(api)/./src/features/orderBy/server/orderByToPrisma.ts\");\n/* harmony import */ var _src_server_api_definitions_observationsTable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/server/api/definitions/observationsTable */ \"(api)/./src/server/api/definitions/observationsTable.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _src_server_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/server/db */ \"(api)/./src/server/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_0__, _src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_1__, _src_server_db__WEBPACK_IMPORTED_MODULE_4__]);\n([_src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_0__, _src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_1__, _src_server_db__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nasync function getAllGenerations({ input, selectIO }) {\n    const searchCondition = input.searchQuery ? _prisma_client__WEBPACK_IMPORTED_MODULE_3__.Prisma.sql`AND (\n        o.\"id\" ILIKE ${`%${input.searchQuery}%`} OR\n        o.\"name\" ILIKE ${`%${input.searchQuery}%`} OR\n        o.\"model\" ILIKE ${`%${input.searchQuery}%`} OR\n        t.\"name\" ILIKE ${`%${input.searchQuery}%`}\n      )` : _prisma_client__WEBPACK_IMPORTED_MODULE_3__.Prisma.empty;\n    const filterCondition = (0,_src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_0__.tableColumnsToSqlFilterAndPrefix)(input.filter, _src_server_api_definitions_observationsTable__WEBPACK_IMPORTED_MODULE_2__.observationsTableCols, \"observations\");\n    const orderByCondition = (0,_src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_1__.orderByToPrismaSql)(input.orderBy, _src_server_api_definitions_observationsTable__WEBPACK_IMPORTED_MODULE_2__.observationsTableCols);\n    // to improve query performance, add timeseries filter to observation queries as well\n    const startTimeFilter = input.filter.find((f)=>f.column === \"start_time\" && f.type === \"datetime\");\n    const datetimeFilter = startTimeFilter && startTimeFilter.type === \"datetime\" ? (0,_src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_0__.datetimeFilterToPrismaSql)(\"start_time\", startTimeFilter.operator, startTimeFilter.value) : _prisma_client__WEBPACK_IMPORTED_MODULE_3__.Prisma.empty;\n    const query = _prisma_client__WEBPACK_IMPORTED_MODULE_3__.Prisma.sql`\n      WITH scores_avg AS (\n        SELECT\n          trace_id,\n          observation_id,\n          jsonb_object_agg(name::text, avg_value::double precision) AS scores_avg\n        FROM (\n          SELECT\n            trace_id,\n            observation_id,\n            name,\n            avg(value) avg_value,\n            comment\n          FROM\n            scores\n          GROUP BY\n            1,\n            2,\n            3,\n            5\n          ORDER BY\n            1) tmp\n        GROUP BY\n          1, 2\n      )\n      SELECT\n        o.id,\n        o.name,\n        o.model,\n        o.\"modelParameters\",\n        o.start_time as \"startTime\",\n        o.end_time as \"endTime\",\n        ${selectIO ? _prisma_client__WEBPACK_IMPORTED_MODULE_3__.Prisma.sql`o.input, o.output,` : _prisma_client__WEBPACK_IMPORTED_MODULE_3__.Prisma.empty} \n        o.metadata,\n        o.trace_id as \"traceId\",\n        t.name as \"traceName\",\n        o.completion_start_time as \"completionStartTime\",\n        o.prompt_tokens as \"promptTokens\",\n        o.completion_tokens as \"completionTokens\",\n        o.total_tokens as \"totalTokens\",\n        o.unit,\n        o.level,\n        o.status_message as \"statusMessage\",\n        o.version,\n        o.model_id as \"modelId\",\n        o.input_price as \"inputPrice\",\n        o.output_price as \"outputPrice\",\n        o.total_price as \"totalPrice\",\n        o.calculated_input_cost as \"calculatedInputCost\",\n        o.calculated_output_cost as \"calculatedOutputCost\",\n        o.calculated_total_cost as \"calculatedTotalCost\",\n        o.\"latency\",\n        o.prompt_id as \"promptId\",\n        p.name as \"promptName\",\n        p.version as \"promptVersion\"\n      FROM observations_view o\n      JOIN traces t ON t.id = o.trace_id AND t.project_id = o.project_id\n      LEFT JOIN scores_avg AS s_avg ON s_avg.trace_id = t.id and s_avg.observation_id = o.id\n      LEFT JOIN prompts p ON p.id = o.prompt_id\n      WHERE\n        o.project_id = ${input.projectId}\n        AND t.project_id = ${input.projectId}\n        AND o.type = 'GENERATION'\n        ${datetimeFilter}\n        ${searchCondition}\n        ${filterCondition}\n        ${orderByCondition}\n      LIMIT ${input.limit} OFFSET ${input.page * input.limit}\n    `;\n    const generations = await _src_server_db__WEBPACK_IMPORTED_MODULE_4__.prisma.$queryRaw(query);\n    const scores = await _src_server_db__WEBPACK_IMPORTED_MODULE_4__.prisma.score.findMany({\n        where: {\n            trace: {\n                projectId: input.projectId\n            },\n            observationId: {\n                in: generations.map((gen)=>gen.id)\n            }\n        }\n    });\n    const fullGenerations = generations.map((generation)=>{\n        const filteredScores = scores.filter((s)=>s.observationId === generation.id);\n        return {\n            ...generation,\n            scores: filteredScores\n        };\n    });\n    return {\n        generations: fullGenerations,\n        datetimeFilter,\n        searchCondition,\n        filterCondition\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL2RiL2dldEFsbEdlbmVyYXRpb25zU3FsUXVlcnkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUdzRDtBQUM2QjtBQUNJO0FBQ3pCO0FBQ3JCO0FBR2xDLGVBQWVNLGtCQUFrQixFQUN0Q0MsS0FBSyxFQUNMQyxRQUFRLEVBSVQ7SUFDQyxNQUFNQyxrQkFBa0JGLE1BQU1HLFdBQVcsR0FDckNOLGtEQUFNQSxDQUFDTyxHQUFHLENBQUM7cUJBQ0ksRUFBRSxDQUFDLENBQUMsRUFBRUosTUFBTUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO3VCQUN6QixFQUFFLENBQUMsQ0FBQyxFQUFFSCxNQUFNRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7d0JBQzFCLEVBQUUsQ0FBQyxDQUFDLEVBQUVILE1BQU1HLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQzt1QkFDNUIsRUFBRSxDQUFDLENBQUMsRUFBRUgsTUFBTUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO09BQzNDLENBQUMsR0FDRk4sa0RBQU1BLENBQUNRLEtBQUs7SUFFaEIsTUFBTUMsa0JBQWtCWiw2R0FBZ0NBLENBQ3RETSxNQUFNTyxNQUFNLEVBQ1pYLGdHQUFxQkEsRUFDckI7SUFHRixNQUFNWSxtQkFBbUJiLGdHQUFrQkEsQ0FDekNLLE1BQU1TLE9BQU8sRUFDYmIsZ0dBQXFCQTtJQUd2QixxRkFBcUY7SUFDckYsTUFBTWMsa0JBQWtCVixNQUFNTyxNQUFNLENBQUNJLElBQUksQ0FDdkMsQ0FBQ0MsSUFBTUEsRUFBRUMsTUFBTSxLQUFLLGdCQUFnQkQsRUFBRUUsSUFBSSxLQUFLO0lBRWpELE1BQU1DLGlCQUNKTCxtQkFBbUJBLGdCQUFnQkksSUFBSSxLQUFLLGFBQ3hDckIsc0dBQXlCQSxDQUN2QixjQUNBaUIsZ0JBQWdCTSxRQUFRLEVBQ3hCTixnQkFBZ0JPLEtBQUssSUFFdkJwQixrREFBTUEsQ0FBQ1EsS0FBSztJQUVsQixNQUFNYSxRQUFRckIsa0RBQU1BLENBQUNPLEdBQUcsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7UUFnQ25CLEVBQUVILFdBQVdKLGtEQUFNQSxDQUFDTyxHQUFHLENBQUMsa0JBQWtCLENBQUMsR0FBR1Asa0RBQU1BLENBQUNRLEtBQUssQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt1QkE0QjVDLEVBQUVMLE1BQU1tQixTQUFTLENBQUM7MkJBQ2QsRUFBRW5CLE1BQU1tQixTQUFTLENBQUM7O1FBRXJDLEVBQUVKLGVBQWU7UUFDakIsRUFBRWIsZ0JBQWdCO1FBQ2xCLEVBQUVJLGdCQUFnQjtRQUNsQixFQUFFRSxpQkFBaUI7WUFDZixFQUFFUixNQUFNb0IsS0FBSyxDQUFDLFFBQVEsRUFBRXBCLE1BQU1xQixJQUFJLEdBQUdyQixNQUFNb0IsS0FBSyxDQUFDO0lBQ3pELENBQUM7SUFFSCxNQUFNRSxjQUFjLE1BQU14QixrREFBTUEsQ0FBQ3lCLFNBQVMsQ0FReENMO0lBRUYsTUFBTU0sU0FBUyxNQUFNMUIsa0RBQU1BLENBQUMyQixLQUFLLENBQUNDLFFBQVEsQ0FBQztRQUN6Q0MsT0FBTztZQUNMQyxPQUFPO2dCQUNMVCxXQUFXbkIsTUFBTW1CLFNBQVM7WUFDNUI7WUFDQVUsZUFBZTtnQkFDYkMsSUFBSVIsWUFBWVMsR0FBRyxDQUFDLENBQUNDLE1BQVFBLElBQUlDLEVBQUU7WUFDckM7UUFDRjtJQUNGO0lBRUEsTUFBTUMsa0JBQWtCWixZQUFZUyxHQUFHLENBQUMsQ0FBQ0k7UUFDdkMsTUFBTUMsaUJBQWlCWixPQUFPakIsTUFBTSxDQUNsQyxDQUFDOEIsSUFBTUEsRUFBRVIsYUFBYSxLQUFLTSxXQUFXRixFQUFFO1FBRTFDLE9BQU87WUFDTCxHQUFHRSxVQUFVO1lBQ2JYLFFBQVFZO1FBQ1Y7SUFDRjtJQUVBLE9BQU87UUFDTGQsYUFBYVk7UUFDYm5CO1FBQ0FiO1FBQ0FJO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvZ2VuZXJhdGlvbnMvZGIvZ2V0QWxsR2VuZXJhdGlvbnNTcWxRdWVyeS50cz83ODM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGRhdGV0aW1lRmlsdGVyVG9QcmlzbWFTcWwsXG4gIHRhYmxlQ29sdW1uc1RvU3FsRmlsdGVyQW5kUHJlZml4LFxufSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvZmlsdGVycy9zZXJ2ZXIvZmlsdGVyVG9QcmlzbWFcIjtcbmltcG9ydCB7IG9yZGVyQnlUb1ByaXNtYVNxbCB9IGZyb20gXCJAL3NyYy9mZWF0dXJlcy9vcmRlckJ5L3NlcnZlci9vcmRlckJ5VG9QcmlzbWFcIjtcbmltcG9ydCB7IG9ic2VydmF0aW9uc1RhYmxlQ29scyB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL2RlZmluaXRpb25zL29ic2VydmF0aW9uc1RhYmxlXCI7XG5pbXBvcnQgeyB0eXBlIE9ic2VydmF0aW9uVmlldywgUHJpc21hIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9zcmMvc2VydmVyL2RiXCI7XG5pbXBvcnQgeyB0eXBlIEdldEFsbEdlbmVyYXRpb25zSW5wdXQgfSBmcm9tIFwiLi4vZ2V0QWxsUXVlcnlcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbEdlbmVyYXRpb25zKHtcbiAgaW5wdXQsXG4gIHNlbGVjdElPLFxufToge1xuICBpbnB1dDogR2V0QWxsR2VuZXJhdGlvbnNJbnB1dDtcbiAgc2VsZWN0SU86IGJvb2xlYW47XG59KSB7XG4gIGNvbnN0IHNlYXJjaENvbmRpdGlvbiA9IGlucHV0LnNlYXJjaFF1ZXJ5XG4gICAgPyBQcmlzbWEuc3FsYEFORCAoXG4gICAgICAgIG8uXCJpZFwiIElMSUtFICR7YCUke2lucHV0LnNlYXJjaFF1ZXJ5fSVgfSBPUlxuICAgICAgICBvLlwibmFtZVwiIElMSUtFICR7YCUke2lucHV0LnNlYXJjaFF1ZXJ5fSVgfSBPUlxuICAgICAgICBvLlwibW9kZWxcIiBJTElLRSAke2AlJHtpbnB1dC5zZWFyY2hRdWVyeX0lYH0gT1JcbiAgICAgICAgdC5cIm5hbWVcIiBJTElLRSAke2AlJHtpbnB1dC5zZWFyY2hRdWVyeX0lYH1cbiAgICAgIClgXG4gICAgOiBQcmlzbWEuZW1wdHk7XG5cbiAgY29uc3QgZmlsdGVyQ29uZGl0aW9uID0gdGFibGVDb2x1bW5zVG9TcWxGaWx0ZXJBbmRQcmVmaXgoXG4gICAgaW5wdXQuZmlsdGVyLFxuICAgIG9ic2VydmF0aW9uc1RhYmxlQ29scyxcbiAgICBcIm9ic2VydmF0aW9uc1wiLFxuICApO1xuXG4gIGNvbnN0IG9yZGVyQnlDb25kaXRpb24gPSBvcmRlckJ5VG9QcmlzbWFTcWwoXG4gICAgaW5wdXQub3JkZXJCeSxcbiAgICBvYnNlcnZhdGlvbnNUYWJsZUNvbHMsXG4gICk7XG5cbiAgLy8gdG8gaW1wcm92ZSBxdWVyeSBwZXJmb3JtYW5jZSwgYWRkIHRpbWVzZXJpZXMgZmlsdGVyIHRvIG9ic2VydmF0aW9uIHF1ZXJpZXMgYXMgd2VsbFxuICBjb25zdCBzdGFydFRpbWVGaWx0ZXIgPSBpbnB1dC5maWx0ZXIuZmluZChcbiAgICAoZikgPT4gZi5jb2x1bW4gPT09IFwic3RhcnRfdGltZVwiICYmIGYudHlwZSA9PT0gXCJkYXRldGltZVwiLFxuICApO1xuICBjb25zdCBkYXRldGltZUZpbHRlciA9XG4gICAgc3RhcnRUaW1lRmlsdGVyICYmIHN0YXJ0VGltZUZpbHRlci50eXBlID09PSBcImRhdGV0aW1lXCJcbiAgICAgID8gZGF0ZXRpbWVGaWx0ZXJUb1ByaXNtYVNxbChcbiAgICAgICAgICBcInN0YXJ0X3RpbWVcIixcbiAgICAgICAgICBzdGFydFRpbWVGaWx0ZXIub3BlcmF0b3IsXG4gICAgICAgICAgc3RhcnRUaW1lRmlsdGVyLnZhbHVlLFxuICAgICAgICApXG4gICAgICA6IFByaXNtYS5lbXB0eTtcblxuICBjb25zdCBxdWVyeSA9IFByaXNtYS5zcWxgXG4gICAgICBXSVRIIHNjb3Jlc19hdmcgQVMgKFxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgICB0cmFjZV9pZCxcbiAgICAgICAgICBvYnNlcnZhdGlvbl9pZCxcbiAgICAgICAgICBqc29uYl9vYmplY3RfYWdnKG5hbWU6OnRleHQsIGF2Z192YWx1ZTo6ZG91YmxlIHByZWNpc2lvbikgQVMgc2NvcmVzX2F2Z1xuICAgICAgICBGUk9NIChcbiAgICAgICAgICBTRUxFQ1RcbiAgICAgICAgICAgIHRyYWNlX2lkLFxuICAgICAgICAgICAgb2JzZXJ2YXRpb25faWQsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgYXZnKHZhbHVlKSBhdmdfdmFsdWUsXG4gICAgICAgICAgICBjb21tZW50XG4gICAgICAgICAgRlJPTVxuICAgICAgICAgICAgc2NvcmVzXG4gICAgICAgICAgR1JPVVAgQllcbiAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAyLFxuICAgICAgICAgICAgMyxcbiAgICAgICAgICAgIDVcbiAgICAgICAgICBPUkRFUiBCWVxuICAgICAgICAgICAgMSkgdG1wXG4gICAgICAgIEdST1VQIEJZXG4gICAgICAgICAgMSwgMlxuICAgICAgKVxuICAgICAgU0VMRUNUXG4gICAgICAgIG8uaWQsXG4gICAgICAgIG8ubmFtZSxcbiAgICAgICAgby5tb2RlbCxcbiAgICAgICAgby5cIm1vZGVsUGFyYW1ldGVyc1wiLFxuICAgICAgICBvLnN0YXJ0X3RpbWUgYXMgXCJzdGFydFRpbWVcIixcbiAgICAgICAgby5lbmRfdGltZSBhcyBcImVuZFRpbWVcIixcbiAgICAgICAgJHtzZWxlY3RJTyA/IFByaXNtYS5zcWxgby5pbnB1dCwgby5vdXRwdXQsYCA6IFByaXNtYS5lbXB0eX0gXG4gICAgICAgIG8ubWV0YWRhdGEsXG4gICAgICAgIG8udHJhY2VfaWQgYXMgXCJ0cmFjZUlkXCIsXG4gICAgICAgIHQubmFtZSBhcyBcInRyYWNlTmFtZVwiLFxuICAgICAgICBvLmNvbXBsZXRpb25fc3RhcnRfdGltZSBhcyBcImNvbXBsZXRpb25TdGFydFRpbWVcIixcbiAgICAgICAgby5wcm9tcHRfdG9rZW5zIGFzIFwicHJvbXB0VG9rZW5zXCIsXG4gICAgICAgIG8uY29tcGxldGlvbl90b2tlbnMgYXMgXCJjb21wbGV0aW9uVG9rZW5zXCIsXG4gICAgICAgIG8udG90YWxfdG9rZW5zIGFzIFwidG90YWxUb2tlbnNcIixcbiAgICAgICAgby51bml0LFxuICAgICAgICBvLmxldmVsLFxuICAgICAgICBvLnN0YXR1c19tZXNzYWdlIGFzIFwic3RhdHVzTWVzc2FnZVwiLFxuICAgICAgICBvLnZlcnNpb24sXG4gICAgICAgIG8ubW9kZWxfaWQgYXMgXCJtb2RlbElkXCIsXG4gICAgICAgIG8uaW5wdXRfcHJpY2UgYXMgXCJpbnB1dFByaWNlXCIsXG4gICAgICAgIG8ub3V0cHV0X3ByaWNlIGFzIFwib3V0cHV0UHJpY2VcIixcbiAgICAgICAgby50b3RhbF9wcmljZSBhcyBcInRvdGFsUHJpY2VcIixcbiAgICAgICAgby5jYWxjdWxhdGVkX2lucHV0X2Nvc3QgYXMgXCJjYWxjdWxhdGVkSW5wdXRDb3N0XCIsXG4gICAgICAgIG8uY2FsY3VsYXRlZF9vdXRwdXRfY29zdCBhcyBcImNhbGN1bGF0ZWRPdXRwdXRDb3N0XCIsXG4gICAgICAgIG8uY2FsY3VsYXRlZF90b3RhbF9jb3N0IGFzIFwiY2FsY3VsYXRlZFRvdGFsQ29zdFwiLFxuICAgICAgICBvLlwibGF0ZW5jeVwiLFxuICAgICAgICBvLnByb21wdF9pZCBhcyBcInByb21wdElkXCIsXG4gICAgICAgIHAubmFtZSBhcyBcInByb21wdE5hbWVcIixcbiAgICAgICAgcC52ZXJzaW9uIGFzIFwicHJvbXB0VmVyc2lvblwiXG4gICAgICBGUk9NIG9ic2VydmF0aW9uc192aWV3IG9cbiAgICAgIEpPSU4gdHJhY2VzIHQgT04gdC5pZCA9IG8udHJhY2VfaWQgQU5EIHQucHJvamVjdF9pZCA9IG8ucHJvamVjdF9pZFxuICAgICAgTEVGVCBKT0lOIHNjb3Jlc19hdmcgQVMgc19hdmcgT04gc19hdmcudHJhY2VfaWQgPSB0LmlkIGFuZCBzX2F2Zy5vYnNlcnZhdGlvbl9pZCA9IG8uaWRcbiAgICAgIExFRlQgSk9JTiBwcm9tcHRzIHAgT04gcC5pZCA9IG8ucHJvbXB0X2lkXG4gICAgICBXSEVSRVxuICAgICAgICBvLnByb2plY3RfaWQgPSAke2lucHV0LnByb2plY3RJZH1cbiAgICAgICAgQU5EIHQucHJvamVjdF9pZCA9ICR7aW5wdXQucHJvamVjdElkfVxuICAgICAgICBBTkQgby50eXBlID0gJ0dFTkVSQVRJT04nXG4gICAgICAgICR7ZGF0ZXRpbWVGaWx0ZXJ9XG4gICAgICAgICR7c2VhcmNoQ29uZGl0aW9ufVxuICAgICAgICAke2ZpbHRlckNvbmRpdGlvbn1cbiAgICAgICAgJHtvcmRlckJ5Q29uZGl0aW9ufVxuICAgICAgTElNSVQgJHtpbnB1dC5saW1pdH0gT0ZGU0VUICR7aW5wdXQucGFnZSAqIGlucHV0LmxpbWl0fVxuICAgIGA7XG5cbiAgY29uc3QgZ2VuZXJhdGlvbnMgPSBhd2FpdCBwcmlzbWEuJHF1ZXJ5UmF3PFxuICAgIEFycmF5PFxuICAgICAgT2JzZXJ2YXRpb25WaWV3ICYge1xuICAgICAgICB0cmFjZU5hbWU6IHN0cmluZyB8IG51bGw7XG4gICAgICAgIHByb21wdE5hbWU6IHN0cmluZyB8IG51bGw7XG4gICAgICAgIHByb21wdFZlcnNpb246IHN0cmluZyB8IG51bGw7XG4gICAgICB9XG4gICAgPlxuICA+KHF1ZXJ5KTtcblxuICBjb25zdCBzY29yZXMgPSBhd2FpdCBwcmlzbWEuc2NvcmUuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICB0cmFjZToge1xuICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgIH0sXG4gICAgICBvYnNlcnZhdGlvbklkOiB7XG4gICAgICAgIGluOiBnZW5lcmF0aW9ucy5tYXAoKGdlbikgPT4gZ2VuLmlkKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3QgZnVsbEdlbmVyYXRpb25zID0gZ2VuZXJhdGlvbnMubWFwKChnZW5lcmF0aW9uKSA9PiB7XG4gICAgY29uc3QgZmlsdGVyZWRTY29yZXMgPSBzY29yZXMuZmlsdGVyKFxuICAgICAgKHMpID0+IHMub2JzZXJ2YXRpb25JZCA9PT0gZ2VuZXJhdGlvbi5pZCxcbiAgICApO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5nZW5lcmF0aW9uLFxuICAgICAgc2NvcmVzOiBmaWx0ZXJlZFNjb3JlcyxcbiAgICB9O1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGdlbmVyYXRpb25zOiBmdWxsR2VuZXJhdGlvbnMsXG4gICAgZGF0ZXRpbWVGaWx0ZXIsXG4gICAgc2VhcmNoQ29uZGl0aW9uLFxuICAgIGZpbHRlckNvbmRpdGlvbixcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJkYXRldGltZUZpbHRlclRvUHJpc21hU3FsIiwidGFibGVDb2x1bW5zVG9TcWxGaWx0ZXJBbmRQcmVmaXgiLCJvcmRlckJ5VG9QcmlzbWFTcWwiLCJvYnNlcnZhdGlvbnNUYWJsZUNvbHMiLCJQcmlzbWEiLCJwcmlzbWEiLCJnZXRBbGxHZW5lcmF0aW9ucyIsImlucHV0Iiwic2VsZWN0SU8iLCJzZWFyY2hDb25kaXRpb24iLCJzZWFyY2hRdWVyeSIsInNxbCIsImVtcHR5IiwiZmlsdGVyQ29uZGl0aW9uIiwiZmlsdGVyIiwib3JkZXJCeUNvbmRpdGlvbiIsIm9yZGVyQnkiLCJzdGFydFRpbWVGaWx0ZXIiLCJmaW5kIiwiZiIsImNvbHVtbiIsInR5cGUiLCJkYXRldGltZUZpbHRlciIsIm9wZXJhdG9yIiwidmFsdWUiLCJxdWVyeSIsInByb2plY3RJZCIsImxpbWl0IiwicGFnZSIsImdlbmVyYXRpb25zIiwiJHF1ZXJ5UmF3Iiwic2NvcmVzIiwic2NvcmUiLCJmaW5kTWFueSIsIndoZXJlIiwidHJhY2UiLCJvYnNlcnZhdGlvbklkIiwiaW4iLCJtYXAiLCJnZW4iLCJpZCIsImZ1bGxHZW5lcmF0aW9ucyIsImdlbmVyYXRpb24iLCJmaWx0ZXJlZFNjb3JlcyIsInMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/generations/db/getAllGenerationsSqlQuery.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/generations/exportQuery/index.ts":
/*!*****************************************************************!*\
  !*** ./src/server/api/routers/generations/exportQuery/index.ts ***!
  \*****************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generationsExportQuery: () => (/* binding */ generationsExportQuery)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _src_env_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/env.mjs */ \"(api)/./src/env.mjs\");\n/* harmony import */ var _src_server_api_interfaces_exportTypes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/server/api/interfaces/exportTypes */ \"(api)/./src/server/api/interfaces/exportTypes.ts\");\n/* harmony import */ var _src_server_api_services_S3StorageService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/server/api/services/S3StorageService */ \"(api)/./src/server/api/services/S3StorageService.ts\");\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _db_DatabaseReadStream__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../db/DatabaseReadStream */ \"(api)/./src/server/api/routers/generations/db/DatabaseReadStream.ts\");\n/* harmony import */ var _db_getAllGenerationsSqlQuery__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../db/getAllGenerationsSqlQuery */ \"(api)/./src/server/api/routers/generations/db/getAllGenerationsSqlQuery.ts\");\n/* harmony import */ var _utils_GenerationTableOptions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/GenerationTableOptions */ \"(api)/./src/server/api/routers/generations/utils/GenerationTableOptions.ts\");\n/* harmony import */ var _transforms_transformStreamToCsv__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./transforms/transformStreamToCsv */ \"(api)/./src/server/api/routers/generations/exportQuery/transforms/transformStreamToCsv.ts\");\n/* harmony import */ var _transforms_transformStreamToJson__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./transforms/transformStreamToJson */ \"(api)/./src/server/api/routers/generations/exportQuery/transforms/transformStreamToJson.ts\");\n/* harmony import */ var _transforms_transformStreamToJsonLines__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./transforms/transformStreamToJsonLines */ \"(api)/./src/server/api/routers/generations/exportQuery/transforms/transformStreamToJsonLines.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _src_env_mjs__WEBPACK_IMPORTED_MODULE_1__, _src_server_api_services_S3StorageService__WEBPACK_IMPORTED_MODULE_3__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_4__, _db_getAllGenerationsSqlQuery__WEBPACK_IMPORTED_MODULE_6__, _utils_GenerationTableOptions__WEBPACK_IMPORTED_MODULE_7__, _transforms_transformStreamToJsonLines__WEBPACK_IMPORTED_MODULE_10__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _src_env_mjs__WEBPACK_IMPORTED_MODULE_1__, _src_server_api_services_S3StorageService__WEBPACK_IMPORTED_MODULE_3__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_4__, _db_getAllGenerationsSqlQuery__WEBPACK_IMPORTED_MODULE_6__, _utils_GenerationTableOptions__WEBPACK_IMPORTED_MODULE_7__, _transforms_transformStreamToJsonLines__WEBPACK_IMPORTED_MODULE_10__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\nconst generationsExportInput = _utils_GenerationTableOptions__WEBPACK_IMPORTED_MODULE_7__.GenerationTableOptions.extend({\n    fileFormat: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum(_src_server_api_interfaces_exportTypes__WEBPACK_IMPORTED_MODULE_2__.exportFileFormats)\n});\nconst generationsExportQuery = _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_4__.protectedProjectProcedure.input(generationsExportInput).query(async ({ input })=>{\n    const queryPageSize = _src_env_mjs__WEBPACK_IMPORTED_MODULE_1__.env.DB_EXPORT_PAGE_SIZE ?? 1000;\n    const dateCutoffFilter = {\n        column: \"start_time\",\n        operator: \"<\",\n        value: new Date(),\n        type: \"datetime\"\n    };\n    const dbReadStream = new _db_DatabaseReadStream__WEBPACK_IMPORTED_MODULE_5__.DatabaseReadStream(async (pageSize, offset)=>{\n        const dbReturn = await (0,_db_getAllGenerationsSqlQuery__WEBPACK_IMPORTED_MODULE_6__.getAllGenerations)({\n            input: {\n                ...input,\n                filter: [\n                    ...input.filter,\n                    dateCutoffFilter\n                ],\n                page: offset / pageSize,\n                limit: pageSize\n            },\n            selectIO: true\n        });\n        return dbReturn.generations;\n    }, queryPageSize);\n    const streamTransformations = {\n        CSV: _transforms_transformStreamToCsv__WEBPACK_IMPORTED_MODULE_8__.transformStreamToCsv,\n        JSON: _transforms_transformStreamToJson__WEBPACK_IMPORTED_MODULE_9__.transformStreamToJson,\n        \"OPENAI-JSONL\": _transforms_transformStreamToJsonLines__WEBPACK_IMPORTED_MODULE_10__.transformStreamToJsonLines\n    };\n    const transformation = streamTransformations[input.fileFormat];\n    const fileStream = dbReadStream.pipe(transformation());\n    const fileDate = new Date().toISOString();\n    const fileExtension = _src_server_api_interfaces_exportTypes__WEBPACK_IMPORTED_MODULE_2__.exportOptions[input.fileFormat].extension;\n    const fileName = `lf-export-${input.projectId}-${fileDate}.${fileExtension}`;\n    if (_src_server_api_services_S3StorageService__WEBPACK_IMPORTED_MODULE_3__.S3StorageService.getIsS3StorageConfigured(_src_env_mjs__WEBPACK_IMPORTED_MODULE_1__.env)) {\n        const { signedUrl } = await new _src_server_api_services_S3StorageService__WEBPACK_IMPORTED_MODULE_3__.S3StorageService().uploadFile({\n            fileName,\n            fileType: _src_server_api_interfaces_exportTypes__WEBPACK_IMPORTED_MODULE_2__.exportOptions[input.fileFormat].fileType,\n            data: fileStream\n        });\n        return {\n            type: \"s3\",\n            url: signedUrl,\n            fileName\n        };\n    }\n    // Fall back to returning the data directly. This might fail for large exports due to memory constraints.\n    // Self-hosted instances should always run with sufficient memory or have S3 configured to avoid this.\n    let fileOutputString = \"\";\n    for await (const chunk of fileStream){\n        fileOutputString += chunk;\n    }\n    return {\n        type: \"data\",\n        data: fileOutputString,\n        fileName\n    };\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL2V4cG9ydFF1ZXJ5L2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUN3QjtBQUVZO0FBSWE7QUFDNkI7QUFDWjtBQUdKO0FBQzJCO0FBQ2hCO0FBQ0E7QUFDRTtBQUNVO0FBRXJGLE1BQU1ZLHlCQUF5QkosaUZBQXNCQSxDQUFDSyxNQUFNLENBQUM7SUFDM0RDLFlBQVlkLGtDQUFDQSxDQUFDZSxJQUFJLENBQUNiLHFGQUFpQkE7QUFDdEM7QUFjTyxNQUFNYyx5QkFBeUJYLDJFQUF5QkEsQ0FDNURZLEtBQUssQ0FBQ0wsd0JBQ05NLEtBQUssQ0FBMEIsT0FBTyxFQUFFRCxLQUFLLEVBQUU7SUFDOUMsTUFBTUUsZ0JBQWdCbEIsNkNBQUdBLENBQUNtQixtQkFBbUIsSUFBSTtJQUVqRCxNQUFNQyxtQkFBbUI7UUFDdkJDLFFBQVE7UUFDUkMsVUFBVTtRQUNWQyxPQUFPLElBQUlDO1FBQ1hDLE1BQU07SUFDUjtJQUVBLE1BQU1DLGVBQWUsSUFBSXJCLHNFQUFrQkEsQ0FDekMsT0FBT3NCLFVBQWtCQztRQUN2QixNQUFNQyxXQUFXLE1BQU12QixnRkFBaUJBLENBQUM7WUFDdkNVLE9BQU87Z0JBQ0wsR0FBR0EsS0FBSztnQkFDUmMsUUFBUTt1QkFBSWQsTUFBTWMsTUFBTTtvQkFBRVY7aUJBQWlCO2dCQUMzQ1csTUFBTUgsU0FBU0Q7Z0JBQ2ZLLE9BQU9MO1lBQ1Q7WUFDQU0sVUFBVTtRQUNaO1FBQ0EsT0FBT0osU0FBU0ssV0FBVztJQUM3QixHQUNBaEI7SUFHRixNQUFNaUIsd0JBR0Y7UUFDRkMsS0FBSzVCLGtGQUFvQkE7UUFDekI2QixNQUFNNUIsb0ZBQXFCQTtRQUMzQixnQkFBZ0JDLCtGQUEwQkE7SUFDNUM7SUFDQSxNQUFNNEIsaUJBQWlCSCxxQkFBcUIsQ0FBQ25CLE1BQU1ILFVBQVUsQ0FBQztJQUU5RCxNQUFNMEIsYUFBYWIsYUFBYWMsSUFBSSxDQUFDRjtJQUNyQyxNQUFNRyxXQUFXLElBQUlqQixPQUFPa0IsV0FBVztJQUN2QyxNQUFNQyxnQkFBZ0J6QyxpRkFBYSxDQUFDYyxNQUFNSCxVQUFVLENBQUMsQ0FBQytCLFNBQVM7SUFDL0QsTUFBTUMsV0FBVyxDQUFDLFVBQVUsRUFBRTdCLE1BQU04QixTQUFTLENBQUMsQ0FBQyxFQUFFTCxTQUFTLENBQUMsRUFBRUUsY0FBYyxDQUFDO0lBRTVFLElBQUl4Qyx1RkFBZ0JBLENBQUM0Qyx3QkFBd0IsQ0FBQy9DLDZDQUFHQSxHQUFHO1FBQ2xELE1BQU0sRUFBRWdELFNBQVMsRUFBRSxHQUFHLE1BQU0sSUFBSTdDLHVGQUFnQkEsR0FBRzhDLFVBQVUsQ0FBQztZQUM1REo7WUFDQUssVUFBVWhELGlGQUFhLENBQUNjLE1BQU1ILFVBQVUsQ0FBQyxDQUFDcUMsUUFBUTtZQUNsREMsTUFBTVo7UUFDUjtRQUVBLE9BQU87WUFDTGQsTUFBTTtZQUNOMkIsS0FBS0o7WUFDTEg7UUFDRjtJQUNGO0lBRUEseUdBQXlHO0lBQ3pHLHNHQUFzRztJQUN0RyxJQUFJUSxtQkFBbUI7SUFDdkIsV0FBVyxNQUFNQyxTQUFTZixXQUFZO1FBQ3BDYyxvQkFBb0JDO0lBQ3RCO0lBRUEsT0FBTztRQUNMN0IsTUFBTTtRQUNOMEIsTUFBTUU7UUFDTlI7SUFDRjtBQUNGLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL2V4cG9ydFF1ZXJ5L2luZGV4LnRzP2MyNTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBUcmFuc2Zvcm0gfSBmcm9tIFwic3RyZWFtXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuXG5pbXBvcnQgeyBlbnYgfSBmcm9tIFwiQC9zcmMvZW52Lm1qc1wiO1xuaW1wb3J0IHtcbiAgZXhwb3J0RmlsZUZvcm1hdHMsXG4gIGV4cG9ydE9wdGlvbnMsXG59IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL2ludGVyZmFjZXMvZXhwb3J0VHlwZXNcIjtcbmltcG9ydCB7IFMzU3RvcmFnZVNlcnZpY2UgfSBmcm9tIFwiQC9zcmMvc2VydmVyL2FwaS9zZXJ2aWNlcy9TM1N0b3JhZ2VTZXJ2aWNlXCI7XG5pbXBvcnQgeyBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlIH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvdHJwY1wiO1xuaW1wb3J0IHsgdHlwZSBPYnNlcnZhdGlvblZpZXcgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuaW1wb3J0IHsgRGF0YWJhc2VSZWFkU3RyZWFtIH0gZnJvbSBcIi4uL2RiL0RhdGFiYXNlUmVhZFN0cmVhbVwiO1xuaW1wb3J0IHsgZ2V0QWxsR2VuZXJhdGlvbnMgYXMgZ2V0QWxsR2VuZXJhdGlvbnMgfSBmcm9tIFwiLi4vZGIvZ2V0QWxsR2VuZXJhdGlvbnNTcWxRdWVyeVwiO1xuaW1wb3J0IHsgR2VuZXJhdGlvblRhYmxlT3B0aW9ucyB9IGZyb20gXCIuLi91dGlscy9HZW5lcmF0aW9uVGFibGVPcHRpb25zXCI7XG5pbXBvcnQgeyB0cmFuc2Zvcm1TdHJlYW1Ub0NzdiB9IGZyb20gXCIuL3RyYW5zZm9ybXMvdHJhbnNmb3JtU3RyZWFtVG9Dc3ZcIjtcbmltcG9ydCB7IHRyYW5zZm9ybVN0cmVhbVRvSnNvbiB9IGZyb20gXCIuL3RyYW5zZm9ybXMvdHJhbnNmb3JtU3RyZWFtVG9Kc29uXCI7XG5pbXBvcnQgeyB0cmFuc2Zvcm1TdHJlYW1Ub0pzb25MaW5lcyB9IGZyb20gXCIuL3RyYW5zZm9ybXMvdHJhbnNmb3JtU3RyZWFtVG9Kc29uTGluZXNcIjtcblxuY29uc3QgZ2VuZXJhdGlvbnNFeHBvcnRJbnB1dCA9IEdlbmVyYXRpb25UYWJsZU9wdGlvbnMuZXh0ZW5kKHtcbiAgZmlsZUZvcm1hdDogei5lbnVtKGV4cG9ydEZpbGVGb3JtYXRzKSxcbn0pO1xuZXhwb3J0IHR5cGUgR2VuZXJhdGlvbnNFeHBvcnRJbnB1dCA9IHouaW5mZXI8dHlwZW9mIGdlbmVyYXRpb25zRXhwb3J0SW5wdXQ+O1xuZXhwb3J0IHR5cGUgR2VuZXJhdGlvbnNFeHBvcnRSZXN1bHQgPVxuICB8IHtcbiAgICAgIHR5cGU6IFwiczNcIjtcbiAgICAgIGZpbGVOYW1lOiBzdHJpbmc7XG4gICAgICB1cmw6IHN0cmluZztcbiAgICB9XG4gIHwge1xuICAgICAgdHlwZTogXCJkYXRhXCI7XG4gICAgICBmaWxlTmFtZTogc3RyaW5nO1xuICAgICAgZGF0YTogc3RyaW5nO1xuICAgIH07XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0aW9uc0V4cG9ydFF1ZXJ5ID0gcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAuaW5wdXQoZ2VuZXJhdGlvbnNFeHBvcnRJbnB1dClcbiAgLnF1ZXJ5PEdlbmVyYXRpb25zRXhwb3J0UmVzdWx0Pihhc3luYyAoeyBpbnB1dCB9KSA9PiB7XG4gICAgY29uc3QgcXVlcnlQYWdlU2l6ZSA9IGVudi5EQl9FWFBPUlRfUEFHRV9TSVpFID8/IDEwMDA7XG5cbiAgICBjb25zdCBkYXRlQ3V0b2ZmRmlsdGVyID0ge1xuICAgICAgY29sdW1uOiBcInN0YXJ0X3RpbWVcIixcbiAgICAgIG9wZXJhdG9yOiBcIjxcIiBhcyBjb25zdCxcbiAgICAgIHZhbHVlOiBuZXcgRGF0ZSgpLFxuICAgICAgdHlwZTogXCJkYXRldGltZVwiIGFzIGNvbnN0LFxuICAgIH07XG5cbiAgICBjb25zdCBkYlJlYWRTdHJlYW0gPSBuZXcgRGF0YWJhc2VSZWFkU3RyZWFtPE9ic2VydmF0aW9uVmlldz4oXG4gICAgICBhc3luYyAocGFnZVNpemU6IG51bWJlciwgb2Zmc2V0OiBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3QgZGJSZXR1cm4gPSBhd2FpdCBnZXRBbGxHZW5lcmF0aW9ucyh7XG4gICAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgIC4uLmlucHV0LFxuICAgICAgICAgICAgZmlsdGVyOiBbLi4uaW5wdXQuZmlsdGVyLCBkYXRlQ3V0b2ZmRmlsdGVyXSxcbiAgICAgICAgICAgIHBhZ2U6IG9mZnNldCAvIHBhZ2VTaXplLFxuICAgICAgICAgICAgbGltaXQ6IHBhZ2VTaXplLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2VsZWN0SU86IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGJSZXR1cm4uZ2VuZXJhdGlvbnM7XG4gICAgICB9LFxuICAgICAgcXVlcnlQYWdlU2l6ZSxcbiAgICApO1xuXG4gICAgY29uc3Qgc3RyZWFtVHJhbnNmb3JtYXRpb25zOiBSZWNvcmQ8XG4gICAgICB0eXBlb2YgaW5wdXQuZmlsZUZvcm1hdCxcbiAgICAgICgpID0+IFRyYW5zZm9ybVxuICAgID4gPSB7XG4gICAgICBDU1Y6IHRyYW5zZm9ybVN0cmVhbVRvQ3N2LFxuICAgICAgSlNPTjogdHJhbnNmb3JtU3RyZWFtVG9Kc29uLFxuICAgICAgXCJPUEVOQUktSlNPTkxcIjogdHJhbnNmb3JtU3RyZWFtVG9Kc29uTGluZXMsXG4gICAgfTtcbiAgICBjb25zdCB0cmFuc2Zvcm1hdGlvbiA9IHN0cmVhbVRyYW5zZm9ybWF0aW9uc1tpbnB1dC5maWxlRm9ybWF0XTtcblxuICAgIGNvbnN0IGZpbGVTdHJlYW0gPSBkYlJlYWRTdHJlYW0ucGlwZSh0cmFuc2Zvcm1hdGlvbigpKTtcbiAgICBjb25zdCBmaWxlRGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gZXhwb3J0T3B0aW9uc1tpbnB1dC5maWxlRm9ybWF0XS5leHRlbnNpb247XG4gICAgY29uc3QgZmlsZU5hbWUgPSBgbGYtZXhwb3J0LSR7aW5wdXQucHJvamVjdElkfS0ke2ZpbGVEYXRlfS4ke2ZpbGVFeHRlbnNpb259YDtcblxuICAgIGlmIChTM1N0b3JhZ2VTZXJ2aWNlLmdldElzUzNTdG9yYWdlQ29uZmlndXJlZChlbnYpKSB7XG4gICAgICBjb25zdCB7IHNpZ25lZFVybCB9ID0gYXdhaXQgbmV3IFMzU3RvcmFnZVNlcnZpY2UoKS51cGxvYWRGaWxlKHtcbiAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgIGZpbGVUeXBlOiBleHBvcnRPcHRpb25zW2lucHV0LmZpbGVGb3JtYXRdLmZpbGVUeXBlLFxuICAgICAgICBkYXRhOiBmaWxlU3RyZWFtLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFwiczNcIixcbiAgICAgICAgdXJsOiBzaWduZWRVcmwsXG4gICAgICAgIGZpbGVOYW1lLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBGYWxsIGJhY2sgdG8gcmV0dXJuaW5nIHRoZSBkYXRhIGRpcmVjdGx5LiBUaGlzIG1pZ2h0IGZhaWwgZm9yIGxhcmdlIGV4cG9ydHMgZHVlIHRvIG1lbW9yeSBjb25zdHJhaW50cy5cbiAgICAvLyBTZWxmLWhvc3RlZCBpbnN0YW5jZXMgc2hvdWxkIGFsd2F5cyBydW4gd2l0aCBzdWZmaWNpZW50IG1lbW9yeSBvciBoYXZlIFMzIGNvbmZpZ3VyZWQgdG8gYXZvaWQgdGhpcy5cbiAgICBsZXQgZmlsZU91dHB1dFN0cmluZyA9IFwiXCI7XG4gICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBmaWxlU3RyZWFtKSB7XG4gICAgICBmaWxlT3V0cHV0U3RyaW5nICs9IGNodW5rO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcImRhdGFcIixcbiAgICAgIGRhdGE6IGZpbGVPdXRwdXRTdHJpbmcsXG4gICAgICBmaWxlTmFtZSxcbiAgICB9O1xuICB9KTtcbiJdLCJuYW1lcyI6WyJ6IiwiZW52IiwiZXhwb3J0RmlsZUZvcm1hdHMiLCJleHBvcnRPcHRpb25zIiwiUzNTdG9yYWdlU2VydmljZSIsInByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUiLCJEYXRhYmFzZVJlYWRTdHJlYW0iLCJnZXRBbGxHZW5lcmF0aW9ucyIsIkdlbmVyYXRpb25UYWJsZU9wdGlvbnMiLCJ0cmFuc2Zvcm1TdHJlYW1Ub0NzdiIsInRyYW5zZm9ybVN0cmVhbVRvSnNvbiIsInRyYW5zZm9ybVN0cmVhbVRvSnNvbkxpbmVzIiwiZ2VuZXJhdGlvbnNFeHBvcnRJbnB1dCIsImV4dGVuZCIsImZpbGVGb3JtYXQiLCJlbnVtIiwiZ2VuZXJhdGlvbnNFeHBvcnRRdWVyeSIsImlucHV0IiwicXVlcnkiLCJxdWVyeVBhZ2VTaXplIiwiREJfRVhQT1JUX1BBR0VfU0laRSIsImRhdGVDdXRvZmZGaWx0ZXIiLCJjb2x1bW4iLCJvcGVyYXRvciIsInZhbHVlIiwiRGF0ZSIsInR5cGUiLCJkYlJlYWRTdHJlYW0iLCJwYWdlU2l6ZSIsIm9mZnNldCIsImRiUmV0dXJuIiwiZmlsdGVyIiwicGFnZSIsImxpbWl0Iiwic2VsZWN0SU8iLCJnZW5lcmF0aW9ucyIsInN0cmVhbVRyYW5zZm9ybWF0aW9ucyIsIkNTViIsIkpTT04iLCJ0cmFuc2Zvcm1hdGlvbiIsImZpbGVTdHJlYW0iLCJwaXBlIiwiZmlsZURhdGUiLCJ0b0lTT1N0cmluZyIsImZpbGVFeHRlbnNpb24iLCJleHRlbnNpb24iLCJmaWxlTmFtZSIsInByb2plY3RJZCIsImdldElzUzNTdG9yYWdlQ29uZmlndXJlZCIsInNpZ25lZFVybCIsInVwbG9hZEZpbGUiLCJmaWxlVHlwZSIsImRhdGEiLCJ1cmwiLCJmaWxlT3V0cHV0U3RyaW5nIiwiY2h1bmsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/generations/exportQuery/index.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/generations/exportQuery/transforms/transformStreamToCsv.ts":
/*!*******************************************************************************************!*\
  !*** ./src/server/api/routers/generations/exportQuery/transforms/transformStreamToCsv.ts ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   transformStreamToCsv: () => (/* binding */ transformStreamToCsv)\n/* harmony export */ });\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ \"stream\");\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _src_utils_dates__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/utils/dates */ \"(api)/./src/utils/dates.ts\");\n\n\nfunction transformStreamToCsv() {\n    let isFirstChunk = true;\n    return new stream__WEBPACK_IMPORTED_MODULE_0__.Transform({\n        objectMode: true,\n        transform (row, encoding, callback) {\n            if (isFirstChunk) {\n                // Output the header if it's the first chunk\n                const csvHeader = [\n                    \"id\",\n                    \"name\",\n                    \"traceId\",\n                    \"traceName\",\n                    \"startTime\",\n                    \"endTime\",\n                    \"completionStartTime\",\n                    \"timeToFirstToken\",\n                    \"scores\",\n                    \"latency\",\n                    \"latencyPerToken\",\n                    \"inputCost\",\n                    \"outputCost\",\n                    \"totalCost\",\n                    \"level\",\n                    \"statusMessage\",\n                    \"model\",\n                    \"modelParameters\",\n                    \"promptTokens\",\n                    \"completionTokens\",\n                    \"totalTokens\",\n                    \"unit\",\n                    \"input\",\n                    \"output\",\n                    \"metadata\",\n                    \"promptName\",\n                    \"promptVersion\"\n                ];\n                this.push(csvHeader.join(\",\") + \"\\n\");\n                isFirstChunk = false;\n            }\n            // Convert the generation object to a CSV line and push it\n            const csvRow = [\n                row.id,\n                row.name ?? \"\",\n                row.traceId,\n                row.traceName,\n                row.startTime.toISOString(),\n                row.endTime?.toISOString() ?? \"\",\n                row.completionStartTime?.toISOString() ?? \"\",\n                // time to first token\n                row.completionStartTime ? (0,_src_utils_dates__WEBPACK_IMPORTED_MODULE_1__.intervalInSeconds)(row.startTime, row.completionStartTime).toFixed(2) : \"\",\n                row.scores ? JSON.stringify(row.scores) : \"\",\n                row.latency ? (0,_src_utils_dates__WEBPACK_IMPORTED_MODULE_1__.formatIntervalSeconds)(row.latency).slice(0, -1) : \"\",\n                // latency per token\n                row.latency && row.completionTokens !== 0 ? row.latency / row.completionTokens : \"\",\n                row.calculatedInputCost ? row.calculatedInputCost.toNumber() : \"\",\n                row.calculatedOutputCost ? row.calculatedOutputCost.toNumber() : \"\",\n                row.calculatedTotalCost ? row.calculatedTotalCost.toNumber() : \"\",\n                row.level,\n                row.statusMessage ?? \"\",\n                row.model ?? \"\",\n                JSON.stringify(row.modelParameters),\n                row.promptTokens,\n                row.completionTokens,\n                row.totalTokens,\n                row.unit ?? \"\",\n                JSON.stringify(row.input),\n                JSON.stringify(row.output),\n                JSON.stringify(row.metadata),\n                row.promptName ?? \"\",\n                row.promptVersion ?? \"\"\n            ].map((field)=>{\n                const str = typeof field === \"string\" ? field : String(field);\n                return `\"${str.replace(/\"/g, '\"\"')}\"`;\n            });\n            this.push(csvRow.join(\",\") + \"\\n\");\n            callback();\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL2V4cG9ydFF1ZXJ5L3RyYW5zZm9ybXMvdHJhbnNmb3JtU3RyZWFtVG9Dc3YudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEyRDtBQUdrQjtBQUV0RSxTQUFTRztJQUNkLElBQUlDLGVBQWU7SUFFbkIsT0FBTyxJQUFJSiw2Q0FBU0EsQ0FBQztRQUNuQkssWUFBWTtRQUNaQyxXQUNFQyxHQUE4QixFQUM5QkMsUUFBd0IsRUFDeEJDLFFBQTJCO1lBRTNCLElBQUlMLGNBQWM7Z0JBQ2hCLDRDQUE0QztnQkFDNUMsTUFBTU0sWUFBWTtvQkFDaEI7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7b0JBQ0E7aUJBQ0Q7Z0JBRUQsSUFBSSxDQUFDQyxJQUFJLENBQUNELFVBQVVFLElBQUksQ0FBQyxPQUFPO2dCQUVoQ1IsZUFBZTtZQUNqQjtZQUNBLDBEQUEwRDtZQUMxRCxNQUFNUyxTQUFTO2dCQUNiTixJQUFJTyxFQUFFO2dCQUNOUCxJQUFJUSxJQUFJLElBQUk7Z0JBQ1pSLElBQUlTLE9BQU87Z0JBQ1hULElBQUlVLFNBQVM7Z0JBQ2JWLElBQUlXLFNBQVMsQ0FBQ0MsV0FBVztnQkFDekJaLElBQUlhLE9BQU8sRUFBRUQsaUJBQWlCO2dCQUM5QlosSUFBSWMsbUJBQW1CLEVBQUVGLGlCQUFpQjtnQkFDMUMsc0JBQXNCO2dCQUN0QlosSUFBSWMsbUJBQW1CLEdBQ25CbkIsbUVBQWlCQSxDQUFDSyxJQUFJVyxTQUFTLEVBQUVYLElBQUljLG1CQUFtQixFQUFFQyxPQUFPLENBQUMsS0FDbEU7Z0JBQ0pmLElBQUlnQixNQUFNLEdBQUdDLEtBQUtDLFNBQVMsQ0FBQ2xCLElBQUlnQixNQUFNLElBQUk7Z0JBQzFDaEIsSUFBSW1CLE9BQU8sR0FBR3pCLHVFQUFxQkEsQ0FBQ00sSUFBSW1CLE9BQU8sRUFBRUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLO2dCQUNoRSxvQkFBb0I7Z0JBQ3BCcEIsSUFBSW1CLE9BQU8sSUFBSW5CLElBQUlxQixnQkFBZ0IsS0FBSyxJQUNwQ3JCLElBQUltQixPQUFPLEdBQUduQixJQUFJcUIsZ0JBQWdCLEdBQ2xDO2dCQUNKckIsSUFBSXNCLG1CQUFtQixHQUFHdEIsSUFBSXNCLG1CQUFtQixDQUFDQyxRQUFRLEtBQUs7Z0JBQy9EdkIsSUFBSXdCLG9CQUFvQixHQUFHeEIsSUFBSXdCLG9CQUFvQixDQUFDRCxRQUFRLEtBQUs7Z0JBQ2pFdkIsSUFBSXlCLG1CQUFtQixHQUFHekIsSUFBSXlCLG1CQUFtQixDQUFDRixRQUFRLEtBQUs7Z0JBQy9EdkIsSUFBSTBCLEtBQUs7Z0JBQ1QxQixJQUFJMkIsYUFBYSxJQUFJO2dCQUNyQjNCLElBQUk0QixLQUFLLElBQUk7Z0JBQ2JYLEtBQUtDLFNBQVMsQ0FBQ2xCLElBQUk2QixlQUFlO2dCQUNsQzdCLElBQUk4QixZQUFZO2dCQUNoQjlCLElBQUlxQixnQkFBZ0I7Z0JBQ3BCckIsSUFBSStCLFdBQVc7Z0JBQ2YvQixJQUFJZ0MsSUFBSSxJQUFJO2dCQUNaZixLQUFLQyxTQUFTLENBQUNsQixJQUFJaUMsS0FBSztnQkFDeEJoQixLQUFLQyxTQUFTLENBQUNsQixJQUFJa0MsTUFBTTtnQkFDekJqQixLQUFLQyxTQUFTLENBQUNsQixJQUFJbUMsUUFBUTtnQkFDM0JuQyxJQUFJb0MsVUFBVSxJQUFJO2dCQUNsQnBDLElBQUlxQyxhQUFhLElBQUk7YUFDdEIsQ0FBQ0MsR0FBRyxDQUFDLENBQUNDO2dCQUNMLE1BQU1DLE1BQU0sT0FBT0QsVUFBVSxXQUFXQSxRQUFRRSxPQUFPRjtnQkFDdkQsT0FBTyxDQUFDLENBQUMsRUFBRUMsSUFBSUUsT0FBTyxDQUFDLE1BQU0sTUFBTSxDQUFDLENBQUM7WUFDdkM7WUFFQSxJQUFJLENBQUN0QyxJQUFJLENBQUNFLE9BQU9ELElBQUksQ0FBQyxPQUFPO1lBRTdCSDtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvZ2VuZXJhdGlvbnMvZXhwb3J0UXVlcnkvdHJhbnNmb3Jtcy90cmFuc2Zvcm1TdHJlYW1Ub0Nzdi50cz9jNzY2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRyYW5zZm9ybSwgdHlwZSBUcmFuc2Zvcm1DYWxsYmFjayB9IGZyb20gXCJzdHJlYW1cIjtcblxuaW1wb3J0IHsgdHlwZSBPYnNlcnZhdGlvblZpZXdXaXRoU2NvcmVzIH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvcm91dGVycy9nZW5lcmF0aW9ucy9nZXRBbGxRdWVyeVwiO1xuaW1wb3J0IHsgZm9ybWF0SW50ZXJ2YWxTZWNvbmRzLCBpbnRlcnZhbEluU2Vjb25kcyB9IGZyb20gXCJAL3NyYy91dGlscy9kYXRlc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtU3RyZWFtVG9Dc3YoKTogVHJhbnNmb3JtIHtcbiAgbGV0IGlzRmlyc3RDaHVuayA9IHRydWU7XG5cbiAgcmV0dXJuIG5ldyBUcmFuc2Zvcm0oe1xuICAgIG9iamVjdE1vZGU6IHRydWUsXG4gICAgdHJhbnNmb3JtKFxuICAgICAgcm93OiBPYnNlcnZhdGlvblZpZXdXaXRoU2NvcmVzLFxuICAgICAgZW5jb2Rpbmc6IEJ1ZmZlckVuY29kaW5nLFxuICAgICAgY2FsbGJhY2s6IFRyYW5zZm9ybUNhbGxiYWNrLFxuICAgICk6IHZvaWQge1xuICAgICAgaWYgKGlzRmlyc3RDaHVuaykge1xuICAgICAgICAvLyBPdXRwdXQgdGhlIGhlYWRlciBpZiBpdCdzIHRoZSBmaXJzdCBjaHVua1xuICAgICAgICBjb25zdCBjc3ZIZWFkZXIgPSBbXG4gICAgICAgICAgXCJpZFwiLFxuICAgICAgICAgIFwibmFtZVwiLFxuICAgICAgICAgIFwidHJhY2VJZFwiLFxuICAgICAgICAgIFwidHJhY2VOYW1lXCIsXG4gICAgICAgICAgXCJzdGFydFRpbWVcIixcbiAgICAgICAgICBcImVuZFRpbWVcIixcbiAgICAgICAgICBcImNvbXBsZXRpb25TdGFydFRpbWVcIixcbiAgICAgICAgICBcInRpbWVUb0ZpcnN0VG9rZW5cIixcbiAgICAgICAgICBcInNjb3Jlc1wiLFxuICAgICAgICAgIFwibGF0ZW5jeVwiLFxuICAgICAgICAgIFwibGF0ZW5jeVBlclRva2VuXCIsXG4gICAgICAgICAgXCJpbnB1dENvc3RcIixcbiAgICAgICAgICBcIm91dHB1dENvc3RcIixcbiAgICAgICAgICBcInRvdGFsQ29zdFwiLFxuICAgICAgICAgIFwibGV2ZWxcIixcbiAgICAgICAgICBcInN0YXR1c01lc3NhZ2VcIixcbiAgICAgICAgICBcIm1vZGVsXCIsXG4gICAgICAgICAgXCJtb2RlbFBhcmFtZXRlcnNcIixcbiAgICAgICAgICBcInByb21wdFRva2Vuc1wiLFxuICAgICAgICAgIFwiY29tcGxldGlvblRva2Vuc1wiLFxuICAgICAgICAgIFwidG90YWxUb2tlbnNcIixcbiAgICAgICAgICBcInVuaXRcIixcbiAgICAgICAgICBcImlucHV0XCIsXG4gICAgICAgICAgXCJvdXRwdXRcIixcbiAgICAgICAgICBcIm1ldGFkYXRhXCIsXG4gICAgICAgICAgXCJwcm9tcHROYW1lXCIsXG4gICAgICAgICAgXCJwcm9tcHRWZXJzaW9uXCIsXG4gICAgICAgIF07XG5cbiAgICAgICAgdGhpcy5wdXNoKGNzdkhlYWRlci5qb2luKFwiLFwiKSArIFwiXFxuXCIpO1xuXG4gICAgICAgIGlzRmlyc3RDaHVuayA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gQ29udmVydCB0aGUgZ2VuZXJhdGlvbiBvYmplY3QgdG8gYSBDU1YgbGluZSBhbmQgcHVzaCBpdFxuICAgICAgY29uc3QgY3N2Um93ID0gW1xuICAgICAgICByb3cuaWQsXG4gICAgICAgIHJvdy5uYW1lID8/IFwiXCIsXG4gICAgICAgIHJvdy50cmFjZUlkLFxuICAgICAgICByb3cudHJhY2VOYW1lLFxuICAgICAgICByb3cuc3RhcnRUaW1lLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHJvdy5lbmRUaW1lPy50b0lTT1N0cmluZygpID8/IFwiXCIsXG4gICAgICAgIHJvdy5jb21wbGV0aW9uU3RhcnRUaW1lPy50b0lTT1N0cmluZygpID8/IFwiXCIsXG4gICAgICAgIC8vIHRpbWUgdG8gZmlyc3QgdG9rZW5cbiAgICAgICAgcm93LmNvbXBsZXRpb25TdGFydFRpbWVcbiAgICAgICAgICA/IGludGVydmFsSW5TZWNvbmRzKHJvdy5zdGFydFRpbWUsIHJvdy5jb21wbGV0aW9uU3RhcnRUaW1lKS50b0ZpeGVkKDIpXG4gICAgICAgICAgOiBcIlwiLFxuICAgICAgICByb3cuc2NvcmVzID8gSlNPTi5zdHJpbmdpZnkocm93LnNjb3JlcykgOiBcIlwiLFxuICAgICAgICByb3cubGF0ZW5jeSA/IGZvcm1hdEludGVydmFsU2Vjb25kcyhyb3cubGF0ZW5jeSkuc2xpY2UoMCwgLTEpIDogXCJcIixcbiAgICAgICAgLy8gbGF0ZW5jeSBwZXIgdG9rZW5cbiAgICAgICAgcm93LmxhdGVuY3kgJiYgcm93LmNvbXBsZXRpb25Ub2tlbnMgIT09IDBcbiAgICAgICAgICA/IHJvdy5sYXRlbmN5IC8gcm93LmNvbXBsZXRpb25Ub2tlbnNcbiAgICAgICAgICA6IFwiXCIsXG4gICAgICAgIHJvdy5jYWxjdWxhdGVkSW5wdXRDb3N0ID8gcm93LmNhbGN1bGF0ZWRJbnB1dENvc3QudG9OdW1iZXIoKSA6IFwiXCIsXG4gICAgICAgIHJvdy5jYWxjdWxhdGVkT3V0cHV0Q29zdCA/IHJvdy5jYWxjdWxhdGVkT3V0cHV0Q29zdC50b051bWJlcigpIDogXCJcIixcbiAgICAgICAgcm93LmNhbGN1bGF0ZWRUb3RhbENvc3QgPyByb3cuY2FsY3VsYXRlZFRvdGFsQ29zdC50b051bWJlcigpIDogXCJcIixcbiAgICAgICAgcm93LmxldmVsLFxuICAgICAgICByb3cuc3RhdHVzTWVzc2FnZSA/PyBcIlwiLFxuICAgICAgICByb3cubW9kZWwgPz8gXCJcIixcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkocm93Lm1vZGVsUGFyYW1ldGVycyksXG4gICAgICAgIHJvdy5wcm9tcHRUb2tlbnMsXG4gICAgICAgIHJvdy5jb21wbGV0aW9uVG9rZW5zLFxuICAgICAgICByb3cudG90YWxUb2tlbnMsXG4gICAgICAgIHJvdy51bml0ID8/IFwiXCIsXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHJvdy5pbnB1dCksXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHJvdy5vdXRwdXQpLFxuICAgICAgICBKU09OLnN0cmluZ2lmeShyb3cubWV0YWRhdGEpLFxuICAgICAgICByb3cucHJvbXB0TmFtZSA/PyBcIlwiLFxuICAgICAgICByb3cucHJvbXB0VmVyc2lvbiA/PyBcIlwiLFxuICAgICAgXS5tYXAoKGZpZWxkKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0ciA9IHR5cGVvZiBmaWVsZCA9PT0gXCJzdHJpbmdcIiA/IGZpZWxkIDogU3RyaW5nKGZpZWxkKTtcbiAgICAgICAgcmV0dXJuIGBcIiR7c3RyLnJlcGxhY2UoL1wiL2csICdcIlwiJyl9XCJgO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMucHVzaChjc3ZSb3cuam9pbihcIixcIikgKyBcIlxcblwiKTtcblxuICAgICAgY2FsbGJhY2soKTtcbiAgICB9LFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJUcmFuc2Zvcm0iLCJmb3JtYXRJbnRlcnZhbFNlY29uZHMiLCJpbnRlcnZhbEluU2Vjb25kcyIsInRyYW5zZm9ybVN0cmVhbVRvQ3N2IiwiaXNGaXJzdENodW5rIiwib2JqZWN0TW9kZSIsInRyYW5zZm9ybSIsInJvdyIsImVuY29kaW5nIiwiY2FsbGJhY2siLCJjc3ZIZWFkZXIiLCJwdXNoIiwiam9pbiIsImNzdlJvdyIsImlkIiwibmFtZSIsInRyYWNlSWQiLCJ0cmFjZU5hbWUiLCJzdGFydFRpbWUiLCJ0b0lTT1N0cmluZyIsImVuZFRpbWUiLCJjb21wbGV0aW9uU3RhcnRUaW1lIiwidG9GaXhlZCIsInNjb3JlcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJsYXRlbmN5Iiwic2xpY2UiLCJjb21wbGV0aW9uVG9rZW5zIiwiY2FsY3VsYXRlZElucHV0Q29zdCIsInRvTnVtYmVyIiwiY2FsY3VsYXRlZE91dHB1dENvc3QiLCJjYWxjdWxhdGVkVG90YWxDb3N0IiwibGV2ZWwiLCJzdGF0dXNNZXNzYWdlIiwibW9kZWwiLCJtb2RlbFBhcmFtZXRlcnMiLCJwcm9tcHRUb2tlbnMiLCJ0b3RhbFRva2VucyIsInVuaXQiLCJpbnB1dCIsIm91dHB1dCIsIm1ldGFkYXRhIiwicHJvbXB0TmFtZSIsInByb21wdFZlcnNpb24iLCJtYXAiLCJmaWVsZCIsInN0ciIsIlN0cmluZyIsInJlcGxhY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/generations/exportQuery/transforms/transformStreamToCsv.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/generations/exportQuery/transforms/transformStreamToJson.ts":
/*!********************************************************************************************!*\
  !*** ./src/server/api/routers/generations/exportQuery/transforms/transformStreamToJson.ts ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   transformStreamToJson: () => (/* binding */ transformStreamToJson)\n/* harmony export */ });\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ \"stream\");\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _src_utils_dates__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/utils/dates */ \"(api)/./src/utils/dates.ts\");\n\n\nfunction transformStreamToJson() {\n    let isFirstElement = true;\n    return new stream__WEBPACK_IMPORTED_MODULE_0__.Transform({\n        objectMode: true,\n        transform (row, encoding, callback) {\n            if (isFirstElement) {\n                this.push(\"[\"); // Push the opening bracket for the first element\n                isFirstElement = false; // Reset the flag after the first element\n            } else {\n                this.push(\",\"); // For subsequent elements, prepend a comma\n            }\n            const { calculatedInputCost, calculatedOutputCost, calculatedTotalCost, latency, ...rest } = row;\n            const rowToPush = {\n                ...rest,\n                calculatedInputCost: calculatedInputCost?.toNumber() ?? null,\n                calculatedOutputCost: calculatedOutputCost?.toNumber() ?? null,\n                calculatedTotalCost: calculatedTotalCost?.toNumber() ?? null,\n                latency: latency,\n                latencyPerToken: row.latency && row.totalTokens !== 0 ? row.latency / row.totalTokens : null,\n                timeToFirstToken: row.completionStartTime ? (0,_src_utils_dates__WEBPACK_IMPORTED_MODULE_1__.intervalInSeconds)(row.startTime, row.completionStartTime) : null\n            };\n            this.push(JSON.stringify(rowToPush)); // Push the current row as a JSON string\n            callback();\n        },\n        // 'final' is called when there is no more data to be consumed, but before the stream is finished.\n        final (callback) {\n            if (isFirstElement) {\n                // If no rows were processed, the opening bracket has not been pushed yet.\n                this.push(\"[]\"); // Push an empty array to ensure valid JSON.\n            } else {\n                this.push(\"]\"); // Close JSON array\n            }\n            callback();\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL2V4cG9ydFF1ZXJ5L3RyYW5zZm9ybXMvdHJhbnNmb3JtU3RyZWFtVG9Kc29uLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkQ7QUFHTDtBQUUvQyxTQUFTRTtJQUNkLElBQUlDLGlCQUFpQjtJQUVyQixPQUFPLElBQUlILDZDQUFTQSxDQUFDO1FBQ25CSSxZQUFZO1FBRVpDLFdBQ0VDLEdBQThCLEVBQzlCQyxRQUF3QixFQUN4QkMsUUFBMkI7WUFFM0IsSUFBSUwsZ0JBQWdCO2dCQUNsQixJQUFJLENBQUNNLElBQUksQ0FBQyxNQUFNLGlEQUFpRDtnQkFDakVOLGlCQUFpQixPQUFPLHlDQUF5QztZQUNuRSxPQUFPO2dCQUNMLElBQUksQ0FBQ00sSUFBSSxDQUFDLE1BQU0sMkNBQTJDO1lBQzdEO1lBQ0EsTUFBTSxFQUNKQyxtQkFBbUIsRUFDbkJDLG9CQUFvQixFQUNwQkMsbUJBQW1CLEVBQ25CQyxPQUFPLEVBQ1AsR0FBR0MsTUFDSixHQUFHUjtZQUVKLE1BQU1TLFlBQVk7Z0JBQ2hCLEdBQUdELElBQUk7Z0JBQ1BKLHFCQUFxQkEscUJBQXFCTSxjQUFjO2dCQUN4REwsc0JBQXNCQSxzQkFBc0JLLGNBQWM7Z0JBQzFESixxQkFBcUJBLHFCQUFxQkksY0FBYztnQkFDeERILFNBQVNBO2dCQUNUSSxpQkFDRVgsSUFBSU8sT0FBTyxJQUFJUCxJQUFJWSxXQUFXLEtBQUssSUFDL0JaLElBQUlPLE9BQU8sR0FBR1AsSUFBSVksV0FBVyxHQUM3QjtnQkFDTkMsa0JBQWtCYixJQUFJYyxtQkFBbUIsR0FDckNuQixtRUFBaUJBLENBQUNLLElBQUllLFNBQVMsRUFBRWYsSUFBSWMsbUJBQW1CLElBQ3hEO1lBQ047WUFFQSxJQUFJLENBQUNYLElBQUksQ0FBQ2EsS0FBS0MsU0FBUyxDQUFDUixhQUFhLHdDQUF3QztZQUU5RVA7UUFDRjtRQUVBLGtHQUFrRztRQUNsR2dCLE9BQU1oQixRQUEyQjtZQUMvQixJQUFJTCxnQkFBZ0I7Z0JBQ2xCLDBFQUEwRTtnQkFDMUUsSUFBSSxDQUFDTSxJQUFJLENBQUMsT0FBTyw0Q0FBNEM7WUFDL0QsT0FBTztnQkFDTCxJQUFJLENBQUNBLElBQUksQ0FBQyxNQUFNLG1CQUFtQjtZQUNyQztZQUVBRDtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvZ2VuZXJhdGlvbnMvZXhwb3J0UXVlcnkvdHJhbnNmb3Jtcy90cmFuc2Zvcm1TdHJlYW1Ub0pzb24udHM/NTlhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUcmFuc2Zvcm0sIHR5cGUgVHJhbnNmb3JtQ2FsbGJhY2sgfSBmcm9tIFwic3RyZWFtXCI7XG5cbmltcG9ydCB7IHR5cGUgT2JzZXJ2YXRpb25WaWV3V2l0aFNjb3JlcyB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvZ2VuZXJhdGlvbnMvZ2V0QWxsUXVlcnlcIjtcbmltcG9ydCB7IGludGVydmFsSW5TZWNvbmRzIH0gZnJvbSBcIkAvc3JjL3V0aWxzL2RhdGVzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1TdHJlYW1Ub0pzb24oKTogVHJhbnNmb3JtIHtcbiAgbGV0IGlzRmlyc3RFbGVtZW50ID0gdHJ1ZTtcblxuICByZXR1cm4gbmV3IFRyYW5zZm9ybSh7XG4gICAgb2JqZWN0TW9kZTogdHJ1ZSxcblxuICAgIHRyYW5zZm9ybShcbiAgICAgIHJvdzogT2JzZXJ2YXRpb25WaWV3V2l0aFNjb3JlcyxcbiAgICAgIGVuY29kaW5nOiBCdWZmZXJFbmNvZGluZyxcbiAgICAgIGNhbGxiYWNrOiBUcmFuc2Zvcm1DYWxsYmFjayxcbiAgICApOiB2b2lkIHtcbiAgICAgIGlmIChpc0ZpcnN0RWxlbWVudCkge1xuICAgICAgICB0aGlzLnB1c2goXCJbXCIpOyAvLyBQdXNoIHRoZSBvcGVuaW5nIGJyYWNrZXQgZm9yIHRoZSBmaXJzdCBlbGVtZW50XG4gICAgICAgIGlzRmlyc3RFbGVtZW50ID0gZmFsc2U7IC8vIFJlc2V0IHRoZSBmbGFnIGFmdGVyIHRoZSBmaXJzdCBlbGVtZW50XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnB1c2goXCIsXCIpOyAvLyBGb3Igc3Vic2VxdWVudCBlbGVtZW50cywgcHJlcGVuZCBhIGNvbW1hXG4gICAgICB9XG4gICAgICBjb25zdCB7XG4gICAgICAgIGNhbGN1bGF0ZWRJbnB1dENvc3QsXG4gICAgICAgIGNhbGN1bGF0ZWRPdXRwdXRDb3N0LFxuICAgICAgICBjYWxjdWxhdGVkVG90YWxDb3N0LFxuICAgICAgICBsYXRlbmN5LFxuICAgICAgICAuLi5yZXN0XG4gICAgICB9ID0gcm93O1xuXG4gICAgICBjb25zdCByb3dUb1B1c2ggPSB7XG4gICAgICAgIC4uLnJlc3QsXG4gICAgICAgIGNhbGN1bGF0ZWRJbnB1dENvc3Q6IGNhbGN1bGF0ZWRJbnB1dENvc3Q/LnRvTnVtYmVyKCkgPz8gbnVsbCxcbiAgICAgICAgY2FsY3VsYXRlZE91dHB1dENvc3Q6IGNhbGN1bGF0ZWRPdXRwdXRDb3N0Py50b051bWJlcigpID8/IG51bGwsXG4gICAgICAgIGNhbGN1bGF0ZWRUb3RhbENvc3Q6IGNhbGN1bGF0ZWRUb3RhbENvc3Q/LnRvTnVtYmVyKCkgPz8gbnVsbCxcbiAgICAgICAgbGF0ZW5jeTogbGF0ZW5jeSxcbiAgICAgICAgbGF0ZW5jeVBlclRva2VuOlxuICAgICAgICAgIHJvdy5sYXRlbmN5ICYmIHJvdy50b3RhbFRva2VucyAhPT0gMFxuICAgICAgICAgICAgPyByb3cubGF0ZW5jeSAvIHJvdy50b3RhbFRva2Vuc1xuICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICB0aW1lVG9GaXJzdFRva2VuOiByb3cuY29tcGxldGlvblN0YXJ0VGltZVxuICAgICAgICAgID8gaW50ZXJ2YWxJblNlY29uZHMocm93LnN0YXJ0VGltZSwgcm93LmNvbXBsZXRpb25TdGFydFRpbWUpXG4gICAgICAgICAgOiBudWxsLFxuICAgICAgfTtcblxuICAgICAgdGhpcy5wdXNoKEpTT04uc3RyaW5naWZ5KHJvd1RvUHVzaCkpOyAvLyBQdXNoIHRoZSBjdXJyZW50IHJvdyBhcyBhIEpTT04gc3RyaW5nXG5cbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSxcblxuICAgIC8vICdmaW5hbCcgaXMgY2FsbGVkIHdoZW4gdGhlcmUgaXMgbm8gbW9yZSBkYXRhIHRvIGJlIGNvbnN1bWVkLCBidXQgYmVmb3JlIHRoZSBzdHJlYW0gaXMgZmluaXNoZWQuXG4gICAgZmluYWwoY2FsbGJhY2s6IFRyYW5zZm9ybUNhbGxiYWNrKTogdm9pZCB7XG4gICAgICBpZiAoaXNGaXJzdEVsZW1lbnQpIHtcbiAgICAgICAgLy8gSWYgbm8gcm93cyB3ZXJlIHByb2Nlc3NlZCwgdGhlIG9wZW5pbmcgYnJhY2tldCBoYXMgbm90IGJlZW4gcHVzaGVkIHlldC5cbiAgICAgICAgdGhpcy5wdXNoKFwiW11cIik7IC8vIFB1c2ggYW4gZW1wdHkgYXJyYXkgdG8gZW5zdXJlIHZhbGlkIEpTT04uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnB1c2goXCJdXCIpOyAvLyBDbG9zZSBKU09OIGFycmF5XG4gICAgICB9XG5cbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSxcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiVHJhbnNmb3JtIiwiaW50ZXJ2YWxJblNlY29uZHMiLCJ0cmFuc2Zvcm1TdHJlYW1Ub0pzb24iLCJpc0ZpcnN0RWxlbWVudCIsIm9iamVjdE1vZGUiLCJ0cmFuc2Zvcm0iLCJyb3ciLCJlbmNvZGluZyIsImNhbGxiYWNrIiwicHVzaCIsImNhbGN1bGF0ZWRJbnB1dENvc3QiLCJjYWxjdWxhdGVkT3V0cHV0Q29zdCIsImNhbGN1bGF0ZWRUb3RhbENvc3QiLCJsYXRlbmN5IiwicmVzdCIsInJvd1RvUHVzaCIsInRvTnVtYmVyIiwibGF0ZW5jeVBlclRva2VuIiwidG90YWxUb2tlbnMiLCJ0aW1lVG9GaXJzdFRva2VuIiwiY29tcGxldGlvblN0YXJ0VGltZSIsInN0YXJ0VGltZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaW5hbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/generations/exportQuery/transforms/transformStreamToJson.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/generations/exportQuery/transforms/transformStreamToJsonLines.ts":
/*!*************************************************************************************************!*\
  !*** ./src/server/api/routers/generations/exportQuery/transforms/transformStreamToJsonLines.ts ***!
  \*************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   transformStreamToJsonLines: () => (/* binding */ transformStreamToJsonLines)\n/* harmony export */ });\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ \"stream\");\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(stream__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _src_utils_zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/utils/zod */ \"(api)/./src/utils/zod.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_1__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_2__]);\n([zod__WEBPACK_IMPORTED_MODULE_1__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nfunction transformStreamToJsonLines() {\n    return new stream__WEBPACK_IMPORTED_MODULE_0__.Transform({\n        objectMode: true,\n        transform (row, encoding, callback) {\n            const inputSchemaOpenAI = zod__WEBPACK_IMPORTED_MODULE_1__.z.array(zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n                role: zod__WEBPACK_IMPORTED_MODULE_1__.z.enum([\n                    \"system\",\n                    \"user\",\n                    \"assistant\"\n                ]),\n                content: zod__WEBPACK_IMPORTED_MODULE_1__.z.string()\n            }));\n            const outputSchema = zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n                completion: _src_utils_zod__WEBPACK_IMPORTED_MODULE_2__.jsonSchema\n            }).or(_src_utils_zod__WEBPACK_IMPORTED_MODULE_2__.jsonSchema);\n            const parsedInput = inputSchemaOpenAI.safeParse(row.input);\n            const parsedOutput = outputSchema.safeParse(row.output);\n            if (parsedInput.success && parsedOutput.success) {\n                const output = JSON.stringify({\n                    messages: [\n                        ...parsedInput.data,\n                        {\n                            role: \"assistant\",\n                            content: typeof parsedOutput.data === \"object\" && \"completion\" in parsedOutput.data ? JSON.stringify(parsedOutput.data.completion) : JSON.stringify(parsedOutput.data)\n                        }\n                    ]\n                });\n                this.push(output + \"\\n\");\n            }\n            callback();\n        }\n    });\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL2V4cG9ydFF1ZXJ5L3RyYW5zZm9ybXMvdHJhbnNmb3JtU3RyZWFtVG9Kc29uTGluZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMkQ7QUFDbkM7QUFFcUI7QUFHdEMsU0FBU0c7SUFDZCxPQUFPLElBQUlILDZDQUFTQSxDQUFDO1FBQ25CSSxZQUFZO1FBQ1pDLFdBQ0VDLEdBQThCLEVBQzlCQyxRQUF3QixFQUN4QkMsUUFBMkI7WUFFM0IsTUFBTUMsb0JBQW9CUixrQ0FBQ0EsQ0FBQ1MsS0FBSyxDQUMvQlQsa0NBQUNBLENBQUNVLE1BQU0sQ0FBQztnQkFDUEMsTUFBTVgsa0NBQUNBLENBQUNZLElBQUksQ0FBQztvQkFBQztvQkFBVTtvQkFBUTtpQkFBWTtnQkFDNUNDLFNBQVNiLGtDQUFDQSxDQUFDYyxNQUFNO1lBQ25CO1lBR0YsTUFBTUMsZUFBZWYsa0NBQUNBLENBQ25CVSxNQUFNLENBQUM7Z0JBQ05NLFlBQVlmLHNEQUFVQTtZQUN4QixHQUNDZ0IsRUFBRSxDQUFDaEIsc0RBQVVBO1lBRWhCLE1BQU1pQixjQUFjVixrQkFBa0JXLFNBQVMsQ0FBQ2QsSUFBSWUsS0FBSztZQUN6RCxNQUFNQyxlQUFlTixhQUFhSSxTQUFTLENBQUNkLElBQUlpQixNQUFNO1lBRXRELElBQUlKLFlBQVlLLE9BQU8sSUFBSUYsYUFBYUUsT0FBTyxFQUFFO2dCQUMvQyxNQUFNRCxTQUFTRSxLQUFLQyxTQUFTLENBQUM7b0JBQzVCQyxVQUFVOzJCQUNMUixZQUFZUyxJQUFJO3dCQUNuQjs0QkFDRWhCLE1BQU07NEJBQ05FLFNBQ0UsT0FBT1EsYUFBYU0sSUFBSSxLQUFLLFlBQzdCLGdCQUFnQk4sYUFBYU0sSUFBSSxHQUM3QkgsS0FBS0MsU0FBUyxDQUFDSixhQUFhTSxJQUFJLENBQUNYLFVBQVUsSUFDM0NRLEtBQUtDLFNBQVMsQ0FBQ0osYUFBYU0sSUFBSTt3QkFDeEM7cUJBQ0Q7Z0JBQ0g7Z0JBQ0EsSUFBSSxDQUFDQyxJQUFJLENBQUNOLFNBQVM7WUFDckI7WUFFQWY7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL2V4cG9ydFF1ZXJ5L3RyYW5zZm9ybXMvdHJhbnNmb3JtU3RyZWFtVG9Kc29uTGluZXMudHM/MDQyMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUcmFuc2Zvcm0sIHR5cGUgVHJhbnNmb3JtQ2FsbGJhY2sgfSBmcm9tIFwic3RyZWFtXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuXG5pbXBvcnQgeyBqc29uU2NoZW1hIH0gZnJvbSBcIkAvc3JjL3V0aWxzL3pvZFwiO1xuaW1wb3J0IHsgdHlwZSBPYnNlcnZhdGlvblZpZXdXaXRoU2NvcmVzIH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvcm91dGVycy9nZW5lcmF0aW9ucy9nZXRBbGxRdWVyeVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtU3RyZWFtVG9Kc29uTGluZXMoKTogVHJhbnNmb3JtIHtcbiAgcmV0dXJuIG5ldyBUcmFuc2Zvcm0oe1xuICAgIG9iamVjdE1vZGU6IHRydWUsXG4gICAgdHJhbnNmb3JtKFxuICAgICAgcm93OiBPYnNlcnZhdGlvblZpZXdXaXRoU2NvcmVzLFxuICAgICAgZW5jb2Rpbmc6IEJ1ZmZlckVuY29kaW5nLFxuICAgICAgY2FsbGJhY2s6IFRyYW5zZm9ybUNhbGxiYWNrLFxuICAgICk6IHZvaWQge1xuICAgICAgY29uc3QgaW5wdXRTY2hlbWFPcGVuQUkgPSB6LmFycmF5KFxuICAgICAgICB6Lm9iamVjdCh7XG4gICAgICAgICAgcm9sZTogei5lbnVtKFtcInN5c3RlbVwiLCBcInVzZXJcIiwgXCJhc3Npc3RhbnRcIl0pLFxuICAgICAgICAgIGNvbnRlbnQ6IHouc3RyaW5nKCksXG4gICAgICAgIH0pLFxuICAgICAgKTtcblxuICAgICAgY29uc3Qgb3V0cHV0U2NoZW1hID0gelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgICBjb21wbGV0aW9uOiBqc29uU2NoZW1hLFxuICAgICAgICB9KVxuICAgICAgICAub3IoanNvblNjaGVtYSk7XG5cbiAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0gaW5wdXRTY2hlbWFPcGVuQUkuc2FmZVBhcnNlKHJvdy5pbnB1dCk7XG4gICAgICBjb25zdCBwYXJzZWRPdXRwdXQgPSBvdXRwdXRTY2hlbWEuc2FmZVBhcnNlKHJvdy5vdXRwdXQpO1xuXG4gICAgICBpZiAocGFyc2VkSW5wdXQuc3VjY2VzcyAmJiBwYXJzZWRPdXRwdXQuc3VjY2Vzcykge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgIC4uLnBhcnNlZElucHV0LmRhdGEsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJvbGU6IFwiYXNzaXN0YW50XCIsXG4gICAgICAgICAgICAgIGNvbnRlbnQ6XG4gICAgICAgICAgICAgICAgdHlwZW9mIHBhcnNlZE91dHB1dC5kYXRhID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgXCJjb21wbGV0aW9uXCIgaW4gcGFyc2VkT3V0cHV0LmRhdGFcbiAgICAgICAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkocGFyc2VkT3V0cHV0LmRhdGEuY29tcGxldGlvbilcbiAgICAgICAgICAgICAgICAgIDogSlNPTi5zdHJpbmdpZnkocGFyc2VkT3V0cHV0LmRhdGEpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wdXNoKG91dHB1dCArIFwiXFxuXCIpO1xuICAgICAgfVxuXG4gICAgICBjYWxsYmFjaygpO1xuICAgIH0sXG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbIlRyYW5zZm9ybSIsInoiLCJqc29uU2NoZW1hIiwidHJhbnNmb3JtU3RyZWFtVG9Kc29uTGluZXMiLCJvYmplY3RNb2RlIiwidHJhbnNmb3JtIiwicm93IiwiZW5jb2RpbmciLCJjYWxsYmFjayIsImlucHV0U2NoZW1hT3BlbkFJIiwiYXJyYXkiLCJvYmplY3QiLCJyb2xlIiwiZW51bSIsImNvbnRlbnQiLCJzdHJpbmciLCJvdXRwdXRTY2hlbWEiLCJjb21wbGV0aW9uIiwib3IiLCJwYXJzZWRJbnB1dCIsInNhZmVQYXJzZSIsImlucHV0IiwicGFyc2VkT3V0cHV0Iiwib3V0cHV0Iiwic3VjY2VzcyIsIkpTT04iLCJzdHJpbmdpZnkiLCJtZXNzYWdlcyIsImRhdGEiLCJwdXNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/generations/exportQuery/transforms/transformStreamToJsonLines.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/generations/filterOptionsQuery.ts":
/*!******************************************************************!*\
  !*** ./src/server/api/routers/generations/filterOptionsQuery.ts ***!
  \******************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   filterOptionsQuery: () => (/* binding */ filterOptionsQuery)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst filterOptionsQuery = _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n})).query(async ({ input, ctx })=>{\n    const queryFilter = {\n        projectId: input.projectId,\n        type: \"GENERATION\"\n    };\n    const scores = await ctx.prisma.score.groupBy({\n        where: {\n            observation: {\n                projectId: input.projectId\n            }\n        },\n        by: [\n            \"name\"\n        ]\n    });\n    const model = await ctx.prisma.observation.groupBy({\n        by: [\n            \"model\"\n        ],\n        where: queryFilter,\n        _count: {\n            _all: true\n        }\n    });\n    const name = await ctx.prisma.observation.groupBy({\n        by: [\n            \"name\"\n        ],\n        where: queryFilter,\n        _count: {\n            _all: true\n        }\n    });\n    const traceName = await ctx.prisma.$queryRaw(_prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.sql`\n        SELECT\n          t.name \"traceName\",\n          count(*)::int AS count\n        FROM traces t\n        JOIN observations o ON o.trace_id = t.id\n        WHERE o.type = 'GENERATION'\n          AND o.project_id = ${input.projectId}\n          AND t.project_id = ${input.projectId}\n        GROUP BY 1\n      `);\n    // typecheck filter options, needs to include all columns with options\n    const res = {\n        model: model.filter((i)=>i.model !== null).map((i)=>({\n                value: i.model,\n                count: i._count._all\n            })),\n        name: name.filter((i)=>i.name !== null).map((i)=>({\n                value: i.name,\n                count: i._count._all\n            })),\n        traceName: traceName.filter((i)=>i.traceName !== null).map((i)=>({\n                value: i.traceName,\n                count: i.count\n            })),\n        scores_avg: scores.map((score)=>score.name)\n    };\n    return res;\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL2ZpbHRlck9wdGlvbnNRdWVyeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF3QjtBQUcwQztBQUMxQjtBQUVqQyxNQUFNRyxxQkFBcUJGLDJFQUF5QkEsQ0FDeERHLEtBQUssQ0FBQ0osa0NBQUNBLENBQUNLLE1BQU0sQ0FBQztJQUFFQyxXQUFXTixrQ0FBQ0EsQ0FBQ08sTUFBTTtBQUFHLElBQ3ZDQyxLQUFLLENBQUMsT0FBTyxFQUFFSixLQUFLLEVBQUVLLEdBQUcsRUFBRTtJQUMxQixNQUFNQyxjQUFjO1FBQ2xCSixXQUFXRixNQUFNRSxTQUFTO1FBQzFCSyxNQUFNO0lBQ1I7SUFFQSxNQUFNQyxTQUFTLE1BQU1ILElBQUlJLE1BQU0sQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUM7UUFDNUNDLE9BQU87WUFDTEMsYUFBYTtnQkFDWFgsV0FBV0YsTUFBTUUsU0FBUztZQUM1QjtRQUNGO1FBQ0FZLElBQUk7WUFBQztTQUFPO0lBQ2Q7SUFFQSxNQUFNQyxRQUFRLE1BQU1WLElBQUlJLE1BQU0sQ0FBQ0ksV0FBVyxDQUFDRixPQUFPLENBQUM7UUFDakRHLElBQUk7WUFBQztTQUFRO1FBQ2JGLE9BQU9OO1FBQ1BVLFFBQVE7WUFBRUMsTUFBTTtRQUFLO0lBQ3ZCO0lBQ0EsTUFBTUMsT0FBTyxNQUFNYixJQUFJSSxNQUFNLENBQUNJLFdBQVcsQ0FBQ0YsT0FBTyxDQUFDO1FBQ2hERyxJQUFJO1lBQUM7U0FBTztRQUNaRixPQUFPTjtRQUNQVSxRQUFRO1lBQUVDLE1BQU07UUFBSztJQUN2QjtJQUNBLE1BQU1FLFlBQVksTUFBTWQsSUFBSUksTUFBTSxDQUFDVyxTQUFTLENBSzFDdEIsa0RBQU1BLENBQUN1QixHQUFHLENBQUM7Ozs7Ozs7NkJBT1ksRUFBRXJCLE1BQU1FLFNBQVMsQ0FBQzs2QkFDbEIsRUFBRUYsTUFBTUUsU0FBUyxDQUFDOztNQUV6QyxDQUFDO0lBRUgsc0VBQXNFO0lBQ3RFLE1BQU1vQixNQUEwQjtRQUM5QlAsT0FBT0EsTUFDSlEsTUFBTSxDQUFDLENBQUNDLElBQU1BLEVBQUVULEtBQUssS0FBSyxNQUUxQlUsR0FBRyxDQUFDLENBQUNELElBQU87Z0JBQ1hFLE9BQU9GLEVBQUVULEtBQUs7Z0JBQ2RZLE9BQU9ILEVBQUVSLE1BQU0sQ0FBQ0MsSUFBSTtZQUN0QjtRQUNGQyxNQUFNQSxLQUNISyxNQUFNLENBQUMsQ0FBQ0MsSUFBTUEsRUFBRU4sSUFBSSxLQUFLLE1BQ3pCTyxHQUFHLENBQUMsQ0FBQ0QsSUFBTztnQkFDWEUsT0FBT0YsRUFBRU4sSUFBSTtnQkFDYlMsT0FBT0gsRUFBRVIsTUFBTSxDQUFDQyxJQUFJO1lBQ3RCO1FBQ0ZFLFdBQVdBLFVBQ1JJLE1BQU0sQ0FBQyxDQUFDQyxJQUFNQSxFQUFFTCxTQUFTLEtBQUssTUFDOUJNLEdBQUcsQ0FBQyxDQUFDRCxJQUFPO2dCQUNYRSxPQUFPRixFQUFFTCxTQUFTO2dCQUNsQlEsT0FBT0gsRUFBRUcsS0FBSztZQUNoQjtRQUNGQyxZQUFZcEIsT0FBT2lCLEdBQUcsQ0FBQyxDQUFDZixRQUFVQSxNQUFNUSxJQUFJO0lBQzlDO0lBRUEsT0FBT0k7QUFDVCxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL3NlcnZlci9hcGkvcm91dGVycy9nZW5lcmF0aW9ucy9maWx0ZXJPcHRpb25zUXVlcnkudHM/YTRiNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuXG5pbXBvcnQgeyB0eXBlIE9ic2VydmF0aW9uT3B0aW9ucyB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL2RlZmluaXRpb25zL29ic2VydmF0aW9uc1RhYmxlXCI7XG5pbXBvcnQgeyBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlIH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvdHJwY1wiO1xuaW1wb3J0IHsgUHJpc21hIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5cbmV4cG9ydCBjb25zdCBmaWx0ZXJPcHRpb25zUXVlcnkgPSBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gIC5pbnB1dCh6Lm9iamVjdCh7IHByb2plY3RJZDogei5zdHJpbmcoKSB9KSlcbiAgLnF1ZXJ5KGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5RmlsdGVyID0ge1xuICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICB0eXBlOiBcIkdFTkVSQVRJT05cIixcbiAgICB9IGFzIGNvbnN0O1xuXG4gICAgY29uc3Qgc2NvcmVzID0gYXdhaXQgY3R4LnByaXNtYS5zY29yZS5ncm91cEJ5KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIG9ic2VydmF0aW9uOiB7XG4gICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgYnk6IFtcIm5hbWVcIl0sXG4gICAgfSk7XG5cbiAgICBjb25zdCBtb2RlbCA9IGF3YWl0IGN0eC5wcmlzbWEub2JzZXJ2YXRpb24uZ3JvdXBCeSh7XG4gICAgICBieTogW1wibW9kZWxcIl0sXG4gICAgICB3aGVyZTogcXVlcnlGaWx0ZXIsXG4gICAgICBfY291bnQ6IHsgX2FsbDogdHJ1ZSB9LFxuICAgIH0pO1xuICAgIGNvbnN0IG5hbWUgPSBhd2FpdCBjdHgucHJpc21hLm9ic2VydmF0aW9uLmdyb3VwQnkoe1xuICAgICAgYnk6IFtcIm5hbWVcIl0sXG4gICAgICB3aGVyZTogcXVlcnlGaWx0ZXIsXG4gICAgICBfY291bnQ6IHsgX2FsbDogdHJ1ZSB9LFxuICAgIH0pO1xuICAgIGNvbnN0IHRyYWNlTmFtZSA9IGF3YWl0IGN0eC5wcmlzbWEuJHF1ZXJ5UmF3PFxuICAgICAgQXJyYXk8e1xuICAgICAgICB0cmFjZU5hbWU6IHN0cmluZyB8IG51bGw7XG4gICAgICAgIGNvdW50OiBudW1iZXI7XG4gICAgICB9PlxuICAgID4oUHJpc21hLnNxbGBcbiAgICAgICAgU0VMRUNUXG4gICAgICAgICAgdC5uYW1lIFwidHJhY2VOYW1lXCIsXG4gICAgICAgICAgY291bnQoKik6OmludCBBUyBjb3VudFxuICAgICAgICBGUk9NIHRyYWNlcyB0XG4gICAgICAgIEpPSU4gb2JzZXJ2YXRpb25zIG8gT04gby50cmFjZV9pZCA9IHQuaWRcbiAgICAgICAgV0hFUkUgby50eXBlID0gJ0dFTkVSQVRJT04nXG4gICAgICAgICAgQU5EIG8ucHJvamVjdF9pZCA9ICR7aW5wdXQucHJvamVjdElkfVxuICAgICAgICAgIEFORCB0LnByb2plY3RfaWQgPSAke2lucHV0LnByb2plY3RJZH1cbiAgICAgICAgR1JPVVAgQlkgMVxuICAgICAgYCk7XG5cbiAgICAvLyB0eXBlY2hlY2sgZmlsdGVyIG9wdGlvbnMsIG5lZWRzIHRvIGluY2x1ZGUgYWxsIGNvbHVtbnMgd2l0aCBvcHRpb25zXG4gICAgY29uc3QgcmVzOiBPYnNlcnZhdGlvbk9wdGlvbnMgPSB7XG4gICAgICBtb2RlbDogbW9kZWxcbiAgICAgICAgLmZpbHRlcigoaSkgPT4gaS5tb2RlbCAhPT0gbnVsbClcblxuICAgICAgICAubWFwKChpKSA9PiAoe1xuICAgICAgICAgIHZhbHVlOiBpLm1vZGVsIGFzIHN0cmluZyxcbiAgICAgICAgICBjb3VudDogaS5fY291bnQuX2FsbCxcbiAgICAgICAgfSkpLFxuICAgICAgbmFtZTogbmFtZVxuICAgICAgICAuZmlsdGVyKChpKSA9PiBpLm5hbWUgIT09IG51bGwpXG4gICAgICAgIC5tYXAoKGkpID0+ICh7XG4gICAgICAgICAgdmFsdWU6IGkubmFtZSBhcyBzdHJpbmcsXG4gICAgICAgICAgY291bnQ6IGkuX2NvdW50Ll9hbGwsXG4gICAgICAgIH0pKSxcbiAgICAgIHRyYWNlTmFtZTogdHJhY2VOYW1lXG4gICAgICAgIC5maWx0ZXIoKGkpID0+IGkudHJhY2VOYW1lICE9PSBudWxsKVxuICAgICAgICAubWFwKChpKSA9PiAoe1xuICAgICAgICAgIHZhbHVlOiBpLnRyYWNlTmFtZSBhcyBzdHJpbmcsXG4gICAgICAgICAgY291bnQ6IGkuY291bnQsXG4gICAgICAgIH0pKSxcbiAgICAgIHNjb3Jlc19hdmc6IHNjb3Jlcy5tYXAoKHNjb3JlKSA9PiBzY29yZS5uYW1lKSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHJlcztcbiAgfSk7XG4iXSwibmFtZXMiOlsieiIsInByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUiLCJQcmlzbWEiLCJmaWx0ZXJPcHRpb25zUXVlcnkiLCJpbnB1dCIsIm9iamVjdCIsInByb2plY3RJZCIsInN0cmluZyIsInF1ZXJ5IiwiY3R4IiwicXVlcnlGaWx0ZXIiLCJ0eXBlIiwic2NvcmVzIiwicHJpc21hIiwic2NvcmUiLCJncm91cEJ5Iiwid2hlcmUiLCJvYnNlcnZhdGlvbiIsImJ5IiwibW9kZWwiLCJfY291bnQiLCJfYWxsIiwibmFtZSIsInRyYWNlTmFtZSIsIiRxdWVyeVJhdyIsInNxbCIsInJlcyIsImZpbHRlciIsImkiLCJtYXAiLCJ2YWx1ZSIsImNvdW50Iiwic2NvcmVzX2F2ZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/generations/filterOptionsQuery.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/generations/getAllQuery.ts":
/*!***********************************************************!*\
  !*** ./src/server/api/routers/generations/getAllQuery.ts ***!
  \***********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAllQuery: () => (/* binding */ getAllQuery)\n/* harmony export */ });\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _src_utils_zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/utils/zod */ \"(api)/./src/utils/zod.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils_GenerationTableOptions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/GenerationTableOptions */ \"(api)/./src/server/api/routers/generations/utils/GenerationTableOptions.ts\");\n/* harmony import */ var _src_server_api_routers_generations_db_getAllGenerationsSqlQuery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/server/api/routers/generations/db/getAllGenerationsSqlQuery */ \"(api)/./src/server/api/routers/generations/db/getAllGenerationsSqlQuery.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_1__, _utils_GenerationTableOptions__WEBPACK_IMPORTED_MODULE_3__, _src_server_api_routers_generations_db_getAllGenerationsSqlQuery__WEBPACK_IMPORTED_MODULE_4__]);\n([_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_1__, _utils_GenerationTableOptions__WEBPACK_IMPORTED_MODULE_3__, _src_server_api_routers_generations_db_getAllGenerationsSqlQuery__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nconst getAllGenerationsInput = _utils_GenerationTableOptions__WEBPACK_IMPORTED_MODULE_3__.GenerationTableOptions.extend({\n    ..._src_utils_zod__WEBPACK_IMPORTED_MODULE_1__.paginationZod\n});\nconst getAllQuery = _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedProjectProcedure.input(getAllGenerationsInput).query(async ({ input, ctx })=>{\n    const { generations, datetimeFilter, filterCondition, searchCondition } = await (0,_src_server_api_routers_generations_db_getAllGenerationsSqlQuery__WEBPACK_IMPORTED_MODULE_4__.getAllGenerations)({\n        input,\n        selectIO: false\n    });\n    const totalGenerations = await ctx.prisma.$queryRaw(_prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.sql`\n      SELECT\n        count(*)\n      FROM observations_view o\n      JOIN traces t ON t.id = o.trace_id AND t.project_id = o.project_id\n      LEFT JOIN LATERAL (\n        SELECT\n          jsonb_object_agg(name::text, avg_value::double precision) AS \"scores_avg\"\n        FROM (\n            SELECT\n              name,\n              avg(value) avg_value\n            FROM\n                scores\n            WHERE\n                scores.\"trace_id\" = t.id\n                AND scores.\"observation_id\" = o.id\n            GROUP BY\n                name\n        ) tmp\n      ) AS s_avg ON true\n      WHERE\n        t.project_id = ${input.projectId}\n        AND o.type = 'GENERATION'\n        AND o.project_id = ${input.projectId}\n        ${datetimeFilter}\n        ${searchCondition}\n        ${filterCondition}\n    `);\n    const count = totalGenerations[0]?.count;\n    return {\n        totalCount: count ? Number(count) : undefined,\n        generations: generations\n    };\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL2dldEFsbFF1ZXJ5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFFa0U7QUFDbEI7QUFDYztBQUVVO0FBQzhCO0FBRXRHLE1BQU1LLHlCQUF5QkYsaUZBQXNCQSxDQUFDRyxNQUFNLENBQUM7SUFDM0QsR0FBR0wseURBQWE7QUFDbEI7QUFrQk8sTUFBTU0sY0FBY1AsMkVBQXlCQSxDQUNqRFEsS0FBSyxDQUFDSCx3QkFDTkksS0FBSyxDQUFDLE9BQU8sRUFBRUQsS0FBSyxFQUFFRSxHQUFHLEVBQUU7SUFDMUIsTUFBTSxFQUFFQyxXQUFXLEVBQUVDLGNBQWMsRUFBRUMsZUFBZSxFQUFFQyxlQUFlLEVBQUUsR0FDckUsTUFBTVYsbUhBQWlCQSxDQUFDO1FBQUVJO1FBQU9PLFVBQVU7SUFBTTtJQUVuRCxNQUFNQyxtQkFBbUIsTUFBTU4sSUFBSU8sTUFBTSxDQUFDQyxTQUFTLENBR2pEaEIsa0RBQU1BLENBQUNpQixHQUFHLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7dUJBc0JNLEVBQUVYLE1BQU1ZLFNBQVMsQ0FBQzs7MkJBRWQsRUFBRVosTUFBTVksU0FBUyxDQUFDO1FBQ3JDLEVBQUVSLGVBQWU7UUFDakIsRUFBRUUsZ0JBQWdCO1FBQ2xCLEVBQUVELGdCQUFnQjtJQUN0QixDQUFDO0lBR0QsTUFBTVEsUUFBUUwsZ0JBQWdCLENBQUMsRUFBRSxFQUFFSztJQUNuQyxPQUFPO1FBQ0xDLFlBQVlELFFBQVFFLE9BQU9GLFNBQVNHO1FBQ3BDYixhQUFhQTtJQUNmO0FBQ0YsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvZ2VuZXJhdGlvbnMvZ2V0QWxsUXVlcnkudHM/OTc5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIHogfSBmcm9tIFwiem9kXCI7XG5cbmltcG9ydCB7IHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUgfSBmcm9tIFwiQC9zcmMvc2VydmVyL2FwaS90cnBjXCI7XG5pbXBvcnQgeyBwYWdpbmF0aW9uWm9kIH0gZnJvbSBcIkAvc3JjL3V0aWxzL3pvZFwiO1xuaW1wb3J0IHsgdHlwZSBPYnNlcnZhdGlvblZpZXcsIFByaXNtYSB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5pbXBvcnQgeyBHZW5lcmF0aW9uVGFibGVPcHRpb25zIH0gZnJvbSBcIi4vdXRpbHMvR2VuZXJhdGlvblRhYmxlT3B0aW9uc1wiO1xuaW1wb3J0IHsgZ2V0QWxsR2VuZXJhdGlvbnMgfSBmcm9tIFwiQC9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL2RiL2dldEFsbEdlbmVyYXRpb25zU3FsUXVlcnlcIjtcblxuY29uc3QgZ2V0QWxsR2VuZXJhdGlvbnNJbnB1dCA9IEdlbmVyYXRpb25UYWJsZU9wdGlvbnMuZXh0ZW5kKHtcbiAgLi4ucGFnaW5hdGlvblpvZCxcbn0pO1xuXG5leHBvcnQgdHlwZSBTY29yZVNpbXBsaWZpZWQgPSB7XG4gIG5hbWU6IHN0cmluZztcbiAgdmFsdWU6IG51bWJlcjtcbiAgY29tbWVudD86IHN0cmluZyB8IG51bGw7XG59O1xuXG5leHBvcnQgdHlwZSBHZXRBbGxHZW5lcmF0aW9uc0lucHV0ID0gei5pbmZlcjx0eXBlb2YgZ2V0QWxsR2VuZXJhdGlvbnNJbnB1dD47XG5cbmV4cG9ydCB0eXBlIE9ic2VydmF0aW9uVmlld1dpdGhTY29yZXMgPSBPYnNlcnZhdGlvblZpZXcgJiB7XG4gIHRyYWNlSWQ6IHN0cmluZyB8IG51bGw7XG4gIHRyYWNlTmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgcHJvbXB0TmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgcHJvbXB0VmVyc2lvbjogc3RyaW5nIHwgbnVsbDtcbiAgc2NvcmVzOiBTY29yZVNpbXBsaWZpZWRbXSB8IG51bGw7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QWxsUXVlcnkgPSBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gIC5pbnB1dChnZXRBbGxHZW5lcmF0aW9uc0lucHV0KVxuICAucXVlcnkoYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgY29uc3QgeyBnZW5lcmF0aW9ucywgZGF0ZXRpbWVGaWx0ZXIsIGZpbHRlckNvbmRpdGlvbiwgc2VhcmNoQ29uZGl0aW9uIH0gPVxuICAgICAgYXdhaXQgZ2V0QWxsR2VuZXJhdGlvbnMoeyBpbnB1dCwgc2VsZWN0SU86IGZhbHNlIH0pO1xuXG4gICAgY29uc3QgdG90YWxHZW5lcmF0aW9ucyA9IGF3YWl0IGN0eC5wcmlzbWEuJHF1ZXJ5UmF3PFxuICAgICAgQXJyYXk8eyBjb3VudDogYmlnaW50IH0+XG4gICAgPihcbiAgICAgIFByaXNtYS5zcWxgXG4gICAgICBTRUxFQ1RcbiAgICAgICAgY291bnQoKilcbiAgICAgIEZST00gb2JzZXJ2YXRpb25zX3ZpZXcgb1xuICAgICAgSk9JTiB0cmFjZXMgdCBPTiB0LmlkID0gby50cmFjZV9pZCBBTkQgdC5wcm9qZWN0X2lkID0gby5wcm9qZWN0X2lkXG4gICAgICBMRUZUIEpPSU4gTEFURVJBTCAoXG4gICAgICAgIFNFTEVDVFxuICAgICAgICAgIGpzb25iX29iamVjdF9hZ2cobmFtZTo6dGV4dCwgYXZnX3ZhbHVlOjpkb3VibGUgcHJlY2lzaW9uKSBBUyBcInNjb3Jlc19hdmdcIlxuICAgICAgICBGUk9NIChcbiAgICAgICAgICAgIFNFTEVDVFxuICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICBhdmcodmFsdWUpIGF2Z192YWx1ZVxuICAgICAgICAgICAgRlJPTVxuICAgICAgICAgICAgICAgIHNjb3Jlc1xuICAgICAgICAgICAgV0hFUkVcbiAgICAgICAgICAgICAgICBzY29yZXMuXCJ0cmFjZV9pZFwiID0gdC5pZFxuICAgICAgICAgICAgICAgIEFORCBzY29yZXMuXCJvYnNlcnZhdGlvbl9pZFwiID0gby5pZFxuICAgICAgICAgICAgR1JPVVAgQllcbiAgICAgICAgICAgICAgICBuYW1lXG4gICAgICAgICkgdG1wXG4gICAgICApIEFTIHNfYXZnIE9OIHRydWVcbiAgICAgIFdIRVJFXG4gICAgICAgIHQucHJvamVjdF9pZCA9ICR7aW5wdXQucHJvamVjdElkfVxuICAgICAgICBBTkQgby50eXBlID0gJ0dFTkVSQVRJT04nXG4gICAgICAgIEFORCBvLnByb2plY3RfaWQgPSAke2lucHV0LnByb2plY3RJZH1cbiAgICAgICAgJHtkYXRldGltZUZpbHRlcn1cbiAgICAgICAgJHtzZWFyY2hDb25kaXRpb259XG4gICAgICAgICR7ZmlsdGVyQ29uZGl0aW9ufVxuICAgIGAsXG4gICAgKTtcblxuICAgIGNvbnN0IGNvdW50ID0gdG90YWxHZW5lcmF0aW9uc1swXT8uY291bnQ7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsQ291bnQ6IGNvdW50ID8gTnVtYmVyKGNvdW50KSA6IHVuZGVmaW5lZCxcbiAgICAgIGdlbmVyYXRpb25zOiBnZW5lcmF0aW9ucyxcbiAgICB9O1xuICB9KTtcbiJdLCJuYW1lcyI6WyJwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlIiwicGFnaW5hdGlvblpvZCIsIlByaXNtYSIsIkdlbmVyYXRpb25UYWJsZU9wdGlvbnMiLCJnZXRBbGxHZW5lcmF0aW9ucyIsImdldEFsbEdlbmVyYXRpb25zSW5wdXQiLCJleHRlbmQiLCJnZXRBbGxRdWVyeSIsImlucHV0IiwicXVlcnkiLCJjdHgiLCJnZW5lcmF0aW9ucyIsImRhdGV0aW1lRmlsdGVyIiwiZmlsdGVyQ29uZGl0aW9uIiwic2VhcmNoQ29uZGl0aW9uIiwic2VsZWN0SU8iLCJ0b3RhbEdlbmVyYXRpb25zIiwicHJpc21hIiwiJHF1ZXJ5UmF3Iiwic3FsIiwicHJvamVjdElkIiwiY291bnQiLCJ0b3RhbENvdW50IiwiTnVtYmVyIiwidW5kZWZpbmVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/generations/getAllQuery.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/generations/index.ts":
/*!*****************************************************!*\
  !*** ./src/server/api/routers/generations/index.ts ***!
  \*****************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generationsRouter: () => (/* binding */ generationsRouter)\n/* harmony export */ });\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _exportQuery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./exportQuery */ \"(api)/./src/server/api/routers/generations/exportQuery/index.ts\");\n/* harmony import */ var _filterOptionsQuery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./filterOptionsQuery */ \"(api)/./src/server/api/routers/generations/filterOptionsQuery.ts\");\n/* harmony import */ var _getAllQuery__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getAllQuery */ \"(api)/./src/server/api/routers/generations/getAllQuery.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, _exportQuery__WEBPACK_IMPORTED_MODULE_1__, _filterOptionsQuery__WEBPACK_IMPORTED_MODULE_2__, _getAllQuery__WEBPACK_IMPORTED_MODULE_3__]);\n([_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, _exportQuery__WEBPACK_IMPORTED_MODULE_1__, _filterOptionsQuery__WEBPACK_IMPORTED_MODULE_2__, _getAllQuery__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst generationsRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.createTRPCRouter)({\n    all: _getAllQuery__WEBPACK_IMPORTED_MODULE_3__.getAllQuery,\n    export: _exportQuery__WEBPACK_IMPORTED_MODULE_1__.generationsExportQuery,\n    filterOptions: _filterOptionsQuery__WEBPACK_IMPORTED_MODULE_2__.filterOptionsQuery\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXlEO0FBRUY7QUFDRztBQUNkO0FBRXJDLE1BQU1JLG9CQUFvQkosc0VBQWdCQSxDQUFDO0lBQ2hESyxLQUFLRixxREFBV0E7SUFDaEJHLFFBQVFMLGdFQUFzQkE7SUFDOUJNLGVBQWVMLG1FQUFrQkE7QUFDbkMsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvZ2VuZXJhdGlvbnMvaW5kZXgudHM/MGM4MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVUUlBDUm91dGVyIH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvdHJwY1wiO1xuXG5pbXBvcnQgeyBnZW5lcmF0aW9uc0V4cG9ydFF1ZXJ5IH0gZnJvbSBcIi4vZXhwb3J0UXVlcnlcIjtcbmltcG9ydCB7IGZpbHRlck9wdGlvbnNRdWVyeSB9IGZyb20gXCIuL2ZpbHRlck9wdGlvbnNRdWVyeVwiO1xuaW1wb3J0IHsgZ2V0QWxsUXVlcnkgfSBmcm9tIFwiLi9nZXRBbGxRdWVyeVwiO1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGlvbnNSb3V0ZXIgPSBjcmVhdGVUUlBDUm91dGVyKHtcbiAgYWxsOiBnZXRBbGxRdWVyeSxcbiAgZXhwb3J0OiBnZW5lcmF0aW9uc0V4cG9ydFF1ZXJ5LFxuICBmaWx0ZXJPcHRpb25zOiBmaWx0ZXJPcHRpb25zUXVlcnksXG59KTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVUUlBDUm91dGVyIiwiZ2VuZXJhdGlvbnNFeHBvcnRRdWVyeSIsImZpbHRlck9wdGlvbnNRdWVyeSIsImdldEFsbFF1ZXJ5IiwiZ2VuZXJhdGlvbnNSb3V0ZXIiLCJhbGwiLCJleHBvcnQiLCJmaWx0ZXJPcHRpb25zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/generations/index.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/generations/utils/GenerationTableOptions.ts":
/*!****************************************************************************!*\
  !*** ./src/server/api/routers/generations/utils/GenerationTableOptions.ts ***!
  \****************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GenerationTableOptions: () => (/* binding */ GenerationTableOptions)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/server/api/interfaces/filters */ \"(api)/./src/server/api/interfaces/filters.ts\");\n/* harmony import */ var _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/server/api/interfaces/orderBy */ \"(api)/./src/server/api/interfaces/orderBy.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_1__, _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_2__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_1__, _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\nconst GenerationTableOptions = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    filter: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(_src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_1__.singleFilter),\n    searchQuery: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable(),\n    orderBy: _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_2__.orderBy\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL3V0aWxzL0dlbmVyYXRpb25UYWJsZU9wdGlvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF3QjtBQUMyQztBQUNMO0FBRXZELE1BQU1HLHlCQUF5Qkgsa0NBQUNBLENBQUNJLE1BQU0sQ0FBQztJQUM3Q0MsV0FBV0wsa0NBQUNBLENBQUNNLE1BQU07SUFDbkJDLFFBQVFQLGtDQUFDQSxDQUFDUSxLQUFLLENBQUNQLDRFQUFZQTtJQUM1QlEsYUFBYVQsa0NBQUNBLENBQUNNLE1BQU0sR0FBR0ksUUFBUTtJQUNoQ1IsU0FBU0EsdUVBQU9BO0FBQ2xCLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL2dlbmVyYXRpb25zL3V0aWxzL0dlbmVyYXRpb25UYWJsZU9wdGlvbnMudHM/YTE2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgc2luZ2xlRmlsdGVyIH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvaW50ZXJmYWNlcy9maWx0ZXJzXCI7XG5pbXBvcnQgeyBvcmRlckJ5IH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvaW50ZXJmYWNlcy9vcmRlckJ5XCI7XG5cbmV4cG9ydCBjb25zdCBHZW5lcmF0aW9uVGFibGVPcHRpb25zID0gei5vYmplY3Qoe1xuICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksIC8vIFJlcXVpcmVkIGZvciBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gIGZpbHRlcjogei5hcnJheShzaW5nbGVGaWx0ZXIpLFxuICBzZWFyY2hRdWVyeTogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICBvcmRlckJ5OiBvcmRlckJ5LFxufSk7XG4iXSwibmFtZXMiOlsieiIsInNpbmdsZUZpbHRlciIsIm9yZGVyQnkiLCJHZW5lcmF0aW9uVGFibGVPcHRpb25zIiwib2JqZWN0IiwicHJvamVjdElkIiwic3RyaW5nIiwiZmlsdGVyIiwiYXJyYXkiLCJzZWFyY2hRdWVyeSIsIm51bGxhYmxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/generations/utils/GenerationTableOptions.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/models.ts":
/*!******************************************!*\
  !*** ./src/server/api/routers/models.ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   modelRouter: () => (/* binding */ modelRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _src_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/constants */ \"(api)/./src/constants/index.ts\");\n/* harmony import */ var _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/features/rbac/utils/checkAccess */ \"(api)/./src/features/rbac/utils/checkAccess.ts\");\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _src_utils_zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/utils/zod */ \"(api)/./src/utils/zod.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/src/features/audit-logs/auditLog */ \"(api)/./src/features/audit-logs/auditLog.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_4__, _trpc_server__WEBPACK_IMPORTED_MODULE_6__, _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_7__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_4__, _trpc_server__WEBPACK_IMPORTED_MODULE_6__, _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_7__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\nconst ModelAllOptions = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    ..._src_utils_zod__WEBPACK_IMPORTED_MODULE_4__.paginationZod\n});\nconst modelRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.createTRPCRouter)({\n    all: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedProjectProcedure.input(ModelAllOptions).query(async ({ input, ctx })=>{\n        const models = await ctx.prisma.model.findMany({\n            where: {\n                OR: [\n                    {\n                        projectId: input.projectId\n                    },\n                    {\n                        projectId: null\n                    }\n                ]\n            },\n            skip: input.page * input.limit,\n            orderBy: [\n                {\n                    modelName: \"asc\"\n                },\n                {\n                    unit: \"asc\"\n                },\n                {\n                    startDate: {\n                        sort: \"desc\",\n                        nulls: \"last\"\n                    }\n                }\n            ],\n            take: input.limit\n        });\n        const totalAmount = await ctx.prisma.model.count({\n            where: {\n                OR: [\n                    {\n                        projectId: input.projectId\n                    },\n                    {\n                        projectId: null\n                    }\n                ]\n            }\n        });\n        return {\n            models,\n            totalCount: totalAmount\n        };\n    }),\n    modelNames: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        return (await ctx.prisma.model.findMany({\n            select: {\n                modelName: true\n            },\n            distinct: [\n                \"modelName\"\n            ],\n            orderBy: [\n                {\n                    modelName: \"asc\"\n                }\n            ],\n            where: {\n                OR: [\n                    {\n                        projectId: input.projectId\n                    },\n                    {\n                        projectId: null\n                    }\n                ]\n            }\n        })).map((model)=>model.modelName);\n    }),\n    delete: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        modelId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"models:CUD\"\n        });\n        const deletedModel = await ctx.prisma.model.delete({\n            where: {\n                id: input.modelId,\n                projectId: input.projectId\n            }\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_7__.auditLog)({\n            session: ctx.session,\n            resourceType: \"model\",\n            resourceId: input.modelId,\n            projectId: input.projectId,\n            action: \"delete\",\n            before: deletedModel\n        });\n        return deletedModel;\n    }),\n    create: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        modelName: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        matchPattern: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        startDate: zod__WEBPACK_IMPORTED_MODULE_0__.z.date().optional(),\n        inputPrice: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().nonnegative().optional(),\n        outputPrice: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().nonnegative().optional(),\n        totalPrice: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().nonnegative().optional(),\n        unit: zod__WEBPACK_IMPORTED_MODULE_0__.z.nativeEnum(_src_constants__WEBPACK_IMPORTED_MODULE_1__.ModelUsageUnit),\n        tokenizerId: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n            \"openai\",\n            \"claude\"\n        ]).optional(),\n        tokenizerConfig: zod__WEBPACK_IMPORTED_MODULE_0__.z.record(zod__WEBPACK_IMPORTED_MODULE_0__.z.union([\n            zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n            zod__WEBPACK_IMPORTED_MODULE_0__.z.number()\n        ])).optional()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"models:CUD\"\n        });\n        // Check if regex is valid POSIX regex\n        // Use DB to check, because JS regex is not POSIX compliant\n        try {\n            await ctx.prisma.$queryRaw(_prisma_client__WEBPACK_IMPORTED_MODULE_5__.Prisma.sql`SELECT 'test_string' ~ ${input.matchPattern}`);\n        } catch (error) {\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_6__.TRPCError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid regex, needs to be Postgres syntax\"\n            });\n        }\n        const createdModel = await ctx.prisma.model.create({\n            data: {\n                projectId: input.projectId,\n                modelName: input.modelName,\n                matchPattern: input.matchPattern,\n                startDate: input.startDate,\n                inputPrice: input.inputPrice,\n                outputPrice: input.outputPrice,\n                totalPrice: input.totalPrice,\n                unit: input.unit,\n                tokenizerId: input.tokenizerId,\n                tokenizerConfig: input.tokenizerConfig\n            }\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_7__.auditLog)({\n            session: ctx.session,\n            resourceType: \"model\",\n            resourceId: createdModel.id,\n            projectId: input.projectId,\n            action: \"create\",\n            after: createdModel\n        });\n        return createdModel;\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMzRCxJQUFJO1lBQ0YsTUFBTTVCLElBQUlFLE1BQU0sQ0FBQ2dELFNBQVMsQ0FDeEI3RCxrREFBTUEsQ0FBQzhELEdBQUcsQ0FBQyx1QkFBdUIsRUFBRXJELE1BQU1zQyxZQUFZLENBQUMsQ0FBQztRQUU1RCxFQUFFLE9BQU9nQixPQUFPO1lBQ2QsTUFBTSxJQUFJOUQsbURBQVNBLENBQUM7Z0JBQ2xCK0QsTUFBTTtnQkFDTkMsU0FBUztZQUNYO1FBQ0Y7UUFFQSxNQUFNQyxlQUFlLE1BQU12RCxJQUFJRSxNQUFNLENBQUNDLEtBQUssQ0FBQ2dDLE1BQU0sQ0FBQztZQUNqRHFCLE1BQU07Z0JBQ0o5RCxXQUFXSSxNQUFNSixTQUFTO2dCQUMxQmlCLFdBQVdiLE1BQU1hLFNBQVM7Z0JBQzFCeUIsY0FBY3RDLE1BQU1zQyxZQUFZO2dCQUNoQ3ZCLFdBQVdmLE1BQU1lLFNBQVM7Z0JBQzFCMEIsWUFBWXpDLE1BQU15QyxVQUFVO2dCQUM1QkcsYUFBYTVDLE1BQU00QyxXQUFXO2dCQUM5QkMsWUFBWTdDLE1BQU02QyxVQUFVO2dCQUM1Qi9CLE1BQU1kLE1BQU1jLElBQUk7Z0JBQ2hCaUMsYUFBYS9DLE1BQU0rQyxXQUFXO2dCQUM5QkUsaUJBQWlCakQsTUFBTWlELGVBQWU7WUFDeEM7UUFDRjtRQUVBLE1BQU14RCwyRUFBUUEsQ0FBQztZQUNib0MsU0FBUzNCLElBQUkyQixPQUFPO1lBQ3BCSSxjQUFjO1lBQ2RDLFlBQVl1QixhQUFhekIsRUFBRTtZQUMzQnBDLFdBQVdJLE1BQU1KLFNBQVM7WUFDMUJ1QyxRQUFRO1lBQ1J3QixPQUFPRjtRQUNUO1FBRUEsT0FBT0E7SUFDVDtBQUNKLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL21vZGVscy50cz9lMTAyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmltcG9ydCB7IE1vZGVsVXNhZ2VVbml0IH0gZnJvbSBcIkAvc3JjL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgdGhyb3dJZk5vQWNjZXNzIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL3JiYWMvdXRpbHMvY2hlY2tBY2Nlc3NcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZVRSUENSb3V0ZXIsXG4gIHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUsXG59IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3RycGNcIjtcbmltcG9ydCB7IHBhZ2luYXRpb25ab2QgfSBmcm9tIFwiQC9zcmMvdXRpbHMvem9kXCI7XG5pbXBvcnQgeyBQcmlzbWEgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcbmltcG9ydCB7IFRSUENFcnJvciB9IGZyb20gXCJAdHJwYy9zZXJ2ZXJcIjtcbmltcG9ydCB7IGF1ZGl0TG9nIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL2F1ZGl0LWxvZ3MvYXVkaXRMb2dcIjtcblxuY29uc3QgTW9kZWxBbGxPcHRpb25zID0gei5vYmplY3Qoe1xuICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gIC4uLnBhZ2luYXRpb25ab2QsXG59KTtcblxuZXhwb3J0IGNvbnN0IG1vZGVsUm91dGVyID0gY3JlYXRlVFJQQ1JvdXRlcih7XG4gIGFsbDogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChNb2RlbEFsbE9wdGlvbnMpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgY29uc3QgbW9kZWxzID0gYXdhaXQgY3R4LnByaXNtYS5tb2RlbC5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgT1I6IFt7IHByb2plY3RJZDogaW5wdXQucHJvamVjdElkIH0sIHsgcHJvamVjdElkOiBudWxsIH1dLFxuICAgICAgICB9LFxuICAgICAgICBza2lwOiBpbnB1dC5wYWdlICogaW5wdXQubGltaXQsXG4gICAgICAgIG9yZGVyQnk6IFtcbiAgICAgICAgICB7IG1vZGVsTmFtZTogXCJhc2NcIiB9LFxuICAgICAgICAgIHsgdW5pdDogXCJhc2NcIiB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHN0YXJ0RGF0ZToge1xuICAgICAgICAgICAgICBzb3J0OiBcImRlc2NcIixcbiAgICAgICAgICAgICAgbnVsbHM6IFwibGFzdFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICB0YWtlOiBpbnB1dC5saW1pdCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB0b3RhbEFtb3VudCA9IGF3YWl0IGN0eC5wcmlzbWEubW9kZWwuY291bnQoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIE9SOiBbeyBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCB9LCB7IHByb2plY3RJZDogbnVsbCB9XSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbW9kZWxzLFxuICAgICAgICB0b3RhbENvdW50OiB0b3RhbEFtb3VudCxcbiAgICAgIH07XG4gICAgfSksXG4gIG1vZGVsTmFtZXM6IHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmVcbiAgICAuaW5wdXQoei5vYmplY3QoeyBwcm9qZWN0SWQ6IHouc3RyaW5nKCkgfSkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgYXdhaXQgY3R4LnByaXNtYS5tb2RlbC5maW5kTWFueSh7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBtb2RlbE5hbWU6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkaXN0aW5jdDogW1wibW9kZWxOYW1lXCJdLFxuICAgICAgICAgIG9yZGVyQnk6IFt7IG1vZGVsTmFtZTogXCJhc2NcIiB9XSxcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgT1I6IFt7IHByb2plY3RJZDogaW5wdXQucHJvamVjdElkIH0sIHsgcHJvamVjdElkOiBudWxsIH1dLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICApLm1hcCgobW9kZWwpID0+IG1vZGVsLm1vZGVsTmFtZSk7XG4gICAgfSksXG4gIGRlbGV0ZTogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgICBtb2RlbElkOiB6LnN0cmluZygpLFxuICAgICAgfSksXG4gICAgKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIHRocm93SWZOb0FjY2Vzcyh7XG4gICAgICAgIHNlc3Npb246IGN0eC5zZXNzaW9uLFxuICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgc2NvcGU6IFwibW9kZWxzOkNVRFwiLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGRlbGV0ZWRNb2RlbCA9IGF3YWl0IGN0eC5wcmlzbWEubW9kZWwuZGVsZXRlKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBpZDogaW5wdXQubW9kZWxJZCxcbiAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBhdWRpdExvZyh7XG4gICAgICAgIHNlc3Npb246IGN0eC5zZXNzaW9uLFxuICAgICAgICByZXNvdXJjZVR5cGU6IFwibW9kZWxcIixcbiAgICAgICAgcmVzb3VyY2VJZDogaW5wdXQubW9kZWxJZCxcbiAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIGFjdGlvbjogXCJkZWxldGVcIixcbiAgICAgICAgYmVmb3JlOiBkZWxldGVkTW9kZWwsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGRlbGV0ZWRNb2RlbDtcbiAgICB9KSxcbiAgY3JlYXRlOiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICAgIG1vZGVsTmFtZTogei5zdHJpbmcoKSxcbiAgICAgICAgbWF0Y2hQYXR0ZXJuOiB6LnN0cmluZygpLFxuICAgICAgICBzdGFydERhdGU6IHouZGF0ZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIGlucHV0UHJpY2U6IHoubnVtYmVyKCkubm9ubmVnYXRpdmUoKS5vcHRpb25hbCgpLFxuICAgICAgICBvdXRwdXRQcmljZTogei5udW1iZXIoKS5ub25uZWdhdGl2ZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHRvdGFsUHJpY2U6IHoubnVtYmVyKCkubm9ubmVnYXRpdmUoKS5vcHRpb25hbCgpLFxuICAgICAgICB1bml0OiB6Lm5hdGl2ZUVudW0oTW9kZWxVc2FnZVVuaXQpLFxuICAgICAgICB0b2tlbml6ZXJJZDogei5lbnVtKFtcIm9wZW5haVwiLCBcImNsYXVkZVwiXSkub3B0aW9uYWwoKSxcbiAgICAgICAgdG9rZW5pemVyQ29uZmlnOiB6LnJlY29yZCh6LnVuaW9uKFt6LnN0cmluZygpLCB6Lm51bWJlcigpXSkpLm9wdGlvbmFsKCksXG4gICAgICB9KSxcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgdGhyb3dJZk5vQWNjZXNzKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICBzY29wZTogXCJtb2RlbHM6Q1VEXCIsXG4gICAgICB9KTtcblxuICAgICAgLy8gQ2hlY2sgaWYgcmVnZXggaXMgdmFsaWQgUE9TSVggcmVnZXhcbiAgICAgIC8vIFVzZSBEQiB0byBjaGVjaywgYmVjYXVzZSBKUyByZWdleCBpcyBub3QgUE9TSVggY29tcGxpYW50XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBjdHgucHJpc21hLiRxdWVyeVJhdyhcbiAgICAgICAgICBQcmlzbWEuc3FsYFNFTEVDVCAndGVzdF9zdHJpbmcnIH4gJHtpbnB1dC5tYXRjaFBhdHRlcm59YCxcbiAgICAgICAgKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgcmVnZXgsIG5lZWRzIHRvIGJlIFBvc3RncmVzIHN5bnRheFwiLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY3JlYXRlZE1vZGVsID0gYXdhaXQgY3R4LnByaXNtYS5tb2RlbC5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgbW9kZWxOYW1lOiBpbnB1dC5tb2RlbE5hbWUsXG4gICAgICAgICAgbWF0Y2hQYXR0ZXJuOiBpbnB1dC5tYXRjaFBhdHRlcm4sXG4gICAgICAgICAgc3RhcnREYXRlOiBpbnB1dC5zdGFydERhdGUsXG4gICAgICAgICAgaW5wdXRQcmljZTogaW5wdXQuaW5wdXRQcmljZSxcbiAgICAgICAgICBvdXRwdXRQcmljZTogaW5wdXQub3V0cHV0UHJpY2UsXG4gICAgICAgICAgdG90YWxQcmljZTogaW5wdXQudG90YWxQcmljZSxcbiAgICAgICAgICB1bml0OiBpbnB1dC51bml0LFxuICAgICAgICAgIHRva2VuaXplcklkOiBpbnB1dC50b2tlbml6ZXJJZCxcbiAgICAgICAgICB0b2tlbml6ZXJDb25maWc6IGlucHV0LnRva2VuaXplckNvbmZpZyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBhdWRpdExvZyh7XG4gICAgICAgIHNlc3Npb246IGN0eC5zZXNzaW9uLFxuICAgICAgICByZXNvdXJjZVR5cGU6IFwibW9kZWxcIixcbiAgICAgICAgcmVzb3VyY2VJZDogY3JlYXRlZE1vZGVsLmlkLFxuICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgYWN0aW9uOiBcImNyZWF0ZVwiLFxuICAgICAgICBhZnRlcjogY3JlYXRlZE1vZGVsLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBjcmVhdGVkTW9kZWw7XG4gICAgfSksXG59KTtcbiJdLCJuYW1lcyI6WyJ6IiwiTW9kZWxVc2FnZVVuaXQiLCJ0aHJvd0lmTm9BY2Nlc3MiLCJjcmVhdGVUUlBDUm91dGVyIiwicHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZSIsInBhZ2luYXRpb25ab2QiLCJQcmlzbWEiLCJUUlBDRXJyb3IiLCJhdWRpdExvZyIsIk1vZGVsQWxsT3B0aW9ucyIsIm9iamVjdCIsInByb2plY3RJZCIsInN0cmluZyIsIm1vZGVsUm91dGVyIiwiYWxsIiwiaW5wdXQiLCJxdWVyeSIsImN0eCIsIm1vZGVscyIsInByaXNtYSIsIm1vZGVsIiwiZmluZE1hbnkiLCJ3aGVyZSIsIk9SIiwic2tpcCIsInBhZ2UiLCJsaW1pdCIsIm9yZGVyQnkiLCJtb2RlbE5hbWUiLCJ1bml0Iiwic3RhcnREYXRlIiwic29ydCIsIm51bGxzIiwidGFrZSIsInRvdGFsQW1vdW50IiwiY291bnQiLCJ0b3RhbENvdW50IiwibW9kZWxOYW1lcyIsInNlbGVjdCIsImRpc3RpbmN0IiwibWFwIiwiZGVsZXRlIiwibW9kZWxJZCIsIm11dGF0aW9uIiwic2Vzc2lvbiIsInNjb3BlIiwiZGVsZXRlZE1vZGVsIiwiaWQiLCJyZXNvdXJjZVR5cGUiLCJyZXNvdXJjZUlkIiwiYWN0aW9uIiwiYmVmb3JlIiwiY3JlYXRlIiwibWF0Y2hQYXR0ZXJuIiwiZGF0ZSIsIm9wdGlvbmFsIiwiaW5wdXRQcmljZSIsIm51bWJlciIsIm5vbm5lZ2F0aXZlIiwib3V0cHV0UHJpY2UiLCJ0b3RhbFByaWNlIiwibmF0aXZlRW51bSIsInRva2VuaXplcklkIiwiZW51bSIsInRva2VuaXplckNvbmZpZyIsInJlY29yZCIsInVuaW9uIiwiJHF1ZXJ5UmF3Iiwic3FsIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsImNyZWF0ZWRNb2RlbCIsImRhdGEiLCJhZnRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/models.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/observations.ts":
/*!************************************************!*\
  !*** ./src/server/api/routers/observations.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   observationsRouter: () => (/* binding */ observationsRouter)\n/* harmony export */ });\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_1__]);\n([_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst observationsRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.createTRPCRouter)({\n    byId: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_0__.protectedGetTraceProcedure.input(zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n        observationId: zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n        traceId: zod__WEBPACK_IMPORTED_MODULE_1__.z.string()\n    })).query(async ({ input, ctx })=>{\n        // also works for other observations\n        const generation = await ctx.prisma.observation.findFirstOrThrow({\n            where: {\n                id: input.observationId,\n                traceId: input.traceId\n            }\n        });\n        const scores = generation.traceId ? await ctx.prisma.score.findMany({\n            where: {\n                traceId: generation.traceId\n            }\n        }) : [];\n        return {\n            ...generation,\n            scores\n        };\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL29ic2VydmF0aW9ucy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFHK0I7QUFDUDtBQUVqQixNQUFNRyxxQkFBcUJILHNFQUFnQkEsQ0FBQztJQUNqREksTUFBTUgsNEVBQTBCQSxDQUM3QkksS0FBSyxDQUNKSCxrQ0FBQ0EsQ0FBQ0ksTUFBTSxDQUFDO1FBQ1BDLGVBQWVMLGtDQUFDQSxDQUFDTSxNQUFNO1FBQ3ZCQyxTQUFTUCxrQ0FBQ0EsQ0FBQ00sTUFBTTtJQUNuQixJQUVERSxLQUFLLENBQUMsT0FBTyxFQUFFTCxLQUFLLEVBQUVNLEdBQUcsRUFBRTtRQUMxQixvQ0FBb0M7UUFDcEMsTUFBTUMsYUFBYSxNQUFNRCxJQUFJRSxNQUFNLENBQUNDLFdBQVcsQ0FBQ0MsZ0JBQWdCLENBQUM7WUFDL0RDLE9BQU87Z0JBQ0xDLElBQUlaLE1BQU1FLGFBQWE7Z0JBQ3ZCRSxTQUFTSixNQUFNSSxPQUFPO1lBQ3hCO1FBQ0Y7UUFDQSxNQUFNUyxTQUFTTixXQUFXSCxPQUFPLEdBQzdCLE1BQU1FLElBQUlFLE1BQU0sQ0FBQ00sS0FBSyxDQUFDQyxRQUFRLENBQUM7WUFDOUJKLE9BQU87Z0JBQ0xQLFNBQVNHLFdBQVdILE9BQU87WUFDN0I7UUFDRixLQUNBLEVBQUU7UUFFTixPQUFPO1lBQUUsR0FBR0csVUFBVTtZQUFFTTtRQUFPO0lBQ2pDO0FBQ0osR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvb2JzZXJ2YXRpb25zLnRzPzM0N2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgY3JlYXRlVFJQQ1JvdXRlcixcbiAgcHJvdGVjdGVkR2V0VHJhY2VQcm9jZWR1cmUsXG59IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3RycGNcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmV4cG9ydCBjb25zdCBvYnNlcnZhdGlvbnNSb3V0ZXIgPSBjcmVhdGVUUlBDUm91dGVyKHtcbiAgYnlJZDogcHJvdGVjdGVkR2V0VHJhY2VQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIG9ic2VydmF0aW9uSWQ6IHouc3RyaW5nKCksXG4gICAgICAgIHRyYWNlSWQ6IHouc3RyaW5nKCksIC8vIHJlcXVpcmVkIGZvciBwcm90ZWN0ZWRHZXRUcmFjZVByb2NlZHVyZVxuICAgICAgfSksXG4gICAgKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIC8vIGFsc28gd29ya3MgZm9yIG90aGVyIG9ic2VydmF0aW9uc1xuICAgICAgY29uc3QgZ2VuZXJhdGlvbiA9IGF3YWl0IGN0eC5wcmlzbWEub2JzZXJ2YXRpb24uZmluZEZpcnN0T3JUaHJvdyh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWQ6IGlucHV0Lm9ic2VydmF0aW9uSWQsXG4gICAgICAgICAgdHJhY2VJZDogaW5wdXQudHJhY2VJZCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgY29uc3Qgc2NvcmVzID0gZ2VuZXJhdGlvbi50cmFjZUlkXG4gICAgICAgID8gYXdhaXQgY3R4LnByaXNtYS5zY29yZS5maW5kTWFueSh7XG4gICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICB0cmFjZUlkOiBnZW5lcmF0aW9uLnRyYWNlSWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pXG4gICAgICAgIDogW107XG5cbiAgICAgIHJldHVybiB7IC4uLmdlbmVyYXRpb24sIHNjb3JlcyB9O1xuICAgIH0pLFxufSk7XG4iXSwibmFtZXMiOlsiY3JlYXRlVFJQQ1JvdXRlciIsInByb3RlY3RlZEdldFRyYWNlUHJvY2VkdXJlIiwieiIsIm9ic2VydmF0aW9uc1JvdXRlciIsImJ5SWQiLCJpbnB1dCIsIm9iamVjdCIsIm9ic2VydmF0aW9uSWQiLCJzdHJpbmciLCJ0cmFjZUlkIiwicXVlcnkiLCJjdHgiLCJnZW5lcmF0aW9uIiwicHJpc21hIiwib2JzZXJ2YXRpb24iLCJmaW5kRmlyc3RPclRocm93Iiwid2hlcmUiLCJpZCIsInNjb3JlcyIsInNjb3JlIiwiZmluZE1hbnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/observations.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/scores.ts":
/*!******************************************!*\
  !*** ./src/server/api/routers/scores.ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   scoresRouter: () => (/* binding */ scoresRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/features/rbac/utils/checkAccess */ \"(api)/./src/features/rbac/utils/checkAccess.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _src_utils_zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/utils/zod */ \"(api)/./src/utils/zod.ts\");\n/* harmony import */ var _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/src/server/api/interfaces/filters */ \"(api)/./src/server/api/interfaces/filters.ts\");\n/* harmony import */ var _src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/src/features/filters/server/filterToPrisma */ \"(api)/./src/features/filters/server/filterToPrisma.ts\");\n/* harmony import */ var _src_server_api_definitions_scoresTable__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/src/server/api/definitions/scoresTable */ \"(api)/./src/server/api/definitions/scoresTable.ts\");\n/* harmony import */ var _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/src/server/api/interfaces/orderBy */ \"(api)/./src/server/api/interfaces/orderBy.ts\");\n/* harmony import */ var _src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/src/features/orderBy/server/orderByToPrisma */ \"(api)/./src/features/orderBy/server/orderByToPrisma.ts\");\n/* harmony import */ var _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/src/features/audit-logs/auditLog */ \"(api)/./src/features/audit-logs/auditLog.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_4__, _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_5__, _src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_6__, _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_8__, _src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_9__, _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_10__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_4__, _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_5__, _src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_6__, _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_8__, _src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_9__, _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_10__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\nconst ScoreFilterOptions = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    filter: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(_src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_5__.singleFilter),\n    orderBy: _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_8__.orderBy\n});\nconst ScoreAllOptions = ScoreFilterOptions.extend({\n    ..._src_utils_zod__WEBPACK_IMPORTED_MODULE_4__.paginationZod\n});\nconst scoresRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.createTRPCRouter)({\n    all: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(ScoreAllOptions).query(async ({ input, ctx })=>{\n        const filterCondition = (0,_src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_6__.tableColumnsToSqlFilterAndPrefix)(input.filter, _src_server_api_definitions_scoresTable__WEBPACK_IMPORTED_MODULE_7__.scoresTableCols, \"traces_scores\");\n        const orderByCondition = (0,_src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_9__.orderByToPrismaSql)(input.orderBy, _src_server_api_definitions_scoresTable__WEBPACK_IMPORTED_MODULE_7__.scoresTableCols);\n        const scores = await ctx.prisma.$queryRaw(generateScoresQuery(_prisma_client__WEBPACK_IMPORTED_MODULE_3__.Prisma.sql` \n          s.id,\n          s.name,\n          s.value,\n          s.timestamp,\n          s.comment,\n          s.trace_id as \"traceId\",\n          s.observation_id as \"observationId\",\n          t.name as \"traceName\"`, input.projectId, filterCondition, orderByCondition, input.limit, input.page));\n        const scoresCount = await ctx.prisma.$queryRaw(generateScoresQuery(_prisma_client__WEBPACK_IMPORTED_MODULE_3__.Prisma.sql` count(*) AS \"totalCount\"`, input.projectId, filterCondition, _prisma_client__WEBPACK_IMPORTED_MODULE_3__.Prisma.empty, 1, 0));\n        return {\n            scores,\n            totalCount: scoresCount.length > 0 ? Number(scoresCount[0]?.totalCount) : 0\n        };\n    }),\n    filterOptions: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        const names = await ctx.prisma.score.groupBy({\n            where: {\n                trace: {\n                    projectId: input.projectId\n                }\n            },\n            by: [\n                \"name\"\n            ],\n            _count: {\n                _all: true\n            }\n        });\n        const res = {\n            name: names.map((i)=>({\n                    value: i.name,\n                    count: i._count._all\n                }))\n        };\n        return res;\n    }),\n    byId: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).query(({ input, ctx })=>ctx.prisma.score.findFirstOrThrow({\n            where: {\n                id: input,\n                ...ctx.session.user.admin === true ? undefined : {\n                    trace: {\n                        project: {\n                            members: {\n                                some: {\n                                    userId: ctx.session.user.id\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        })),\n    create: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        traceId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        value: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        name: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        comment: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        observationId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    })).mutation(async ({ input, ctx })=>{\n        const trace = await ctx.prisma.trace.findFirstOrThrow({\n            where: {\n                id: input.traceId,\n                project: {\n                    members: {\n                        some: {\n                            userId: ctx.session.user.id\n                        }\n                    }\n                }\n            }\n        });\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: trace.projectId,\n            scope: \"scores:CUD\"\n        });\n        const score = await ctx.prisma.score.create({\n            data: {\n                trace: {\n                    connect: {\n                        id: trace.id\n                    }\n                },\n                ...input.observationId ? {\n                    observation: {\n                        connect: {\n                            id: input.observationId\n                        }\n                    }\n                } : undefined,\n                value: input.value,\n                name: input.name,\n                comment: input.comment\n            }\n        });\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_10__.auditLog)({\n            projectId: trace.projectId,\n            userId: ctx.session.user.id,\n            userProjectRole: ctx.session.user.projects.find((p)=>p.id === trace.projectId)?.role,\n            resourceType: \"score\",\n            resourceId: score.id,\n            action: \"create\",\n            after: score\n        });\n        return score;\n    }),\n    update: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        id: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        value: zod__WEBPACK_IMPORTED_MODULE_0__.z.number(),\n        comment: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional()\n    })).mutation(async ({ input, ctx })=>{\n        const score = await ctx.prisma.score.findFirstOrThrow({\n            where: {\n                id: input.id,\n                trace: {\n                    project: {\n                        members: {\n                            some: {\n                                userId: ctx.session.user.id\n                            }\n                        }\n                    }\n                }\n            },\n            include: {\n                trace: {\n                    select: {\n                        projectId: true\n                    }\n                }\n            }\n        });\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: score.trace.projectId,\n            scope: \"scores:CUD\"\n        });\n        // exclude trace object from audit log\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { trace, ...pureScore } = score;\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_10__.auditLog)({\n            projectId: trace.projectId,\n            userId: ctx.session.user.id,\n            userProjectRole: ctx.session.user.projects.find((p)=>p.id === trace.projectId)?.role,\n            resourceType: \"score\",\n            resourceId: score.id,\n            action: \"update\",\n            after: pureScore\n        });\n        return ctx.prisma.score.update({\n            where: {\n                id: score.id\n            },\n            data: {\n                value: input.value,\n                comment: input.comment\n            }\n        });\n    }),\n    delete: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).mutation(async ({ input, ctx })=>{\n        const score = await ctx.prisma.score.findFirstOrThrow({\n            where: {\n                id: input,\n                trace: {\n                    project: {\n                        members: {\n                            some: {\n                                userId: ctx.session.user.id\n                            }\n                        }\n                    }\n                }\n            },\n            include: {\n                trace: {\n                    select: {\n                        projectId: true\n                    }\n                }\n            }\n        });\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_2__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: score.trace.projectId,\n            scope: \"scores:CUD\"\n        });\n        const { trace, ...pureScore } = score;\n        await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_10__.auditLog)({\n            projectId: trace.projectId,\n            userId: ctx.session.user.id,\n            userProjectRole: ctx.session.user.projects.find((p)=>p.id === trace.projectId)?.role,\n            resourceType: \"score\",\n            resourceId: score.id,\n            action: \"delete\",\n            before: pureScore\n        });\n        return ctx.prisma.score.delete({\n            where: {\n                id: score.id\n            }\n        });\n    })\n});\nconst generateScoresQuery = (select, projectId, filterCondition, orderCondition, limit, page)=>{\n    return _prisma_client__WEBPACK_IMPORTED_MODULE_3__.Prisma.sql`\n  SELECT\n   ${select}\n  FROM scores s\n  JOIN traces t ON t.id = s.trace_id\n  WHERE t.project_id = ${projectId}\n  ${filterCondition}\n  ${orderCondition}\n  LIMIT ${limit}\n  OFFSET ${page * limit}\n`;\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL3Njb3Jlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBTU87QUFDeUM7QUFDQztBQUN6QjtBQUNtQjtBQUM2QjtBQUk5QztBQUNZO0FBQ3FCO0FBQ3JCO0FBRTlELE1BQU1hLHFCQUFxQmIsa0NBQUNBLENBQUNjLE1BQU0sQ0FBQztJQUNsQ0MsV0FBV2Ysa0NBQUNBLENBQUNnQixNQUFNO0lBQ25CQyxRQUFRakIsa0NBQUNBLENBQUNrQixLQUFLLENBQUNYLDRFQUFZQTtJQUM1QkcsU0FBU0EsdUVBQU9BO0FBQ2xCO0FBRUEsTUFBTVMsa0JBQWtCTixtQkFBbUJPLE1BQU0sQ0FBQztJQUNoRCxHQUFHZCx5REFBYTtBQUNsQjtBQUVPLE1BQU1lLGVBQWVwQixzRUFBZ0JBLENBQUM7SUFDM0NxQixLQUFLbkIsMkVBQXlCQSxDQUMzQm9CLEtBQUssQ0FBQ0osaUJBQ05LLEtBQUssQ0FBQyxPQUFPLEVBQUVELEtBQUssRUFBRUUsR0FBRyxFQUFFO1FBQzFCLE1BQU1DLGtCQUFrQmxCLDZHQUFnQ0EsQ0FDdERlLE1BQU1OLE1BQU0sRUFDWlIsb0ZBQWVBLEVBQ2Y7UUFHRixNQUFNa0IsbUJBQW1CaEIsZ0dBQWtCQSxDQUN6Q1ksTUFBTWIsT0FBTyxFQUNiRCxvRkFBZUE7UUFHakIsTUFBTW1CLFNBQVMsTUFBTUgsSUFBSUksTUFBTSxDQUFDQyxTQUFTLENBR3ZDQyxvQkFDRTFCLGtEQUFNQSxDQUFDMkIsR0FBRyxDQUFDOzs7Ozs7OzsrQkFRVSxDQUFDLEVBQ3RCVCxNQUFNUixTQUFTLEVBQ2ZXLGlCQUNBQyxrQkFDQUosTUFBTVUsS0FBSyxFQUNYVixNQUFNVyxJQUFJO1FBSWQsTUFBTUMsY0FBYyxNQUFNVixJQUFJSSxNQUFNLENBQUNDLFNBQVMsQ0FHNUNDLG9CQUNFMUIsa0RBQU1BLENBQUMyQixHQUFHLENBQUMseUJBQXlCLENBQUMsRUFDckNULE1BQU1SLFNBQVMsRUFDZlcsaUJBQ0FyQixrREFBTUEsQ0FBQytCLEtBQUssRUFDWixHQUNBO1FBSUosT0FBTztZQUNMUjtZQUNBUyxZQUNFRixZQUFZRyxNQUFNLEdBQUcsSUFBSUMsT0FBT0osV0FBVyxDQUFDLEVBQUUsRUFBRUUsY0FBYztRQUNsRTtJQUNGO0lBQ0ZHLGVBQWVyQywyRUFBeUJBLENBQ3JDb0IsS0FBSyxDQUNKdkIsa0NBQUNBLENBQUNjLE1BQU0sQ0FBQztRQUNQQyxXQUFXZixrQ0FBQ0EsQ0FBQ2dCLE1BQU07SUFDckIsSUFFRFEsS0FBSyxDQUFDLE9BQU8sRUFBRUQsS0FBSyxFQUFFRSxHQUFHLEVBQUU7UUFDMUIsTUFBTWdCLFFBQVEsTUFBTWhCLElBQUlJLE1BQU0sQ0FBQ2EsS0FBSyxDQUFDQyxPQUFPLENBQUM7WUFDM0NDLE9BQU87Z0JBQ0xDLE9BQU87b0JBQ0w5QixXQUFXUSxNQUFNUixTQUFTO2dCQUM1QjtZQUNGO1lBQ0ErQixJQUFJO2dCQUFDO2FBQU87WUFDWkMsUUFBUTtnQkFDTkMsTUFBTTtZQUNSO1FBQ0Y7UUFFQSxNQUFNQyxNQUFvQjtZQUN4QkMsTUFBTVQsTUFBTVUsR0FBRyxDQUFDLENBQUNDLElBQU87b0JBQUVDLE9BQU9ELEVBQUVGLElBQUk7b0JBQUVJLE9BQU9GLEVBQUVMLE1BQU0sQ0FBQ0MsSUFBSTtnQkFBQztRQUNoRTtRQUVBLE9BQU9DO0lBQ1Q7SUFDRk0sTUFBTXJELG9FQUFrQkEsQ0FBQ3FCLEtBQUssQ0FBQ3ZCLGtDQUFDQSxDQUFDZ0IsTUFBTSxJQUFJUSxLQUFLLENBQUMsQ0FBQyxFQUFFRCxLQUFLLEVBQUVFLEdBQUcsRUFBRSxHQUM5REEsSUFBSUksTUFBTSxDQUFDYSxLQUFLLENBQUNjLGdCQUFnQixDQUFDO1lBQ2hDWixPQUFPO2dCQUNMYSxJQUFJbEM7Z0JBQ0osR0FBSUUsSUFBSWlDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLEtBQUssT0FDM0JDLFlBQ0E7b0JBQ0VoQixPQUFPO3dCQUNMaUIsU0FBUzs0QkFDUEMsU0FBUztnQ0FDUEMsTUFBTTtvQ0FDSkMsUUFBUXhDLElBQUlpQyxPQUFPLENBQUNDLElBQUksQ0FBQ0YsRUFBRTtnQ0FDN0I7NEJBQ0Y7d0JBQ0Y7b0JBQ0Y7Z0JBQ0YsQ0FBQztZQUNQO1FBQ0Y7SUFFRlMsUUFBUWhFLG9FQUFrQkEsQ0FDdkJxQixLQUFLLENBQ0p2QixrQ0FBQ0EsQ0FBQ2MsTUFBTSxDQUFDO1FBQ1BxRCxTQUFTbkUsa0NBQUNBLENBQUNnQixNQUFNO1FBQ2pCcUMsT0FBT3JELGtDQUFDQSxDQUFDb0UsTUFBTTtRQUNmbEIsTUFBTWxELGtDQUFDQSxDQUFDZ0IsTUFBTTtRQUNkcUQsU0FBU3JFLGtDQUFDQSxDQUFDZ0IsTUFBTSxHQUFHc0QsUUFBUTtRQUM1QkMsZUFBZXZFLGtDQUFDQSxDQUFDZ0IsTUFBTSxHQUFHc0QsUUFBUTtJQUNwQyxJQUVERSxRQUFRLENBQUMsT0FBTyxFQUFFakQsS0FBSyxFQUFFRSxHQUFHLEVBQUU7UUFDN0IsTUFBTW9CLFFBQVEsTUFBTXBCLElBQUlJLE1BQU0sQ0FBQ2dCLEtBQUssQ0FBQ1csZ0JBQWdCLENBQUM7WUFDcERaLE9BQU87Z0JBQ0xhLElBQUlsQyxNQUFNNEMsT0FBTztnQkFDakJMLFNBQVM7b0JBQ1BDLFNBQVM7d0JBQ1BDLE1BQU07NEJBQ0pDLFFBQVF4QyxJQUFJaUMsT0FBTyxDQUFDQyxJQUFJLENBQUNGLEVBQUU7d0JBQzdCO29CQUNGO2dCQUNGO1lBQ0Y7UUFDRjtRQUNBckQscUZBQWVBLENBQUM7WUFDZHNELFNBQVNqQyxJQUFJaUMsT0FBTztZQUNwQjNDLFdBQVc4QixNQUFNOUIsU0FBUztZQUMxQjBELE9BQU87UUFDVDtRQUVBLE1BQU0vQixRQUFRLE1BQU1qQixJQUFJSSxNQUFNLENBQUNhLEtBQUssQ0FBQ3dCLE1BQU0sQ0FBQztZQUMxQ1EsTUFBTTtnQkFDSjdCLE9BQU87b0JBQ0w4QixTQUFTO3dCQUNQbEIsSUFBSVosTUFBTVksRUFBRTtvQkFDZDtnQkFDRjtnQkFDQSxHQUFJbEMsTUFBTWdELGFBQWEsR0FDbkI7b0JBQ0VLLGFBQWE7d0JBQ1hELFNBQVM7NEJBQ1BsQixJQUFJbEMsTUFBTWdELGFBQWE7d0JBQ3pCO29CQUNGO2dCQUNGLElBQ0FWLFNBQVM7Z0JBQ2JSLE9BQU85QixNQUFNOEIsS0FBSztnQkFDbEJILE1BQU0zQixNQUFNMkIsSUFBSTtnQkFDaEJtQixTQUFTOUMsTUFBTThDLE9BQU87WUFDeEI7UUFDRjtRQUNBLE1BQU16RCw0RUFBUUEsQ0FBQztZQUNiRyxXQUFXOEIsTUFBTTlCLFNBQVM7WUFDMUJrRCxRQUFReEMsSUFBSWlDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDRixFQUFFO1lBQzNCb0IsaUJBQWlCcEQsSUFBSWlDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDbUIsUUFBUSxDQUFDQyxJQUFJLENBQzdDLENBQUNDLElBQU1BLEVBQUV2QixFQUFFLEtBQUtaLE1BQU05QixTQUFTLEdBQzlCa0U7WUFDSEMsY0FBYztZQUNkQyxZQUFZekMsTUFBTWUsRUFBRTtZQUNwQjJCLFFBQVE7WUFDUkMsT0FBTzNDO1FBQ1Q7UUFDQSxPQUFPQTtJQUNUO0lBQ0Y0QyxRQUFRcEYsb0VBQWtCQSxDQUN2QnFCLEtBQUssQ0FDSnZCLGtDQUFDQSxDQUFDYyxNQUFNLENBQUM7UUFDUDJDLElBQUl6RCxrQ0FBQ0EsQ0FBQ2dCLE1BQU07UUFDWnFDLE9BQU9yRCxrQ0FBQ0EsQ0FBQ29FLE1BQU07UUFDZkMsU0FBU3JFLGtDQUFDQSxDQUFDZ0IsTUFBTSxHQUFHc0QsUUFBUTtJQUM5QixJQUVERSxRQUFRLENBQUMsT0FBTyxFQUFFakQsS0FBSyxFQUFFRSxHQUFHLEVBQUU7UUFDN0IsTUFBTWlCLFFBQVEsTUFBTWpCLElBQUlJLE1BQU0sQ0FBQ2EsS0FBSyxDQUFDYyxnQkFBZ0IsQ0FBQztZQUNwRFosT0FBTztnQkFDTGEsSUFBSWxDLE1BQU1rQyxFQUFFO2dCQUNaWixPQUFPO29CQUNMaUIsU0FBUzt3QkFDUEMsU0FBUzs0QkFDUEMsTUFBTTtnQ0FDSkMsUUFBUXhDLElBQUlpQyxPQUFPLENBQUNDLElBQUksQ0FBQ0YsRUFBRTs0QkFDN0I7d0JBQ0Y7b0JBQ0Y7Z0JBQ0Y7WUFDRjtZQUNBOEIsU0FBUztnQkFDUDFDLE9BQU87b0JBQ0wyQyxRQUFRO3dCQUNOekUsV0FBVztvQkFDYjtnQkFDRjtZQUNGO1FBQ0Y7UUFDQVgscUZBQWVBLENBQUM7WUFDZHNELFNBQVNqQyxJQUFJaUMsT0FBTztZQUNwQjNDLFdBQVcyQixNQUFNRyxLQUFLLENBQUM5QixTQUFTO1lBQ2hDMEQsT0FBTztRQUNUO1FBRUEsc0NBQXNDO1FBQ3RDLDZEQUE2RDtRQUM3RCxNQUFNLEVBQUU1QixLQUFLLEVBQUUsR0FBRzRDLFdBQVcsR0FBRy9DO1FBQ2hDLE1BQU05Qiw0RUFBUUEsQ0FBQztZQUNiRyxXQUFXOEIsTUFBTTlCLFNBQVM7WUFDMUJrRCxRQUFReEMsSUFBSWlDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDRixFQUFFO1lBQzNCb0IsaUJBQWlCcEQsSUFBSWlDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDbUIsUUFBUSxDQUFDQyxJQUFJLENBQzdDLENBQUNDLElBQU1BLEVBQUV2QixFQUFFLEtBQUtaLE1BQU05QixTQUFTLEdBQzlCa0U7WUFDSEMsY0FBYztZQUNkQyxZQUFZekMsTUFBTWUsRUFBRTtZQUNwQjJCLFFBQVE7WUFDUkMsT0FBT0k7UUFDVDtRQUVBLE9BQU9oRSxJQUFJSSxNQUFNLENBQUNhLEtBQUssQ0FBQzRDLE1BQU0sQ0FBQztZQUM3QjFDLE9BQU87Z0JBQ0xhLElBQUlmLE1BQU1lLEVBQUU7WUFDZDtZQUNBaUIsTUFBTTtnQkFDSnJCLE9BQU85QixNQUFNOEIsS0FBSztnQkFDbEJnQixTQUFTOUMsTUFBTThDLE9BQU87WUFDeEI7UUFDRjtJQUNGO0lBQ0ZxQixRQUFReEYsb0VBQWtCQSxDQUN2QnFCLEtBQUssQ0FBQ3ZCLGtDQUFDQSxDQUFDZ0IsTUFBTSxJQUNkd0QsUUFBUSxDQUFDLE9BQU8sRUFBRWpELEtBQUssRUFBRUUsR0FBRyxFQUFFO1FBQzdCLE1BQU1pQixRQUFRLE1BQU1qQixJQUFJSSxNQUFNLENBQUNhLEtBQUssQ0FBQ2MsZ0JBQWdCLENBQUM7WUFDcERaLE9BQU87Z0JBQ0xhLElBQUlsQztnQkFDSnNCLE9BQU87b0JBQ0xpQixTQUFTO3dCQUNQQyxTQUFTOzRCQUNQQyxNQUFNO2dDQUNKQyxRQUFReEMsSUFBSWlDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDRixFQUFFOzRCQUM3Qjt3QkFDRjtvQkFDRjtnQkFDRjtZQUNGO1lBQ0E4QixTQUFTO2dCQUNQMUMsT0FBTztvQkFDTDJDLFFBQVE7d0JBQ056RSxXQUFXO29CQUNiO2dCQUNGO1lBQ0Y7UUFDRjtRQUNBWCxxRkFBZUEsQ0FBQztZQUNkc0QsU0FBU2pDLElBQUlpQyxPQUFPO1lBQ3BCM0MsV0FBVzJCLE1BQU1HLEtBQUssQ0FBQzlCLFNBQVM7WUFDaEMwRCxPQUFPO1FBQ1Q7UUFDQSxNQUFNLEVBQUU1QixLQUFLLEVBQUUsR0FBRzRDLFdBQVcsR0FBRy9DO1FBQ2hDLE1BQU05Qiw0RUFBUUEsQ0FBQztZQUNiRyxXQUFXOEIsTUFBTTlCLFNBQVM7WUFDMUJrRCxRQUFReEMsSUFBSWlDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDRixFQUFFO1lBQzNCb0IsaUJBQWlCcEQsSUFBSWlDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDbUIsUUFBUSxDQUFDQyxJQUFJLENBQzdDLENBQUNDLElBQU1BLEVBQUV2QixFQUFFLEtBQUtaLE1BQU05QixTQUFTLEdBQzlCa0U7WUFDSEMsY0FBYztZQUNkQyxZQUFZekMsTUFBTWUsRUFBRTtZQUNwQjJCLFFBQVE7WUFDUk8sUUFBUUY7UUFDVjtRQUVBLE9BQU9oRSxJQUFJSSxNQUFNLENBQUNhLEtBQUssQ0FBQ2dELE1BQU0sQ0FBQztZQUM3QjlDLE9BQU87Z0JBQ0xhLElBQUlmLE1BQU1lLEVBQUU7WUFDZDtRQUNGO0lBQ0Y7QUFDSixHQUFHO0FBRUgsTUFBTTFCLHNCQUFzQixDQUMxQnlELFFBQ0F6RSxXQUNBVyxpQkFDQWtFLGdCQUNBM0QsT0FDQUM7SUFFQSxPQUFPN0Isa0RBQU1BLENBQUMyQixHQUFHLENBQUM7O0dBRWpCLEVBQUV3RCxPQUFPOzs7dUJBR1csRUFBRXpFLFVBQVU7RUFDakMsRUFBRVcsZ0JBQWdCO0VBQ2xCLEVBQUVrRSxlQUFlO1FBQ1gsRUFBRTNELE1BQU07U0FDUCxFQUFFQyxPQUFPRCxNQUFNO0FBQ3hCLENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvc2NvcmVzLnRzP2IwNDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcblxuaW1wb3J0IHtcbiAgY3JlYXRlVFJQQ1JvdXRlcixcbiAgcHJvdGVjdGVkUHJvY2VkdXJlLFxuICBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlLFxufSBmcm9tIFwiQC9zcmMvc2VydmVyL2FwaS90cnBjXCI7XG5pbXBvcnQgeyB0aHJvd0lmTm9BY2Nlc3MgfSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvcmJhYy91dGlscy9jaGVja0FjY2Vzc1wiO1xuaW1wb3J0IHsgdHlwZSBNZW1iZXJzaGlwUm9sZSwgUHJpc21hLCB0eXBlIFNjb3JlIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5pbXBvcnQgeyBwYWdpbmF0aW9uWm9kIH0gZnJvbSBcIkAvc3JjL3V0aWxzL3pvZFwiO1xuaW1wb3J0IHsgc2luZ2xlRmlsdGVyIH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvaW50ZXJmYWNlcy9maWx0ZXJzXCI7XG5pbXBvcnQgeyB0YWJsZUNvbHVtbnNUb1NxbEZpbHRlckFuZFByZWZpeCB9IGZyb20gXCJAL3NyYy9mZWF0dXJlcy9maWx0ZXJzL3NlcnZlci9maWx0ZXJUb1ByaXNtYVwiO1xuaW1wb3J0IHtcbiAgdHlwZSBTY29yZU9wdGlvbnMsXG4gIHNjb3Jlc1RhYmxlQ29scyxcbn0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvZGVmaW5pdGlvbnMvc2NvcmVzVGFibGVcIjtcbmltcG9ydCB7IG9yZGVyQnkgfSBmcm9tIFwiQC9zcmMvc2VydmVyL2FwaS9pbnRlcmZhY2VzL29yZGVyQnlcIjtcbmltcG9ydCB7IG9yZGVyQnlUb1ByaXNtYVNxbCB9IGZyb20gXCJAL3NyYy9mZWF0dXJlcy9vcmRlckJ5L3NlcnZlci9vcmRlckJ5VG9QcmlzbWFcIjtcbmltcG9ydCB7IGF1ZGl0TG9nIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL2F1ZGl0LWxvZ3MvYXVkaXRMb2dcIjtcblxuY29uc3QgU2NvcmVGaWx0ZXJPcHRpb25zID0gei5vYmplY3Qoe1xuICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksIC8vIFJlcXVpcmVkIGZvciBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gIGZpbHRlcjogei5hcnJheShzaW5nbGVGaWx0ZXIpLFxuICBvcmRlckJ5OiBvcmRlckJ5LFxufSk7XG5cbmNvbnN0IFNjb3JlQWxsT3B0aW9ucyA9IFNjb3JlRmlsdGVyT3B0aW9ucy5leHRlbmQoe1xuICAuLi5wYWdpbmF0aW9uWm9kLFxufSk7XG5cbmV4cG9ydCBjb25zdCBzY29yZXNSb3V0ZXIgPSBjcmVhdGVUUlBDUm91dGVyKHtcbiAgYWxsOiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFNjb3JlQWxsT3B0aW9ucylcbiAgICAucXVlcnkoYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICBjb25zdCBmaWx0ZXJDb25kaXRpb24gPSB0YWJsZUNvbHVtbnNUb1NxbEZpbHRlckFuZFByZWZpeChcbiAgICAgICAgaW5wdXQuZmlsdGVyLFxuICAgICAgICBzY29yZXNUYWJsZUNvbHMsXG4gICAgICAgIFwidHJhY2VzX3Njb3Jlc1wiLFxuICAgICAgKTtcblxuICAgICAgY29uc3Qgb3JkZXJCeUNvbmRpdGlvbiA9IG9yZGVyQnlUb1ByaXNtYVNxbChcbiAgICAgICAgaW5wdXQub3JkZXJCeSxcbiAgICAgICAgc2NvcmVzVGFibGVDb2xzLFxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc2NvcmVzID0gYXdhaXQgY3R4LnByaXNtYS4kcXVlcnlSYXc8XG4gICAgICAgIEFycmF5PFNjb3JlICYgeyB0cmFjZU5hbWU6IHN0cmluZyB9PlxuICAgICAgPihcbiAgICAgICAgZ2VuZXJhdGVTY29yZXNRdWVyeShcbiAgICAgICAgICBQcmlzbWEuc3FsYCBcbiAgICAgICAgICBzLmlkLFxuICAgICAgICAgIHMubmFtZSxcbiAgICAgICAgICBzLnZhbHVlLFxuICAgICAgICAgIHMudGltZXN0YW1wLFxuICAgICAgICAgIHMuY29tbWVudCxcbiAgICAgICAgICBzLnRyYWNlX2lkIGFzIFwidHJhY2VJZFwiLFxuICAgICAgICAgIHMub2JzZXJ2YXRpb25faWQgYXMgXCJvYnNlcnZhdGlvbklkXCIsXG4gICAgICAgICAgdC5uYW1lIGFzIFwidHJhY2VOYW1lXCJgLFxuICAgICAgICAgIGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICBmaWx0ZXJDb25kaXRpb24sXG4gICAgICAgICAgb3JkZXJCeUNvbmRpdGlvbixcbiAgICAgICAgICBpbnB1dC5saW1pdCxcbiAgICAgICAgICBpbnB1dC5wYWdlLFxuICAgICAgICApLFxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc2NvcmVzQ291bnQgPSBhd2FpdCBjdHgucHJpc21hLiRxdWVyeVJhdzxcbiAgICAgICAgQXJyYXk8eyB0b3RhbENvdW50OiBiaWdpbnQgfT5cbiAgICAgID4oXG4gICAgICAgIGdlbmVyYXRlU2NvcmVzUXVlcnkoXG4gICAgICAgICAgUHJpc21hLnNxbGAgY291bnQoKikgQVMgXCJ0b3RhbENvdW50XCJgLFxuICAgICAgICAgIGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICBmaWx0ZXJDb25kaXRpb24sXG4gICAgICAgICAgUHJpc21hLmVtcHR5LFxuICAgICAgICAgIDEsIC8vIGxpbWl0XG4gICAgICAgICAgMCwgLy8gcGFnZVxuICAgICAgICApLFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2NvcmVzLFxuICAgICAgICB0b3RhbENvdW50OlxuICAgICAgICAgIHNjb3Jlc0NvdW50Lmxlbmd0aCA+IDAgPyBOdW1iZXIoc2NvcmVzQ291bnRbMF0/LnRvdGFsQ291bnQpIDogMCxcbiAgICAgIH07XG4gICAgfSksXG4gIGZpbHRlck9wdGlvbnM6IHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIHByb2plY3RJZDogei5zdHJpbmcoKSxcbiAgICAgIH0pLFxuICAgIClcbiAgICAucXVlcnkoYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICBjb25zdCBuYW1lcyA9IGF3YWl0IGN0eC5wcmlzbWEuc2NvcmUuZ3JvdXBCeSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgdHJhY2U6IHtcbiAgICAgICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGJ5OiBbXCJuYW1lXCJdLFxuICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICBfYWxsOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlczogU2NvcmVPcHRpb25zID0ge1xuICAgICAgICBuYW1lOiBuYW1lcy5tYXAoKGkpID0+ICh7IHZhbHVlOiBpLm5hbWUsIGNvdW50OiBpLl9jb3VudC5fYWxsIH0pKSxcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiByZXM7XG4gICAgfSksXG4gIGJ5SWQ6IHByb3RlY3RlZFByb2NlZHVyZS5pbnB1dCh6LnN0cmluZygpKS5xdWVyeSgoeyBpbnB1dCwgY3R4IH0pID0+XG4gICAgY3R4LnByaXNtYS5zY29yZS5maW5kRmlyc3RPclRocm93KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlkOiBpbnB1dCxcbiAgICAgICAgLi4uKGN0eC5zZXNzaW9uLnVzZXIuYWRtaW4gPT09IHRydWVcbiAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgIDoge1xuICAgICAgICAgICAgICB0cmFjZToge1xuICAgICAgICAgICAgICAgIHByb2plY3Q6IHtcbiAgICAgICAgICAgICAgICAgIG1lbWJlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgc29tZToge1xuICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgfSxcbiAgICB9KSxcbiAgKSxcbiAgY3JlYXRlOiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIHRyYWNlSWQ6IHouc3RyaW5nKCksXG4gICAgICAgIHZhbHVlOiB6Lm51bWJlcigpLFxuICAgICAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgICAgICBjb21tZW50OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIG9ic2VydmF0aW9uSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIH0pLFxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICBjb25zdCB0cmFjZSA9IGF3YWl0IGN0eC5wcmlzbWEudHJhY2UuZmluZEZpcnN0T3JUaHJvdyh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWQ6IGlucHV0LnRyYWNlSWQsXG4gICAgICAgICAgcHJvamVjdDoge1xuICAgICAgICAgICAgbWVtYmVyczoge1xuICAgICAgICAgICAgICBzb21lOiB7XG4gICAgICAgICAgICAgICAgdXNlcklkOiBjdHguc2Vzc2lvbi51c2VyLmlkLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICB0aHJvd0lmTm9BY2Nlc3Moe1xuICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgcHJvamVjdElkOiB0cmFjZS5wcm9qZWN0SWQsXG4gICAgICAgIHNjb3BlOiBcInNjb3JlczpDVURcIixcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzY29yZSA9IGF3YWl0IGN0eC5wcmlzbWEuc2NvcmUuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHRyYWNlOiB7XG4gICAgICAgICAgICBjb25uZWN0OiB7XG4gICAgICAgICAgICAgIGlkOiB0cmFjZS5pZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICAuLi4oaW5wdXQub2JzZXJ2YXRpb25JZFxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2YXRpb246IHtcbiAgICAgICAgICAgICAgICAgIGNvbm5lY3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlucHV0Lm9ic2VydmF0aW9uSWQsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICB2YWx1ZTogaW5wdXQudmFsdWUsXG4gICAgICAgICAgbmFtZTogaW5wdXQubmFtZSxcbiAgICAgICAgICBjb21tZW50OiBpbnB1dC5jb21tZW50LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBhd2FpdCBhdWRpdExvZyh7XG4gICAgICAgIHByb2plY3RJZDogdHJhY2UucHJvamVjdElkLFxuICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXG4gICAgICAgIHVzZXJQcm9qZWN0Um9sZTogY3R4LnNlc3Npb24udXNlci5wcm9qZWN0cy5maW5kKFxuICAgICAgICAgIChwKSA9PiBwLmlkID09PSB0cmFjZS5wcm9qZWN0SWQsXG4gICAgICAgICk/LnJvbGUgYXMgTWVtYmVyc2hpcFJvbGUsIC8vIHRocm93SWZOb0FjY2VzcyBlbnN1cmVzIHRoaXMgaXMgZGVmaW5lZFxuICAgICAgICByZXNvdXJjZVR5cGU6IFwic2NvcmVcIixcbiAgICAgICAgcmVzb3VyY2VJZDogc2NvcmUuaWQsXG4gICAgICAgIGFjdGlvbjogXCJjcmVhdGVcIixcbiAgICAgICAgYWZ0ZXI6IHNjb3JlLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gc2NvcmU7XG4gICAgfSksXG4gIHVwZGF0ZTogcHJvdGVjdGVkUHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgICAgdmFsdWU6IHoubnVtYmVyKCksXG4gICAgICAgIGNvbW1lbnQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgIH0pLFxuICAgIClcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICBjb25zdCBzY29yZSA9IGF3YWl0IGN0eC5wcmlzbWEuc2NvcmUuZmluZEZpcnN0T3JUaHJvdyh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWQ6IGlucHV0LmlkLFxuICAgICAgICAgIHRyYWNlOiB7XG4gICAgICAgICAgICBwcm9qZWN0OiB7XG4gICAgICAgICAgICAgIG1lbWJlcnM6IHtcbiAgICAgICAgICAgICAgICBzb21lOiB7XG4gICAgICAgICAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHRyYWNlOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgcHJvamVjdElkOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICB0aHJvd0lmTm9BY2Nlc3Moe1xuICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgcHJvamVjdElkOiBzY29yZS50cmFjZS5wcm9qZWN0SWQsXG4gICAgICAgIHNjb3BlOiBcInNjb3JlczpDVURcIixcbiAgICAgIH0pO1xuXG4gICAgICAvLyBleGNsdWRlIHRyYWNlIG9iamVjdCBmcm9tIGF1ZGl0IGxvZ1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgY29uc3QgeyB0cmFjZSwgLi4ucHVyZVNjb3JlIH0gPSBzY29yZTtcbiAgICAgIGF3YWl0IGF1ZGl0TG9nKHtcbiAgICAgICAgcHJvamVjdElkOiB0cmFjZS5wcm9qZWN0SWQsXG4gICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcbiAgICAgICAgdXNlclByb2plY3RSb2xlOiBjdHguc2Vzc2lvbi51c2VyLnByb2plY3RzLmZpbmQoXG4gICAgICAgICAgKHApID0+IHAuaWQgPT09IHRyYWNlLnByb2plY3RJZCxcbiAgICAgICAgKT8ucm9sZSBhcyBNZW1iZXJzaGlwUm9sZSwgLy8gdGhyb3dJZk5vQWNjZXNzIGVuc3VyZXMgdGhpcyBpcyBkZWZpbmVkXG4gICAgICAgIHJlc291cmNlVHlwZTogXCJzY29yZVwiLFxuICAgICAgICByZXNvdXJjZUlkOiBzY29yZS5pZCxcbiAgICAgICAgYWN0aW9uOiBcInVwZGF0ZVwiLFxuICAgICAgICBhZnRlcjogcHVyZVNjb3JlLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBjdHgucHJpc21hLnNjb3JlLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWQ6IHNjb3JlLmlkLFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgdmFsdWU6IGlucHV0LnZhbHVlLFxuICAgICAgICAgIGNvbW1lbnQ6IGlucHV0LmNvbW1lbnQsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KSxcbiAgZGVsZXRlOiBwcm90ZWN0ZWRQcm9jZWR1cmVcbiAgICAuaW5wdXQoei5zdHJpbmcoKSlcbiAgICAubXV0YXRpb24oYXN5bmMgKHsgaW5wdXQsIGN0eCB9KSA9PiB7XG4gICAgICBjb25zdCBzY29yZSA9IGF3YWl0IGN0eC5wcmlzbWEuc2NvcmUuZmluZEZpcnN0T3JUaHJvdyh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgaWQ6IGlucHV0LFxuICAgICAgICAgIHRyYWNlOiB7XG4gICAgICAgICAgICBwcm9qZWN0OiB7XG4gICAgICAgICAgICAgIG1lbWJlcnM6IHtcbiAgICAgICAgICAgICAgICBzb21lOiB7XG4gICAgICAgICAgICAgICAgICB1c2VySWQ6IGN0eC5zZXNzaW9uLnVzZXIuaWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHRyYWNlOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgcHJvamVjdElkOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICB0aHJvd0lmTm9BY2Nlc3Moe1xuICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgcHJvamVjdElkOiBzY29yZS50cmFjZS5wcm9qZWN0SWQsXG4gICAgICAgIHNjb3BlOiBcInNjb3JlczpDVURcIixcbiAgICAgIH0pO1xuICAgICAgY29uc3QgeyB0cmFjZSwgLi4ucHVyZVNjb3JlIH0gPSBzY29yZTtcbiAgICAgIGF3YWl0IGF1ZGl0TG9nKHtcbiAgICAgICAgcHJvamVjdElkOiB0cmFjZS5wcm9qZWN0SWQsXG4gICAgICAgIHVzZXJJZDogY3R4LnNlc3Npb24udXNlci5pZCxcbiAgICAgICAgdXNlclByb2plY3RSb2xlOiBjdHguc2Vzc2lvbi51c2VyLnByb2plY3RzLmZpbmQoXG4gICAgICAgICAgKHApID0+IHAuaWQgPT09IHRyYWNlLnByb2plY3RJZCxcbiAgICAgICAgKT8ucm9sZSBhcyBNZW1iZXJzaGlwUm9sZSwgLy8gdGhyb3dJZk5vQWNjZXNzIGVuc3VyZXMgdGhpcyBpcyBkZWZpbmVkXG4gICAgICAgIHJlc291cmNlVHlwZTogXCJzY29yZVwiLFxuICAgICAgICByZXNvdXJjZUlkOiBzY29yZS5pZCxcbiAgICAgICAgYWN0aW9uOiBcImRlbGV0ZVwiLFxuICAgICAgICBiZWZvcmU6IHB1cmVTY29yZSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gY3R4LnByaXNtYS5zY29yZS5kZWxldGUoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGlkOiBzY29yZS5pZCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pLFxufSk7XG5cbmNvbnN0IGdlbmVyYXRlU2NvcmVzUXVlcnkgPSAoXG4gIHNlbGVjdDogUHJpc21hLlNxbCxcbiAgcHJvamVjdElkOiBzdHJpbmcsXG4gIGZpbHRlckNvbmRpdGlvbjogUHJpc21hLlNxbCxcbiAgb3JkZXJDb25kaXRpb246IFByaXNtYS5TcWwsXG4gIGxpbWl0OiBudW1iZXIsXG4gIHBhZ2U6IG51bWJlcixcbikgPT4ge1xuICByZXR1cm4gUHJpc21hLnNxbGBcbiAgU0VMRUNUXG4gICAke3NlbGVjdH1cbiAgRlJPTSBzY29yZXMgc1xuICBKT0lOIHRyYWNlcyB0IE9OIHQuaWQgPSBzLnRyYWNlX2lkXG4gIFdIRVJFIHQucHJvamVjdF9pZCA9ICR7cHJvamVjdElkfVxuICAke2ZpbHRlckNvbmRpdGlvbn1cbiAgJHtvcmRlckNvbmRpdGlvbn1cbiAgTElNSVQgJHtsaW1pdH1cbiAgT0ZGU0VUICR7cGFnZSAqIGxpbWl0fVxuYDtcbn07XG4iXSwibmFtZXMiOlsieiIsImNyZWF0ZVRSUENSb3V0ZXIiLCJwcm90ZWN0ZWRQcm9jZWR1cmUiLCJwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlIiwidGhyb3dJZk5vQWNjZXNzIiwiUHJpc21hIiwicGFnaW5hdGlvblpvZCIsInNpbmdsZUZpbHRlciIsInRhYmxlQ29sdW1uc1RvU3FsRmlsdGVyQW5kUHJlZml4Iiwic2NvcmVzVGFibGVDb2xzIiwib3JkZXJCeSIsIm9yZGVyQnlUb1ByaXNtYVNxbCIsImF1ZGl0TG9nIiwiU2NvcmVGaWx0ZXJPcHRpb25zIiwib2JqZWN0IiwicHJvamVjdElkIiwic3RyaW5nIiwiZmlsdGVyIiwiYXJyYXkiLCJTY29yZUFsbE9wdGlvbnMiLCJleHRlbmQiLCJzY29yZXNSb3V0ZXIiLCJhbGwiLCJpbnB1dCIsInF1ZXJ5IiwiY3R4IiwiZmlsdGVyQ29uZGl0aW9uIiwib3JkZXJCeUNvbmRpdGlvbiIsInNjb3JlcyIsInByaXNtYSIsIiRxdWVyeVJhdyIsImdlbmVyYXRlU2NvcmVzUXVlcnkiLCJzcWwiLCJsaW1pdCIsInBhZ2UiLCJzY29yZXNDb3VudCIsImVtcHR5IiwidG90YWxDb3VudCIsImxlbmd0aCIsIk51bWJlciIsImZpbHRlck9wdGlvbnMiLCJuYW1lcyIsInNjb3JlIiwiZ3JvdXBCeSIsIndoZXJlIiwidHJhY2UiLCJieSIsIl9jb3VudCIsIl9hbGwiLCJyZXMiLCJuYW1lIiwibWFwIiwiaSIsInZhbHVlIiwiY291bnQiLCJieUlkIiwiZmluZEZpcnN0T3JUaHJvdyIsImlkIiwic2Vzc2lvbiIsInVzZXIiLCJhZG1pbiIsInVuZGVmaW5lZCIsInByb2plY3QiLCJtZW1iZXJzIiwic29tZSIsInVzZXJJZCIsImNyZWF0ZSIsInRyYWNlSWQiLCJudW1iZXIiLCJjb21tZW50Iiwib3B0aW9uYWwiLCJvYnNlcnZhdGlvbklkIiwibXV0YXRpb24iLCJzY29wZSIsImRhdGEiLCJjb25uZWN0Iiwib2JzZXJ2YXRpb24iLCJ1c2VyUHJvamVjdFJvbGUiLCJwcm9qZWN0cyIsImZpbmQiLCJwIiwicm9sZSIsInJlc291cmNlVHlwZSIsInJlc291cmNlSWQiLCJhY3Rpb24iLCJhZnRlciIsInVwZGF0ZSIsImluY2x1ZGUiLCJzZWxlY3QiLCJwdXJlU2NvcmUiLCJkZWxldGUiLCJiZWZvcmUiLCJvcmRlckNvbmRpdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/scores.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/sessions.ts":
/*!********************************************!*\
  !*** ./src/server/api/routers/sessions.ts ***!
  \********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sessionRouter: () => (/* binding */ sessionRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _src_server_api_definitions_sessionsView__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/server/api/definitions/sessionsView */ \"(api)/./src/server/api/definitions/sessionsView.ts\");\n/* harmony import */ var _src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/features/filters/server/filterToPrisma */ \"(api)/./src/features/filters/server/filterToPrisma.ts\");\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/src/server/api/interfaces/filters */ \"(api)/./src/server/api/interfaces/filters.ts\");\n/* harmony import */ var _src_utils_zod__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/src/utils/zod */ \"(api)/./src/utils/zod.ts\");\n/* harmony import */ var _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/src/features/rbac/utils/checkAccess */ \"(api)/./src/features/rbac/utils/checkAccess.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/src/server/api/interfaces/orderBy */ \"(api)/./src/server/api/interfaces/orderBy.ts\");\n/* harmony import */ var _src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/src/features/orderBy/server/orderByToPrisma */ \"(api)/./src/features/orderBy/server/orderByToPrisma.ts\");\n/* harmony import */ var _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/src/features/audit-logs/auditLog */ \"(api)/./src/features/audit-logs/auditLog.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_2__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__, _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_5__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_6__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_7__, _trpc_server__WEBPACK_IMPORTED_MODULE_8__, _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_9__, _src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_10__, _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_11__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_2__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__, _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_5__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_6__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_7__, _trpc_server__WEBPACK_IMPORTED_MODULE_8__, _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_9__, _src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_10__, _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_11__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\n\nconst SessionFilterOptions = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    filter: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(_src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_5__.singleFilter).nullable(),\n    orderBy: _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_9__.orderBy,\n    ..._src_utils_zod__WEBPACK_IMPORTED_MODULE_6__.paginationZod\n});\nconst sessionRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.createTRPCRouter)({\n    all: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedProjectProcedure.input(SessionFilterOptions).query(async ({ input, ctx })=>{\n        try {\n            const filterCondition = (0,_src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_2__.tableColumnsToSqlFilterAndPrefix)(input.filter ?? [], _src_server_api_definitions_sessionsView__WEBPACK_IMPORTED_MODULE_1__.sessionsViewCols, \"sessions\");\n            const orderByCondition = (0,_src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_10__.orderByToPrismaSql)(input.orderBy, _src_server_api_definitions_sessionsView__WEBPACK_IMPORTED_MODULE_1__.sessionsViewCols);\n            const sessions = await ctx.prisma.$queryRaw(_prisma_client__WEBPACK_IMPORTED_MODULE_4__.Prisma.sql`\n      WITH observation_metrics AS (\n        SELECT\n          t.session_id,\n          EXTRACT(EPOCH FROM COALESCE(MAX(o.\"end_time\"), MAX(o.\"start_time\"), MAX(t.timestamp))) - EXTRACT(EPOCH FROM COALESCE(MIN(o.\"start_time\"), MIN(t.timestamp)))::double precision AS \"sessionDuration\",\n          SUM(COALESCE(o.\"calculated_input_cost\", 0)) AS \"inputCost\",\n          SUM(COALESCE(o.\"calculated_output_cost\", 0)) AS \"outputCost\",\n          SUM(COALESCE(o.\"calculated_total_cost\", 0)) AS \"totalCost\",\n          SUM(o.prompt_tokens) AS \"promptTokens\",\n          SUM(o.completion_tokens) AS \"completionTokens\",\n          SUM(o.total_tokens) AS \"totalTokens\"\n        FROM traces t\n        LEFT JOIN observations_view o ON o.trace_id = t.id\n        WHERE\n          t.\"project_id\" = ${input.projectId}\n          AND o.\"project_id\" = ${input.projectId}\n          AND t.session_id IS NOT NULL\n        GROUP BY 1\n      ),\n      trace_metrics AS (\n        SELECT\n          session_id,\n          array_agg(distinct t.user_id) \"userIds\",\n          count(t.id)::int \"countTraces\"\n        FROM traces t\n        WHERE\n          t.\"project_id\" = ${input.projectId}\n          AND t.session_id IS NOT NULL\n        GROUP BY 1\n      )\n\n      SELECT\n        s.id,\n        s.\"created_at\" \"createdAt\",\n        s.bookmarked,\n        s.public,\n        t.\"userIds\",\n        t.\"countTraces\",\n        o.\"sessionDuration\",\n        COALESCE(o.\"totalCost\", 0) AS \"totalCost\",\n        COALESCE(o.\"inputCost\", 0) AS \"inputCost\",\n        COALESCE(o.\"outputCost\", 0) AS \"outputCost\",\n        COALESCE(o.\"promptTokens\", 0) AS \"promptTokens\",\n        COALESCE(o.\"completionTokens\", 0) AS \"completionTokens\",\n        COALESCE(o.\"totalTokens\", 0) AS \"totalTokens\",\n        (count(*) OVER ())::int AS \"totalCount\"\n      FROM trace_sessions s\n      LEFT JOIN trace_metrics t ON t.session_id = s.id\n      LEFT JOIN observation_metrics o ON o.session_id = s.id\n      WHERE\n        s.\"project_id\" = ${input.projectId}\n        ${filterCondition}\n      ${orderByCondition}\n      LIMIT ${input.limit}\n      OFFSET ${input.page * input.limit}\n    `);\n            return sessions.map((s)=>({\n                    ...s,\n                    userIds: s.userIds?.filter((t)=>t !== null) ?? []\n                }));\n        } catch (e) {\n            console.error(e);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"unable to get sessions\"\n            });\n        }\n    }),\n    byId: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedGetSessionProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        sessionId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        try {\n            const session = await ctx.prisma.traceSession.findFirst({\n                where: {\n                    id: input.sessionId,\n                    projectId: input.projectId\n                },\n                include: {\n                    traces: {\n                        orderBy: {\n                            timestamp: \"asc\"\n                        },\n                        include: {\n                            scores: true\n                        }\n                    }\n                }\n            });\n            if (!session) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                    code: \"NOT_FOUND\",\n                    message: \"Session not found in project\"\n                });\n            }\n            const totalCostQuery = _prisma_client__WEBPACK_IMPORTED_MODULE_4__.Prisma.sql`\n        SELECT\n          SUM(COALESCE(o.\"calculated_total_cost\", 0)) AS \"totalCost\"\n        FROM observations_view o\n        JOIN traces t ON t.id = o.trace_id\n        WHERE\n          t.\"session_id\" = ${input.sessionId}\n          AND t.\"project_id\" = ${input.projectId}\n      `;\n            const [costData] = await ctx.prisma.$queryRaw(totalCostQuery);\n            return {\n                ...session,\n                totalCost: costData?.totalCost ?? 0,\n                users: [\n                    ...new Set(session.traces.map((t)=>t.userId).filter((t)=>t !== null))\n                ]\n            };\n        } catch (e) {\n            console.error(e);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"unable to get session\"\n            });\n        }\n    }),\n    bookmark: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        sessionId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        bookmarked: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean()\n    })).mutation(async ({ input, ctx })=>{\n        try {\n            (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_7__.throwIfNoAccess)({\n                session: ctx.session,\n                projectId: input.projectId,\n                scope: \"objects:bookmark\"\n            });\n            await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_11__.auditLog)({\n                session: ctx.session,\n                resourceType: \"session\",\n                resourceId: input.sessionId,\n                action: \"bookmark\",\n                after: input.bookmarked\n            });\n            const session = await ctx.prisma.traceSession.update({\n                where: {\n                    id_projectId: {\n                        id: input.sessionId,\n                        projectId: input.projectId\n                    }\n                },\n                data: {\n                    bookmarked: input.bookmarked\n                }\n            });\n            return session;\n        } catch (error) {\n            console.error(error);\n            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_4__.Prisma.PrismaClientKnownRequestError && error.code === \"P2025\" // Record to update not found\n            ) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"NOT_FOUND\",\n                message: \"Session not found in project\"\n            });\n            else {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\"\n                });\n            }\n        }\n    }),\n    publish: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_3__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        sessionId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        public: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean()\n    })).mutation(async ({ input, ctx })=>{\n        try {\n            (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_7__.throwIfNoAccess)({\n                session: ctx.session,\n                projectId: input.projectId,\n                scope: \"objects:publish\"\n            });\n            await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_11__.auditLog)({\n                session: ctx.session,\n                resourceType: \"session\",\n                resourceId: input.sessionId,\n                action: \"publish\",\n                after: input.public\n            });\n            return ctx.prisma.traceSession.update({\n                where: {\n                    id_projectId: {\n                        id: input.sessionId,\n                        projectId: input.projectId\n                    }\n                },\n                data: {\n                    public: input.public\n                }\n            });\n        } catch (e) {\n            console.error(e);\n            throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                code: \"INTERNAL_SERVER_ERROR\",\n                message: \"unable to publish session\"\n            });\n        }\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL3Nlc3Npb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBRXFEO0FBQ21CO0FBS2pFO0FBQ1M7QUFDMkI7QUFDbkI7QUFDd0I7QUFDL0I7QUFDcUI7QUFDcUI7QUFDckI7QUFHOUQsTUFBTWMsdUJBQXVCZCxrQ0FBQ0EsQ0FBQ2UsTUFBTSxDQUFDO0lBQ3BDQyxXQUFXaEIsa0NBQUNBLENBQUNpQixNQUFNO0lBQ25CQyxRQUFRbEIsa0NBQUNBLENBQUNtQixLQUFLLENBQUNaLDRFQUFZQSxFQUFFYSxRQUFRO0lBQ3RDVCxTQUFTQSx1RUFBT0E7SUFDaEIsR0FBR0gseURBQWE7QUFDbEI7QUFFTyxNQUFNYSxnQkFBZ0JsQixzRUFBZ0JBLENBQUM7SUFDNUNtQixLQUFLbEIsMkVBQXlCQSxDQUMzQm1CLEtBQUssQ0FBQ1Qsc0JBQ05VLEtBQUssQ0FBQyxPQUFPLEVBQUVELEtBQUssRUFBRUUsR0FBRyxFQUFFO1FBQzFCLElBQUk7WUFDRixNQUFNQyxrQkFBa0J4Qiw2R0FBZ0NBLENBQ3REcUIsTUFBTUwsTUFBTSxJQUFJLEVBQUUsRUFDbEJqQixzRkFBZ0JBLEVBQ2hCO1lBR0YsTUFBTTBCLG1CQUFtQmYsaUdBQWtCQSxDQUN6Q1csTUFBTVosT0FBTyxFQUNiVixzRkFBZ0JBO1lBR2xCLE1BQU0yQixXQUFXLE1BQU1ILElBQUlJLE1BQU0sQ0FBQ0MsU0FBUyxDQWlCekN4QixrREFBTUEsQ0FBQ3lCLEdBQUcsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7MkJBY00sRUFBRVIsTUFBTVAsU0FBUyxDQUFDOytCQUNkLEVBQUVPLE1BQU1QLFNBQVMsQ0FBQzs7Ozs7Ozs7Ozs7MkJBV3RCLEVBQUVPLE1BQU1QLFNBQVMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3lCQXdCcEIsRUFBRU8sTUFBTVAsU0FBUyxDQUFDO1FBQ25DLEVBQUVVLGdCQUFnQjtNQUNwQixFQUFFQyxpQkFBaUI7WUFD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QU07WUFDckI7WUFDQSxPQUFPakQsSUFBSUksTUFBTSxDQUFDaUIsWUFBWSxDQUFDdUIsTUFBTSxDQUFDO2dCQUNwQ3JCLE9BQU87b0JBQ0xzQixjQUFjO3dCQUNackIsSUFBSTFCLE1BQU1xQixTQUFTO3dCQUNuQjVCLFdBQVdPLE1BQU1QLFNBQVM7b0JBQzVCO2dCQUNGO2dCQUNBdUQsTUFBTTtvQkFDSkcsUUFBUW5ELE1BQU1tRCxNQUFNO2dCQUN0QjtZQUNGO1FBQ0YsRUFBRSxPQUFPcEMsR0FBRztZQUNWQyxRQUFRQyxLQUFLLENBQUNGO1lBQ2QsTUFBTSxJQUFJNUIsbURBQVNBLENBQUM7Z0JBQ2xCK0IsTUFBTTtnQkFDTkMsU0FBUztZQUNYO1FBQ0Y7SUFDRjtBQUNKLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL3Nlc3Npb25zLnRzP2I1OGMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcblxuaW1wb3J0IHsgc2Vzc2lvbnNWaWV3Q29scyB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL2RlZmluaXRpb25zL3Nlc3Npb25zVmlld1wiO1xuaW1wb3J0IHsgdGFibGVDb2x1bW5zVG9TcWxGaWx0ZXJBbmRQcmVmaXggfSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvZmlsdGVycy9zZXJ2ZXIvZmlsdGVyVG9QcmlzbWFcIjtcbmltcG9ydCB7XG4gIGNyZWF0ZVRSUENSb3V0ZXIsXG4gIHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUsXG4gIHByb3RlY3RlZEdldFNlc3Npb25Qcm9jZWR1cmUsXG59IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3RycGNcIjtcbmltcG9ydCB7IFByaXNtYSB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuaW1wb3J0IHsgc2luZ2xlRmlsdGVyIH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvaW50ZXJmYWNlcy9maWx0ZXJzXCI7XG5pbXBvcnQgeyBwYWdpbmF0aW9uWm9kIH0gZnJvbSBcIkAvc3JjL3V0aWxzL3pvZFwiO1xuaW1wb3J0IHsgdGhyb3dJZk5vQWNjZXNzIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL3JiYWMvdXRpbHMvY2hlY2tBY2Nlc3NcIjtcbmltcG9ydCB7IFRSUENFcnJvciB9IGZyb20gXCJAdHJwYy9zZXJ2ZXJcIjtcbmltcG9ydCB7IG9yZGVyQnkgfSBmcm9tIFwiQC9zcmMvc2VydmVyL2FwaS9pbnRlcmZhY2VzL29yZGVyQnlcIjtcbmltcG9ydCB7IG9yZGVyQnlUb1ByaXNtYVNxbCB9IGZyb20gXCJAL3NyYy9mZWF0dXJlcy9vcmRlckJ5L3NlcnZlci9vcmRlckJ5VG9QcmlzbWFcIjtcbmltcG9ydCB7IGF1ZGl0TG9nIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL2F1ZGl0LWxvZ3MvYXVkaXRMb2dcIjtcbmltcG9ydCB0eXBlIERlY2ltYWwgZnJvbSBcImRlY2ltYWwuanNcIjtcblxuY29uc3QgU2Vzc2lvbkZpbHRlck9wdGlvbnMgPSB6Lm9iamVjdCh7XG4gIHByb2plY3RJZDogei5zdHJpbmcoKSwgLy8gUmVxdWlyZWQgZm9yIHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmVcbiAgZmlsdGVyOiB6LmFycmF5KHNpbmdsZUZpbHRlcikubnVsbGFibGUoKSxcbiAgb3JkZXJCeTogb3JkZXJCeSxcbiAgLi4ucGFnaW5hdGlvblpvZCxcbn0pO1xuXG5leHBvcnQgY29uc3Qgc2Vzc2lvblJvdXRlciA9IGNyZWF0ZVRSUENSb3V0ZXIoe1xuICBhbGw6IHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmVcbiAgICAuaW5wdXQoU2Vzc2lvbkZpbHRlck9wdGlvbnMpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZmlsdGVyQ29uZGl0aW9uID0gdGFibGVDb2x1bW5zVG9TcWxGaWx0ZXJBbmRQcmVmaXgoXG4gICAgICAgICAgaW5wdXQuZmlsdGVyID8/IFtdLFxuICAgICAgICAgIHNlc3Npb25zVmlld0NvbHMsXG4gICAgICAgICAgXCJzZXNzaW9uc1wiLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IG9yZGVyQnlDb25kaXRpb24gPSBvcmRlckJ5VG9QcmlzbWFTcWwoXG4gICAgICAgICAgaW5wdXQub3JkZXJCeSxcbiAgICAgICAgICBzZXNzaW9uc1ZpZXdDb2xzLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHNlc3Npb25zID0gYXdhaXQgY3R4LnByaXNtYS4kcXVlcnlSYXc8XG4gICAgICAgICAgQXJyYXk8e1xuICAgICAgICAgICAgaWQ6IHN0cmluZztcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogRGF0ZTtcbiAgICAgICAgICAgIGJvb2ttYXJrZWQ6IGJvb2xlYW47XG4gICAgICAgICAgICBwdWJsaWM6IGJvb2xlYW47XG4gICAgICAgICAgICBjb3VudFRyYWNlczogbnVtYmVyO1xuICAgICAgICAgICAgdXNlcklkczogKHN0cmluZyB8IG51bGwpW10gfCBudWxsO1xuICAgICAgICAgICAgdG90YWxDb3VudDogbnVtYmVyO1xuICAgICAgICAgICAgc2Vzc2lvbkR1cmF0aW9uOiBudW1iZXIgfCBudWxsO1xuICAgICAgICAgICAgaW5wdXRDb3N0OiBEZWNpbWFsO1xuICAgICAgICAgICAgb3V0cHV0Q29zdDogRGVjaW1hbDtcbiAgICAgICAgICAgIHRvdGFsQ29zdDogRGVjaW1hbDtcbiAgICAgICAgICAgIHByb21wdFRva2VuczogbnVtYmVyO1xuICAgICAgICAgICAgY29tcGxldGlvblRva2VuczogbnVtYmVyO1xuICAgICAgICAgICAgdG90YWxUb2tlbnM6IG51bWJlcjtcbiAgICAgICAgICB9PlxuICAgICAgICA+KFByaXNtYS5zcWxgXG4gICAgICBXSVRIIG9ic2VydmF0aW9uX21ldHJpY3MgQVMgKFxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgICB0LnNlc3Npb25faWQsXG4gICAgICAgICAgRVhUUkFDVChFUE9DSCBGUk9NIENPQUxFU0NFKE1BWChvLlwiZW5kX3RpbWVcIiksIE1BWChvLlwic3RhcnRfdGltZVwiKSwgTUFYKHQudGltZXN0YW1wKSkpIC0gRVhUUkFDVChFUE9DSCBGUk9NIENPQUxFU0NFKE1JTihvLlwic3RhcnRfdGltZVwiKSwgTUlOKHQudGltZXN0YW1wKSkpOjpkb3VibGUgcHJlY2lzaW9uIEFTIFwic2Vzc2lvbkR1cmF0aW9uXCIsXG4gICAgICAgICAgU1VNKENPQUxFU0NFKG8uXCJjYWxjdWxhdGVkX2lucHV0X2Nvc3RcIiwgMCkpIEFTIFwiaW5wdXRDb3N0XCIsXG4gICAgICAgICAgU1VNKENPQUxFU0NFKG8uXCJjYWxjdWxhdGVkX291dHB1dF9jb3N0XCIsIDApKSBBUyBcIm91dHB1dENvc3RcIixcbiAgICAgICAgICBTVU0oQ09BTEVTQ0Uoby5cImNhbGN1bGF0ZWRfdG90YWxfY29zdFwiLCAwKSkgQVMgXCJ0b3RhbENvc3RcIixcbiAgICAgICAgICBTVU0oby5wcm9tcHRfdG9rZW5zKSBBUyBcInByb21wdFRva2Vuc1wiLFxuICAgICAgICAgIFNVTShvLmNvbXBsZXRpb25fdG9rZW5zKSBBUyBcImNvbXBsZXRpb25Ub2tlbnNcIixcbiAgICAgICAgICBTVU0oby50b3RhbF90b2tlbnMpIEFTIFwidG90YWxUb2tlbnNcIlxuICAgICAgICBGUk9NIHRyYWNlcyB0XG4gICAgICAgIExFRlQgSk9JTiBvYnNlcnZhdGlvbnNfdmlldyBvIE9OIG8udHJhY2VfaWQgPSB0LmlkXG4gICAgICAgIFdIRVJFXG4gICAgICAgICAgdC5cInByb2plY3RfaWRcIiA9ICR7aW5wdXQucHJvamVjdElkfVxuICAgICAgICAgIEFORCBvLlwicHJvamVjdF9pZFwiID0gJHtpbnB1dC5wcm9qZWN0SWR9XG4gICAgICAgICAgQU5EIHQuc2Vzc2lvbl9pZCBJUyBOT1QgTlVMTFxuICAgICAgICBHUk9VUCBCWSAxXG4gICAgICApLFxuICAgICAgdHJhY2VfbWV0cmljcyBBUyAoXG4gICAgICAgIFNFTEVDVFxuICAgICAgICAgIHNlc3Npb25faWQsXG4gICAgICAgICAgYXJyYXlfYWdnKGRpc3RpbmN0IHQudXNlcl9pZCkgXCJ1c2VySWRzXCIsXG4gICAgICAgICAgY291bnQodC5pZCk6OmludCBcImNvdW50VHJhY2VzXCJcbiAgICAgICAgRlJPTSB0cmFjZXMgdFxuICAgICAgICBXSEVSRVxuICAgICAgICAgIHQuXCJwcm9qZWN0X2lkXCIgPSAke2lucHV0LnByb2plY3RJZH1cbiAgICAgICAgICBBTkQgdC5zZXNzaW9uX2lkIElTIE5PVCBOVUxMXG4gICAgICAgIEdST1VQIEJZIDFcbiAgICAgIClcblxuICAgICAgU0VMRUNUXG4gICAgICAgIHMuaWQsXG4gICAgICAgIHMuXCJjcmVhdGVkX2F0XCIgXCJjcmVhdGVkQXRcIixcbiAgICAgICAgcy5ib29rbWFya2VkLFxuICAgICAgICBzLnB1YmxpYyxcbiAgICAgICAgdC5cInVzZXJJZHNcIixcbiAgICAgICAgdC5cImNvdW50VHJhY2VzXCIsXG4gICAgICAgIG8uXCJzZXNzaW9uRHVyYXRpb25cIixcbiAgICAgICAgQ09BTEVTQ0Uoby5cInRvdGFsQ29zdFwiLCAwKSBBUyBcInRvdGFsQ29zdFwiLFxuICAgICAgICBDT0FMRVNDRShvLlwiaW5wdXRDb3N0XCIsIDApIEFTIFwiaW5wdXRDb3N0XCIsXG4gICAgICAgIENPQUxFU0NFKG8uXCJvdXRwdXRDb3N0XCIsIDApIEFTIFwib3V0cHV0Q29zdFwiLFxuICAgICAgICBDT0FMRVNDRShvLlwicHJvbXB0VG9rZW5zXCIsIDApIEFTIFwicHJvbXB0VG9rZW5zXCIsXG4gICAgICAgIENPQUxFU0NFKG8uXCJjb21wbGV0aW9uVG9rZW5zXCIsIDApIEFTIFwiY29tcGxldGlvblRva2Vuc1wiLFxuICAgICAgICBDT0FMRVNDRShvLlwidG90YWxUb2tlbnNcIiwgMCkgQVMgXCJ0b3RhbFRva2Vuc1wiLFxuICAgICAgICAoY291bnQoKikgT1ZFUiAoKSk6OmludCBBUyBcInRvdGFsQ291bnRcIlxuICAgICAgRlJPTSB0cmFjZV9zZXNzaW9ucyBzXG4gICAgICBMRUZUIEpPSU4gdHJhY2VfbWV0cmljcyB0IE9OIHQuc2Vzc2lvbl9pZCA9IHMuaWRcbiAgICAgIExFRlQgSk9JTiBvYnNlcnZhdGlvbl9tZXRyaWNzIG8gT04gby5zZXNzaW9uX2lkID0gcy5pZFxuICAgICAgV0hFUkVcbiAgICAgICAgcy5cInByb2plY3RfaWRcIiA9ICR7aW5wdXQucHJvamVjdElkfVxuICAgICAgICAke2ZpbHRlckNvbmRpdGlvbn1cbiAgICAgICR7b3JkZXJCeUNvbmRpdGlvbn1cbiAgICAgIExJTUlUICR7aW5wdXQubGltaXR9XG4gICAgICBPRkZTRVQgJHtpbnB1dC5wYWdlICogaW5wdXQubGltaXR9XG4gICAgYCk7XG4gICAgICAgIHJldHVybiBzZXNzaW9ucy5tYXAoKHMpID0+ICh7XG4gICAgICAgICAgLi4ucyxcbiAgICAgICAgICB1c2VySWRzOiAocy51c2VySWRzPy5maWx0ZXIoKHQpID0+IHQgIT09IG51bGwpID8/IFtdKSBhcyBzdHJpbmdbXSxcbiAgICAgICAgfSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwidW5hYmxlIHRvIGdldCBzZXNzaW9uc1wiLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KSxcbiAgYnlJZDogcHJvdGVjdGVkR2V0U2Vzc2lvblByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7IHByb2plY3RJZDogei5zdHJpbmcoKSwgc2Vzc2lvbklkOiB6LnN0cmluZygpIH0pKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHgucHJpc21hLnRyYWNlU2Vzc2lvbi5maW5kRmlyc3Qoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBpZDogaW5wdXQuc2Vzc2lvbklkLFxuICAgICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICB0cmFjZXM6IHtcbiAgICAgICAgICAgICAgb3JkZXJCeToge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogXCJhc2NcIixcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICAgIHNjb3JlczogdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogXCJOT1RfRk9VTkRcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiU2Vzc2lvbiBub3QgZm91bmQgaW4gcHJvamVjdFwiLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdG90YWxDb3N0UXVlcnkgPSBQcmlzbWEuc3FsYFxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgICBTVU0oQ09BTEVTQ0Uoby5cImNhbGN1bGF0ZWRfdG90YWxfY29zdFwiLCAwKSkgQVMgXCJ0b3RhbENvc3RcIlxuICAgICAgICBGUk9NIG9ic2VydmF0aW9uc192aWV3IG9cbiAgICAgICAgSk9JTiB0cmFjZXMgdCBPTiB0LmlkID0gby50cmFjZV9pZFxuICAgICAgICBXSEVSRVxuICAgICAgICAgIHQuXCJzZXNzaW9uX2lkXCIgPSAke2lucHV0LnNlc3Npb25JZH1cbiAgICAgICAgICBBTkQgdC5cInByb2plY3RfaWRcIiA9ICR7aW5wdXQucHJvamVjdElkfVxuICAgICAgYDtcblxuICAgICAgICBjb25zdCBbY29zdERhdGFdID1cbiAgICAgICAgICBhd2FpdCBjdHgucHJpc21hLiRxdWVyeVJhdzxBcnJheTx7IHRvdGFsQ29zdDogbnVtYmVyIH0+PihcbiAgICAgICAgICAgIHRvdGFsQ29zdFF1ZXJ5LFxuICAgICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5zZXNzaW9uLFxuICAgICAgICAgIHRvdGFsQ29zdDogY29zdERhdGE/LnRvdGFsQ29zdCA/PyAwLFxuICAgICAgICAgIHVzZXJzOiBbXG4gICAgICAgICAgICAuLi5uZXcgU2V0KFxuICAgICAgICAgICAgICBzZXNzaW9uLnRyYWNlcy5tYXAoKHQpID0+IHQudXNlcklkKS5maWx0ZXIoKHQpID0+IHQgIT09IG51bGwpLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgIG1lc3NhZ2U6IFwidW5hYmxlIHRvIGdldCBzZXNzaW9uXCIsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLFxuICBib29rbWFyazogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgc2Vzc2lvbklkOiB6LnN0cmluZygpLFxuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICAgIGJvb2ttYXJrZWQ6IHouYm9vbGVhbigpLFxuICAgICAgfSksXG4gICAgKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRocm93SWZOb0FjY2Vzcyh7XG4gICAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgc2NvcGU6IFwib2JqZWN0czpib29rbWFya1wiLFxuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCBhdWRpdExvZyh7XG4gICAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgICAgcmVzb3VyY2VUeXBlOiBcInNlc3Npb25cIixcbiAgICAgICAgICByZXNvdXJjZUlkOiBpbnB1dC5zZXNzaW9uSWQsXG4gICAgICAgICAgYWN0aW9uOiBcImJvb2ttYXJrXCIsXG4gICAgICAgICAgYWZ0ZXI6IGlucHV0LmJvb2ttYXJrZWQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHgucHJpc21hLnRyYWNlU2Vzc2lvbi51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBpZF9wcm9qZWN0SWQ6IHtcbiAgICAgICAgICAgICAgaWQ6IGlucHV0LnNlc3Npb25JZCxcbiAgICAgICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgYm9va21hcmtlZDogaW5wdXQuYm9va21hcmtlZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgUHJpc21hLlByaXNtYUNsaWVudEtub3duUmVxdWVzdEVycm9yICYmXG4gICAgICAgICAgZXJyb3IuY29kZSA9PT0gXCJQMjAyNVwiIC8vIFJlY29yZCB0byB1cGRhdGUgbm90IGZvdW5kXG4gICAgICAgIClcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6IFwiTk9UX0ZPVU5EXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlNlc3Npb24gbm90IGZvdW5kIGluIHByb2plY3RcIixcbiAgICAgICAgICB9KTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSksXG4gIHB1Ymxpc2g6IHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIHByb2plY3RJZDogei5zdHJpbmcoKSxcbiAgICAgICAgc2Vzc2lvbklkOiB6LnN0cmluZygpLFxuICAgICAgICBwdWJsaWM6IHouYm9vbGVhbigpLFxuICAgICAgfSksXG4gICAgKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRocm93SWZOb0FjY2Vzcyh7XG4gICAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgc2NvcGU6IFwib2JqZWN0czpwdWJsaXNoXCIsXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBhdWRpdExvZyh7XG4gICAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgICAgcmVzb3VyY2VUeXBlOiBcInNlc3Npb25cIixcbiAgICAgICAgICByZXNvdXJjZUlkOiBpbnB1dC5zZXNzaW9uSWQsXG4gICAgICAgICAgYWN0aW9uOiBcInB1Ymxpc2hcIixcbiAgICAgICAgICBhZnRlcjogaW5wdXQucHVibGljLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGN0eC5wcmlzbWEudHJhY2VTZXNzaW9uLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIGlkX3Byb2plY3RJZDoge1xuICAgICAgICAgICAgICBpZDogaW5wdXQuc2Vzc2lvbklkLFxuICAgICAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBwdWJsaWM6IGlucHV0LnB1YmxpYyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgY29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcbiAgICAgICAgICBtZXNzYWdlOiBcInVuYWJsZSB0byBwdWJsaXNoIHNlc3Npb25cIixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSksXG59KTtcbiJdLCJuYW1lcyI6WyJ6Iiwic2Vzc2lvbnNWaWV3Q29scyIsInRhYmxlQ29sdW1uc1RvU3FsRmlsdGVyQW5kUHJlZml4IiwiY3JlYXRlVFJQQ1JvdXRlciIsInByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUiLCJwcm90ZWN0ZWRHZXRTZXNzaW9uUHJvY2VkdXJlIiwiUHJpc21hIiwic2luZ2xlRmlsdGVyIiwicGFnaW5hdGlvblpvZCIsInRocm93SWZOb0FjY2VzcyIsIlRSUENFcnJvciIsIm9yZGVyQnkiLCJvcmRlckJ5VG9QcmlzbWFTcWwiLCJhdWRpdExvZyIsIlNlc3Npb25GaWx0ZXJPcHRpb25zIiwib2JqZWN0IiwicHJvamVjdElkIiwic3RyaW5nIiwiZmlsdGVyIiwiYXJyYXkiLCJudWxsYWJsZSIsInNlc3Npb25Sb3V0ZXIiLCJhbGwiLCJpbnB1dCIsInF1ZXJ5IiwiY3R4IiwiZmlsdGVyQ29uZGl0aW9uIiwib3JkZXJCeUNvbmRpdGlvbiIsInNlc3Npb25zIiwicHJpc21hIiwiJHF1ZXJ5UmF3Iiwic3FsIiwibGltaXQiLCJwYWdlIiwibWFwIiwicyIsInVzZXJJZHMiLCJ0IiwiZSIsImNvbnNvbGUiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiYnlJZCIsInNlc3Npb25JZCIsInNlc3Npb24iLCJ0cmFjZVNlc3Npb24iLCJmaW5kRmlyc3QiLCJ3aGVyZSIsImlkIiwiaW5jbHVkZSIsInRyYWNlcyIsInRpbWVzdGFtcCIsInNjb3JlcyIsInRvdGFsQ29zdFF1ZXJ5IiwiY29zdERhdGEiLCJ0b3RhbENvc3QiLCJ1c2VycyIsIlNldCIsInVzZXJJZCIsImJvb2ttYXJrIiwiYm9va21hcmtlZCIsImJvb2xlYW4iLCJtdXRhdGlvbiIsInNjb3BlIiwicmVzb3VyY2VUeXBlIiwicmVzb3VyY2VJZCIsImFjdGlvbiIsImFmdGVyIiwidXBkYXRlIiwiaWRfcHJvamVjdElkIiwiZGF0YSIsIlByaXNtYUNsaWVudEtub3duUmVxdWVzdEVycm9yIiwicHVibGlzaCIsInB1YmxpYyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/sessions.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/traces.ts":
/*!******************************************!*\
  !*** ./src/server/api/routers/traces.ts ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   traceRouter: () => (/* binding */ traceRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _src_utils_zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/utils/zod */ \"(api)/./src/utils/zod.ts\");\n/* harmony import */ var _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/server/api/interfaces/filters */ \"(api)/./src/server/api/interfaces/filters.ts\");\n/* harmony import */ var _src_server_api_definitions_tracesTable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/src/server/api/definitions/tracesTable */ \"(api)/./src/server/api/definitions/tracesTable.ts\");\n/* harmony import */ var _src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/src/features/filters/server/filterToPrisma */ \"(api)/./src/features/filters/server/filterToPrisma.ts\");\n/* harmony import */ var _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/src/features/rbac/utils/checkAccess */ \"(api)/./src/features/rbac/utils/checkAccess.ts\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/src/server/api/interfaces/orderBy */ \"(api)/./src/server/api/interfaces/orderBy.ts\");\n/* harmony import */ var _src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/src/features/orderBy/server/orderByToPrisma */ \"(api)/./src/features/orderBy/server/orderByToPrisma.ts\");\n/* harmony import */ var _src_utils_instrumentation__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/src/utils/instrumentation */ \"(api)/./src/utils/instrumentation.ts\");\n/* harmony import */ var _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/src/features/audit-logs/auditLog */ \"(api)/./src/features/audit-logs/auditLog.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_3__, _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_4__, _src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_6__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_7__, _trpc_server__WEBPACK_IMPORTED_MODULE_8__, _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_9__, _src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_10__, _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_12__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_3__, _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_4__, _src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_6__, _src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_7__, _trpc_server__WEBPACK_IMPORTED_MODULE_8__, _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_9__, _src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_10__, _src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_12__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst TraceFilterOptions = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n    searchQuery: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().nullable(),\n    filter: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(_src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_4__.singleFilter).nullable(),\n    orderBy: _src_server_api_interfaces_orderBy__WEBPACK_IMPORTED_MODULE_9__.orderBy,\n    ..._src_utils_zod__WEBPACK_IMPORTED_MODULE_3__.paginationZod\n});\nconst traceRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.createTRPCRouter)({\n    all: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(TraceFilterOptions).query(async ({ input, ctx })=>{\n        const filterCondition = (0,_src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_6__.tableColumnsToSqlFilterAndPrefix)(input.filter ?? [], _src_server_api_definitions_tracesTable__WEBPACK_IMPORTED_MODULE_5__.tracesTableCols, \"traces\");\n        const orderByCondition = (0,_src_features_orderBy_server_orderByToPrisma__WEBPACK_IMPORTED_MODULE_10__.orderByToPrismaSql)(input.orderBy, _src_server_api_definitions_tracesTable__WEBPACK_IMPORTED_MODULE_5__.tracesTableCols);\n        // to improve query performance, add timeseries filter to observation queries as well\n        const timeseriesFilter = input.filter?.find((f)=>f.column === \"timestamp\" && f.type === \"datetime\");\n        const observationTimeseriesFilter = timeseriesFilter && timeseriesFilter.type === \"datetime\" ? (0,_src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_6__.datetimeFilterToPrismaSql)(\"start_time\", timeseriesFilter.operator, timeseriesFilter.value) : _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.empty;\n        const searchCondition = input.searchQuery ? _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.sql`AND (\n        t.\"id\" ILIKE ${`%${input.searchQuery}%`} OR \n        t.\"external_id\" ILIKE ${`%${input.searchQuery}%`} OR \n        t.\"user_id\" ILIKE ${`%${input.searchQuery}%`} OR \n        t.\"name\" ILIKE ${`%${input.searchQuery}%`}\n      )` : _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.empty;\n        const tracesQuery = createTracesQuery(_prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.sql`t.*,\n          t.\"user_id\" AS \"userId\",\n          t.\"metadata\" AS \"metadata\",\n          t.session_id AS \"sessionId\",\n          t.\"bookmarked\" AS \"bookmarked\",\n          COALESCE(tm.\"promptTokens\", 0)::int AS \"promptTokens\",\n          COALESCE(tm.\"completionTokens\", 0)::int AS \"completionTokens\",\n          COALESCE(tm.\"totalTokens\", 0)::int AS \"totalTokens\",\n          tl.latency AS \"latency\",\n          COALESCE(tm.\"calculatedTotalCost\", 0)::numeric AS \"calculatedTotalCost\",\n          COALESCE(tm.\"calculatedInputCost\", 0)::numeric AS \"calculatedInputCost\",\n          COALESCE(tm.\"calculatedOutputCost\", 0)::numeric AS \"calculatedOutputCost\"\n          `, input.projectId, observationTimeseriesFilter, input.page, input.limit, searchCondition, filterCondition, orderByCondition);\n        const traces = await (0,_src_utils_instrumentation__WEBPACK_IMPORTED_MODULE_11__.instrumentAsync)({\n            name: \"get-all-traces\"\n        }, async ()=>await ctx.prisma.$queryRaw(tracesQuery));\n        const countQyery = createTracesQuery(_prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.sql`count(*)`, input.projectId, observationTimeseriesFilter, 0, 1, searchCondition, filterCondition, _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.empty);\n        const totalTraces = await ctx.prisma.$queryRaw(countQyery);\n        // get scores for each trace individually to increase\n        // performance of the query above\n        const scores = await ctx.prisma.score.findMany({\n            where: {\n                trace: {\n                    projectId: input.projectId\n                },\n                traceId: {\n                    in: traces.map((t)=>t.id)\n                }\n            }\n        });\n        const totalTraceCount = totalTraces[0]?.count;\n        return {\n            traces: traces.map((trace)=>{\n                const filteredScores = scores.filter((s)=>s.traceId === trace.id);\n                return {\n                    ...trace,\n                    scores: filteredScores\n                };\n            }),\n            totalCount: totalTraceCount ? Number(totalTraceCount) : undefined\n        };\n    }),\n    filterOptions: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        const scores = await ctx.prisma.score.groupBy({\n            where: {\n                trace: {\n                    projectId: input.projectId\n                }\n            },\n            by: [\n                \"name\"\n            ]\n        });\n        const names = await ctx.prisma.trace.groupBy({\n            where: {\n                projectId: input.projectId\n            },\n            by: [\n                \"name\"\n            ],\n            // limiting to 1k trace names to avoid performance issues.\n            // some users have unique names for large amounts of traces\n            // sending all trace names to the FE exceeds the cloud function return size limit\n            take: 1000,\n            orderBy: {\n                _count: {\n                    id: \"desc\"\n                }\n            },\n            _count: {\n                id: true\n            }\n        });\n        const tags = await ctx.prisma.$queryRaw`\n        SELECT COUNT(*)::integer AS \"count\", tags.tag as value\n        FROM traces, UNNEST(traces.tags) AS tags(tag)\n        WHERE traces.project_id = ${input.projectId}\n        GROUP BY tags.tag;\n      `;\n        const res = {\n            scores_avg: scores.map((score)=>score.name),\n            name: names.filter((n)=>n.name !== null).map((name)=>({\n                    value: name.name ?? \"undefined\",\n                    count: name._count.id\n                })),\n            tags: tags\n        };\n        return res;\n    }),\n    byId: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedGetTraceProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        traceId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        const trace = await ctx.prisma.trace.findFirstOrThrow({\n            where: {\n                id: input.traceId\n            },\n            include: {\n                scores: true\n            }\n        });\n        const observations = await ctx.prisma.observationView.findMany({\n            select: {\n                id: true,\n                traceId: true,\n                projectId: true,\n                type: true,\n                startTime: true,\n                endTime: true,\n                name: true,\n                metadata: true,\n                parentObservationId: true,\n                level: true,\n                statusMessage: true,\n                version: true,\n                createdAt: true,\n                model: true,\n                modelParameters: true,\n                promptTokens: true,\n                completionTokens: true,\n                totalTokens: true,\n                unit: true,\n                completionStartTime: true,\n                promptId: true,\n                modelId: true,\n                inputPrice: true,\n                outputPrice: true,\n                totalPrice: true,\n                calculatedInputCost: true,\n                calculatedOutputCost: true,\n                calculatedTotalCost: true\n            },\n            where: {\n                traceId: {\n                    equals: input.traceId,\n                    not: null\n                }\n            }\n        });\n        const obsStartTimes = observations.map((o)=>o.startTime).sort((a, b)=>a.getTime() - b.getTime());\n        const obsEndTimes = observations.map((o)=>o.endTime).filter((t)=>t).sort((a, b)=>a.getTime() - b.getTime());\n        const latencyMs = obsStartTimes.length > 0 ? obsEndTimes.length > 0 ? obsEndTimes[obsEndTimes.length - 1].getTime() - obsStartTimes[0].getTime() : obsStartTimes.length > 1 ? obsStartTimes[obsStartTimes.length - 1].getTime() - obsStartTimes[0].getTime() : undefined : undefined;\n        return {\n            ...trace,\n            latency: latencyMs !== undefined ? latencyMs / 1000 : undefined,\n            observations: observations\n        };\n    }),\n    deleteMany: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        traceIds: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string()).min(1, \"Minimum 1 trace_Id is required.\"),\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_7__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"traces:delete\"\n        });\n        for (const traceId of input.traceIds){\n            await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_12__.auditLog)({\n                resourceType: \"trace\",\n                resourceId: traceId,\n                action: \"delete\",\n                session: ctx.session\n            });\n        }\n        return ctx.prisma.$transaction([\n            ctx.prisma.trace.deleteMany({\n                where: {\n                    id: {\n                        in: input.traceIds\n                    },\n                    projectId: input.projectId\n                }\n            }),\n            ctx.prisma.observation.deleteMany({\n                where: {\n                    traceId: {\n                        in: input.traceIds\n                    },\n                    projectId: input.projectId\n                }\n            })\n        ]);\n    }),\n    bookmark: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        traceId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        bookmarked: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_7__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"objects:bookmark\"\n        });\n        try {\n            await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_12__.auditLog)({\n                session: ctx.session,\n                resourceType: \"trace\",\n                resourceId: input.traceId,\n                action: \"bookmark\",\n                after: input.bookmarked\n            });\n            const trace = await ctx.prisma.trace.update({\n                where: {\n                    id: input.traceId,\n                    projectId: input.projectId\n                },\n                data: {\n                    bookmarked: input.bookmarked\n                }\n            });\n            return trace;\n        } catch (error) {\n            console.error(error);\n            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.PrismaClientKnownRequestError && error.code === \"P2025\" // Record to update not found\n            ) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                    code: \"NOT_FOUND\",\n                    message: \"Trace not found in project\"\n                });\n            } else {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\"\n                });\n            }\n        }\n    }),\n    publish: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        traceId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        public: zod__WEBPACK_IMPORTED_MODULE_0__.z.boolean()\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_7__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"objects:publish\"\n        });\n        try {\n            await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_12__.auditLog)({\n                session: ctx.session,\n                resourceType: \"trace\",\n                resourceId: input.traceId,\n                action: \"publish\",\n                after: input.public\n            });\n            const trace = await ctx.prisma.trace.update({\n                where: {\n                    id: input.traceId,\n                    projectId: input.projectId\n                },\n                data: {\n                    public: input.public\n                }\n            });\n            return trace;\n        } catch (error) {\n            console.error(error);\n            if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.PrismaClientKnownRequestError && error.code === \"P2025\" // Record to update not found\n            ) {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                    code: \"NOT_FOUND\",\n                    message: \"Trace not found in project\"\n                });\n            } else {\n                throw new _trpc_server__WEBPACK_IMPORTED_MODULE_8__.TRPCError({\n                    code: \"INTERNAL_SERVER_ERROR\"\n                });\n            }\n        }\n    }),\n    updateTags: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        traceId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        tags: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string())\n    })).mutation(async ({ input, ctx })=>{\n        (0,_src_features_rbac_utils_checkAccess__WEBPACK_IMPORTED_MODULE_7__.throwIfNoAccess)({\n            session: ctx.session,\n            projectId: input.projectId,\n            scope: \"objects:tag\"\n        });\n        try {\n            const trace = await ctx.prisma.trace.update({\n                where: {\n                    id: input.traceId,\n                    projectId: input.projectId\n                },\n                data: {\n                    tags: {\n                        set: input.tags\n                    }\n                }\n            });\n            await (0,_src_features_audit_logs_auditLog__WEBPACK_IMPORTED_MODULE_12__.auditLog)({\n                session: ctx.session,\n                resourceType: \"trace\",\n                resourceId: input.traceId,\n                action: \"updateTags\",\n                after: input.tags\n            });\n            return trace;\n        } catch (error) {\n            console.error(error);\n        }\n    })\n});\nfunction createTracesQuery(select, projectId, observationTimeseriesFilter, page, limit, searchCondition, filterCondition, orderByCondition) {\n    return _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.sql`\n  SELECT\n      ${select}\n  FROM\n    \"traces\" AS t\n  LEFT JOIN LATERAL (\n    SELECT\n      SUM(prompt_tokens) AS \"promptTokens\",\n      SUM(completion_tokens) AS \"completionTokens\",\n      SUM(total_tokens) AS \"totalTokens\",\n      SUM(calculated_total_cost) AS \"calculatedTotalCost\",\n      SUM(calculated_input_cost) AS \"calculatedInputCost\",\n      SUM(calculated_output_cost) AS \"calculatedOutputCost\"\n    FROM\n      \"observations_view\"\n    WHERE\n      trace_id = t.id\n      AND \"type\" = 'GENERATION'\n      AND \"project_id\" = ${projectId}\n      ${observationTimeseriesFilter}\n  ) AS tm ON true\n  LEFT JOIN LATERAL (\n    SELECT\n        EXTRACT(EPOCH FROM COALESCE(MAX(\"end_time\"), MAX(\"start_time\"))) - EXTRACT(EPOCH FROM MIN(\"start_time\"))::double precision AS \"latency\"\n    FROM\n        \"observations\"\n    WHERE\n        trace_id = t.id\n        AND \"project_id\" = ${projectId}\n         ${observationTimeseriesFilter}\n  ) AS tl ON true\n  LEFT JOIN LATERAL (\n    SELECT\n        jsonb_object_agg(name::text, avg_value::double precision) AS \"scores_avg\"\n    FROM (\n        SELECT\n            name,\n            AVG(value) avg_value\n        FROM\n            scores\n        WHERE\n            trace_id = t.id\n        GROUP BY\n            name\n    ) tmp\n  ) AS s_avg ON true\n  WHERE \n    t.\"project_id\" = ${projectId}\n    ${searchCondition}\n    ${filterCondition}\n  ${orderByCondition}\n  LIMIT ${limit}\n  OFFSET ${page * limit}\n`;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL3RyYWNlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0I7QUFNTztBQUMyQztBQUMxQjtBQUNtQjtBQUlqQjtBQUlJO0FBQ2tCO0FBQy9CO0FBQ3FCO0FBQ3FCO0FBRXJCO0FBRUE7QUFFOUQsTUFBTWdCLHFCQUFxQmhCLGtDQUFDQSxDQUFDaUIsTUFBTSxDQUFDO0lBQ2xDQyxXQUFXbEIsa0NBQUNBLENBQUNtQixNQUFNO0lBQ25CQyxhQUFhcEIsa0NBQUNBLENBQUNtQixNQUFNLEdBQUdFLFFBQVE7SUFDaENDLFFBQVF0QixrQ0FBQ0EsQ0FBQ3VCLEtBQUssQ0FBQ2pCLDRFQUFZQSxFQUFFZSxRQUFRO0lBQ3RDVCxTQUFTQSx1RUFBT0E7SUFDaEIsR0FBR1AseURBQWE7QUFDbEI7QUFTTyxNQUFNbUIsY0FBY3ZCLHNFQUFnQkEsQ0FBQztJQUMxQ3dCLEtBQUt0QiwyRUFBeUJBLENBQzNCdUIsS0FBSyxDQUFDVixvQkFDTlcsS0FBSyxDQUFDLE9BQU8sRUFBRUQsS0FBSyxFQUFFRSxHQUFHLEVBQUU7UUFDMUIsTUFBTUMsa0JBQWtCcEIsNkdBQWdDQSxDQUN0RGlCLE1BQU1KLE1BQU0sSUFBSSxFQUFFLEVBQ2xCZixvRkFBZUEsRUFDZjtRQUVGLE1BQU11QixtQkFBbUJqQixpR0FBa0JBLENBQ3pDYSxNQUFNZCxPQUFPLEVBQ2JMLG9GQUFlQTtRQUdqQixxRkFBcUY7UUFDckYsTUFBTXdCLG1CQUFtQkwsTUFBTUosTUFBTSxFQUFFVSxLQUNyQyxDQUFDQyxJQUFNQSxFQUFFQyxNQUFNLEtBQUssZUFBZUQsRUFBRUUsSUFBSSxLQUFLO1FBRWhELE1BQU1DLDhCQUNKTCxvQkFBb0JBLGlCQUFpQkksSUFBSSxLQUFLLGFBQzFDM0Isc0dBQXlCQSxDQUN2QixjQUNBdUIsaUJBQWlCTSxRQUFRLEVBQ3pCTixpQkFBaUJPLEtBQUssSUFFeEJsQyxrREFBTUEsQ0FBQ21DLEtBQUs7UUFF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Q0FBQ3FDLEdBQUcsQ0FBQzs7TUFFZCxFQUFFMkMsT0FBTzs7Ozs7Ozs7Ozs7Ozs7Ozt5QkFnQlUsRUFBRWxFLFVBQVU7TUFDL0IsRUFBRWtCLDRCQUE0Qjs7Ozs7Ozs7OzJCQVNULEVBQUVsQixVQUFVO1NBQzlCLEVBQUVrQiw0QkFBNEI7Ozs7Ozs7Ozs7Ozs7Ozs7OztxQkFrQmxCLEVBQUVsQixVQUFVO0lBQzdCLEVBQUVzQixnQkFBZ0I7SUFDbEIsRUFBRVgsZ0JBQWdCO0VBQ3BCLEVBQUVDLGlCQUFpQjtRQUNiLEVBQUVlLE1BQU07U0FDUCxFQUFFRCxPQUFPQyxNQUFNO0FBQ3hCLENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnMvdHJhY2VzLnRzPzkwMmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcblxuaW1wb3J0IHtcbiAgY3JlYXRlVFJQQ1JvdXRlcixcbiAgcHJvdGVjdGVkR2V0VHJhY2VQcm9jZWR1cmUsXG4gIHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUsXG59IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3RycGNcIjtcbmltcG9ydCB7IFByaXNtYSwgdHlwZSBUcmFjZSwgdHlwZSBPYnNlcnZhdGlvblZpZXcgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcbmltcG9ydCB7IHBhZ2luYXRpb25ab2QgfSBmcm9tIFwiQC9zcmMvdXRpbHMvem9kXCI7XG5pbXBvcnQgeyBzaW5nbGVGaWx0ZXIgfSBmcm9tIFwiQC9zcmMvc2VydmVyL2FwaS9pbnRlcmZhY2VzL2ZpbHRlcnNcIjtcbmltcG9ydCB7XG4gIHR5cGUgVHJhY2VPcHRpb25zLFxuICB0cmFjZXNUYWJsZUNvbHMsXG59IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL2RlZmluaXRpb25zL3RyYWNlc1RhYmxlXCI7XG5pbXBvcnQge1xuICBkYXRldGltZUZpbHRlclRvUHJpc21hU3FsLFxuICB0YWJsZUNvbHVtbnNUb1NxbEZpbHRlckFuZFByZWZpeCxcbn0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL2ZpbHRlcnMvc2VydmVyL2ZpbHRlclRvUHJpc21hXCI7XG5pbXBvcnQgeyB0aHJvd0lmTm9BY2Nlc3MgfSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvcmJhYy91dGlscy9jaGVja0FjY2Vzc1wiO1xuaW1wb3J0IHsgVFJQQ0Vycm9yIH0gZnJvbSBcIkB0cnBjL3NlcnZlclwiO1xuaW1wb3J0IHsgb3JkZXJCeSB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL2ludGVyZmFjZXMvb3JkZXJCeVwiO1xuaW1wb3J0IHsgb3JkZXJCeVRvUHJpc21hU3FsIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL29yZGVyQnkvc2VydmVyL29yZGVyQnlUb1ByaXNtYVwiO1xuaW1wb3J0IHsgdHlwZSBTcWwgfSBmcm9tIFwiQHByaXNtYS9jbGllbnQvcnVudGltZS9saWJyYXJ5XCI7XG5pbXBvcnQgeyBpbnN0cnVtZW50QXN5bmMgfSBmcm9tIFwiQC9zcmMvdXRpbHMvaW5zdHJ1bWVudGF0aW9uXCI7XG5pbXBvcnQgdHlwZSBEZWNpbWFsIGZyb20gXCJkZWNpbWFsLmpzXCI7XG5pbXBvcnQgeyBhdWRpdExvZyB9IGZyb20gXCJAL3NyYy9mZWF0dXJlcy9hdWRpdC1sb2dzL2F1ZGl0TG9nXCI7XG5cbmNvbnN0IFRyYWNlRmlsdGVyT3B0aW9ucyA9IHoub2JqZWN0KHtcbiAgcHJvamVjdElkOiB6LnN0cmluZygpLCAvLyBSZXF1aXJlZCBmb3IgcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICBzZWFyY2hRdWVyeTogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICBmaWx0ZXI6IHouYXJyYXkoc2luZ2xlRmlsdGVyKS5udWxsYWJsZSgpLFxuICBvcmRlckJ5OiBvcmRlckJ5LFxuICAuLi5wYWdpbmF0aW9uWm9kLFxufSk7XG5cbmV4cG9ydCB0eXBlIE9ic2VydmF0aW9uUmV0dXJuVHlwZSA9IE9taXQ8XG4gIE9ic2VydmF0aW9uVmlldyxcbiAgXCJpbnB1dFwiIHwgXCJvdXRwdXRcIlxuPiAmIHtcbiAgdHJhY2VJZDogc3RyaW5nO1xufTtcblxuZXhwb3J0IGNvbnN0IHRyYWNlUm91dGVyID0gY3JlYXRlVFJQQ1JvdXRlcih7XG4gIGFsbDogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChUcmFjZUZpbHRlck9wdGlvbnMpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgY29uc3QgZmlsdGVyQ29uZGl0aW9uID0gdGFibGVDb2x1bW5zVG9TcWxGaWx0ZXJBbmRQcmVmaXgoXG4gICAgICAgIGlucHV0LmZpbHRlciA/PyBbXSxcbiAgICAgICAgdHJhY2VzVGFibGVDb2xzLFxuICAgICAgICBcInRyYWNlc1wiLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IG9yZGVyQnlDb25kaXRpb24gPSBvcmRlckJ5VG9QcmlzbWFTcWwoXG4gICAgICAgIGlucHV0Lm9yZGVyQnksXG4gICAgICAgIHRyYWNlc1RhYmxlQ29scyxcbiAgICAgICk7XG5cbiAgICAgIC8vIHRvIGltcHJvdmUgcXVlcnkgcGVyZm9ybWFuY2UsIGFkZCB0aW1lc2VyaWVzIGZpbHRlciB0byBvYnNlcnZhdGlvbiBxdWVyaWVzIGFzIHdlbGxcbiAgICAgIGNvbnN0IHRpbWVzZXJpZXNGaWx0ZXIgPSBpbnB1dC5maWx0ZXI/LmZpbmQoXG4gICAgICAgIChmKSA9PiBmLmNvbHVtbiA9PT0gXCJ0aW1lc3RhbXBcIiAmJiBmLnR5cGUgPT09IFwiZGF0ZXRpbWVcIixcbiAgICAgICk7XG4gICAgICBjb25zdCBvYnNlcnZhdGlvblRpbWVzZXJpZXNGaWx0ZXIgPVxuICAgICAgICB0aW1lc2VyaWVzRmlsdGVyICYmIHRpbWVzZXJpZXNGaWx0ZXIudHlwZSA9PT0gXCJkYXRldGltZVwiXG4gICAgICAgICAgPyBkYXRldGltZUZpbHRlclRvUHJpc21hU3FsKFxuICAgICAgICAgICAgICBcInN0YXJ0X3RpbWVcIixcbiAgICAgICAgICAgICAgdGltZXNlcmllc0ZpbHRlci5vcGVyYXRvcixcbiAgICAgICAgICAgICAgdGltZXNlcmllc0ZpbHRlci52YWx1ZSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICA6IFByaXNtYS5lbXB0eTtcblxuICAgICAgY29uc3Qgc2VhcmNoQ29uZGl0aW9uID0gaW5wdXQuc2VhcmNoUXVlcnlcbiAgICAgICAgPyBQcmlzbWEuc3FsYEFORCAoXG4gICAgICAgIHQuXCJpZFwiIElMSUtFICR7YCUke2lucHV0LnNlYXJjaFF1ZXJ5fSVgfSBPUiBcbiAgICAgICAgdC5cImV4dGVybmFsX2lkXCIgSUxJS0UgJHtgJSR7aW5wdXQuc2VhcmNoUXVlcnl9JWB9IE9SIFxuICAgICAgICB0LlwidXNlcl9pZFwiIElMSUtFICR7YCUke2lucHV0LnNlYXJjaFF1ZXJ5fSVgfSBPUiBcbiAgICAgICAgdC5cIm5hbWVcIiBJTElLRSAke2AlJHtpbnB1dC5zZWFyY2hRdWVyeX0lYH1cbiAgICAgIClgXG4gICAgICAgIDogUHJpc21hLmVtcHR5O1xuXG4gICAgICBjb25zdCB0cmFjZXNRdWVyeSA9IGNyZWF0ZVRyYWNlc1F1ZXJ5KFxuICAgICAgICBQcmlzbWEuc3FsYHQuKixcbiAgICAgICAgICB0LlwidXNlcl9pZFwiIEFTIFwidXNlcklkXCIsXG4gICAgICAgICAgdC5cIm1ldGFkYXRhXCIgQVMgXCJtZXRhZGF0YVwiLFxuICAgICAgICAgIHQuc2Vzc2lvbl9pZCBBUyBcInNlc3Npb25JZFwiLFxuICAgICAgICAgIHQuXCJib29rbWFya2VkXCIgQVMgXCJib29rbWFya2VkXCIsXG4gICAgICAgICAgQ09BTEVTQ0UodG0uXCJwcm9tcHRUb2tlbnNcIiwgMCk6OmludCBBUyBcInByb21wdFRva2Vuc1wiLFxuICAgICAgICAgIENPQUxFU0NFKHRtLlwiY29tcGxldGlvblRva2Vuc1wiLCAwKTo6aW50IEFTIFwiY29tcGxldGlvblRva2Vuc1wiLFxuICAgICAgICAgIENPQUxFU0NFKHRtLlwidG90YWxUb2tlbnNcIiwgMCk6OmludCBBUyBcInRvdGFsVG9rZW5zXCIsXG4gICAgICAgICAgdGwubGF0ZW5jeSBBUyBcImxhdGVuY3lcIixcbiAgICAgICAgICBDT0FMRVNDRSh0bS5cImNhbGN1bGF0ZWRUb3RhbENvc3RcIiwgMCk6Om51bWVyaWMgQVMgXCJjYWxjdWxhdGVkVG90YWxDb3N0XCIsXG4gICAgICAgICAgQ09BTEVTQ0UodG0uXCJjYWxjdWxhdGVkSW5wdXRDb3N0XCIsIDApOjpudW1lcmljIEFTIFwiY2FsY3VsYXRlZElucHV0Q29zdFwiLFxuICAgICAgICAgIENPQUxFU0NFKHRtLlwiY2FsY3VsYXRlZE91dHB1dENvc3RcIiwgMCk6Om51bWVyaWMgQVMgXCJjYWxjdWxhdGVkT3V0cHV0Q29zdFwiXG4gICAgICAgICAgYCxcblxuICAgICAgICBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIG9ic2VydmF0aW9uVGltZXNlcmllc0ZpbHRlcixcbiAgICAgICAgaW5wdXQucGFnZSxcbiAgICAgICAgaW5wdXQubGltaXQsXG4gICAgICAgIHNlYXJjaENvbmRpdGlvbixcbiAgICAgICAgZmlsdGVyQ29uZGl0aW9uLFxuICAgICAgICBvcmRlckJ5Q29uZGl0aW9uLFxuICAgICAgKTtcblxuICAgICAgY29uc3QgdHJhY2VzID0gYXdhaXQgaW5zdHJ1bWVudEFzeW5jKFxuICAgICAgICB7IG5hbWU6IFwiZ2V0LWFsbC10cmFjZXNcIiB9LFxuICAgICAgICBhc3luYyAoKSA9PlxuICAgICAgICAgIGF3YWl0IGN0eC5wcmlzbWEuJHF1ZXJ5UmF3PFxuICAgICAgICAgICAgQXJyYXk8XG4gICAgICAgICAgICAgIFRyYWNlICYge1xuICAgICAgICAgICAgICAgIHByb21wdFRva2VuczogbnVtYmVyO1xuICAgICAgICAgICAgICAgIGNvbXBsZXRpb25Ub2tlbnM6IG51bWJlcjtcbiAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogbnVtYmVyO1xuICAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6IG51bWJlcjtcbiAgICAgICAgICAgICAgICBsYXRlbmN5OiBudW1iZXIgfCBudWxsO1xuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZWRUb3RhbENvc3Q6IERlY2ltYWwgfCBudWxsO1xuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZWRJbnB1dENvc3Q6IERlY2ltYWwgfCBudWxsO1xuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZWRPdXRwdXRDb3N0OiBEZWNpbWFsIHwgbnVsbDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPlxuICAgICAgICAgID4odHJhY2VzUXVlcnkpLFxuICAgICAgKTtcblxuICAgICAgY29uc3QgY291bnRReWVyeSA9IGNyZWF0ZVRyYWNlc1F1ZXJ5KFxuICAgICAgICBQcmlzbWEuc3FsYGNvdW50KCopYCxcbiAgICAgICAgaW5wdXQucHJvamVjdElkLFxuICAgICAgICBvYnNlcnZhdGlvblRpbWVzZXJpZXNGaWx0ZXIsXG4gICAgICAgIDAsXG4gICAgICAgIDEsXG4gICAgICAgIHNlYXJjaENvbmRpdGlvbixcbiAgICAgICAgZmlsdGVyQ29uZGl0aW9uLFxuICAgICAgICBQcmlzbWEuZW1wdHksXG4gICAgICApO1xuXG4gICAgICBjb25zdCB0b3RhbFRyYWNlcyA9XG4gICAgICAgIGF3YWl0IGN0eC5wcmlzbWEuJHF1ZXJ5UmF3PEFycmF5PHsgY291bnQ6IGJpZ2ludCB9Pj4oY291bnRReWVyeSk7XG5cbiAgICAgIC8vIGdldCBzY29yZXMgZm9yIGVhY2ggdHJhY2UgaW5kaXZpZHVhbGx5IHRvIGluY3JlYXNlXG4gICAgICAvLyBwZXJmb3JtYW5jZSBvZiB0aGUgcXVlcnkgYWJvdmVcbiAgICAgIGNvbnN0IHNjb3JlcyA9IGF3YWl0IGN0eC5wcmlzbWEuc2NvcmUuZmluZE1hbnkoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHRyYWNlOiB7XG4gICAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRyYWNlSWQ6IHtcbiAgICAgICAgICAgIGluOiB0cmFjZXMubWFwKCh0KSA9PiB0LmlkKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBjb25zdCB0b3RhbFRyYWNlQ291bnQgPSB0b3RhbFRyYWNlc1swXT8uY291bnQ7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0cmFjZXM6IHRyYWNlcy5tYXAoKHRyYWNlKSA9PiB7XG4gICAgICAgICAgY29uc3QgZmlsdGVyZWRTY29yZXMgPSBzY29yZXMuZmlsdGVyKChzKSA9PiBzLnRyYWNlSWQgPT09IHRyYWNlLmlkKTtcbiAgICAgICAgICByZXR1cm4geyAuLi50cmFjZSwgc2NvcmVzOiBmaWx0ZXJlZFNjb3JlcyB9O1xuICAgICAgICB9KSxcbiAgICAgICAgdG90YWxDb3VudDogdG90YWxUcmFjZUNvdW50ID8gTnVtYmVyKHRvdGFsVHJhY2VDb3VudCkgOiB1bmRlZmluZWQsXG4gICAgICB9O1xuICAgIH0pLFxuICBmaWx0ZXJPcHRpb25zOiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KHoub2JqZWN0KHsgcHJvamVjdElkOiB6LnN0cmluZygpIH0pKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIGNvbnN0IHNjb3JlcyA9IGF3YWl0IGN0eC5wcmlzbWEuc2NvcmUuZ3JvdXBCeSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgdHJhY2U6IHtcbiAgICAgICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGJ5OiBbXCJuYW1lXCJdLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBuYW1lcyA9IGF3YWl0IGN0eC5wcmlzbWEudHJhY2UuZ3JvdXBCeSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIH0sXG4gICAgICAgIGJ5OiBbXCJuYW1lXCJdLFxuICAgICAgICAvLyBsaW1pdGluZyB0byAxayB0cmFjZSBuYW1lcyB0byBhdm9pZCBwZXJmb3JtYW5jZSBpc3N1ZXMuXG4gICAgICAgIC8vIHNvbWUgdXNlcnMgaGF2ZSB1bmlxdWUgbmFtZXMgZm9yIGxhcmdlIGFtb3VudHMgb2YgdHJhY2VzXG4gICAgICAgIC8vIHNlbmRpbmcgYWxsIHRyYWNlIG5hbWVzIHRvIHRoZSBGRSBleGNlZWRzIHRoZSBjbG91ZCBmdW5jdGlvbiByZXR1cm4gc2l6ZSBsaW1pdFxuICAgICAgICB0YWtlOiAxMDAwLFxuICAgICAgICBvcmRlckJ5OiB7XG4gICAgICAgICAgX2NvdW50OiB7XG4gICAgICAgICAgICBpZDogXCJkZXNjXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgX2NvdW50OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHRhZ3M6IHsgY291bnQ6IG51bWJlcjsgdmFsdWU6IHN0cmluZyB9W10gPSBhd2FpdCBjdHgucHJpc21hXG4gICAgICAgIC4kcXVlcnlSYXdgXG4gICAgICAgIFNFTEVDVCBDT1VOVCgqKTo6aW50ZWdlciBBUyBcImNvdW50XCIsIHRhZ3MudGFnIGFzIHZhbHVlXG4gICAgICAgIEZST00gdHJhY2VzLCBVTk5FU1QodHJhY2VzLnRhZ3MpIEFTIHRhZ3ModGFnKVxuICAgICAgICBXSEVSRSB0cmFjZXMucHJvamVjdF9pZCA9ICR7aW5wdXQucHJvamVjdElkfVxuICAgICAgICBHUk9VUCBCWSB0YWdzLnRhZztcbiAgICAgIGA7XG4gICAgICBjb25zdCByZXM6IFRyYWNlT3B0aW9ucyA9IHtcbiAgICAgICAgc2NvcmVzX2F2Zzogc2NvcmVzLm1hcCgoc2NvcmUpID0+IHNjb3JlLm5hbWUpLFxuICAgICAgICBuYW1lOiBuYW1lc1xuICAgICAgICAgIC5maWx0ZXIoKG4pID0+IG4ubmFtZSAhPT0gbnVsbClcbiAgICAgICAgICAubWFwKChuYW1lKSA9PiAoe1xuICAgICAgICAgICAgdmFsdWU6IG5hbWUubmFtZSA/PyBcInVuZGVmaW5lZFwiLFxuICAgICAgICAgICAgY291bnQ6IG5hbWUuX2NvdW50LmlkLFxuICAgICAgICAgIH0pKSxcbiAgICAgICAgdGFnczogdGFncyxcbiAgICAgIH07XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH0pLFxuICBieUlkOiBwcm90ZWN0ZWRHZXRUcmFjZVByb2NlZHVyZVxuICAgIC5pbnB1dCh6Lm9iamVjdCh7IHRyYWNlSWQ6IHouc3RyaW5nKCkgfSkpXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgY29uc3QgdHJhY2UgPSBhd2FpdCBjdHgucHJpc21hLnRyYWNlLmZpbmRGaXJzdE9yVGhyb3coe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGlkOiBpbnB1dC50cmFjZUlkLFxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgc2NvcmVzOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBvYnNlcnZhdGlvbnMgPSBhd2FpdCBjdHgucHJpc21hLm9ic2VydmF0aW9uVmlldy5maW5kTWFueSh7XG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgIHRyYWNlSWQ6IHRydWUsXG4gICAgICAgICAgcHJvamVjdElkOiB0cnVlLFxuICAgICAgICAgIHR5cGU6IHRydWUsXG4gICAgICAgICAgc3RhcnRUaW1lOiB0cnVlLFxuICAgICAgICAgIGVuZFRpbWU6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICBtZXRhZGF0YTogdHJ1ZSxcbiAgICAgICAgICBwYXJlbnRPYnNlcnZhdGlvbklkOiB0cnVlLFxuICAgICAgICAgIGxldmVsOiB0cnVlLFxuICAgICAgICAgIHN0YXR1c01lc3NhZ2U6IHRydWUsXG4gICAgICAgICAgdmVyc2lvbjogdHJ1ZSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IHRydWUsXG4gICAgICAgICAgbW9kZWw6IHRydWUsXG4gICAgICAgICAgbW9kZWxQYXJhbWV0ZXJzOiB0cnVlLFxuICAgICAgICAgIHByb21wdFRva2VuczogdHJ1ZSxcbiAgICAgICAgICBjb21wbGV0aW9uVG9rZW5zOiB0cnVlLFxuICAgICAgICAgIHRvdGFsVG9rZW5zOiB0cnVlLFxuICAgICAgICAgIHVuaXQ6IHRydWUsXG4gICAgICAgICAgY29tcGxldGlvblN0YXJ0VGltZTogdHJ1ZSxcbiAgICAgICAgICBwcm9tcHRJZDogdHJ1ZSxcbiAgICAgICAgICBtb2RlbElkOiB0cnVlLFxuICAgICAgICAgIGlucHV0UHJpY2U6IHRydWUsXG4gICAgICAgICAgb3V0cHV0UHJpY2U6IHRydWUsXG4gICAgICAgICAgdG90YWxQcmljZTogdHJ1ZSxcbiAgICAgICAgICBjYWxjdWxhdGVkSW5wdXRDb3N0OiB0cnVlLFxuICAgICAgICAgIGNhbGN1bGF0ZWRPdXRwdXRDb3N0OiB0cnVlLFxuICAgICAgICAgIGNhbGN1bGF0ZWRUb3RhbENvc3Q6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgdHJhY2VJZDoge1xuICAgICAgICAgICAgZXF1YWxzOiBpbnB1dC50cmFjZUlkLFxuICAgICAgICAgICAgbm90OiBudWxsLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgb2JzU3RhcnRUaW1lcyA9IG9ic2VydmF0aW9uc1xuICAgICAgICAubWFwKChvKSA9PiBvLnN0YXJ0VGltZSlcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZ2V0VGltZSgpIC0gYi5nZXRUaW1lKCkpO1xuICAgICAgY29uc3Qgb2JzRW5kVGltZXMgPSBvYnNlcnZhdGlvbnNcbiAgICAgICAgLm1hcCgobykgPT4gby5lbmRUaW1lKVxuICAgICAgICAuZmlsdGVyKCh0KSA9PiB0KVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gKGEgYXMgRGF0ZSkuZ2V0VGltZSgpIC0gKGIgYXMgRGF0ZSkuZ2V0VGltZSgpKTtcbiAgICAgIGNvbnN0IGxhdGVuY3lNcyA9XG4gICAgICAgIG9ic1N0YXJ0VGltZXMubGVuZ3RoID4gMFxuICAgICAgICAgID8gb2JzRW5kVGltZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyAob2JzRW5kVGltZXNbb2JzRW5kVGltZXMubGVuZ3RoIC0gMV0gYXMgRGF0ZSkuZ2V0VGltZSgpIC1cbiAgICAgICAgICAgICAgb2JzU3RhcnRUaW1lc1swXSEuZ2V0VGltZSgpXG4gICAgICAgICAgICA6IG9ic1N0YXJ0VGltZXMubGVuZ3RoID4gMVxuICAgICAgICAgICAgICA/IG9ic1N0YXJ0VGltZXNbb2JzU3RhcnRUaW1lcy5sZW5ndGggLSAxXSEuZ2V0VGltZSgpIC1cbiAgICAgICAgICAgICAgICBvYnNTdGFydFRpbWVzWzBdIS5nZXRUaW1lKClcbiAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4udHJhY2UsXG4gICAgICAgIGxhdGVuY3k6IGxhdGVuY3lNcyAhPT0gdW5kZWZpbmVkID8gbGF0ZW5jeU1zIC8gMTAwMCA6IHVuZGVmaW5lZCxcbiAgICAgICAgb2JzZXJ2YXRpb25zOiBvYnNlcnZhdGlvbnMgYXMgT2JzZXJ2YXRpb25SZXR1cm5UeXBlW10sXG4gICAgICB9O1xuICAgIH0pLFxuICBkZWxldGVNYW55OiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICB0cmFjZUlkczogei5hcnJheSh6LnN0cmluZygpKS5taW4oMSwgXCJNaW5pbXVtIDEgdHJhY2VfSWQgaXMgcmVxdWlyZWQuXCIpLFxuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICB9KSxcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgdGhyb3dJZk5vQWNjZXNzKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICBzY29wZTogXCJ0cmFjZXM6ZGVsZXRlXCIsXG4gICAgICB9KTtcblxuICAgICAgZm9yIChjb25zdCB0cmFjZUlkIG9mIGlucHV0LnRyYWNlSWRzKSB7XG4gICAgICAgIGF3YWl0IGF1ZGl0TG9nKHtcbiAgICAgICAgICByZXNvdXJjZVR5cGU6IFwidHJhY2VcIixcbiAgICAgICAgICByZXNvdXJjZUlkOiB0cmFjZUlkLFxuICAgICAgICAgIGFjdGlvbjogXCJkZWxldGVcIixcbiAgICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjdHgucHJpc21hLiR0cmFuc2FjdGlvbihbXG4gICAgICAgIGN0eC5wcmlzbWEudHJhY2UuZGVsZXRlTWFueSh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIGlkOiB7XG4gICAgICAgICAgICAgIGluOiBpbnB1dC50cmFjZUlkcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgICAgY3R4LnByaXNtYS5vYnNlcnZhdGlvbi5kZWxldGVNYW55KHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgdHJhY2VJZDoge1xuICAgICAgICAgICAgICBpbjogaW5wdXQudHJhY2VJZHMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICBdKTtcbiAgICB9KSxcbiAgYm9va21hcms6IHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmVcbiAgICAuaW5wdXQoXG4gICAgICB6Lm9iamVjdCh7XG4gICAgICAgIHRyYWNlSWQ6IHouc3RyaW5nKCksXG4gICAgICAgIHByb2plY3RJZDogei5zdHJpbmcoKSxcbiAgICAgICAgYm9va21hcmtlZDogei5ib29sZWFuKCksXG4gICAgICB9KSxcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgdGhyb3dJZk5vQWNjZXNzKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICBzY29wZTogXCJvYmplY3RzOmJvb2ttYXJrXCIsXG4gICAgICB9KTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGF1ZGl0TG9nKHtcbiAgICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgICByZXNvdXJjZVR5cGU6IFwidHJhY2VcIixcbiAgICAgICAgICByZXNvdXJjZUlkOiBpbnB1dC50cmFjZUlkLFxuICAgICAgICAgIGFjdGlvbjogXCJib29rbWFya1wiLFxuICAgICAgICAgIGFmdGVyOiBpbnB1dC5ib29rbWFya2VkLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdHJhY2UgPSBhd2FpdCBjdHgucHJpc21hLnRyYWNlLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIGlkOiBpbnB1dC50cmFjZUlkLFxuICAgICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBib29rbWFya2VkOiBpbnB1dC5ib29rbWFya2VkLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHJhY2U7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgUHJpc21hLlByaXNtYUNsaWVudEtub3duUmVxdWVzdEVycm9yICYmXG4gICAgICAgICAgZXJyb3IuY29kZSA9PT0gXCJQMjAyNVwiIC8vIFJlY29yZCB0byB1cGRhdGUgbm90IGZvdW5kXG4gICAgICAgICkge1xuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogXCJOT1RfRk9VTkRcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IFwiVHJhY2Ugbm90IGZvdW5kIGluIHByb2plY3RcIixcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSxcbiAgcHVibGlzaDogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgICB0cmFjZUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwdWJsaWM6IHouYm9vbGVhbigpLFxuICAgICAgfSksXG4gICAgKVxuICAgIC5tdXRhdGlvbihhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIHRocm93SWZOb0FjY2Vzcyh7XG4gICAgICAgIHNlc3Npb246IGN0eC5zZXNzaW9uLFxuICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgc2NvcGU6IFwib2JqZWN0czpwdWJsaXNoXCIsXG4gICAgICB9KTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGF1ZGl0TG9nKHtcbiAgICAgICAgICBzZXNzaW9uOiBjdHguc2Vzc2lvbixcbiAgICAgICAgICByZXNvdXJjZVR5cGU6IFwidHJhY2VcIixcbiAgICAgICAgICByZXNvdXJjZUlkOiBpbnB1dC50cmFjZUlkLFxuICAgICAgICAgIGFjdGlvbjogXCJwdWJsaXNoXCIsXG4gICAgICAgICAgYWZ0ZXI6IGlucHV0LnB1YmxpYyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHRyYWNlID0gYXdhaXQgY3R4LnByaXNtYS50cmFjZS51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBpZDogaW5wdXQudHJhY2VJZCxcbiAgICAgICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgcHVibGljOiBpbnB1dC5wdWJsaWMsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cmFjZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBQcmlzbWEuUHJpc21hQ2xpZW50S25vd25SZXF1ZXN0RXJyb3IgJiZcbiAgICAgICAgICBlcnJvci5jb2RlID09PSBcIlAyMDI1XCIgLy8gUmVjb3JkIHRvIHVwZGF0ZSBub3QgZm91bmRcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiBcIk5PVF9GT1VORFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJUcmFjZSBub3QgZm91bmQgaW4gcHJvamVjdFwiLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgICAgICAgY29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLFxuICB1cGRhdGVUYWdzOiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICAgIHRyYWNlSWQ6IHouc3RyaW5nKCksXG4gICAgICAgIHRhZ3M6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgICB9KSxcbiAgICApXG4gICAgLm11dGF0aW9uKGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgdGhyb3dJZk5vQWNjZXNzKHtcbiAgICAgICAgc2Vzc2lvbjogY3R4LnNlc3Npb24sXG4gICAgICAgIHByb2plY3RJZDogaW5wdXQucHJvamVjdElkLFxuICAgICAgICBzY29wZTogXCJvYmplY3RzOnRhZ1wiLFxuICAgICAgfSk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB0cmFjZSA9IGF3YWl0IGN0eC5wcmlzbWEudHJhY2UudXBkYXRlKHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgaWQ6IGlucHV0LnRyYWNlSWQsXG4gICAgICAgICAgICBwcm9qZWN0SWQ6IGlucHV0LnByb2plY3RJZCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHRhZ3M6IHtcbiAgICAgICAgICAgICAgc2V0OiBpbnB1dC50YWdzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgYXVkaXRMb2coe1xuICAgICAgICAgIHNlc3Npb246IGN0eC5zZXNzaW9uLFxuICAgICAgICAgIHJlc291cmNlVHlwZTogXCJ0cmFjZVwiLFxuICAgICAgICAgIHJlc291cmNlSWQ6IGlucHV0LnRyYWNlSWQsXG4gICAgICAgICAgYWN0aW9uOiBcInVwZGF0ZVRhZ3NcIixcbiAgICAgICAgICBhZnRlcjogaW5wdXQudGFncyxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0cmFjZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH0pLFxufSk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVRyYWNlc1F1ZXJ5KFxuICBzZWxlY3Q6IFNxbCxcbiAgcHJvamVjdElkOiBzdHJpbmcsXG4gIG9ic2VydmF0aW9uVGltZXNlcmllc0ZpbHRlcjogU3FsLFxuICBwYWdlOiBudW1iZXIsXG4gIGxpbWl0OiBudW1iZXIsXG4gIHNlYXJjaENvbmRpdGlvbjogU3FsLFxuICBmaWx0ZXJDb25kaXRpb246IFNxbCxcbiAgb3JkZXJCeUNvbmRpdGlvbjogU3FsLFxuKSB7XG4gIHJldHVybiBQcmlzbWEuc3FsYFxuICBTRUxFQ1RcbiAgICAgICR7c2VsZWN0fVxuICBGUk9NXG4gICAgXCJ0cmFjZXNcIiBBUyB0XG4gIExFRlQgSk9JTiBMQVRFUkFMIChcbiAgICBTRUxFQ1RcbiAgICAgIFNVTShwcm9tcHRfdG9rZW5zKSBBUyBcInByb21wdFRva2Vuc1wiLFxuICAgICAgU1VNKGNvbXBsZXRpb25fdG9rZW5zKSBBUyBcImNvbXBsZXRpb25Ub2tlbnNcIixcbiAgICAgIFNVTSh0b3RhbF90b2tlbnMpIEFTIFwidG90YWxUb2tlbnNcIixcbiAgICAgIFNVTShjYWxjdWxhdGVkX3RvdGFsX2Nvc3QpIEFTIFwiY2FsY3VsYXRlZFRvdGFsQ29zdFwiLFxuICAgICAgU1VNKGNhbGN1bGF0ZWRfaW5wdXRfY29zdCkgQVMgXCJjYWxjdWxhdGVkSW5wdXRDb3N0XCIsXG4gICAgICBTVU0oY2FsY3VsYXRlZF9vdXRwdXRfY29zdCkgQVMgXCJjYWxjdWxhdGVkT3V0cHV0Q29zdFwiXG4gICAgRlJPTVxuICAgICAgXCJvYnNlcnZhdGlvbnNfdmlld1wiXG4gICAgV0hFUkVcbiAgICAgIHRyYWNlX2lkID0gdC5pZFxuICAgICAgQU5EIFwidHlwZVwiID0gJ0dFTkVSQVRJT04nXG4gICAgICBBTkQgXCJwcm9qZWN0X2lkXCIgPSAke3Byb2plY3RJZH1cbiAgICAgICR7b2JzZXJ2YXRpb25UaW1lc2VyaWVzRmlsdGVyfVxuICApIEFTIHRtIE9OIHRydWVcbiAgTEVGVCBKT0lOIExBVEVSQUwgKFxuICAgIFNFTEVDVFxuICAgICAgICBFWFRSQUNUKEVQT0NIIEZST00gQ09BTEVTQ0UoTUFYKFwiZW5kX3RpbWVcIiksIE1BWChcInN0YXJ0X3RpbWVcIikpKSAtIEVYVFJBQ1QoRVBPQ0ggRlJPTSBNSU4oXCJzdGFydF90aW1lXCIpKTo6ZG91YmxlIHByZWNpc2lvbiBBUyBcImxhdGVuY3lcIlxuICAgIEZST01cbiAgICAgICAgXCJvYnNlcnZhdGlvbnNcIlxuICAgIFdIRVJFXG4gICAgICAgIHRyYWNlX2lkID0gdC5pZFxuICAgICAgICBBTkQgXCJwcm9qZWN0X2lkXCIgPSAke3Byb2plY3RJZH1cbiAgICAgICAgICR7b2JzZXJ2YXRpb25UaW1lc2VyaWVzRmlsdGVyfVxuICApIEFTIHRsIE9OIHRydWVcbiAgTEVGVCBKT0lOIExBVEVSQUwgKFxuICAgIFNFTEVDVFxuICAgICAgICBqc29uYl9vYmplY3RfYWdnKG5hbWU6OnRleHQsIGF2Z192YWx1ZTo6ZG91YmxlIHByZWNpc2lvbikgQVMgXCJzY29yZXNfYXZnXCJcbiAgICBGUk9NIChcbiAgICAgICAgU0VMRUNUXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgQVZHKHZhbHVlKSBhdmdfdmFsdWVcbiAgICAgICAgRlJPTVxuICAgICAgICAgICAgc2NvcmVzXG4gICAgICAgIFdIRVJFXG4gICAgICAgICAgICB0cmFjZV9pZCA9IHQuaWRcbiAgICAgICAgR1JPVVAgQllcbiAgICAgICAgICAgIG5hbWVcbiAgICApIHRtcFxuICApIEFTIHNfYXZnIE9OIHRydWVcbiAgV0hFUkUgXG4gICAgdC5cInByb2plY3RfaWRcIiA9ICR7cHJvamVjdElkfVxuICAgICR7c2VhcmNoQ29uZGl0aW9ufVxuICAgICR7ZmlsdGVyQ29uZGl0aW9ufVxuICAke29yZGVyQnlDb25kaXRpb259XG4gIExJTUlUICR7bGltaXR9XG4gIE9GRlNFVCAke3BhZ2UgKiBsaW1pdH1cbmA7XG59XG4iXSwibmFtZXMiOlsieiIsImNyZWF0ZVRSUENSb3V0ZXIiLCJwcm90ZWN0ZWRHZXRUcmFjZVByb2NlZHVyZSIsInByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUiLCJQcmlzbWEiLCJwYWdpbmF0aW9uWm9kIiwic2luZ2xlRmlsdGVyIiwidHJhY2VzVGFibGVDb2xzIiwiZGF0ZXRpbWVGaWx0ZXJUb1ByaXNtYVNxbCIsInRhYmxlQ29sdW1uc1RvU3FsRmlsdGVyQW5kUHJlZml4IiwidGhyb3dJZk5vQWNjZXNzIiwiVFJQQ0Vycm9yIiwib3JkZXJCeSIsIm9yZGVyQnlUb1ByaXNtYVNxbCIsImluc3RydW1lbnRBc3luYyIsImF1ZGl0TG9nIiwiVHJhY2VGaWx0ZXJPcHRpb25zIiwib2JqZWN0IiwicHJvamVjdElkIiwic3RyaW5nIiwic2VhcmNoUXVlcnkiLCJudWxsYWJsZSIsImZpbHRlciIsImFycmF5IiwidHJhY2VSb3V0ZXIiLCJhbGwiLCJpbnB1dCIsInF1ZXJ5IiwiY3R4IiwiZmlsdGVyQ29uZGl0aW9uIiwib3JkZXJCeUNvbmRpdGlvbiIsInRpbWVzZXJpZXNGaWx0ZXIiLCJmaW5kIiwiZiIsImNvbHVtbiIsInR5cGUiLCJvYnNlcnZhdGlvblRpbWVzZXJpZXNGaWx0ZXIiLCJvcGVyYXRvciIsInZhbHVlIiwiZW1wdHkiLCJzZWFyY2hDb25kaXRpb24iLCJzcWwiLCJ0cmFjZXNRdWVyeSIsImNyZWF0ZVRyYWNlc1F1ZXJ5IiwicGFnZSIsImxpbWl0IiwidHJhY2VzIiwibmFtZSIsInByaXNtYSIsIiRxdWVyeVJhdyIsImNvdW50UXllcnkiLCJ0b3RhbFRyYWNlcyIsInNjb3JlcyIsInNjb3JlIiwiZmluZE1hbnkiLCJ3aGVyZSIsInRyYWNlIiwidHJhY2VJZCIsImluIiwibWFwIiwidCIsImlkIiwidG90YWxUcmFjZUNvdW50IiwiY291bnQiLCJmaWx0ZXJlZFNjb3JlcyIsInMiLCJ0b3RhbENvdW50IiwiTnVtYmVyIiwidW5kZWZpbmVkIiwiZmlsdGVyT3B0aW9ucyIsImdyb3VwQnkiLCJieSIsIm5hbWVzIiwidGFrZSIsIl9jb3VudCIsInRhZ3MiLCJyZXMiLCJzY29yZXNfYXZnIiwibiIsImJ5SWQiLCJmaW5kRmlyc3RPclRocm93IiwiaW5jbHVkZSIsIm9ic2VydmF0aW9ucyIsIm9ic2VydmF0aW9uVmlldyIsInNlbGVjdCIsInN0YXJ0VGltZSIsImVuZFRpbWUiLCJtZXRhZGF0YSIsInBhcmVudE9ic2VydmF0aW9uSWQiLCJsZXZlbCIsInN0YXR1c01lc3NhZ2UiLCJ2ZXJzaW9uIiwiY3JlYXRlZEF0IiwibW9kZWwiLCJtb2RlbFBhcmFtZXRlcnMiLCJwcm9tcHRUb2tlbnMiLCJjb21wbGV0aW9uVG9rZW5zIiwidG90YWxUb2tlbnMiLCJ1bml0IiwiY29tcGxldGlvblN0YXJ0VGltZSIsInByb21wdElkIiwibW9kZWxJZCIsImlucHV0UHJpY2UiLCJvdXRwdXRQcmljZSIsInRvdGFsUHJpY2UiLCJjYWxjdWxhdGVkSW5wdXRDb3N0IiwiY2FsY3VsYXRlZE91dHB1dENvc3QiLCJjYWxjdWxhdGVkVG90YWxDb3N0IiwiZXF1YWxzIiwibm90Iiwib2JzU3RhcnRUaW1lcyIsIm8iLCJzb3J0IiwiYSIsImIiLCJnZXRUaW1lIiwib2JzRW5kVGltZXMiLCJsYXRlbmN5TXMiLCJsZW5ndGgiLCJsYXRlbmN5IiwiZGVsZXRlTWFueSIsInRyYWNlSWRzIiwibWluIiwibXV0YXRpb24iLCJzZXNzaW9uIiwic2NvcGUiLCJyZXNvdXJjZVR5cGUiLCJyZXNvdXJjZUlkIiwiYWN0aW9uIiwiJHRyYW5zYWN0aW9uIiwib2JzZXJ2YXRpb24iLCJib29rbWFyayIsImJvb2ttYXJrZWQiLCJib29sZWFuIiwiYWZ0ZXIiLCJ1cGRhdGUiLCJkYXRhIiwiZXJyb3IiLCJjb25zb2xlIiwiUHJpc21hQ2xpZW50S25vd25SZXF1ZXN0RXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInB1Ymxpc2giLCJwdWJsaWMiLCJ1cGRhdGVUYWdzIiwic2V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/traces.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/routers/users.ts":
/*!*****************************************!*\
  !*** ./src/server/api/routers/users.ts ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   userRouter: () => (/* binding */ userRouter)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/server/api/trpc */ \"(api)/./src/server/api/trpc.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _src_utils_zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/utils/zod */ \"(api)/./src/utils/zod.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_3__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__, _src_utils_zod__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\nconst UserFilterOptions = zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n    projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n});\nconst UserAllOptions = UserFilterOptions.extend({\n    ..._src_utils_zod__WEBPACK_IMPORTED_MODULE_3__.paginationZod\n});\nconst userRouter = (0,_src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.createTRPCRouter)({\n    all: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(UserAllOptions).query(async ({ input, ctx })=>{\n        const uniqueUsers = await ctx.prisma.trace.findMany({\n            where: {\n                projectId: input.projectId\n            },\n            select: {\n                userId: true\n            },\n            distinct: [\n                \"userId\"\n            ]\n        });\n        const topUsers = await ctx.prisma.$queryRaw`\n        SELECT\n          t.user_id AS \"userId\",\n          COUNT(t.id)::int AS \"totalTraces\"\n        FROM\n          traces t\n        WHERE\n          t.user_id IS NOT NULL\n          AND t.user_id != ''\n          AND t.project_id = ${input.projectId}\n        GROUP BY\n          t.user_id\n        ORDER BY\n          \"totalTraces\" DESC\n        LIMIT\n          ${input.limit} OFFSET ${input.page * input.limit};\n      `;\n        return {\n            totalUsers: uniqueUsers.length,\n            users: topUsers\n        };\n    }),\n    metrics: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        userIds: zod__WEBPACK_IMPORTED_MODULE_0__.z.array(zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1))\n    })).query(async ({ input, ctx })=>{\n        if (input.userIds.length === 0) {\n            return [];\n        }\n        const users = await ctx.prisma.$queryRaw`\n    SELECT\n      t.user_id AS \"userId\",\n      MIN(t.\"timestamp\") AS \"firstTrace\",\n      MAX(t.\"timestamp\") AS \"lastTrace\",\n      COALESCE(SUM(o.prompt_tokens), 0)::int AS \"totalPromptTokens\",\n      COALESCE(SUM(o.completion_tokens), 0)::int AS \"totalCompletionTokens\",\n      COALESCE(SUM(o.total_tokens), 0)::int AS \"totalTokens\",\n      MIN(o.\"firstObservation\") AS \"firstObservation\",\n      MAX(o.\"lastObservation\") AS \"lastObservation\",\n      COUNT(o.\"totalObservations\")::int AS \"totalObservations\",\n      (COUNT(*) OVER ())::int AS \"totalCount\",\n      SUM(COALESCE(ov.calculated_total_cost, 0)) AS \"sumCalculatedTotalCost\"\n    FROM\n      traces t\n      LEFT JOIN LATERAL (\n        SELECT\n          COALESCE(SUM(o.prompt_tokens), 0)::int AS \"prompt_tokens\",\n          COALESCE(SUM(o.completion_tokens), 0)::int AS \"completion_tokens\",\n          COALESCE(SUM(o.total_tokens), 0)::int AS \"total_tokens\",\n          MIN(o.start_time) AS \"firstObservation\",\n          MAX(o.start_time) AS \"lastObservation\",\n          COUNT(DISTINCT o.id)::int AS \"totalObservations\"\n        FROM\n          observations o\n        WHERE\n          o.trace_id = t.id\n          AND o.project_id = ${input.projectId}\n        GROUP BY\n          t.user_id\n      ) o ON TRUE\n      LEFT JOIN LATERAL (\n        SELECT\n          SUM(COALESCE(ov.calculated_total_cost, 0)) AS \"calculated_total_cost\"\n        FROM\n          observations_view ov\n        WHERE\n          ov.trace_id = t.id\n          AND ov.\"type\" = 'GENERATION'\n          AND ov.project_id = ${input.projectId}\n        GROUP BY\n          t.user_id\n      ) ov ON TRUE\n    WHERE\n       t.user_id IN (${_prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.join(input.userIds, \",\")})\n      AND t.project_id = ${input.projectId}\n    GROUP BY\n      1;\n  `;\n        if (users.length === 0) {\n            return [];\n        }\n        const lastScoresOfUsers = await ctx.prisma.$queryRaw`\n    WITH ranked_scores AS (\n      SELECT\n        t.user_id,\n        s.*,\n        ROW_NUMBER() OVER (PARTITION BY t.user_id ORDER BY s.\"timestamp\" DESC) AS rn \n      FROM\n        scores s\n        JOIN traces t ON t.id = s.trace_id\n      WHERE\n        s.trace_id IS NOT NULL\n        AND t.project_id = ${input.projectId}\n        AND t.user_id IN (${_prisma_client__WEBPACK_IMPORTED_MODULE_2__.Prisma.join(users.map((user)=>user.userId))})\n        AND t.user_id IS NOT NULL\n    )\n    SELECT\n      user_id \"userId\",\n      \"id\",\n      \"timestamp\",\n      \"name\",\n      \"value\",\n      observation_id \"observationId\",\n      trace_id \"traceId\",\n      \"comment\"\n    FROM\n      ranked_scores\n    WHERE rn = 1\n  `;\n        return users.map((topUser)=>{\n            const user = users.find((user)=>user.userId === topUser.userId);\n            if (!user) {\n                console.error(\"User not found\", topUser.userId);\n                throw new Error(\"User not found\");\n            }\n            return {\n                ...topUser,\n                ...user,\n                lastScore: lastScoresOfUsers.find((score)=>score.userId === topUser.userId)\n            };\n        });\n    }),\n    byId: _src_server_api_trpc__WEBPACK_IMPORTED_MODULE_1__.protectedProjectProcedure.input(zod__WEBPACK_IMPORTED_MODULE_0__.z.object({\n        projectId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string(),\n        userId: zod__WEBPACK_IMPORTED_MODULE_0__.z.string()\n    })).query(async ({ input, ctx })=>{\n        const agg = await ctx.prisma.$queryRaw`\n        SELECT \n          t.user_id \"userId\",\n          min(t.\"timestamp\") \"firstTrace\",\n          max(t.\"timestamp\") \"lastTrace\",\n          COUNT(distinct t.id)::int \"totalTraces\",\n          COALESCE(SUM(o.prompt_tokens),0)::int \"totalPromptTokens\",\n          COALESCE(SUM(o.completion_tokens),0)::int \"totalCompletionTokens\",\n          COALESCE(SUM(o.total_tokens),0)::int \"totalTokens\",\n          MIN(o.start_time) \"firstObservation\",\n          MAX(o.start_time) \"lastObservation\",\n          COUNT(distinct o.id)::int \"totalObservations\",\n          SUM(COALESCE(o.calculated_total_cost, 0)) AS \"sumCalculatedTotalCost\"\n        FROM traces t\n        LEFT JOIN observations_view o on o.trace_id = t.id\n        WHERE t.user_id is not null\n        AND t.project_id = ${input.projectId}\n        AND o.project_id = ${input.projectId}\n        AND t.user_id = ${input.userId}\n        GROUP BY 1\n        ORDER BY \"totalTokens\" DESC\n        LIMIT 50\n      `;\n        const lastScoresOfUsers = await ctx.prisma.$queryRaw`\n        WITH ranked_scores AS (\n          SELECT\n            t.user_id,\n            s.*,\n            ROW_NUMBER() OVER (PARTITION BY t.user_id ORDER BY s.\"timestamp\" DESC) AS rn \n          FROM\n            scores s\n            JOIN traces t ON t.id = s.trace_id\n          WHERE\n            s.trace_id IS NOT NULL\n            AND t.project_id = ${input.projectId}\n            AND t.user_id = ${input.userId}\n            AND t.user_id IS NOT NULL\n        )\n        SELECT\n          user_id \"userId\",\n          \"id\",\n          \"timestamp\",\n          \"name\",\n          \"value\",\n          observation_id \"observationId\",\n          trace_id \"traceId\",\n          \"comment\"\n        FROM\n          ranked_scores\n        WHERE rn = 1\n      `;\n        return {\n            userId: input.userId,\n            firstTrace: agg[0]?.firstTrace,\n            lastTrace: agg[0]?.lastTrace,\n            totalTraces: agg[0]?.totalTraces ?? 0,\n            totalPromptTokens: agg[0]?.totalPromptTokens ?? 0,\n            totalCompletionTokens: agg[0]?.totalCompletionTokens ?? 0,\n            totalTokens: agg[0]?.totalTokens ?? 0,\n            firstObservation: agg[0]?.firstObservation,\n            lastObservation: agg[0]?.lastObservation,\n            totalObservations: agg[0]?.totalObservations ?? 0,\n            lastScore: lastScoresOfUsers[0],\n            sumCalculatedTotalCost: agg[0]?.sumCalculatedTotalCost ?? 0\n        };\n    })\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9yb3V0ZXJzL3VzZXJzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUF3QjtBQUtPO0FBQ3FCO0FBQ0o7QUFFaEQsTUFBTUssb0JBQW9CTCxrQ0FBQ0EsQ0FBQ00sTUFBTSxDQUFDO0lBQ2pDQyxXQUFXUCxrQ0FBQ0EsQ0FBQ1EsTUFBTTtBQUNyQjtBQUVBLE1BQU1DLGlCQUFpQkosa0JBQWtCSyxNQUFNLENBQUM7SUFDOUMsR0FBR04seURBQWE7QUFDbEI7QUFFTyxNQUFNTyxhQUFhVixzRUFBZ0JBLENBQUM7SUFDekNXLEtBQUtWLDJFQUF5QkEsQ0FDM0JXLEtBQUssQ0FBQ0osZ0JBQ05LLEtBQUssQ0FBQyxPQUFPLEVBQUVELEtBQUssRUFBRUUsR0FBRyxFQUFFO1FBQzFCLE1BQU1DLGNBQWMsTUFBTUQsSUFBSUUsTUFBTSxDQUFDQyxLQUFLLENBQUNDLFFBQVEsQ0FBQztZQUNsREMsT0FBTztnQkFDTGIsV0FBV00sTUFBTU4sU0FBUztZQUM1QjtZQUNBYyxRQUFRO2dCQUNOQyxRQUFRO1lBQ1Y7WUFDQUMsVUFBVTtnQkFBQzthQUFTO1FBQ3RCO1FBRUEsTUFBTUMsV0FBVyxNQUFNVCxJQUFJRSxNQUFNLENBQUNRLFNBQVMsQ0FLekM7Ozs7Ozs7Ozs2QkFTcUIsRUFBRVosTUFBTU4sU0FBUyxDQUFDOzs7Ozs7VUFNckMsRUFBRU0sTUFBTWEsS0FBSyxDQUFDLFFBQVEsRUFBRWIsTUFBTWMsSUFBSSxHQUFHZCxNQUFNYSxLQUFLLENBQUM7TUFDckQsQ0FBQztRQUNELE9BQU87WUFDTEUsWUFBWVosWUFBWWEsTUFBTTtZQUM5QkMsT0FBT047UUFDVDtJQUNGO0lBRUZPLFNBQVM3QiwyRUFBeUJBLENBQy9CVyxLQUFLLENBQ0piLGtDQUFDQSxDQUFDTSxNQUFNLENBQUM7UUFDUEMsV0FBV1Asa0NBQUNBLENBQUNRLE1BQU07UUFDbkJ3QixTQUFTaEMsa0NBQUNBLENBQUNpQyxLQUFLLENBQUNqQyxrQ0FBQ0EsQ0FBQ1EsTUFBTSxHQUFHMEIsR0FBRyxDQUFDO0lBQ2xDLElBRURwQixLQUFLLENBQUMsT0FBTyxFQUFFRCxLQUFLLEVBQUVFLEdBQUcsRUFBRTtRQUMxQixJQUFJRixNQUFNbUIsT0FBTyxDQUFDSCxNQUFNLEtBQUssR0FBRztZQUM5QixPQUFPLEVBQUU7UUFDWDtRQUVBLE1BQU1DLFFBQVEsTUFBTWYsSUFBSUUsTUFBTSxDQUFDUSxTQUFTLENBY3RDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NkJBMkJxQixFQUFFWixNQUFNTixTQUFTLENBQUM7Ozs7Ozs7Ozs7Ozs4QkFZakIsRUFBRU0sTUFBTU4sU0FBUyxDQUFDOzs7OztxQkFLM0IsRUFBRUosa0RBQU1BLENBQUNnQyxJQUFJLENBQUN0QixNQUFNbUIsT0FBTyxFQUFFLEtBQUs7eUJBQzlCLEVBQUVuQixNQUFNTixTQUFTLENBQUM7OztFQUd6QyxDQUFDO1FBRUcsSUFBSXVCLE1BQU1ELE1BQU0sS0FBSyxHQUFHO1lBQ3RCLE9BQU8sRUFBRTtRQUNYO1FBRUEsTUFBTU8sb0JBQW9CLE1BQU1yQixJQUFJRSxNQUFNLENBQUNRLFNBQVMsQ0FNbEQ7Ozs7Ozs7Ozs7OzJCQVdtQixFQUFFWixNQUFNTixTQUFTLENBQUM7MEJBQ25CLEVBQUVKLGtEQUFNQSxDQUFDZ0MsSUFBSSxDQUFDTCxNQUFNTyxHQUFHLENBQUMsQ0FBQ0MsT0FBU0EsS0FBS2hCLE1BQU0sR0FBRzs7Ozs7Ozs7Ozs7Ozs7O0VBZXhFLENBQUM7UUFDRyxPQUFPUSxNQUFNTyxHQUFHLENBQUMsQ0FBQ0U7WUFDaEIsTUFBTUQsT0FBT1IsTUFBTVUsSUFBSSxDQUFDLENBQUNGLE9BQVNBLEtBQUtoQixNQUFNLEtBQUtpQixRQUFRakIsTUFBTTtZQUNoRSxJQUFJLENBQUNnQixNQUFNO2dCQUNURyxRQUFRQyxLQUFLLENBQUMsa0JBQWtCSCxRQUFRakIsTUFBTTtnQkFDOUMsTUFBTSxJQUFJcUIsTUFBTTtZQUNsQjtZQUNBLE9BQU87Z0JBQ0wsR0FBR0osT0FBTztnQkFDVixHQUFHRCxJQUFJO2dCQUNQTSxXQUFXUixrQkFBa0JJLElBQUksQ0FDL0IsQ0FBQ0ssUUFBVUEsTUFBTXZCLE1BQU0sS0FBS2lCLFFBQVFqQixNQUFNO1lBRTlDO1FBQ0Y7SUFDRjtJQUVGd0IsTUFBTTVDLDJFQUF5QkEsQ0FDNUJXLEtBQUssQ0FDSmIsa0NBQUNBLENBQUNNLE1BQU0sQ0FBQztRQUNQQyxXQUFXUCxrQ0FBQ0EsQ0FBQ1EsTUFBTTtRQUNuQmMsUUFBUXRCLGtDQUFDQSxDQUFDUSxNQUFNO0lBQ2xCLElBRURNLEtBQUssQ0FBQyxPQUFPLEVBQUVELEtBQUssRUFBRUUsR0FBRyxFQUFFO1FBQzFCLE1BQU1nQyxNQUFNLE1BQU1oQyxJQUFJRSxNQUFNLENBQUNRLFNBQVMsQ0FjcEM7Ozs7Ozs7Ozs7Ozs7Ozs7MkJBZ0JtQixFQUFFWixNQUFNTixTQUFTLENBQUM7MkJBQ2xCLEVBQUVNLE1BQU1OLFNBQVMsQ0FBQzt3QkFDckIsRUFBRU0sTUFBTVMsTUFBTSxDQUFDOzs7O01BSWpDLENBQUM7UUFFRCxNQUFNYyxvQkFBb0IsTUFBTXJCLElBQUlFLE1BQU0sQ0FBQ1EsU0FBUyxDQU1sRDs7Ozs7Ozs7Ozs7K0JBV3VCLEVBQUVaLE1BQU1OLFNBQVMsQ0FBQzs0QkFDckIsRUFBRU0sTUFBTVMsTUFBTSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7TUFlckMsQ0FBQztRQUVELE9BQU87WUFDTEEsUUFBUVQsTUFBTVMsTUFBTTtZQUNwQjBCLFlBQVlELEdBQUcsQ0FBQyxFQUFFLEVBQUVDO1lBQ3BCQyxXQUFXRixHQUFHLENBQUMsRUFBRSxFQUFFRTtZQUNuQkMsYUFBYUgsR0FBRyxDQUFDLEVBQUUsRUFBRUcsZUFBZTtZQUNwQ0MsbUJBQW1CSixHQUFHLENBQUMsRUFBRSxFQUFFSSxxQkFBcUI7WUFDaERDLHVCQUF1QkwsR0FBRyxDQUFDLEVBQUUsRUFBRUsseUJBQXlCO1lBQ3hEQyxhQUFhTixHQUFHLENBQUMsRUFBRSxFQUFFTSxlQUFlO1lBQ3BDQyxrQkFBa0JQLEdBQUcsQ0FBQyxFQUFFLEVBQUVPO1lBQzFCQyxpQkFBaUJSLEdBQUcsQ0FBQyxFQUFFLEVBQUVRO1lBQ3pCQyxtQkFBbUJULEdBQUcsQ0FBQyxFQUFFLEVBQUVTLHFCQUFxQjtZQUNoRFosV0FBV1IsaUJBQWlCLENBQUMsRUFBRTtZQUMvQnFCLHdCQUF3QlYsR0FBRyxDQUFDLEVBQUUsRUFBRVUsMEJBQTBCO1FBQzVEO0lBQ0Y7QUFDSixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL3NlcnZlci9hcGkvcm91dGVycy91c2Vycy50cz82NTMxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmltcG9ydCB7XG4gIGNyZWF0ZVRSUENSb3V0ZXIsXG4gIHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUsXG59IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL3RycGNcIjtcbmltcG9ydCB7IFByaXNtYSwgdHlwZSBTY29yZSB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuaW1wb3J0IHsgcGFnaW5hdGlvblpvZCB9IGZyb20gXCJAL3NyYy91dGlscy96b2RcIjtcblxuY29uc3QgVXNlckZpbHRlck9wdGlvbnMgPSB6Lm9iamVjdCh7XG4gIHByb2plY3RJZDogei5zdHJpbmcoKSwgLy8gUmVxdWlyZWQgZm9yIHByb3RlY3RlZFByb2plY3RQcm9jZWR1cmVcbn0pO1xuXG5jb25zdCBVc2VyQWxsT3B0aW9ucyA9IFVzZXJGaWx0ZXJPcHRpb25zLmV4dGVuZCh7XG4gIC4uLnBhZ2luYXRpb25ab2QsXG59KTtcblxuZXhwb3J0IGNvbnN0IHVzZXJSb3V0ZXIgPSBjcmVhdGVUUlBDUm91dGVyKHtcbiAgYWxsOiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFVzZXJBbGxPcHRpb25zKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIGNvbnN0IHVuaXF1ZVVzZXJzID0gYXdhaXQgY3R4LnByaXNtYS50cmFjZS5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgcHJvamVjdElkOiBpbnB1dC5wcm9qZWN0SWQsXG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIHVzZXJJZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgZGlzdGluY3Q6IFtcInVzZXJJZFwiXSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB0b3BVc2VycyA9IGF3YWl0IGN0eC5wcmlzbWEuJHF1ZXJ5UmF3PFxuICAgICAgICBBcnJheTx7XG4gICAgICAgICAgdXNlcklkOiBzdHJpbmc7XG4gICAgICAgICAgdG90YWxUcmFjZXM6IG51bWJlcjtcbiAgICAgICAgfT5cbiAgICAgID5gXG4gICAgICAgIFNFTEVDVFxuICAgICAgICAgIHQudXNlcl9pZCBBUyBcInVzZXJJZFwiLFxuICAgICAgICAgIENPVU5UKHQuaWQpOjppbnQgQVMgXCJ0b3RhbFRyYWNlc1wiXG4gICAgICAgIEZST01cbiAgICAgICAgICB0cmFjZXMgdFxuICAgICAgICBXSEVSRVxuICAgICAgICAgIHQudXNlcl9pZCBJUyBOT1QgTlVMTFxuICAgICAgICAgIEFORCB0LnVzZXJfaWQgIT0gJydcbiAgICAgICAgICBBTkQgdC5wcm9qZWN0X2lkID0gJHtpbnB1dC5wcm9qZWN0SWR9XG4gICAgICAgIEdST1VQIEJZXG4gICAgICAgICAgdC51c2VyX2lkXG4gICAgICAgIE9SREVSIEJZXG4gICAgICAgICAgXCJ0b3RhbFRyYWNlc1wiIERFU0NcbiAgICAgICAgTElNSVRcbiAgICAgICAgICAke2lucHV0LmxpbWl0fSBPRkZTRVQgJHtpbnB1dC5wYWdlICogaW5wdXQubGltaXR9O1xuICAgICAgYDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsVXNlcnM6IHVuaXF1ZVVzZXJzLmxlbmd0aCxcbiAgICAgICAgdXNlcnM6IHRvcFVzZXJzLFxuICAgICAgfTtcbiAgICB9KSxcblxuICBtZXRyaWNzOiBwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlXG4gICAgLmlucHV0KFxuICAgICAgei5vYmplY3Qoe1xuICAgICAgICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG4gICAgICAgIHVzZXJJZHM6IHouYXJyYXkoei5zdHJpbmcoKS5taW4oMSkpLFxuICAgICAgfSksXG4gICAgKVxuICAgIC5xdWVyeShhc3luYyAoeyBpbnB1dCwgY3R4IH0pID0+IHtcbiAgICAgIGlmIChpbnB1dC51c2VySWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgY3R4LnByaXNtYS4kcXVlcnlSYXc8XG4gICAgICAgIEFycmF5PHtcbiAgICAgICAgICB1c2VySWQ6IHN0cmluZztcbiAgICAgICAgICBmaXJzdFRyYWNlOiBEYXRlIHwgbnVsbDtcbiAgICAgICAgICBsYXN0VHJhY2U6IERhdGUgfCBudWxsO1xuICAgICAgICAgIHRvdGFsUHJvbXB0VG9rZW5zOiBudW1iZXI7XG4gICAgICAgICAgdG90YWxDb21wbGV0aW9uVG9rZW5zOiBudW1iZXI7XG4gICAgICAgICAgdG90YWxUb2tlbnM6IG51bWJlcjtcbiAgICAgICAgICBmaXJzdE9ic2VydmF0aW9uOiBEYXRlIHwgbnVsbDtcbiAgICAgICAgICBsYXN0T2JzZXJ2YXRpb246IERhdGUgfCBudWxsO1xuICAgICAgICAgIHRvdGFsT2JzZXJ2YXRpb25zOiBudW1iZXI7XG4gICAgICAgICAgdG90YWxDb3VudDogbnVtYmVyO1xuICAgICAgICAgIHN1bUNhbGN1bGF0ZWRUb3RhbENvc3Q6IG51bWJlcjtcbiAgICAgICAgfT5cbiAgICAgID5gXG4gICAgU0VMRUNUXG4gICAgICB0LnVzZXJfaWQgQVMgXCJ1c2VySWRcIixcbiAgICAgIE1JTih0LlwidGltZXN0YW1wXCIpIEFTIFwiZmlyc3RUcmFjZVwiLFxuICAgICAgTUFYKHQuXCJ0aW1lc3RhbXBcIikgQVMgXCJsYXN0VHJhY2VcIixcbiAgICAgIENPQUxFU0NFKFNVTShvLnByb21wdF90b2tlbnMpLCAwKTo6aW50IEFTIFwidG90YWxQcm9tcHRUb2tlbnNcIixcbiAgICAgIENPQUxFU0NFKFNVTShvLmNvbXBsZXRpb25fdG9rZW5zKSwgMCk6OmludCBBUyBcInRvdGFsQ29tcGxldGlvblRva2Vuc1wiLFxuICAgICAgQ09BTEVTQ0UoU1VNKG8udG90YWxfdG9rZW5zKSwgMCk6OmludCBBUyBcInRvdGFsVG9rZW5zXCIsXG4gICAgICBNSU4oby5cImZpcnN0T2JzZXJ2YXRpb25cIikgQVMgXCJmaXJzdE9ic2VydmF0aW9uXCIsXG4gICAgICBNQVgoby5cImxhc3RPYnNlcnZhdGlvblwiKSBBUyBcImxhc3RPYnNlcnZhdGlvblwiLFxuICAgICAgQ09VTlQoby5cInRvdGFsT2JzZXJ2YXRpb25zXCIpOjppbnQgQVMgXCJ0b3RhbE9ic2VydmF0aW9uc1wiLFxuICAgICAgKENPVU5UKCopIE9WRVIgKCkpOjppbnQgQVMgXCJ0b3RhbENvdW50XCIsXG4gICAgICBTVU0oQ09BTEVTQ0Uob3YuY2FsY3VsYXRlZF90b3RhbF9jb3N0LCAwKSkgQVMgXCJzdW1DYWxjdWxhdGVkVG90YWxDb3N0XCJcbiAgICBGUk9NXG4gICAgICB0cmFjZXMgdFxuICAgICAgTEVGVCBKT0lOIExBVEVSQUwgKFxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgICBDT0FMRVNDRShTVU0oby5wcm9tcHRfdG9rZW5zKSwgMCk6OmludCBBUyBcInByb21wdF90b2tlbnNcIixcbiAgICAgICAgICBDT0FMRVNDRShTVU0oby5jb21wbGV0aW9uX3Rva2VucyksIDApOjppbnQgQVMgXCJjb21wbGV0aW9uX3Rva2Vuc1wiLFxuICAgICAgICAgIENPQUxFU0NFKFNVTShvLnRvdGFsX3Rva2VucyksIDApOjppbnQgQVMgXCJ0b3RhbF90b2tlbnNcIixcbiAgICAgICAgICBNSU4oby5zdGFydF90aW1lKSBBUyBcImZpcnN0T2JzZXJ2YXRpb25cIixcbiAgICAgICAgICBNQVgoby5zdGFydF90aW1lKSBBUyBcImxhc3RPYnNlcnZhdGlvblwiLFxuICAgICAgICAgIENPVU5UKERJU1RJTkNUIG8uaWQpOjppbnQgQVMgXCJ0b3RhbE9ic2VydmF0aW9uc1wiXG4gICAgICAgIEZST01cbiAgICAgICAgICBvYnNlcnZhdGlvbnMgb1xuICAgICAgICBXSEVSRVxuICAgICAgICAgIG8udHJhY2VfaWQgPSB0LmlkXG4gICAgICAgICAgQU5EIG8ucHJvamVjdF9pZCA9ICR7aW5wdXQucHJvamVjdElkfVxuICAgICAgICBHUk9VUCBCWVxuICAgICAgICAgIHQudXNlcl9pZFxuICAgICAgKSBvIE9OIFRSVUVcbiAgICAgIExFRlQgSk9JTiBMQVRFUkFMIChcbiAgICAgICAgU0VMRUNUXG4gICAgICAgICAgU1VNKENPQUxFU0NFKG92LmNhbGN1bGF0ZWRfdG90YWxfY29zdCwgMCkpIEFTIFwiY2FsY3VsYXRlZF90b3RhbF9jb3N0XCJcbiAgICAgICAgRlJPTVxuICAgICAgICAgIG9ic2VydmF0aW9uc192aWV3IG92XG4gICAgICAgIFdIRVJFXG4gICAgICAgICAgb3YudHJhY2VfaWQgPSB0LmlkXG4gICAgICAgICAgQU5EIG92LlwidHlwZVwiID0gJ0dFTkVSQVRJT04nXG4gICAgICAgICAgQU5EIG92LnByb2plY3RfaWQgPSAke2lucHV0LnByb2plY3RJZH1cbiAgICAgICAgR1JPVVAgQllcbiAgICAgICAgICB0LnVzZXJfaWRcbiAgICAgICkgb3YgT04gVFJVRVxuICAgIFdIRVJFXG4gICAgICAgdC51c2VyX2lkIElOICgke1ByaXNtYS5qb2luKGlucHV0LnVzZXJJZHMsIFwiLFwiKX0pXG4gICAgICBBTkQgdC5wcm9qZWN0X2lkID0gJHtpbnB1dC5wcm9qZWN0SWR9XG4gICAgR1JPVVAgQllcbiAgICAgIDE7XG4gIGA7XG5cbiAgICAgIGlmICh1c2Vycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsYXN0U2NvcmVzT2ZVc2VycyA9IGF3YWl0IGN0eC5wcmlzbWEuJHF1ZXJ5UmF3PFxuICAgICAgICBBcnJheTxcbiAgICAgICAgICBTY29yZSAmIHtcbiAgICAgICAgICAgIHVzZXJJZDogc3RyaW5nO1xuICAgICAgICAgIH1cbiAgICAgICAgPlxuICAgICAgPmBcbiAgICBXSVRIIHJhbmtlZF9zY29yZXMgQVMgKFxuICAgICAgU0VMRUNUXG4gICAgICAgIHQudXNlcl9pZCxcbiAgICAgICAgcy4qLFxuICAgICAgICBST1dfTlVNQkVSKCkgT1ZFUiAoUEFSVElUSU9OIEJZIHQudXNlcl9pZCBPUkRFUiBCWSBzLlwidGltZXN0YW1wXCIgREVTQykgQVMgcm4gXG4gICAgICBGUk9NXG4gICAgICAgIHNjb3JlcyBzXG4gICAgICAgIEpPSU4gdHJhY2VzIHQgT04gdC5pZCA9IHMudHJhY2VfaWRcbiAgICAgIFdIRVJFXG4gICAgICAgIHMudHJhY2VfaWQgSVMgTk9UIE5VTExcbiAgICAgICAgQU5EIHQucHJvamVjdF9pZCA9ICR7aW5wdXQucHJvamVjdElkfVxuICAgICAgICBBTkQgdC51c2VyX2lkIElOICgke1ByaXNtYS5qb2luKHVzZXJzLm1hcCgodXNlcikgPT4gdXNlci51c2VySWQpKX0pXG4gICAgICAgIEFORCB0LnVzZXJfaWQgSVMgTk9UIE5VTExcbiAgICApXG4gICAgU0VMRUNUXG4gICAgICB1c2VyX2lkIFwidXNlcklkXCIsXG4gICAgICBcImlkXCIsXG4gICAgICBcInRpbWVzdGFtcFwiLFxuICAgICAgXCJuYW1lXCIsXG4gICAgICBcInZhbHVlXCIsXG4gICAgICBvYnNlcnZhdGlvbl9pZCBcIm9ic2VydmF0aW9uSWRcIixcbiAgICAgIHRyYWNlX2lkIFwidHJhY2VJZFwiLFxuICAgICAgXCJjb21tZW50XCJcbiAgICBGUk9NXG4gICAgICByYW5rZWRfc2NvcmVzXG4gICAgV0hFUkUgcm4gPSAxXG4gIGA7XG4gICAgICByZXR1cm4gdXNlcnMubWFwKCh0b3BVc2VyKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSB1c2Vycy5maW5kKCh1c2VyKSA9PiB1c2VyLnVzZXJJZCA9PT0gdG9wVXNlci51c2VySWQpO1xuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVXNlciBub3QgZm91bmRcIiwgdG9wVXNlci51c2VySWQpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgbm90IGZvdW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4udG9wVXNlcixcbiAgICAgICAgICAuLi51c2VyLFxuICAgICAgICAgIGxhc3RTY29yZTogbGFzdFNjb3Jlc09mVXNlcnMuZmluZChcbiAgICAgICAgICAgIChzY29yZSkgPT4gc2NvcmUudXNlcklkID09PSB0b3BVc2VyLnVzZXJJZCxcbiAgICAgICAgICApLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfSksXG5cbiAgYnlJZDogcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZVxuICAgIC5pbnB1dChcbiAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgcHJvamVjdElkOiB6LnN0cmluZygpLFxuICAgICAgICB1c2VySWQ6IHouc3RyaW5nKCksXG4gICAgICB9KSxcbiAgICApXG4gICAgLnF1ZXJ5KGFzeW5jICh7IGlucHV0LCBjdHggfSkgPT4ge1xuICAgICAgY29uc3QgYWdnID0gYXdhaXQgY3R4LnByaXNtYS4kcXVlcnlSYXc8XG4gICAgICAgIHtcbiAgICAgICAgICB1c2VySWQ6IHN0cmluZztcbiAgICAgICAgICBmaXJzdFRyYWNlOiBEYXRlO1xuICAgICAgICAgIGxhc3RUcmFjZTogRGF0ZTtcbiAgICAgICAgICB0b3RhbFRyYWNlczogbnVtYmVyO1xuICAgICAgICAgIHRvdGFsUHJvbXB0VG9rZW5zOiBudW1iZXI7XG4gICAgICAgICAgdG90YWxDb21wbGV0aW9uVG9rZW5zOiBudW1iZXI7XG4gICAgICAgICAgdG90YWxUb2tlbnM6IG51bWJlcjtcbiAgICAgICAgICBmaXJzdE9ic2VydmF0aW9uOiBEYXRlO1xuICAgICAgICAgIGxhc3RPYnNlcnZhdGlvbjogRGF0ZTtcbiAgICAgICAgICB0b3RhbE9ic2VydmF0aW9uczogbnVtYmVyO1xuICAgICAgICAgIHN1bUNhbGN1bGF0ZWRUb3RhbENvc3Q6IG51bWJlcjtcbiAgICAgICAgfVtdXG4gICAgICA+YFxuICAgICAgICBTRUxFQ1QgXG4gICAgICAgICAgdC51c2VyX2lkIFwidXNlcklkXCIsXG4gICAgICAgICAgbWluKHQuXCJ0aW1lc3RhbXBcIikgXCJmaXJzdFRyYWNlXCIsXG4gICAgICAgICAgbWF4KHQuXCJ0aW1lc3RhbXBcIikgXCJsYXN0VHJhY2VcIixcbiAgICAgICAgICBDT1VOVChkaXN0aW5jdCB0LmlkKTo6aW50IFwidG90YWxUcmFjZXNcIixcbiAgICAgICAgICBDT0FMRVNDRShTVU0oby5wcm9tcHRfdG9rZW5zKSwwKTo6aW50IFwidG90YWxQcm9tcHRUb2tlbnNcIixcbiAgICAgICAgICBDT0FMRVNDRShTVU0oby5jb21wbGV0aW9uX3Rva2VucyksMCk6OmludCBcInRvdGFsQ29tcGxldGlvblRva2Vuc1wiLFxuICAgICAgICAgIENPQUxFU0NFKFNVTShvLnRvdGFsX3Rva2VucyksMCk6OmludCBcInRvdGFsVG9rZW5zXCIsXG4gICAgICAgICAgTUlOKG8uc3RhcnRfdGltZSkgXCJmaXJzdE9ic2VydmF0aW9uXCIsXG4gICAgICAgICAgTUFYKG8uc3RhcnRfdGltZSkgXCJsYXN0T2JzZXJ2YXRpb25cIixcbiAgICAgICAgICBDT1VOVChkaXN0aW5jdCBvLmlkKTo6aW50IFwidG90YWxPYnNlcnZhdGlvbnNcIixcbiAgICAgICAgICBTVU0oQ09BTEVTQ0Uoby5jYWxjdWxhdGVkX3RvdGFsX2Nvc3QsIDApKSBBUyBcInN1bUNhbGN1bGF0ZWRUb3RhbENvc3RcIlxuICAgICAgICBGUk9NIHRyYWNlcyB0XG4gICAgICAgIExFRlQgSk9JTiBvYnNlcnZhdGlvbnNfdmlldyBvIG9uIG8udHJhY2VfaWQgPSB0LmlkXG4gICAgICAgIFdIRVJFIHQudXNlcl9pZCBpcyBub3QgbnVsbFxuICAgICAgICBBTkQgdC5wcm9qZWN0X2lkID0gJHtpbnB1dC5wcm9qZWN0SWR9XG4gICAgICAgIEFORCBvLnByb2plY3RfaWQgPSAke2lucHV0LnByb2plY3RJZH1cbiAgICAgICAgQU5EIHQudXNlcl9pZCA9ICR7aW5wdXQudXNlcklkfVxuICAgICAgICBHUk9VUCBCWSAxXG4gICAgICAgIE9SREVSIEJZIFwidG90YWxUb2tlbnNcIiBERVNDXG4gICAgICAgIExJTUlUIDUwXG4gICAgICBgO1xuXG4gICAgICBjb25zdCBsYXN0U2NvcmVzT2ZVc2VycyA9IGF3YWl0IGN0eC5wcmlzbWEuJHF1ZXJ5UmF3PFxuICAgICAgICBBcnJheTxcbiAgICAgICAgICBTY29yZSAmIHtcbiAgICAgICAgICAgIHVzZXJJZDogc3RyaW5nO1xuICAgICAgICAgIH1cbiAgICAgICAgPlxuICAgICAgPmBcbiAgICAgICAgV0lUSCByYW5rZWRfc2NvcmVzIEFTIChcbiAgICAgICAgICBTRUxFQ1RcbiAgICAgICAgICAgIHQudXNlcl9pZCxcbiAgICAgICAgICAgIHMuKixcbiAgICAgICAgICAgIFJPV19OVU1CRVIoKSBPVkVSIChQQVJUSVRJT04gQlkgdC51c2VyX2lkIE9SREVSIEJZIHMuXCJ0aW1lc3RhbXBcIiBERVNDKSBBUyBybiBcbiAgICAgICAgICBGUk9NXG4gICAgICAgICAgICBzY29yZXMgc1xuICAgICAgICAgICAgSk9JTiB0cmFjZXMgdCBPTiB0LmlkID0gcy50cmFjZV9pZFxuICAgICAgICAgIFdIRVJFXG4gICAgICAgICAgICBzLnRyYWNlX2lkIElTIE5PVCBOVUxMXG4gICAgICAgICAgICBBTkQgdC5wcm9qZWN0X2lkID0gJHtpbnB1dC5wcm9qZWN0SWR9XG4gICAgICAgICAgICBBTkQgdC51c2VyX2lkID0gJHtpbnB1dC51c2VySWR9XG4gICAgICAgICAgICBBTkQgdC51c2VyX2lkIElTIE5PVCBOVUxMXG4gICAgICAgIClcbiAgICAgICAgU0VMRUNUXG4gICAgICAgICAgdXNlcl9pZCBcInVzZXJJZFwiLFxuICAgICAgICAgIFwiaWRcIixcbiAgICAgICAgICBcInRpbWVzdGFtcFwiLFxuICAgICAgICAgIFwibmFtZVwiLFxuICAgICAgICAgIFwidmFsdWVcIixcbiAgICAgICAgICBvYnNlcnZhdGlvbl9pZCBcIm9ic2VydmF0aW9uSWRcIixcbiAgICAgICAgICB0cmFjZV9pZCBcInRyYWNlSWRcIixcbiAgICAgICAgICBcImNvbW1lbnRcIlxuICAgICAgICBGUk9NXG4gICAgICAgICAgcmFua2VkX3Njb3Jlc1xuICAgICAgICBXSEVSRSBybiA9IDFcbiAgICAgIGA7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXJJZDogaW5wdXQudXNlcklkLFxuICAgICAgICBmaXJzdFRyYWNlOiBhZ2dbMF0/LmZpcnN0VHJhY2UsXG4gICAgICAgIGxhc3RUcmFjZTogYWdnWzBdPy5sYXN0VHJhY2UsXG4gICAgICAgIHRvdGFsVHJhY2VzOiBhZ2dbMF0/LnRvdGFsVHJhY2VzID8/IDAsXG4gICAgICAgIHRvdGFsUHJvbXB0VG9rZW5zOiBhZ2dbMF0/LnRvdGFsUHJvbXB0VG9rZW5zID8/IDAsXG4gICAgICAgIHRvdGFsQ29tcGxldGlvblRva2VuczogYWdnWzBdPy50b3RhbENvbXBsZXRpb25Ub2tlbnMgPz8gMCxcbiAgICAgICAgdG90YWxUb2tlbnM6IGFnZ1swXT8udG90YWxUb2tlbnMgPz8gMCxcbiAgICAgICAgZmlyc3RPYnNlcnZhdGlvbjogYWdnWzBdPy5maXJzdE9ic2VydmF0aW9uLFxuICAgICAgICBsYXN0T2JzZXJ2YXRpb246IGFnZ1swXT8ubGFzdE9ic2VydmF0aW9uLFxuICAgICAgICB0b3RhbE9ic2VydmF0aW9uczogYWdnWzBdPy50b3RhbE9ic2VydmF0aW9ucyA/PyAwLFxuICAgICAgICBsYXN0U2NvcmU6IGxhc3RTY29yZXNPZlVzZXJzWzBdLFxuICAgICAgICBzdW1DYWxjdWxhdGVkVG90YWxDb3N0OiBhZ2dbMF0/LnN1bUNhbGN1bGF0ZWRUb3RhbENvc3QgPz8gMCxcbiAgICAgIH07XG4gICAgfSksXG59KTtcbiJdLCJuYW1lcyI6WyJ6IiwiY3JlYXRlVFJQQ1JvdXRlciIsInByb3RlY3RlZFByb2plY3RQcm9jZWR1cmUiLCJQcmlzbWEiLCJwYWdpbmF0aW9uWm9kIiwiVXNlckZpbHRlck9wdGlvbnMiLCJvYmplY3QiLCJwcm9qZWN0SWQiLCJzdHJpbmciLCJVc2VyQWxsT3B0aW9ucyIsImV4dGVuZCIsInVzZXJSb3V0ZXIiLCJhbGwiLCJpbnB1dCIsInF1ZXJ5IiwiY3R4IiwidW5pcXVlVXNlcnMiLCJwcmlzbWEiLCJ0cmFjZSIsImZpbmRNYW55Iiwid2hlcmUiLCJzZWxlY3QiLCJ1c2VySWQiLCJkaXN0aW5jdCIsInRvcFVzZXJzIiwiJHF1ZXJ5UmF3IiwibGltaXQiLCJwYWdlIiwidG90YWxVc2VycyIsImxlbmd0aCIsInVzZXJzIiwibWV0cmljcyIsInVzZXJJZHMiLCJhcnJheSIsIm1pbiIsImpvaW4iLCJsYXN0U2NvcmVzT2ZVc2VycyIsIm1hcCIsInVzZXIiLCJ0b3BVc2VyIiwiZmluZCIsImNvbnNvbGUiLCJlcnJvciIsIkVycm9yIiwibGFzdFNjb3JlIiwic2NvcmUiLCJieUlkIiwiYWdnIiwiZmlyc3RUcmFjZSIsImxhc3RUcmFjZSIsInRvdGFsVHJhY2VzIiwidG90YWxQcm9tcHRUb2tlbnMiLCJ0b3RhbENvbXBsZXRpb25Ub2tlbnMiLCJ0b3RhbFRva2VucyIsImZpcnN0T2JzZXJ2YXRpb24iLCJsYXN0T2JzZXJ2YXRpb24iLCJ0b3RhbE9ic2VydmF0aW9ucyIsInN1bUNhbGN1bGF0ZWRUb3RhbENvc3QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/api/routers/users.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/services/S3StorageService.ts":
/*!*****************************************************!*\
  !*** ./src/server/api/services/S3StorageService.ts ***!
  \*****************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   S3StorageService: () => (/* binding */ S3StorageService)\n/* harmony export */ });\n/* harmony import */ var _src_env_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/env.mjs */ \"(api)/./src/env.mjs\");\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/client-s3 */ \"@aws-sdk/client-s3\");\n/* harmony import */ var _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _aws_sdk_lib_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/lib-storage */ \"@aws-sdk/lib-storage\");\n/* harmony import */ var _aws_sdk_lib_storage__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_lib_storage__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _aws_sdk_s3_request_presigner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-sdk/s3-request-presigner */ \"@aws-sdk/s3-request-presigner\");\n/* harmony import */ var _aws_sdk_s3_request_presigner__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_aws_sdk_s3_request_presigner__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_env_mjs__WEBPACK_IMPORTED_MODULE_0__]);\n_src_env_mjs__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nclass S3StorageService {\n    constructor(){\n        if (!S3StorageService.getIsS3StorageConfigured(_src_env_mjs__WEBPACK_IMPORTED_MODULE_0__.env)) {\n            throw new Error(\"S3 bucket is not configured\");\n        }\n        this.client = new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_1__.S3Client({\n            credentials: {\n                accessKeyId: _src_env_mjs__WEBPACK_IMPORTED_MODULE_0__.env.S3_ACCESS_KEY_ID,\n                secretAccessKey: _src_env_mjs__WEBPACK_IMPORTED_MODULE_0__.env.S3_SECRET_ACCESS_KEY\n            },\n            endpoint: _src_env_mjs__WEBPACK_IMPORTED_MODULE_0__.env.S3_ENDPOINT,\n            region: _src_env_mjs__WEBPACK_IMPORTED_MODULE_0__.env.S3_REGION\n        });\n    }\n    async uploadFile({ fileName, fileType, data }) {\n        try {\n            await new _aws_sdk_lib_storage__WEBPACK_IMPORTED_MODULE_2__.Upload({\n                client: this.client,\n                params: {\n                    Bucket: _src_env_mjs__WEBPACK_IMPORTED_MODULE_0__.env.S3_BUCKET_NAME,\n                    Key: fileName,\n                    Body: data,\n                    ContentType: fileType\n                }\n            }).done();\n            const expiresInOneHour = 60 * 60;\n            const signedUrl = await this.getSignedUrl(fileName, expiresInOneHour);\n            return {\n                signedUrl\n            };\n        } catch (err) {\n            console.error(err);\n            throw new Error(\"Failed to upload to S3 or generate signed URL\");\n        }\n    }\n    async getSignedUrl(fileName, ttlSeconds) {\n        try {\n            return await (0,_aws_sdk_s3_request_presigner__WEBPACK_IMPORTED_MODULE_3__.getSignedUrl)(this.client, new _aws_sdk_client_s3__WEBPACK_IMPORTED_MODULE_1__.GetObjectCommand({\n                Bucket: _src_env_mjs__WEBPACK_IMPORTED_MODULE_0__.env.S3_BUCKET_NAME,\n                Key: fileName,\n                ResponseContentDisposition: `attachment; filename=\"${fileName}\"`\n            }), {\n                expiresIn: ttlSeconds\n            });\n        } catch (err) {\n            throw Error(\"Failed to generate signed URL\");\n        }\n    }\n    static getIsS3StorageConfigured(currentEnv) {\n        return Boolean(currentEnv.S3_BUCKET_NAME && currentEnv.S3_ACCESS_KEY_ID && currentEnv.S3_SECRET_ACCESS_KEY && currentEnv.S3_ENDPOINT && currentEnv.S3_REGION);\n    }\n}\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9zZXJ2aWNlcy9TM1N0b3JhZ2VTZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQ29DO0FBQzRCO0FBQ2xCO0FBQ2U7QUFRN0QsTUFBTUs7SUFHSkMsYUFBYztRQUNaLElBQUksQ0FBQ0QsaUJBQWlCRSx3QkFBd0IsQ0FBQ1AsNkNBQUdBLEdBQUc7WUFDbkQsTUFBTSxJQUFJUSxNQUFNO1FBQ2xCO1FBRUEsSUFBSSxDQUFDQyxNQUFNLEdBQUcsSUFBSVAsd0RBQVFBLENBQUM7WUFDekJRLGFBQWE7Z0JBQ1hDLGFBQWFYLDZDQUFHQSxDQUFDWSxnQkFBZ0I7Z0JBQ2pDQyxpQkFBaUJiLDZDQUFHQSxDQUFDYyxvQkFBb0I7WUFDM0M7WUFDQUMsVUFBVWYsNkNBQUdBLENBQUNnQixXQUFXO1lBQ3pCQyxRQUFRakIsNkNBQUdBLENBQUNrQixTQUFTO1FBQ3ZCO0lBQ0Y7SUFFQSxNQUFhQyxXQUFXLEVBQ3RCQyxRQUFRLEVBQ1JDLFFBQVEsRUFDUkMsSUFBSSxFQUNPLEVBQWtDO1FBQzdDLElBQUk7WUFDRixNQUFNLElBQUluQix3REFBTUEsQ0FBQztnQkFDZk0sUUFBUSxJQUFJLENBQUNBLE1BQU07Z0JBQ25CYyxRQUFRO29CQUNOQyxRQUFReEIsNkNBQUdBLENBQUN5QixjQUFjO29CQUMxQkMsS0FBS047b0JBQ0xPLE1BQU1MO29CQUNOTSxhQUFhUDtnQkFDZjtZQUNGLEdBQUdRLElBQUk7WUFFUCxNQUFNQyxtQkFBbUIsS0FBSztZQUM5QixNQUFNQyxZQUFZLE1BQU0sSUFBSSxDQUFDM0IsWUFBWSxDQUFDZ0IsVUFBVVU7WUFFcEQsT0FBTztnQkFBRUM7WUFBVTtRQUNyQixFQUFFLE9BQU9DLEtBQUs7WUFDWkMsUUFBUUMsS0FBSyxDQUFDRjtZQUVkLE1BQU0sSUFBSXhCLE1BQU07UUFDbEI7SUFDRjtJQUVBLE1BQWNKLGFBQ1pnQixRQUFnQixFQUNoQmUsVUFBa0IsRUFDRDtRQUNqQixJQUFJO1lBQ0YsT0FBTyxNQUFNL0IsMkVBQVlBLENBQ3ZCLElBQUksQ0FBQ0ssTUFBTSxFQUNYLElBQUlSLGdFQUFnQkEsQ0FBQztnQkFDbkJ1QixRQUFReEIsNkNBQUdBLENBQUN5QixjQUFjO2dCQUMxQkMsS0FBS047Z0JBQ0xnQiw0QkFBNEIsQ0FBQyxzQkFBc0IsRUFBRWhCLFNBQVMsQ0FBQyxDQUFDO1lBQ2xFLElBQ0E7Z0JBQUVpQixXQUFXRjtZQUFXO1FBRTVCLEVBQUUsT0FBT0gsS0FBSztZQUNaLE1BQU14QixNQUFNO1FBQ2Q7SUFDRjtJQUVBLE9BQU9ELHlCQUNMK0IsVUFBZSxFQUNnQjtRQUMvQixPQUFPQyxRQUNMRCxXQUFXYixjQUFjLElBQ3ZCYSxXQUFXMUIsZ0JBQWdCLElBQzNCMEIsV0FBV3hCLG9CQUFvQixJQUMvQndCLFdBQVd0QixXQUFXLElBQ3RCc0IsV0FBV3BCLFNBQVM7SUFFMUI7QUFDRjtBQUU0QiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9zZXJ2ZXIvYXBpL3NlcnZpY2VzL1MzU3RvcmFnZVNlcnZpY2UudHM/MjYwZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFJlYWRhYmxlIH0gZnJvbSBcInN0cmVhbVwiO1xuaW1wb3J0IHsgZW52IH0gZnJvbSBcIkAvc3JjL2Vudi5tanNcIjtcbmltcG9ydCB7IEdldE9iamVjdENvbW1hbmQsIFMzQ2xpZW50IH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1zM1wiO1xuaW1wb3J0IHsgVXBsb2FkIH0gZnJvbSBcIkBhd3Mtc2RrL2xpYi1zdG9yYWdlXCI7XG5pbXBvcnQgeyBnZXRTaWduZWRVcmwgfSBmcm9tIFwiQGF3cy1zZGsvczMtcmVxdWVzdC1wcmVzaWduZXJcIjtcblxudHlwZSBVcGxvYWRGaWxlID0ge1xuICBmaWxlTmFtZTogc3RyaW5nO1xuICBmaWxlVHlwZTogc3RyaW5nO1xuICBkYXRhOiBSZWFkYWJsZSB8IHN0cmluZztcbn07XG5cbmNsYXNzIFMzU3RvcmFnZVNlcnZpY2Uge1xuICBwcml2YXRlIGNsaWVudDogUzNDbGllbnQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgaWYgKCFTM1N0b3JhZ2VTZXJ2aWNlLmdldElzUzNTdG9yYWdlQ29uZmlndXJlZChlbnYpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTMyBidWNrZXQgaXMgbm90IGNvbmZpZ3VyZWRcIik7XG4gICAgfVxuXG4gICAgdGhpcy5jbGllbnQgPSBuZXcgUzNDbGllbnQoe1xuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgYWNjZXNzS2V5SWQ6IGVudi5TM19BQ0NFU1NfS0VZX0lELFxuICAgICAgICBzZWNyZXRBY2Nlc3NLZXk6IGVudi5TM19TRUNSRVRfQUNDRVNTX0tFWSxcbiAgICAgIH0sXG4gICAgICBlbmRwb2ludDogZW52LlMzX0VORFBPSU5ULFxuICAgICAgcmVnaW9uOiBlbnYuUzNfUkVHSU9OLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHVwbG9hZEZpbGUoe1xuICAgIGZpbGVOYW1lLFxuICAgIGZpbGVUeXBlLFxuICAgIGRhdGEsXG4gIH06IFVwbG9hZEZpbGUpOiBQcm9taXNlPHsgc2lnbmVkVXJsOiBzdHJpbmcgfT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBuZXcgVXBsb2FkKHtcbiAgICAgICAgY2xpZW50OiB0aGlzLmNsaWVudCxcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgQnVja2V0OiBlbnYuUzNfQlVDS0VUX05BTUUsXG4gICAgICAgICAgS2V5OiBmaWxlTmFtZSxcbiAgICAgICAgICBCb2R5OiBkYXRhLFxuICAgICAgICAgIENvbnRlbnRUeXBlOiBmaWxlVHlwZSxcbiAgICAgICAgfSxcbiAgICAgIH0pLmRvbmUoKTtcblxuICAgICAgY29uc3QgZXhwaXJlc0luT25lSG91ciA9IDYwICogNjA7XG4gICAgICBjb25zdCBzaWduZWRVcmwgPSBhd2FpdCB0aGlzLmdldFNpZ25lZFVybChmaWxlTmFtZSwgZXhwaXJlc0luT25lSG91cik7XG5cbiAgICAgIHJldHVybiB7IHNpZ25lZFVybCB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gdXBsb2FkIHRvIFMzIG9yIGdlbmVyYXRlIHNpZ25lZCBVUkxcIik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBnZXRTaWduZWRVcmwoXG4gICAgZmlsZU5hbWU6IHN0cmluZyxcbiAgICB0dGxTZWNvbmRzOiBudW1iZXIsXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBnZXRTaWduZWRVcmwoXG4gICAgICAgIHRoaXMuY2xpZW50LFxuICAgICAgICBuZXcgR2V0T2JqZWN0Q29tbWFuZCh7XG4gICAgICAgICAgQnVja2V0OiBlbnYuUzNfQlVDS0VUX05BTUUsXG4gICAgICAgICAgS2V5OiBmaWxlTmFtZSxcbiAgICAgICAgICBSZXNwb25zZUNvbnRlbnREaXNwb3NpdGlvbjogYGF0dGFjaG1lbnQ7IGZpbGVuYW1lPVwiJHtmaWxlTmFtZX1cImAsXG4gICAgICAgIH0pLFxuICAgICAgICB7IGV4cGlyZXNJbjogdHRsU2Vjb25kcyB9LFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRocm93IEVycm9yKFwiRmFpbGVkIHRvIGdlbmVyYXRlIHNpZ25lZCBVUkxcIik7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldElzUzNTdG9yYWdlQ29uZmlndXJlZChcbiAgICBjdXJyZW50RW52OiBFbnYsXG4gICk6IGN1cnJlbnRFbnYgaXMgUzNDb25maWd1cmVkRW52IHtcbiAgICByZXR1cm4gQm9vbGVhbihcbiAgICAgIGN1cnJlbnRFbnYuUzNfQlVDS0VUX05BTUUgJiZcbiAgICAgICAgY3VycmVudEVudi5TM19BQ0NFU1NfS0VZX0lEICYmXG4gICAgICAgIGN1cnJlbnRFbnYuUzNfU0VDUkVUX0FDQ0VTU19LRVkgJiZcbiAgICAgICAgY3VycmVudEVudi5TM19FTkRQT0lOVCAmJlxuICAgICAgICBjdXJyZW50RW52LlMzX1JFR0lPTixcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCB7IFMzU3RvcmFnZVNlcnZpY2UgfTtcblxudHlwZSBFbnYgPSB0eXBlb2YgZW52O1xudHlwZSBTM0NvbmZpZ3VyZWRFbnYgPSBFbnYgJiB7XG4gIFMzX0FDQ0VTU19LRVlfSUQ6IHN0cmluZztcbiAgUzNfU0VDUkVUX0FDQ0VTU19LRVk6IHN0cmluZztcbiAgUzNfRU5EUE9JTlQ6IHN0cmluZztcbiAgUzNfUkVHSU9OOiBzdHJpbmc7XG59O1xuIl0sIm5hbWVzIjpbImVudiIsIkdldE9iamVjdENvbW1hbmQiLCJTM0NsaWVudCIsIlVwbG9hZCIsImdldFNpZ25lZFVybCIsIlMzU3RvcmFnZVNlcnZpY2UiLCJjb25zdHJ1Y3RvciIsImdldElzUzNTdG9yYWdlQ29uZmlndXJlZCIsIkVycm9yIiwiY2xpZW50IiwiY3JlZGVudGlhbHMiLCJhY2Nlc3NLZXlJZCIsIlMzX0FDQ0VTU19LRVlfSUQiLCJzZWNyZXRBY2Nlc3NLZXkiLCJTM19TRUNSRVRfQUNDRVNTX0tFWSIsImVuZHBvaW50IiwiUzNfRU5EUE9JTlQiLCJyZWdpb24iLCJTM19SRUdJT04iLCJ1cGxvYWRGaWxlIiwiZmlsZU5hbWUiLCJmaWxlVHlwZSIsImRhdGEiLCJwYXJhbXMiLCJCdWNrZXQiLCJTM19CVUNLRVRfTkFNRSIsIktleSIsIkJvZHkiLCJDb250ZW50VHlwZSIsImRvbmUiLCJleHBpcmVzSW5PbmVIb3VyIiwic2lnbmVkVXJsIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwidHRsU2Vjb25kcyIsIlJlc3BvbnNlQ29udGVudERpc3Bvc2l0aW9uIiwiZXhwaXJlc0luIiwiY3VycmVudEVudiIsIkJvb2xlYW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/api/services/S3StorageService.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/services/query-builder.ts":
/*!**************************************************!*\
  !*** ./src/server/api/services/query-builder.ts ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createQuery: () => (/* binding */ createQuery),\n/* harmony export */   enrichAndCreateQuery: () => (/* binding */ enrichAndCreateQuery),\n/* harmony export */   executeQuery: () => (/* binding */ executeQuery)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var decimal_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! decimal.js */ \"decimal.js\");\n/* harmony import */ var _sqlInterface__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./sqlInterface */ \"(api)/./src/server/api/services/sqlInterface.ts\");\n/* harmony import */ var _tableDefinitions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tableDefinitions */ \"(api)/./src/server/api/services/tableDefinitions.ts\");\n/* harmony import */ var _src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/features/filters/server/filterToPrisma */ \"(api)/./src/features/filters/server/filterToPrisma.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([decimal_js__WEBPACK_IMPORTED_MODULE_1__, _sqlInterface__WEBPACK_IMPORTED_MODULE_2__, _src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_4__]);\n([decimal_js__WEBPACK_IMPORTED_MODULE_1__, _sqlInterface__WEBPACK_IMPORTED_MODULE_2__, _src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\nconst executeQuery = async (prisma, projectId, unsafeQuery)=>{\n    const query = _sqlInterface__WEBPACK_IMPORTED_MODULE_2__.sqlInterface.parse(unsafeQuery);\n    const sql = enrichAndCreateQuery(projectId, query);\n    const response = await prisma.$queryRaw(sql);\n    const parsedResult = outputParser(response);\n    return parsedResult;\n};\nconst enrichAndCreateQuery = (projectId, queryUnsafe)=>{\n    const query = _sqlInterface__WEBPACK_IMPORTED_MODULE_2__.sqlInterface.parse(queryUnsafe);\n    return createQuery({\n        ...query,\n        filter: [\n            ...query.filter ?? [],\n            ...getMandatoryFilter(query.from, projectId)\n        ]\n    });\n};\nconst createQuery = (queryUnsafe)=>{\n    const query = _sqlInterface__WEBPACK_IMPORTED_MODULE_2__.sqlInterface.parse(queryUnsafe);\n    const cte = createDateRangeCte(query.from, query.filter ?? [], query.groupBy ?? []);\n    const fromString = cte?.from ?? _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql` FROM ${getTableSql(query.from)}`;\n    // raw mandatory everywhere here as this creates the selection\n    // agg is typed via zod\n    // column names come from our defs via the table definitions\n    const selectedColumns = query.select.map((selectedColumn)=>{\n        const safeColumn = getColumnDefinition(query.from, selectedColumn.column);\n        const safeAgg = _sqlInterface__WEBPACK_IMPORTED_MODULE_2__.aggregations.parse(selectedColumn.agg);\n        const columnDefinition = createAggregatedColumn(safeColumn, safeAgg);\n        return safeAgg ? _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`${columnDefinition} as \"${createOutputColumnName(safeColumn, safeAgg)}\"` : _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`${columnDefinition} as \"${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(safeColumn.name)}\"`;\n    });\n    if (cte) // raw mandatory here\n    selectedColumns.unshift(_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`date_series.\"date\" as \"${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(cte.column.name)}\"`);\n    let groupString = _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.empty;\n    if (query.groupBy && query.groupBy.length > 0 || cte) {\n        const groupByFields = (query.groupBy ?? []).map((groupBy)=>prepareGroupBy(query.from, groupBy));\n        groupString = groupByFields.length > 0 ? _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql` GROUP BY ${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.join(groupByFields, \", \")}` : _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.empty;\n    }\n    const selectString = selectedColumns.length > 0 ? _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql` SELECT ${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.join(selectedColumns, \", \")}` : _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.empty;\n    const orderByString = prepareOrderByString(query.from, query.orderBy, cte ? true : false);\n    const filterString = query.filter && query.filter.length > 0 ? _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql` ${cte ? _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql` AND ` : _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql` WHERE `} ${(0,_src_features_filters_server_filterToPrisma__WEBPACK_IMPORTED_MODULE_4__.tableColumnsToSqlFilter)(query.filter, _tableDefinitions__WEBPACK_IMPORTED_MODULE_3__.tableDefinitions[query.from].columns, query.from)}` : _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.empty;\n    const limitString = query.limit ? _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql` LIMIT ${query.limit}` : _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.empty;\n    return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`${cte?.cte ?? _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.empty}${selectString}${fromString}${filterString}${groupString}${orderByString}${limitString};`;\n};\nconst createOutputColumnName = (columnDefinition, safeAgg)=>{\n    if (!safeAgg) return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.empty;\n    if ([\n        \"SUM\",\n        \"AVG\",\n        \"COUNT\",\n        \"MAX\",\n        \"MIN\"\n    ].includes(safeAgg)) {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(safeAgg.toLowerCase())}${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(capitalizeFirstLetter(columnDefinition.name))}`;\n    }\n    if (safeAgg === \"50thPercentile\") {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`percentile50${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(capitalizeFirstLetter(columnDefinition.name))}`;\n    }\n    if (safeAgg === \"75thPercentile\") {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`percentile75${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(capitalizeFirstLetter(columnDefinition.name))}`;\n    }\n    if (safeAgg === \"90thPercentile\") {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`percentile90${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(capitalizeFirstLetter(columnDefinition.name))}`;\n    }\n    if (safeAgg === \"95thPercentile\") {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`percentile95${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(capitalizeFirstLetter(columnDefinition.name))}`;\n    }\n    if (safeAgg === \"99thPercentile\") {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`percentile99${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(capitalizeFirstLetter(columnDefinition.name))}`;\n    }\n    return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.empty;\n};\nconst createAggregatedColumn = (columnDefinition, agg)=>{\n    // raw mandatory everywhere here as this creates the selection\n    // agg is typed via zod\n    // column names come from our defs via the table definitions\n    switch(agg){\n        case \"AVG\":\n        case \"COUNT\":\n        case \"MAX\":\n        case \"MIN\":\n        case \"SUM\":\n            return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(_sqlInterface__WEBPACK_IMPORTED_MODULE_2__.aggregations.parse(agg))}(${getInternalSql(columnDefinition)})`;\n        case \"50thPercentile\":\n            return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`percentile_disc(0.5) within group (order by ${getInternalSql(columnDefinition)})`;\n        case \"75thPercentile\":\n            return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`percentile_disc(0.75) within group (order by ${getInternalSql(columnDefinition)})`;\n        case \"90thPercentile\":\n            return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`percentile_disc(0.9) within group (order by ${getInternalSql(columnDefinition)})`;\n        case \"95thPercentile\":\n            return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`percentile_disc(0.95) within group (order by ${getInternalSql(columnDefinition)})`;\n        case \"99thPercentile\":\n            return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`percentile_disc(0.99) within group (order by ${getInternalSql(columnDefinition)})`;\n        case undefined:\n            return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`${getInternalSql(columnDefinition)}`;\n    }\n};\nconst prepareOrderByString = (from, orderBy, hasCte)=>{\n    const orderBys = (orderBy ?? []).map((orderBy)=>{\n        // raw mandatory here\n        const safeColumn = getColumnDefinition(from, orderBy.column);\n        const safeAgg = _sqlInterface__WEBPACK_IMPORTED_MODULE_2__.aggregations.parse(orderBy.agg);\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`${createAggregatedColumn(safeColumn, safeAgg)} ${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(orderBy.direction)} ${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(orderBy.direction === \"DESC\" ? \"NULLS LAST\" : \"NULLS FIRST\")}`;\n    });\n    const addedCte = hasCte ? [\n        _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`date_series.\"date\" ASC`,\n        ...orderBys\n    ] : orderBys;\n    return addedCte.length > 0 ? _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql` ORDER BY ${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.join(addedCte, \", \")}` : _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.empty;\n};\nconst prepareGroupBy = (table, groupBy)=>{\n    const internalColumn = getInternalSql(getColumnDefinition(table, groupBy.column));\n    if (groupBy.type === \"datetime\") {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`date_series.\"date\"`;\n    } else {\n        return internalColumn;\n    }\n};\nfunction isTimeRangeFilter(filter) {\n    return filter.type === \"datetime\";\n}\nconst createDateRangeCte = (fromUnsafe, filtersUnsafe, groupByUnsafe)=>{\n    const from = _sqlInterface__WEBPACK_IMPORTED_MODULE_2__.sqlInterface.shape.from.parse(fromUnsafe);\n    const groupBy = _sqlInterface__WEBPACK_IMPORTED_MODULE_2__.groupByInterface.parse(groupByUnsafe);\n    const filters = _sqlInterface__WEBPACK_IMPORTED_MODULE_2__.filterInterface.parse(filtersUnsafe);\n    const groupByColumns = groupBy.filter((x)=>x.type === \"datetime\");\n    if (groupByColumns.length === 0) return undefined;\n    if (groupByColumns.length > 1) throw new Error(\"Only one datetime group by is supported\");\n    const groupByColumn = groupByColumns[0];\n    const dateTimeFilters = filters.filter(isTimeRangeFilter);\n    const minDateColumn = dateTimeFilters.length > 1 ? dateTimeFilters.find((x)=>x.operator === \">\" || x.operator === \">=\") : undefined;\n    const maxDateColumn = dateTimeFilters.length > 1 ? dateTimeFilters.find((x)=>x.operator === \"<\" || x.operator === \"<=\") : undefined;\n    if (groupByColumn && \"temporalUnit\" in groupByColumn && minDateColumn && maxDateColumn) {\n        if (minDateColumn.column !== groupByColumn.column || maxDateColumn.column !== groupByColumn.column) {\n            throw new Error(\"Min date column, max date column must match group by column\");\n        }\n        const startColumn = getColumnDefinition(from, minDateColumn.column);\n        // raw mandatory for temporal unit. From and to are parameterised values\n        // temporal unit is typed\n        const cteString = _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql`\n      WITH date_series AS (\n        SELECT generate_series(${minDateColumn.value}, ${maxDateColumn.value}, '1 ${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(groupByColumn.temporalUnit)}') as date\n      )\n    `;\n        // as above, raw is mandatory for columns and temporal unit\n        const modifiedFrom = _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.sql` FROM date_series LEFT JOIN ${getTableSql(from)} ON DATE_TRUNC('${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(groupByColumn.temporalUnit)}', ${getInternalSql(startColumn)}) = DATE_TRUNC('${_prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(groupByColumn.temporalUnit)}', date_series.\"date\")`;\n        return {\n            cte: cteString,\n            from: modifiedFrom,\n            column: startColumn\n        };\n    }\n    return undefined;\n};\nconst getTableSql = (tableUnsafe)=>{\n    const table = _sqlInterface__WEBPACK_IMPORTED_MODULE_2__.sqlInterface.shape.from.parse(tableUnsafe);\n    return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(_tableDefinitions__WEBPACK_IMPORTED_MODULE_3__.tableDefinitions[table].table);\n};\nconst getColumnDefinition = (tableUnsafe, column)=>{\n    const table = _sqlInterface__WEBPACK_IMPORTED_MODULE_2__.sqlInterface.shape.from.parse(tableUnsafe);\n    const foundColumn = _tableDefinitions__WEBPACK_IMPORTED_MODULE_3__.tableDefinitions[table].columns.find((c)=>{\n        return c.name === column;\n    });\n    if (!foundColumn) {\n        console.error(`Column \"${column}\" not found in table ${table}`);\n        throw new Error(`Column \"${column}\" not found in table ${table}`);\n    }\n    return foundColumn;\n};\nconst getInternalSql = (colDef)=>// raw required here, everything is typed\n    _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.raw(colDef.internal);\nconst outputParser = (output)=>{\n    return output.map((row)=>{\n        const newRow = {};\n        for(const key in row){\n            const val = row[key];\n            if (typeof val === \"bigint\") {\n                newRow[key] = Number(val);\n            } else if (typeof val === \"number\") {\n                newRow[key] = val;\n            } else if (decimal_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isDecimal(val)) {\n                newRow[key] = val.toNumber();\n            } else if (typeof val === \"string\") {\n                newRow[key] = val;\n            } else if (val instanceof Date) {\n                newRow[key] = val;\n            // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n            } else if (val === null) {\n                newRow[key] = val;\n            } else {\n                console.log(`Unknown type ${typeof val} for ${val}`);\n                throw new Error(`Unknown type ${typeof val}`);\n            }\n        }\n        return newRow;\n    });\n};\nfunction capitalizeFirstLetter(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\nconst getMandatoryFilter = (tableUnsafe, projectId)=>{\n    const table = _sqlInterface__WEBPACK_IMPORTED_MODULE_2__.sqlInterface.shape.from.parse(tableUnsafe);\n    const observationFilter = {\n        type: \"string\",\n        column: \"observationsProjectId\",\n        operator: \"=\",\n        value: projectId\n    };\n    const traceFilter = {\n        type: \"string\",\n        column: \"tracesProjectId\",\n        operator: \"=\",\n        value: projectId\n    };\n    switch(table){\n        case \"traces\":\n        case \"traces_scores\":\n        case \"traces_metrics\":\n            return [\n                traceFilter\n            ];\n        case \"traces_observations\":\n        case \"traces_observationsview\":\n        case \"traces_parent_observation_scores\":\n            return [\n                traceFilter,\n                observationFilter\n            ];\n        case \"observations\":\n            return [\n                observationFilter\n            ];\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9zZXJ2aWNlcy9xdWVyeS1idWlsZGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUsyRDtBQUUxQjtBQU9UO0FBQzhCO0FBQ2lDO0FBVWhGLE1BQU1RLGVBQWUsT0FDMUJDLFFBQ0FDLFdBQ0FDO0lBRUEsTUFBTUMsUUFBUVYsdURBQVlBLENBQUNXLEtBQUssQ0FBQ0Y7SUFDakMsTUFBTUcsTUFBTUMscUJBQXFCTCxXQUFXRTtJQUM1QyxNQUFNSSxXQUFXLE1BQU1QLE9BQU9RLFNBQVMsQ0FBd0JIO0lBRS9ELE1BQU1JLGVBQWVDLGFBQWFIO0lBRWxDLE9BQU9FO0FBQ1QsRUFBRTtBQUVLLE1BQU1ILHVCQUF1QixDQUNsQ0wsV0FDQVU7SUFFQSxNQUFNUixRQUFRVix1REFBWUEsQ0FBQ1csS0FBSyxDQUFDTztJQUNqQyxPQUFPQyxZQUFZO1FBQ2pCLEdBQUdULEtBQUs7UUFDUlUsUUFBUTtlQUNGVixNQUFNVSxNQUFNLElBQUksRUFBRTtlQUNuQkMsbUJBQW1CWCxNQUFNWSxJQUFJLEVBQUVkO1NBQ25DO0lBQ0g7QUFDRixFQUFFO0FBRUssTUFBTVcsY0FBYyxDQUFDRDtJQUMxQixNQUFNUixRQUFRVix1REFBWUEsQ0FBQ1csS0FBSyxDQUFDTztJQUVqQyxNQUFNSyxNQUFNQyxtQkFDVmQsTUFBTVksSUFBSSxFQUNWWixNQUFNVSxNQUFNLElBQUksRUFBRSxFQUNsQlYsTUFBTWUsT0FBTyxJQUFJLEVBQUU7SUFHckIsTUFBTUMsYUFBYUgsS0FBS0QsUUFBUXhCLGtEQUFNQSxDQUFDYyxHQUFHLENBQUMsTUFBTSxFQUFFZSxZQUFZakIsTUFBTVksSUFBSSxFQUFFLENBQUM7SUFFNUUsOERBQThEO0lBQzlELHVCQUF1QjtJQUN2Qiw0REFBNEQ7SUFDNUQsTUFBTU0sa0JBQWtCbEIsTUFBTW1CLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDLENBQUNDO1FBQ3hDLE1BQU1DLGFBQWFDLG9CQUFvQnZCLE1BQU1ZLElBQUksRUFBRVMsZUFBZUcsTUFBTTtRQUN4RSxNQUFNQyxVQUFVbEMsdURBQVlBLENBQUNVLEtBQUssQ0FBQ29CLGVBQWVLLEdBQUc7UUFDckQsTUFBTUMsbUJBQW1CQyx1QkFBdUJOLFlBQVlHO1FBQzVELE9BQU9BLFVBQ0hyQyxrREFBTUEsQ0FBQ2MsR0FBRyxDQUFDLEVBQUV5QixpQkFBaUIsS0FBSyxFQUFFRSx1QkFDbkNQLFlBQ0FHLFNBQ0EsQ0FBQyxDQUFDLEdBQ0pyQyxrREFBTUEsQ0FBQ2MsR0FBRyxDQUFDLEVBQUV5QixpQkFBaUIsS0FBSyxFQUFFdkMsa0RBQU1BLENBQUMwQyxHQUFHLENBQUNSLFdBQVdTLElBQUksRUFBRSxDQUFDLENBQUM7SUFDekU7SUFFQSxJQUFJbEIsS0FDRixxQkFBcUI7SUFDckJLLGdCQUFnQmMsT0FBTyxDQUNyQjVDLGtEQUFNQSxDQUFDYyxHQUFHLENBQUMsdUJBQXVCLEVBQUVkLGtEQUFNQSxDQUFDMEMsR0FBRyxDQUFDakIsSUFBSVcsTUFBTSxDQUFDTyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBR3RFLElBQUlFLGNBQWM3QyxrREFBTUEsQ0FBQzhDLEtBQUs7SUFFOUIsSUFBSSxNQUFPbkIsT0FBTyxJQUFJZixNQUFNZSxPQUFPLENBQUNvQixNQUFNLEdBQUcsS0FBTXRCLEtBQUs7UUFDdEQsTUFBTXVCLGdCQUFnQixDQUFDcEMsTUFBTWUsT0FBTyxJQUFJLEVBQUUsRUFBRUssR0FBRyxDQUFDLENBQUNMLFVBQy9Dc0IsZUFBZXJDLE1BQU1ZLElBQUksRUFBRUc7UUFFN0JrQixjQUNFRyxjQUFjRCxNQUFNLEdBQUcsSUFDbkIvQyxrREFBTUEsQ0FBQ2MsR0FBRyxDQUFDLFVBQVUsRUFBRWQsa0RBQU1BLENBQUNrRCxJQUFJLENBQUNGLGVBQWUsTUFBTSxDQUFDLEdBQ3pEaEQsa0RBQU1BLENBQUM4QyxLQUFLO0lBQ3BCO0lBQ0EsTUFBTUssZUFDSnJCLGdCQUFnQmlCLE1BQU0sR0FBRyxJQUNyQi9DLGtEQUFNQSxDQUFDYyxHQUFHLENBQUMsUUFBUSxFQUFFZCxrREFBTUEsQ0FBQ2tELElBQUksQ0FBQ3BCLGlCQUFpQixNQUFNLENBQUMsR0FDekQ5QixrREFBTUEsQ0FBQzhDLEtBQUs7SUFFbEIsTUFBTU0sZ0JBQWdCQyxxQkFDcEJ6QyxNQUFNWSxJQUFJLEVBQ1ZaLE1BQU0wQyxPQUFPLEVBQ2I3QixNQUFNLE9BQU87SUFHZixNQUFNOEIsZUFDSjNDLE1BQU1VLE1BQU0sSUFBSVYsTUFBTVUsTUFBTSxDQUFDeUIsTUFBTSxHQUFHLElBQ2xDL0Msa0RBQU1BLENBQUNjLEdBQUcsQ0FBQyxDQUFDLEVBQ1ZXLE1BQU16QixrREFBTUEsQ0FBQ2MsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHZCxrREFBTUEsQ0FBQ2MsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUM5QyxDQUFDLEVBQUVQLG9HQUF1QkEsQ0FBQ0ssTUFBTVUsTUFBTSxFQUFFaEIsK0RBQWdCLENBQUNNLE1BQU1ZLElBQUksQ0FBQyxDQUFFZ0MsT0FBTyxFQUFFNUMsTUFBTVksSUFBSSxFQUFFLENBQUMsR0FDOUZ4QixrREFBTUEsQ0FBQzhDLEtBQUs7SUFFbEIsTUFBTVcsY0FBYzdDLE1BQU04QyxLQUFLLEdBQzNCMUQsa0RBQU1BLENBQUNjLEdBQUcsQ0FBQyxPQUFPLEVBQUVGLE1BQU04QyxLQUFLLENBQUMsQ0FBQyxHQUNqQzFELGtEQUFNQSxDQUFDOEMsS0FBSztJQUVoQixPQUFPOUMsa0RBQU1BLENBQUNjLEdBQUcsQ0FBQyxFQUNoQlcsS0FBS0EsT0FBT3pCLGtEQUFNQSxDQUFDOEMsS0FBSyxDQUN6QixFQUFFSyxhQUFhLEVBQUV2QixXQUFXLEVBQUUyQixhQUFhLEVBQUVWLFlBQVksRUFBRU8sY0FBYyxFQUFFSyxZQUFZLENBQUMsQ0FBQztBQUM1RixFQUFFO0FBRUYsTUFBTWhCLHlCQUF5QixDQUM3QkYsa0JBQ0FGO0lBRUEsSUFBSSxDQUFDQSxTQUFTLE9BQU9yQyxrREFBTUEsQ0FBQzhDLEtBQUs7SUFDakMsSUFBSTtRQUFDO1FBQU87UUFBTztRQUFTO1FBQU87S0FBTSxDQUFDYSxRQUFRLENBQUN0QixVQUFVO1FBQzNELE9BQU9yQyxrREFBTUEsQ0FBQ2MsR0FBRyxDQUFDLEVBQUVkLGtEQUFNQSxDQUFDMEMsR0FBRyxDQUFDTCxRQUFRdUIsV0FBVyxJQUFJLEVBQUU1RCxrREFBTUEsQ0FBQzBDLEdBQUcsQ0FDaEVtQixzQkFBc0J0QixpQkFBaUJJLElBQUksR0FDM0MsQ0FBQztJQUNMO0lBRUEsSUFBSU4sWUFBWSxrQkFBa0I7UUFDaEMsT0FBT3JDLGtEQUFNQSxDQUFDYyxHQUFHLENBQUMsWUFBWSxFQUFFZCxrREFBTUEsQ0FBQzBDLEdBQUcsQ0FDeENtQixzQkFBc0J0QixpQkFBaUJJLElBQUksR0FDM0MsQ0FBQztJQUNMO0lBQ0EsSUFBSU4sWUFBWSxrQkFBa0I7UUFDaEMsT0FBT3JDLGtEQUFNQSxDQUFDYyxHQUFHLENBQUMsWUFBWSxFQUFFZCxrREFBTUEsQ0FBQzBDLEdBQUcsQ0FDeENtQixzQkFBc0J0QixpQkFBaUJJLElBQUksR0FDM0MsQ0FBQztJQUNMO0lBQ0EsSUFBSU4sWUFBWSxrQkFBa0I7UUFDaEMsT0FBT3JDLGtEQUFNQSxDQUFDYyxHQUFHLENBQUMsWUFBWSxFQUFFZCxrREFBTUEsQ0FBQzBDLEdBQUcsQ0FDeENtQixzQkFBc0J0QixpQkFBaUJJLElBQUksR0FDM0MsQ0FBQztJQUNMO0lBQ0EsSUFBSU4sWUFBWSxrQkFBa0I7UUFDaEMsT0FBT3JDLGtEQUFNQSxDQUFDYyxHQUFHLENBQUMsWUFBWSxFQUFFZCxrREFBTUEsQ0FBQzBDLEdBQUcsQ0FDeENtQixzQkFBc0J0QixpQkFBaUJJLElBQUksR0FDM0MsQ0FBQztJQUNMO0lBQ0EsSUFBSU4sWUFBWSxrQkFBa0I7UUFDaEMsT0FBT3JDLGtEQUFNQSxDQUFDYyxHQUFHLENBQUMsWUFBWSxFQUFFZCxrREFBTUEsQ0FBQzBDLEdBQUcsQ0FDeENtQixzQkFBc0J0QixpQkFBaUJJLElBQUksR0FDM0MsQ0FBQztJQUNMO0lBQ0EsT0FBTzNDLGtEQUFNQSxDQUFDOEMsS0FBSztBQUNyQjtBQUVBLE1BQU1OLHlCQUF5QixDQUM3QkQsa0JBQ0FEO0lBRUEsOERBQThEO0lBQzlELHVCQUF1QjtJQUN2Qiw0REFBNEQ7SUFFNUQsT0FBUUE7UUFDTixLQUFLO1FBQ0wsS0FBSztRQUNMLEtBQUs7UUFDTCxLQUFLO1FBQ0wsS0FBSztZQUNILE9BQU90QyxrREFBTUEsQ0FBQ2MsR0FBRyxDQUFDLEVBQUVkLGtEQUFNQSxDQUFDMEMsR0FBRyxDQUM1QnZDLHVEQUFZQSxDQUFDVSxLQUFLLENBQUN5QixNQUNuQixDQUFDLEVBQUV3QixlQUFldkIsa0JBQWtCLENBQUMsQ0FBQztRQUMxQyxLQUFLO1lBQ0gsT0FBT3ZDLGtEQUFNQSxDQUFDYyxHQUFHLENBQUMsNENBQTRDLEVBQUVnRCxlQUM5RHZCLGtCQUNBLENBQUMsQ0FBQztRQUNOLEtBQUs7WUFDSCxPQUFPdkMsa0RBQU1BLENBQUNjLEdBQUcsQ0FBQyw2Q0FBNkMsRUFBRWdELGVBQy9EdkIsa0JBQ0EsQ0FBQyxDQUFDO1FBQ04sS0FBSztZQUNILE9BQU92QyxrREFBTUEsQ0FBQ2MsR0FBRyxDQUFDLDRDQUE0QyxFQUFFZ0QsZUFDOUR2QixrQkFDQSxDQUFDLENBQUM7UUFDTixLQUFLO1lBQ0gsT0FBT3ZDLGtEQUFNQSxDQUFDYyxHQUFHLENBQUMsNkNBQTZDLEVBQUVnRCxlQUMvRHZCLGtCQUNBLENBQUMsQ0FBQztRQUNOLEtBQUs7WUFDSCxPQUFPdkMsa0RBQU1BLENBQUNjLEdBQUcsQ0FBQyw2Q0FBNkMsRUFBRWdELGVBQy9EdkIsa0JBQ0EsQ0FBQyxDQUFDO1FBQ04sS0FBS3dCO1lBQ0gsT0FBTy9ELGtEQUFNQSxDQUFDYyxHQUFHLENBQUMsRUFBRWdELGVBQWV2QixrQkFBa0IsQ0FBQztJQUMxRDtBQUNGO0FBRUEsTUFBTWMsdUJBQXVCLENBQzNCN0IsTUFDQThCLFNBQ0FVO0lBRUEsTUFBTUMsV0FBVyxDQUFDWCxXQUFXLEVBQUUsRUFBRXRCLEdBQUcsQ0FBQyxDQUFDc0I7UUFDcEMscUJBQXFCO1FBQ3JCLE1BQU1wQixhQUFhQyxvQkFBb0JYLE1BQU04QixRQUFRbEIsTUFBTTtRQUMzRCxNQUFNQyxVQUFVbEMsdURBQVlBLENBQUNVLEtBQUssQ0FBQ3lDLFFBQVFoQixHQUFHO1FBQzlDLE9BQU90QyxrREFBTUEsQ0FBQ2MsR0FBRyxDQUFDLEVBQUUwQix1QkFDbEJOLFlBQ0FHLFNBQ0EsQ0FBQyxFQUFFckMsa0RBQU1BLENBQUMwQyxHQUFHLENBQUNZLFFBQVFZLFNBQVMsRUFBRSxDQUFDLEVBQUVsRSxrREFBTUEsQ0FBQzBDLEdBQUcsQ0FBQ1ksUUFBUVksU0FBUyxLQUFLLFNBQVMsZUFBZSxlQUFlLENBQUM7SUFDakg7SUFDQSxNQUFNQyxXQUFXSCxTQUNiO1FBQUNoRSxrREFBTUEsQ0FBQ2MsR0FBRyxDQUFDLHNCQUFzQixDQUFDO1dBQUttRDtLQUFTLEdBQ2pEQTtJQUVKLE9BQU9FLFNBQVNwQixNQUFNLEdBQUcsSUFDckIvQyxrREFBTUEsQ0FBQ2MsR0FBRyxDQUFDLFVBQVUsRUFBRWQsa0RBQU1BLENBQUNrRCxJQUFJLENBQUNpQixVQUFVLE1BQU0sQ0FBQyxHQUNwRG5FLGtEQUFNQSxDQUFDOEMsS0FBSztBQUNsQjtBQUVBLE1BQU1HLGlCQUFpQixDQUNyQm1CLE9BQ0F6QztJQUVBLE1BQU0wQyxpQkFBaUJQLGVBQ3JCM0Isb0JBQW9CaUMsT0FBT3pDLFFBQVFTLE1BQU07SUFFM0MsSUFBSVQsUUFBUTJDLElBQUksS0FBSyxZQUFZO1FBQy9CLE9BQU90RSxrREFBTUEsQ0FBQ2MsR0FBRyxDQUFDLGtCQUFrQixDQUFDO0lBQ3ZDLE9BQU87UUFDTCxPQUFPdUQ7SUFDVDtBQUNGO0FBRUEsU0FBU0Usa0JBQ1BqRCxNQUErQztJQUUvQyxPQUFPQSxPQUFPZ0QsSUFBSSxLQUFLO0FBQ3pCO0FBRUEsTUFBTTVDLHFCQUFxQixDQUN6QjhDLFlBQ0FDLGVBQ0FDO0lBRUEsTUFBTWxELE9BQU90Qix1REFBWUEsQ0FBQ3lFLEtBQUssQ0FBQ25ELElBQUksQ0FBQ1gsS0FBSyxDQUFDMkQ7SUFDM0MsTUFBTTdDLFVBQVV2QiwyREFBZ0JBLENBQUNTLEtBQUssQ0FBQzZEO0lBQ3ZDLE1BQU1FLFVBQVV2RSwwREFBZUEsQ0FBQ1EsS0FBSyxDQUFDNEQ7SUFFdEMsTUFBTUksaUJBQWlCbEQsUUFBUUwsTUFBTSxDQUFDLENBQUN3RCxJQUFNQSxFQUFFUixJQUFJLEtBQUs7SUFFeEQsSUFBSU8sZUFBZTlCLE1BQU0sS0FBSyxHQUFHLE9BQU9nQjtJQUN4QyxJQUFJYyxlQUFlOUIsTUFBTSxHQUFHLEdBQzFCLE1BQU0sSUFBSWdDLE1BQU07SUFFbEIsTUFBTUMsZ0JBQWdCSCxjQUFjLENBQUMsRUFBRTtJQUV2QyxNQUFNSSxrQkFBa0JMLFFBQVF0RCxNQUFNLENBQUNpRDtJQUV2QyxNQUFNVyxnQkFDSkQsZ0JBQWdCbEMsTUFBTSxHQUFHLElBQ3JCa0MsZ0JBQWdCRSxJQUFJLENBQUMsQ0FBQ0wsSUFBTUEsRUFBRU0sUUFBUSxLQUFLLE9BQU9OLEVBQUVNLFFBQVEsS0FBSyxRQUNqRXJCO0lBRU4sTUFBTXNCLGdCQUNKSixnQkFBZ0JsQyxNQUFNLEdBQUcsSUFDckJrQyxnQkFBZ0JFLElBQUksQ0FBQyxDQUFDTCxJQUFNQSxFQUFFTSxRQUFRLEtBQUssT0FBT04sRUFBRU0sUUFBUSxLQUFLLFFBQ2pFckI7SUFFTixJQUNFaUIsaUJBQ0Esa0JBQWtCQSxpQkFDbEJFLGlCQUNBRyxlQUNBO1FBQ0EsSUFDRUgsY0FBYzlDLE1BQU0sS0FBSzRDLGNBQWM1QyxNQUFNLElBQzdDaUQsY0FBY2pELE1BQU0sS0FBSzRDLGNBQWM1QyxNQUFNLEVBQzdDO1lBQ0EsTUFBTSxJQUFJMkMsTUFDUjtRQUVKO1FBRUEsTUFBTU8sY0FBY25ELG9CQUFvQlgsTUFBTTBELGNBQWM5QyxNQUFNO1FBRWxFLHdFQUF3RTtRQUN4RSx5QkFBeUI7UUFDekIsTUFBTW1ELFlBQVl2RixrREFBTUEsQ0FBQ2MsR0FBRyxDQUFDOzsrQkFFRixFQUFFb0UsY0FBY00sS0FBSyxDQUFDLEVBQUUsRUFDN0NILGNBQWNHLEtBQUssQ0FDcEIsS0FBSyxFQUFFeEYsa0RBQU1BLENBQUMwQyxHQUFHLENBQUNzQyxjQUFjUyxZQUFZLEVBQUU7O0lBRW5ELENBQUM7UUFFRCwyREFBMkQ7UUFDM0QsTUFBTUMsZUFBZTFGLGtEQUFNQSxDQUFDYyxHQUFHLENBQUMsNEJBQTRCLEVBQUVlLFlBQzVETCxNQUNBLGdCQUFnQixFQUFFeEIsa0RBQU1BLENBQUMwQyxHQUFHLENBQzVCc0MsY0FBY1MsWUFBWSxFQUMxQixHQUFHLEVBQUUzQixlQUFld0IsYUFBYSxnQkFBZ0IsRUFBRXRGLGtEQUFNQSxDQUFDMEMsR0FBRyxDQUM3RHNDLGNBQWNTLFlBQVksRUFDMUIsc0JBQXNCLENBQUM7UUFFekIsT0FBTztZQUFFaEUsS0FBSzhEO1lBQVcvRCxNQUFNa0U7WUFBY3RELFFBQVFrRDtRQUFZO0lBQ25FO0lBRUEsT0FBT3ZCO0FBQ1Q7QUFFQSxNQUFNbEMsY0FBYyxDQUNsQjhEO0lBRUEsTUFBTXZCLFFBQVFsRSx1REFBWUEsQ0FBQ3lFLEtBQUssQ0FBQ25ELElBQUksQ0FBQ1gsS0FBSyxDQUFDOEU7SUFDNUMsT0FBTzNGLGtEQUFNQSxDQUFDMEMsR0FBRyxDQUFDcEMsK0RBQWdCLENBQUM4RCxNQUFNLENBQUVBLEtBQUs7QUFDbEQ7QUFFQSxNQUFNakMsc0JBQXNCLENBQzFCd0QsYUFDQXZEO0lBRUEsTUFBTWdDLFFBQVFsRSx1REFBWUEsQ0FBQ3lFLEtBQUssQ0FBQ25ELElBQUksQ0FBQ1gsS0FBSyxDQUFDOEU7SUFFNUMsTUFBTUMsY0FBY3RGLCtEQUFnQixDQUFDOEQsTUFBTSxDQUFFWixPQUFPLENBQUMyQixJQUFJLENBQUMsQ0FBQ1U7UUFDekQsT0FBT0EsRUFBRWxELElBQUksS0FBS1A7SUFDcEI7SUFDQSxJQUFJLENBQUN3RCxhQUFhO1FBQ2hCRSxRQUFRQyxLQUFLLENBQUMsQ0FBQyxRQUFRLEVBQUUzRCxPQUFPLHFCQUFxQixFQUFFZ0MsTUFBTSxDQUFDO1FBQzlELE1BQU0sSUFBSVcsTUFBTSxDQUFDLFFBQVEsRUFBRTNDLE9BQU8scUJBQXFCLEVBQUVnQyxNQUFNLENBQUM7SUFDbEU7SUFDQSxPQUFPd0I7QUFDVDtBQUVBLE1BQU05QixpQkFBaUIsQ0FBQ2tDLFNBQ3RCLHlDQUF5QztJQUN6Q2hHLGtEQUFNQSxDQUFDMEMsR0FBRyxDQUFDc0QsT0FBT0MsUUFBUTtBQUU1QixNQUFNOUUsZUFBZSxDQUFDK0U7SUFDcEIsT0FBT0EsT0FBT2xFLEdBQUcsQ0FBQyxDQUFDbUU7UUFDakIsTUFBTUMsU0FBc0IsQ0FBQztRQUM3QixJQUFLLE1BQU1DLE9BQU9GLElBQUs7WUFDckIsTUFBTUcsTUFBTUgsR0FBRyxDQUFDRSxJQUFJO1lBQ3BCLElBQUksT0FBT0MsUUFBUSxVQUFVO2dCQUMzQkYsTUFBTSxDQUFDQyxJQUFJLEdBQUdFLE9BQU9EO1lBQ3ZCLE9BQU8sSUFBSSxPQUFPQSxRQUFRLFVBQVU7Z0JBQ2xDRixNQUFNLENBQUNDLElBQUksR0FBR0M7WUFDaEIsT0FBTyxJQUFJckcsNERBQWlCLENBQUNxRyxNQUFNO2dCQUNqQ0YsTUFBTSxDQUFDQyxJQUFJLEdBQUdDLElBQUlHLFFBQVE7WUFDNUIsT0FBTyxJQUFJLE9BQU9ILFFBQVEsVUFBVTtnQkFDbENGLE1BQU0sQ0FBQ0MsSUFBSSxHQUFHQztZQUNoQixPQUFPLElBQUlBLGVBQWVJLE1BQU07Z0JBQzlCTixNQUFNLENBQUNDLElBQUksR0FBR0M7WUFDZCx1RUFBdUU7WUFDekUsT0FBTyxJQUFJQSxRQUFRLE1BQU07Z0JBQ3ZCRixNQUFNLENBQUNDLElBQUksR0FBR0M7WUFDaEIsT0FBTztnQkFDTFIsUUFBUWEsR0FBRyxDQUFDLENBQUMsYUFBYSxFQUFFLE9BQU9MLElBQUksS0FBSyxFQUFFQSxJQUFJLENBQUM7Z0JBQ25ELE1BQU0sSUFBSXZCLE1BQU0sQ0FBQyxhQUFhLEVBQUUsT0FBT3VCLElBQUksQ0FBQztZQUM5QztRQUNGO1FBQ0EsT0FBT0Y7SUFDVDtBQUNGO0FBRUEsU0FBU3ZDLHNCQUFzQitDLEdBQVc7SUFDeEMsT0FBT0EsSUFBSUMsTUFBTSxDQUFDLEdBQUdDLFdBQVcsS0FBS0YsSUFBSUcsS0FBSyxDQUFDO0FBQ2pEO0FBRUEsTUFBTXhGLHFCQUFxQixDQUN6Qm9FLGFBQ0FqRjtJQUVBLE1BQU0wRCxRQUFRbEUsdURBQVlBLENBQUN5RSxLQUFLLENBQUNuRCxJQUFJLENBQUNYLEtBQUssQ0FBQzhFO0lBRTVDLE1BQU1xQixvQkFBb0I7UUFDeEIxQyxNQUFNO1FBQ05sQyxRQUFRO1FBQ1JnRCxVQUFVO1FBQ1ZJLE9BQU85RTtJQUNUO0lBRUEsTUFBTXVHLGNBQWM7UUFDbEIzQyxNQUFNO1FBQ05sQyxRQUFRO1FBQ1JnRCxVQUFVO1FBQ1ZJLE9BQU85RTtJQUNUO0lBRUEsT0FBUTBEO1FBQ04sS0FBSztRQUNMLEtBQUs7UUFDTCxLQUFLO1lBQ0gsT0FBTztnQkFBQzZDO2FBQVk7UUFDdEIsS0FBSztRQUNMLEtBQUs7UUFDTCxLQUFLO1lBQ0gsT0FBTztnQkFBQ0E7Z0JBQWFEO2FBQWtCO1FBQ3pDLEtBQUs7WUFDSCxPQUFPO2dCQUFDQTthQUFrQjtJQUM5QjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL3NlcnZlci9hcGkvc2VydmljZXMvcXVlcnktYnVpbGRlci50cz82M2ZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHR5cGUgc2luZ2xlRmlsdGVyLFxuICB0eXBlIHRpbWVGaWx0ZXIsXG59IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL2ludGVyZmFjZXMvZmlsdGVyc1wiO1xuaW1wb3J0IHsgdHlwZSBDb2x1bW5EZWZpbml0aW9uIH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvaW50ZXJmYWNlcy90YWJsZURlZmluaXRpb25cIjtcbmltcG9ydCB7IFByaXNtYSwgdHlwZSBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcbmltcG9ydCB7IHR5cGUgU3FsIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50L3J1bnRpbWUvbGlicmFyeVwiO1xuaW1wb3J0IERlY2ltYWwgZnJvbSBcImRlY2ltYWwuanNcIjtcbmltcG9ydCB7IHR5cGUgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7XG4gIHNxbEludGVyZmFjZSxcbiAgYWdncmVnYXRpb25zLFxuICBncm91cEJ5SW50ZXJmYWNlLFxuICBmaWx0ZXJJbnRlcmZhY2UsXG59IGZyb20gXCIuL3NxbEludGVyZmFjZVwiO1xuaW1wb3J0IHsgdGFibGVEZWZpbml0aW9ucyB9IGZyb20gXCIuL3RhYmxlRGVmaW5pdGlvbnNcIjtcbmltcG9ydCB7IHRhYmxlQ29sdW1uc1RvU3FsRmlsdGVyIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL2ZpbHRlcnMvc2VydmVyL2ZpbHRlclRvUHJpc21hXCI7XG5cbmV4cG9ydCB0eXBlIEludGVybmFsRGF0YWJhc2VSb3cgPSB7XG4gIFtrZXk6IHN0cmluZ106IGJpZ2ludCB8IG51bWJlciB8IERlY2ltYWwgfCBzdHJpbmcgfCBEYXRlO1xufTtcblxuZXhwb3J0IHR5cGUgRGF0YWJhc2VSb3cgPSB7XG4gIFtrZXk6IHN0cmluZ106IHN0cmluZyB8IG51bWJlciB8IERhdGUgfCBudWxsO1xufTtcblxuZXhwb3J0IGNvbnN0IGV4ZWN1dGVRdWVyeSA9IGFzeW5jIChcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQsXG4gIHByb2plY3RJZDogc3RyaW5nLFxuICB1bnNhZmVRdWVyeTogei5UeXBlT2Y8dHlwZW9mIHNxbEludGVyZmFjZT4sXG4pID0+IHtcbiAgY29uc3QgcXVlcnkgPSBzcWxJbnRlcmZhY2UucGFyc2UodW5zYWZlUXVlcnkpO1xuICBjb25zdCBzcWwgPSBlbnJpY2hBbmRDcmVhdGVRdWVyeShwcm9qZWN0SWQsIHF1ZXJ5KTtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwcmlzbWEuJHF1ZXJ5UmF3PEludGVybmFsRGF0YWJhc2VSb3dbXT4oc3FsKTtcblxuICBjb25zdCBwYXJzZWRSZXN1bHQgPSBvdXRwdXRQYXJzZXIocmVzcG9uc2UpO1xuXG4gIHJldHVybiBwYXJzZWRSZXN1bHQ7XG59O1xuXG5leHBvcnQgY29uc3QgZW5yaWNoQW5kQ3JlYXRlUXVlcnkgPSAoXG4gIHByb2plY3RJZDogc3RyaW5nLFxuICBxdWVyeVVuc2FmZTogei5UeXBlT2Y8dHlwZW9mIHNxbEludGVyZmFjZT4sXG4pID0+IHtcbiAgY29uc3QgcXVlcnkgPSBzcWxJbnRlcmZhY2UucGFyc2UocXVlcnlVbnNhZmUpO1xuICByZXR1cm4gY3JlYXRlUXVlcnkoe1xuICAgIC4uLnF1ZXJ5LFxuICAgIGZpbHRlcjogW1xuICAgICAgLi4uKHF1ZXJ5LmZpbHRlciA/PyBbXSksXG4gICAgICAuLi5nZXRNYW5kYXRvcnlGaWx0ZXIocXVlcnkuZnJvbSwgcHJvamVjdElkKSxcbiAgICBdLFxuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVRdWVyeSA9IChxdWVyeVVuc2FmZTogei5UeXBlT2Y8dHlwZW9mIHNxbEludGVyZmFjZT4pID0+IHtcbiAgY29uc3QgcXVlcnkgPSBzcWxJbnRlcmZhY2UucGFyc2UocXVlcnlVbnNhZmUpO1xuXG4gIGNvbnN0IGN0ZSA9IGNyZWF0ZURhdGVSYW5nZUN0ZShcbiAgICBxdWVyeS5mcm9tLFxuICAgIHF1ZXJ5LmZpbHRlciA/PyBbXSxcbiAgICBxdWVyeS5ncm91cEJ5ID8/IFtdLFxuICApO1xuXG4gIGNvbnN0IGZyb21TdHJpbmcgPSBjdGU/LmZyb20gPz8gUHJpc21hLnNxbGAgRlJPTSAke2dldFRhYmxlU3FsKHF1ZXJ5LmZyb20pfWA7XG5cbiAgLy8gcmF3IG1hbmRhdG9yeSBldmVyeXdoZXJlIGhlcmUgYXMgdGhpcyBjcmVhdGVzIHRoZSBzZWxlY3Rpb25cbiAgLy8gYWdnIGlzIHR5cGVkIHZpYSB6b2RcbiAgLy8gY29sdW1uIG5hbWVzIGNvbWUgZnJvbSBvdXIgZGVmcyB2aWEgdGhlIHRhYmxlIGRlZmluaXRpb25zXG4gIGNvbnN0IHNlbGVjdGVkQ29sdW1ucyA9IHF1ZXJ5LnNlbGVjdC5tYXAoKHNlbGVjdGVkQ29sdW1uKSA9PiB7XG4gICAgY29uc3Qgc2FmZUNvbHVtbiA9IGdldENvbHVtbkRlZmluaXRpb24ocXVlcnkuZnJvbSwgc2VsZWN0ZWRDb2x1bW4uY29sdW1uKTtcbiAgICBjb25zdCBzYWZlQWdnID0gYWdncmVnYXRpb25zLnBhcnNlKHNlbGVjdGVkQ29sdW1uLmFnZyk7XG4gICAgY29uc3QgY29sdW1uRGVmaW5pdGlvbiA9IGNyZWF0ZUFnZ3JlZ2F0ZWRDb2x1bW4oc2FmZUNvbHVtbiwgc2FmZUFnZyk7XG4gICAgcmV0dXJuIHNhZmVBZ2dcbiAgICAgID8gUHJpc21hLnNxbGAke2NvbHVtbkRlZmluaXRpb259IGFzIFwiJHtjcmVhdGVPdXRwdXRDb2x1bW5OYW1lKFxuICAgICAgICAgIHNhZmVDb2x1bW4sXG4gICAgICAgICAgc2FmZUFnZyxcbiAgICAgICAgKX1cImBcbiAgICAgIDogUHJpc21hLnNxbGAke2NvbHVtbkRlZmluaXRpb259IGFzIFwiJHtQcmlzbWEucmF3KHNhZmVDb2x1bW4ubmFtZSl9XCJgO1xuICB9KTtcblxuICBpZiAoY3RlKVxuICAgIC8vIHJhdyBtYW5kYXRvcnkgaGVyZVxuICAgIHNlbGVjdGVkQ29sdW1ucy51bnNoaWZ0KFxuICAgICAgUHJpc21hLnNxbGBkYXRlX3Nlcmllcy5cImRhdGVcIiBhcyBcIiR7UHJpc21hLnJhdyhjdGUuY29sdW1uLm5hbWUpfVwiYCxcbiAgICApO1xuXG4gIGxldCBncm91cFN0cmluZyA9IFByaXNtYS5lbXB0eTtcblxuICBpZiAoKHF1ZXJ5Lmdyb3VwQnkgJiYgcXVlcnkuZ3JvdXBCeS5sZW5ndGggPiAwKSB8fCBjdGUpIHtcbiAgICBjb25zdCBncm91cEJ5RmllbGRzID0gKHF1ZXJ5Lmdyb3VwQnkgPz8gW10pLm1hcCgoZ3JvdXBCeSkgPT5cbiAgICAgIHByZXBhcmVHcm91cEJ5KHF1ZXJ5LmZyb20sIGdyb3VwQnkpLFxuICAgICk7XG4gICAgZ3JvdXBTdHJpbmcgPVxuICAgICAgZ3JvdXBCeUZpZWxkcy5sZW5ndGggPiAwXG4gICAgICAgID8gUHJpc21hLnNxbGAgR1JPVVAgQlkgJHtQcmlzbWEuam9pbihncm91cEJ5RmllbGRzLCBcIiwgXCIpfWBcbiAgICAgICAgOiBQcmlzbWEuZW1wdHk7XG4gIH1cbiAgY29uc3Qgc2VsZWN0U3RyaW5nID1cbiAgICBzZWxlY3RlZENvbHVtbnMubGVuZ3RoID4gMFxuICAgICAgPyBQcmlzbWEuc3FsYCBTRUxFQ1QgJHtQcmlzbWEuam9pbihzZWxlY3RlZENvbHVtbnMsIFwiLCBcIil9YFxuICAgICAgOiBQcmlzbWEuZW1wdHk7XG5cbiAgY29uc3Qgb3JkZXJCeVN0cmluZyA9IHByZXBhcmVPcmRlckJ5U3RyaW5nKFxuICAgIHF1ZXJ5LmZyb20sXG4gICAgcXVlcnkub3JkZXJCeSxcbiAgICBjdGUgPyB0cnVlIDogZmFsc2UsXG4gICk7XG5cbiAgY29uc3QgZmlsdGVyU3RyaW5nID1cbiAgICBxdWVyeS5maWx0ZXIgJiYgcXVlcnkuZmlsdGVyLmxlbmd0aCA+IDBcbiAgICAgID8gUHJpc21hLnNxbGAgJHtcbiAgICAgICAgICBjdGUgPyBQcmlzbWEuc3FsYCBBTkQgYCA6IFByaXNtYS5zcWxgIFdIRVJFIGBcbiAgICAgICAgfSAke3RhYmxlQ29sdW1uc1RvU3FsRmlsdGVyKHF1ZXJ5LmZpbHRlciwgdGFibGVEZWZpbml0aW9uc1txdWVyeS5mcm9tXSEuY29sdW1ucywgcXVlcnkuZnJvbSl9YFxuICAgICAgOiBQcmlzbWEuZW1wdHk7XG5cbiAgY29uc3QgbGltaXRTdHJpbmcgPSBxdWVyeS5saW1pdFxuICAgID8gUHJpc21hLnNxbGAgTElNSVQgJHtxdWVyeS5saW1pdH1gXG4gICAgOiBQcmlzbWEuZW1wdHk7XG5cbiAgcmV0dXJuIFByaXNtYS5zcWxgJHtcbiAgICBjdGU/LmN0ZSA/PyBQcmlzbWEuZW1wdHlcbiAgfSR7c2VsZWN0U3RyaW5nfSR7ZnJvbVN0cmluZ30ke2ZpbHRlclN0cmluZ30ke2dyb3VwU3RyaW5nfSR7b3JkZXJCeVN0cmluZ30ke2xpbWl0U3RyaW5nfTtgO1xufTtcblxuY29uc3QgY3JlYXRlT3V0cHV0Q29sdW1uTmFtZSA9IChcbiAgY29sdW1uRGVmaW5pdGlvbjogQ29sdW1uRGVmaW5pdGlvbixcbiAgc2FmZUFnZzogei5pbmZlcjx0eXBlb2YgYWdncmVnYXRpb25zPixcbik6IFByaXNtYS5TcWwgPT4ge1xuICBpZiAoIXNhZmVBZ2cpIHJldHVybiBQcmlzbWEuZW1wdHk7XG4gIGlmIChbXCJTVU1cIiwgXCJBVkdcIiwgXCJDT1VOVFwiLCBcIk1BWFwiLCBcIk1JTlwiXS5pbmNsdWRlcyhzYWZlQWdnKSkge1xuICAgIHJldHVybiBQcmlzbWEuc3FsYCR7UHJpc21hLnJhdyhzYWZlQWdnLnRvTG93ZXJDYXNlKCkpfSR7UHJpc21hLnJhdyhcbiAgICAgIGNhcGl0YWxpemVGaXJzdExldHRlcihjb2x1bW5EZWZpbml0aW9uLm5hbWUpLFxuICAgICl9YDtcbiAgfVxuXG4gIGlmIChzYWZlQWdnID09PSBcIjUwdGhQZXJjZW50aWxlXCIpIHtcbiAgICByZXR1cm4gUHJpc21hLnNxbGBwZXJjZW50aWxlNTAke1ByaXNtYS5yYXcoXG4gICAgICBjYXBpdGFsaXplRmlyc3RMZXR0ZXIoY29sdW1uRGVmaW5pdGlvbi5uYW1lKSxcbiAgICApfWA7XG4gIH1cbiAgaWYgKHNhZmVBZ2cgPT09IFwiNzV0aFBlcmNlbnRpbGVcIikge1xuICAgIHJldHVybiBQcmlzbWEuc3FsYHBlcmNlbnRpbGU3NSR7UHJpc21hLnJhdyhcbiAgICAgIGNhcGl0YWxpemVGaXJzdExldHRlcihjb2x1bW5EZWZpbml0aW9uLm5hbWUpLFxuICAgICl9YDtcbiAgfVxuICBpZiAoc2FmZUFnZyA9PT0gXCI5MHRoUGVyY2VudGlsZVwiKSB7XG4gICAgcmV0dXJuIFByaXNtYS5zcWxgcGVyY2VudGlsZTkwJHtQcmlzbWEucmF3KFxuICAgICAgY2FwaXRhbGl6ZUZpcnN0TGV0dGVyKGNvbHVtbkRlZmluaXRpb24ubmFtZSksXG4gICAgKX1gO1xuICB9XG4gIGlmIChzYWZlQWdnID09PSBcIjk1dGhQZXJjZW50aWxlXCIpIHtcbiAgICByZXR1cm4gUHJpc21hLnNxbGBwZXJjZW50aWxlOTUke1ByaXNtYS5yYXcoXG4gICAgICBjYXBpdGFsaXplRmlyc3RMZXR0ZXIoY29sdW1uRGVmaW5pdGlvbi5uYW1lKSxcbiAgICApfWA7XG4gIH1cbiAgaWYgKHNhZmVBZ2cgPT09IFwiOTl0aFBlcmNlbnRpbGVcIikge1xuICAgIHJldHVybiBQcmlzbWEuc3FsYHBlcmNlbnRpbGU5OSR7UHJpc21hLnJhdyhcbiAgICAgIGNhcGl0YWxpemVGaXJzdExldHRlcihjb2x1bW5EZWZpbml0aW9uLm5hbWUpLFxuICAgICl9YDtcbiAgfVxuICByZXR1cm4gUHJpc21hLmVtcHR5O1xufTtcblxuY29uc3QgY3JlYXRlQWdncmVnYXRlZENvbHVtbiA9IChcbiAgY29sdW1uRGVmaW5pdGlvbjogQ29sdW1uRGVmaW5pdGlvbixcbiAgYWdnPzogei5pbmZlcjx0eXBlb2YgYWdncmVnYXRpb25zPixcbik6IFByaXNtYS5TcWwgPT4ge1xuICAvLyByYXcgbWFuZGF0b3J5IGV2ZXJ5d2hlcmUgaGVyZSBhcyB0aGlzIGNyZWF0ZXMgdGhlIHNlbGVjdGlvblxuICAvLyBhZ2cgaXMgdHlwZWQgdmlhIHpvZFxuICAvLyBjb2x1bW4gbmFtZXMgY29tZSBmcm9tIG91ciBkZWZzIHZpYSB0aGUgdGFibGUgZGVmaW5pdGlvbnNcblxuICBzd2l0Y2ggKGFnZykge1xuICAgIGNhc2UgXCJBVkdcIjpcbiAgICBjYXNlIFwiQ09VTlRcIjpcbiAgICBjYXNlIFwiTUFYXCI6XG4gICAgY2FzZSBcIk1JTlwiOlxuICAgIGNhc2UgXCJTVU1cIjpcbiAgICAgIHJldHVybiBQcmlzbWEuc3FsYCR7UHJpc21hLnJhdyhcbiAgICAgICAgYWdncmVnYXRpb25zLnBhcnNlKGFnZykgYXMgc3RyaW5nLFxuICAgICAgKX0oJHtnZXRJbnRlcm5hbFNxbChjb2x1bW5EZWZpbml0aW9uKX0pYDtcbiAgICBjYXNlIFwiNTB0aFBlcmNlbnRpbGVcIjpcbiAgICAgIHJldHVybiBQcmlzbWEuc3FsYHBlcmNlbnRpbGVfZGlzYygwLjUpIHdpdGhpbiBncm91cCAob3JkZXIgYnkgJHtnZXRJbnRlcm5hbFNxbChcbiAgICAgICAgY29sdW1uRGVmaW5pdGlvbixcbiAgICAgICl9KWA7XG4gICAgY2FzZSBcIjc1dGhQZXJjZW50aWxlXCI6XG4gICAgICByZXR1cm4gUHJpc21hLnNxbGBwZXJjZW50aWxlX2Rpc2MoMC43NSkgd2l0aGluIGdyb3VwIChvcmRlciBieSAke2dldEludGVybmFsU3FsKFxuICAgICAgICBjb2x1bW5EZWZpbml0aW9uLFxuICAgICAgKX0pYDtcbiAgICBjYXNlIFwiOTB0aFBlcmNlbnRpbGVcIjpcbiAgICAgIHJldHVybiBQcmlzbWEuc3FsYHBlcmNlbnRpbGVfZGlzYygwLjkpIHdpdGhpbiBncm91cCAob3JkZXIgYnkgJHtnZXRJbnRlcm5hbFNxbChcbiAgICAgICAgY29sdW1uRGVmaW5pdGlvbixcbiAgICAgICl9KWA7XG4gICAgY2FzZSBcIjk1dGhQZXJjZW50aWxlXCI6XG4gICAgICByZXR1cm4gUHJpc21hLnNxbGBwZXJjZW50aWxlX2Rpc2MoMC45NSkgd2l0aGluIGdyb3VwIChvcmRlciBieSAke2dldEludGVybmFsU3FsKFxuICAgICAgICBjb2x1bW5EZWZpbml0aW9uLFxuICAgICAgKX0pYDtcbiAgICBjYXNlIFwiOTl0aFBlcmNlbnRpbGVcIjpcbiAgICAgIHJldHVybiBQcmlzbWEuc3FsYHBlcmNlbnRpbGVfZGlzYygwLjk5KSB3aXRoaW4gZ3JvdXAgKG9yZGVyIGJ5ICR7Z2V0SW50ZXJuYWxTcWwoXG4gICAgICAgIGNvbHVtbkRlZmluaXRpb24sXG4gICAgICApfSlgO1xuICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgcmV0dXJuIFByaXNtYS5zcWxgJHtnZXRJbnRlcm5hbFNxbChjb2x1bW5EZWZpbml0aW9uKX1gO1xuICB9XG59O1xuXG5jb25zdCBwcmVwYXJlT3JkZXJCeVN0cmluZyA9IChcbiAgZnJvbTogei5pbmZlcjx0eXBlb2Ygc3FsSW50ZXJmYWNlPltcImZyb21cIl0sXG4gIG9yZGVyQnk6IHouaW5mZXI8dHlwZW9mIHNxbEludGVyZmFjZT5bXCJvcmRlckJ5XCJdLFxuICBoYXNDdGU6IGJvb2xlYW4sXG4pOiBQcmlzbWEuU3FsID0+IHtcbiAgY29uc3Qgb3JkZXJCeXMgPSAob3JkZXJCeSA/PyBbXSkubWFwKChvcmRlckJ5KSA9PiB7XG4gICAgLy8gcmF3IG1hbmRhdG9yeSBoZXJlXG4gICAgY29uc3Qgc2FmZUNvbHVtbiA9IGdldENvbHVtbkRlZmluaXRpb24oZnJvbSwgb3JkZXJCeS5jb2x1bW4pO1xuICAgIGNvbnN0IHNhZmVBZ2cgPSBhZ2dyZWdhdGlvbnMucGFyc2Uob3JkZXJCeS5hZ2cpO1xuICAgIHJldHVybiBQcmlzbWEuc3FsYCR7Y3JlYXRlQWdncmVnYXRlZENvbHVtbihcbiAgICAgIHNhZmVDb2x1bW4sXG4gICAgICBzYWZlQWdnLFxuICAgICl9ICR7UHJpc21hLnJhdyhvcmRlckJ5LmRpcmVjdGlvbil9ICR7UHJpc21hLnJhdyhvcmRlckJ5LmRpcmVjdGlvbiA9PT0gXCJERVNDXCIgPyBcIk5VTExTIExBU1RcIiA6IFwiTlVMTFMgRklSU1RcIil9YDtcbiAgfSk7XG4gIGNvbnN0IGFkZGVkQ3RlID0gaGFzQ3RlXG4gICAgPyBbUHJpc21hLnNxbGBkYXRlX3Nlcmllcy5cImRhdGVcIiBBU0NgLCAuLi5vcmRlckJ5c11cbiAgICA6IG9yZGVyQnlzO1xuXG4gIHJldHVybiBhZGRlZEN0ZS5sZW5ndGggPiAwXG4gICAgPyBQcmlzbWEuc3FsYCBPUkRFUiBCWSAke1ByaXNtYS5qb2luKGFkZGVkQ3RlLCBcIiwgXCIpfWBcbiAgICA6IFByaXNtYS5lbXB0eTtcbn07XG5cbmNvbnN0IHByZXBhcmVHcm91cEJ5ID0gKFxuICB0YWJsZTogei5pbmZlcjx0eXBlb2Ygc3FsSW50ZXJmYWNlPltcImZyb21cIl0sXG4gIGdyb3VwQnk6IHouaW5mZXI8dHlwZW9mIGdyb3VwQnlJbnRlcmZhY2U+W251bWJlcl0sXG4pID0+IHtcbiAgY29uc3QgaW50ZXJuYWxDb2x1bW4gPSBnZXRJbnRlcm5hbFNxbChcbiAgICBnZXRDb2x1bW5EZWZpbml0aW9uKHRhYmxlLCBncm91cEJ5LmNvbHVtbiksXG4gICk7XG4gIGlmIChncm91cEJ5LnR5cGUgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgIHJldHVybiBQcmlzbWEuc3FsYGRhdGVfc2VyaWVzLlwiZGF0ZVwiYDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaW50ZXJuYWxDb2x1bW47XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGlzVGltZVJhbmdlRmlsdGVyKFxuICBmaWx0ZXI6IHouaW5mZXI8dHlwZW9mIGZpbHRlckludGVyZmFjZT5bbnVtYmVyXSxcbik6IGZpbHRlciBpcyB6LmluZmVyPHR5cGVvZiB0aW1lRmlsdGVyPiB7XG4gIHJldHVybiBmaWx0ZXIudHlwZSA9PT0gXCJkYXRldGltZVwiO1xufVxuXG5jb25zdCBjcmVhdGVEYXRlUmFuZ2VDdGUgPSAoXG4gIGZyb21VbnNhZmU6IHouaW5mZXI8dHlwZW9mIHNxbEludGVyZmFjZT5bXCJmcm9tXCJdLFxuICBmaWx0ZXJzVW5zYWZlOiB6LmluZmVyPHR5cGVvZiBzaW5nbGVGaWx0ZXI+W10sXG4gIGdyb3VwQnlVbnNhZmU6IHouaW5mZXI8dHlwZW9mIGdyb3VwQnlJbnRlcmZhY2U+LFxuKSA9PiB7XG4gIGNvbnN0IGZyb20gPSBzcWxJbnRlcmZhY2Uuc2hhcGUuZnJvbS5wYXJzZShmcm9tVW5zYWZlKTtcbiAgY29uc3QgZ3JvdXBCeSA9IGdyb3VwQnlJbnRlcmZhY2UucGFyc2UoZ3JvdXBCeVVuc2FmZSk7XG4gIGNvbnN0IGZpbHRlcnMgPSBmaWx0ZXJJbnRlcmZhY2UucGFyc2UoZmlsdGVyc1Vuc2FmZSk7XG5cbiAgY29uc3QgZ3JvdXBCeUNvbHVtbnMgPSBncm91cEJ5LmZpbHRlcigoeCkgPT4geC50eXBlID09PSBcImRhdGV0aW1lXCIpO1xuXG4gIGlmIChncm91cEJ5Q29sdW1ucy5sZW5ndGggPT09IDApIHJldHVybiB1bmRlZmluZWQ7XG4gIGlmIChncm91cEJ5Q29sdW1ucy5sZW5ndGggPiAxKVxuICAgIHRocm93IG5ldyBFcnJvcihcIk9ubHkgb25lIGRhdGV0aW1lIGdyb3VwIGJ5IGlzIHN1cHBvcnRlZFwiKTtcblxuICBjb25zdCBncm91cEJ5Q29sdW1uID0gZ3JvdXBCeUNvbHVtbnNbMF07XG5cbiAgY29uc3QgZGF0ZVRpbWVGaWx0ZXJzID0gZmlsdGVycy5maWx0ZXIoaXNUaW1lUmFuZ2VGaWx0ZXIpO1xuXG4gIGNvbnN0IG1pbkRhdGVDb2x1bW4gPVxuICAgIGRhdGVUaW1lRmlsdGVycy5sZW5ndGggPiAxXG4gICAgICA/IGRhdGVUaW1lRmlsdGVycy5maW5kKCh4KSA9PiB4Lm9wZXJhdG9yID09PSBcIj5cIiB8fCB4Lm9wZXJhdG9yID09PSBcIj49XCIpXG4gICAgICA6IHVuZGVmaW5lZDtcblxuICBjb25zdCBtYXhEYXRlQ29sdW1uID1cbiAgICBkYXRlVGltZUZpbHRlcnMubGVuZ3RoID4gMVxuICAgICAgPyBkYXRlVGltZUZpbHRlcnMuZmluZCgoeCkgPT4geC5vcGVyYXRvciA9PT0gXCI8XCIgfHwgeC5vcGVyYXRvciA9PT0gXCI8PVwiKVxuICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgaWYgKFxuICAgIGdyb3VwQnlDb2x1bW4gJiZcbiAgICBcInRlbXBvcmFsVW5pdFwiIGluIGdyb3VwQnlDb2x1bW4gJiZcbiAgICBtaW5EYXRlQ29sdW1uICYmXG4gICAgbWF4RGF0ZUNvbHVtblxuICApIHtcbiAgICBpZiAoXG4gICAgICBtaW5EYXRlQ29sdW1uLmNvbHVtbiAhPT0gZ3JvdXBCeUNvbHVtbi5jb2x1bW4gfHxcbiAgICAgIG1heERhdGVDb2x1bW4uY29sdW1uICE9PSBncm91cEJ5Q29sdW1uLmNvbHVtblxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIk1pbiBkYXRlIGNvbHVtbiwgbWF4IGRhdGUgY29sdW1uIG11c3QgbWF0Y2ggZ3JvdXAgYnkgY29sdW1uXCIsXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0Q29sdW1uID0gZ2V0Q29sdW1uRGVmaW5pdGlvbihmcm9tLCBtaW5EYXRlQ29sdW1uLmNvbHVtbik7XG5cbiAgICAvLyByYXcgbWFuZGF0b3J5IGZvciB0ZW1wb3JhbCB1bml0LiBGcm9tIGFuZCB0byBhcmUgcGFyYW1ldGVyaXNlZCB2YWx1ZXNcbiAgICAvLyB0ZW1wb3JhbCB1bml0IGlzIHR5cGVkXG4gICAgY29uc3QgY3RlU3RyaW5nID0gUHJpc21hLnNxbGBcbiAgICAgIFdJVEggZGF0ZV9zZXJpZXMgQVMgKFxuICAgICAgICBTRUxFQ1QgZ2VuZXJhdGVfc2VyaWVzKCR7bWluRGF0ZUNvbHVtbi52YWx1ZX0sICR7XG4gICAgICAgICAgbWF4RGF0ZUNvbHVtbi52YWx1ZVxuICAgICAgICB9LCAnMSAke1ByaXNtYS5yYXcoZ3JvdXBCeUNvbHVtbi50ZW1wb3JhbFVuaXQpfScpIGFzIGRhdGVcbiAgICAgIClcbiAgICBgO1xuXG4gICAgLy8gYXMgYWJvdmUsIHJhdyBpcyBtYW5kYXRvcnkgZm9yIGNvbHVtbnMgYW5kIHRlbXBvcmFsIHVuaXRcbiAgICBjb25zdCBtb2RpZmllZEZyb20gPSBQcmlzbWEuc3FsYCBGUk9NIGRhdGVfc2VyaWVzIExFRlQgSk9JTiAke2dldFRhYmxlU3FsKFxuICAgICAgZnJvbSxcbiAgICApfSBPTiBEQVRFX1RSVU5DKCcke1ByaXNtYS5yYXcoXG4gICAgICBncm91cEJ5Q29sdW1uLnRlbXBvcmFsVW5pdCxcbiAgICApfScsICR7Z2V0SW50ZXJuYWxTcWwoc3RhcnRDb2x1bW4pfSkgPSBEQVRFX1RSVU5DKCcke1ByaXNtYS5yYXcoXG4gICAgICBncm91cEJ5Q29sdW1uLnRlbXBvcmFsVW5pdCxcbiAgICApfScsIGRhdGVfc2VyaWVzLlwiZGF0ZVwiKWA7XG5cbiAgICByZXR1cm4geyBjdGU6IGN0ZVN0cmluZywgZnJvbTogbW9kaWZpZWRGcm9tLCBjb2x1bW46IHN0YXJ0Q29sdW1uIH07XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuY29uc3QgZ2V0VGFibGVTcWwgPSAoXG4gIHRhYmxlVW5zYWZlOiB6LmluZmVyPHR5cGVvZiBzcWxJbnRlcmZhY2U+W1wiZnJvbVwiXSxcbik6IFByaXNtYS5TcWwgPT4ge1xuICBjb25zdCB0YWJsZSA9IHNxbEludGVyZmFjZS5zaGFwZS5mcm9tLnBhcnNlKHRhYmxlVW5zYWZlKTtcbiAgcmV0dXJuIFByaXNtYS5yYXcodGFibGVEZWZpbml0aW9uc1t0YWJsZV0hLnRhYmxlKTtcbn07XG5cbmNvbnN0IGdldENvbHVtbkRlZmluaXRpb24gPSAoXG4gIHRhYmxlVW5zYWZlOiB6LmluZmVyPHR5cGVvZiBzcWxJbnRlcmZhY2U+W1wiZnJvbVwiXSxcbiAgY29sdW1uOiBzdHJpbmcsXG4pOiBDb2x1bW5EZWZpbml0aW9uID0+IHtcbiAgY29uc3QgdGFibGUgPSBzcWxJbnRlcmZhY2Uuc2hhcGUuZnJvbS5wYXJzZSh0YWJsZVVuc2FmZSk7XG5cbiAgY29uc3QgZm91bmRDb2x1bW4gPSB0YWJsZURlZmluaXRpb25zW3RhYmxlXSEuY29sdW1ucy5maW5kKChjKSA9PiB7XG4gICAgcmV0dXJuIGMubmFtZSA9PT0gY29sdW1uO1xuICB9KTtcbiAgaWYgKCFmb3VuZENvbHVtbikge1xuICAgIGNvbnNvbGUuZXJyb3IoYENvbHVtbiBcIiR7Y29sdW1ufVwiIG5vdCBmb3VuZCBpbiB0YWJsZSAke3RhYmxlfWApO1xuICAgIHRocm93IG5ldyBFcnJvcihgQ29sdW1uIFwiJHtjb2x1bW59XCIgbm90IGZvdW5kIGluIHRhYmxlICR7dGFibGV9YCk7XG4gIH1cbiAgcmV0dXJuIGZvdW5kQ29sdW1uO1xufTtcblxuY29uc3QgZ2V0SW50ZXJuYWxTcWwgPSAoY29sRGVmOiBDb2x1bW5EZWZpbml0aW9uKTogU3FsID0+XG4gIC8vIHJhdyByZXF1aXJlZCBoZXJlLCBldmVyeXRoaW5nIGlzIHR5cGVkXG4gIFByaXNtYS5yYXcoY29sRGVmLmludGVybmFsKTtcblxuY29uc3Qgb3V0cHV0UGFyc2VyID0gKG91dHB1dDogSW50ZXJuYWxEYXRhYmFzZVJvd1tdKTogRGF0YWJhc2VSb3dbXSA9PiB7XG4gIHJldHVybiBvdXRwdXQubWFwKChyb3cpID0+IHtcbiAgICBjb25zdCBuZXdSb3c6IERhdGFiYXNlUm93ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gcm93KSB7XG4gICAgICBjb25zdCB2YWwgPSByb3dba2V5XTtcbiAgICAgIGlmICh0eXBlb2YgdmFsID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAgIG5ld1Jvd1trZXldID0gTnVtYmVyKHZhbCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgbmV3Um93W2tleV0gPSB2YWw7XG4gICAgICB9IGVsc2UgaWYgKERlY2ltYWwuaXNEZWNpbWFsKHZhbCkpIHtcbiAgICAgICAgbmV3Um93W2tleV0gPSB2YWwudG9OdW1iZXIoKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBuZXdSb3dba2V5XSA9IHZhbDtcbiAgICAgIH0gZWxzZSBpZiAodmFsIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICBuZXdSb3dba2V5XSA9IHZhbDtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS1jb25kaXRpb25cbiAgICAgIH0gZWxzZSBpZiAodmFsID09PSBudWxsKSB7XG4gICAgICAgIG5ld1Jvd1trZXldID0gdmFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coYFVua25vd24gdHlwZSAke3R5cGVvZiB2YWx9IGZvciAke3ZhbH1gKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHR5cGUgJHt0eXBlb2YgdmFsfWApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3Um93O1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdExldHRlcihzdHI6IHN0cmluZykge1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xufVxuXG5jb25zdCBnZXRNYW5kYXRvcnlGaWx0ZXIgPSAoXG4gIHRhYmxlVW5zYWZlOiB6LmluZmVyPHR5cGVvZiBzcWxJbnRlcmZhY2U+W1wiZnJvbVwiXSxcbiAgcHJvamVjdElkOiBzdHJpbmcsXG4pID0+IHtcbiAgY29uc3QgdGFibGUgPSBzcWxJbnRlcmZhY2Uuc2hhcGUuZnJvbS5wYXJzZSh0YWJsZVVuc2FmZSk7XG5cbiAgY29uc3Qgb2JzZXJ2YXRpb25GaWx0ZXIgPSB7XG4gICAgdHlwZTogXCJzdHJpbmdcIiBhcyBjb25zdCxcbiAgICBjb2x1bW46IFwib2JzZXJ2YXRpb25zUHJvamVjdElkXCIsXG4gICAgb3BlcmF0b3I6IFwiPVwiIGFzIGNvbnN0LFxuICAgIHZhbHVlOiBwcm9qZWN0SWQsXG4gIH07XG5cbiAgY29uc3QgdHJhY2VGaWx0ZXIgPSB7XG4gICAgdHlwZTogXCJzdHJpbmdcIiBhcyBjb25zdCxcbiAgICBjb2x1bW46IFwidHJhY2VzUHJvamVjdElkXCIsXG4gICAgb3BlcmF0b3I6IFwiPVwiIGFzIGNvbnN0LFxuICAgIHZhbHVlOiBwcm9qZWN0SWQsXG4gIH07XG5cbiAgc3dpdGNoICh0YWJsZSkge1xuICAgIGNhc2UgXCJ0cmFjZXNcIjpcbiAgICBjYXNlIFwidHJhY2VzX3Njb3Jlc1wiOlxuICAgIGNhc2UgXCJ0cmFjZXNfbWV0cmljc1wiOlxuICAgICAgcmV0dXJuIFt0cmFjZUZpbHRlcl07XG4gICAgY2FzZSBcInRyYWNlc19vYnNlcnZhdGlvbnNcIjpcbiAgICBjYXNlIFwidHJhY2VzX29ic2VydmF0aW9uc3ZpZXdcIjpcbiAgICBjYXNlIFwidHJhY2VzX3BhcmVudF9vYnNlcnZhdGlvbl9zY29yZXNcIjpcbiAgICAgIHJldHVybiBbdHJhY2VGaWx0ZXIsIG9ic2VydmF0aW9uRmlsdGVyXTtcbiAgICBjYXNlIFwib2JzZXJ2YXRpb25zXCI6XG4gICAgICByZXR1cm4gW29ic2VydmF0aW9uRmlsdGVyXTtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJQcmlzbWEiLCJEZWNpbWFsIiwic3FsSW50ZXJmYWNlIiwiYWdncmVnYXRpb25zIiwiZ3JvdXBCeUludGVyZmFjZSIsImZpbHRlckludGVyZmFjZSIsInRhYmxlRGVmaW5pdGlvbnMiLCJ0YWJsZUNvbHVtbnNUb1NxbEZpbHRlciIsImV4ZWN1dGVRdWVyeSIsInByaXNtYSIsInByb2plY3RJZCIsInVuc2FmZVF1ZXJ5IiwicXVlcnkiLCJwYXJzZSIsInNxbCIsImVucmljaEFuZENyZWF0ZVF1ZXJ5IiwicmVzcG9uc2UiLCIkcXVlcnlSYXciLCJwYXJzZWRSZXN1bHQiLCJvdXRwdXRQYXJzZXIiLCJxdWVyeVVuc2FmZSIsImNyZWF0ZVF1ZXJ5IiwiZmlsdGVyIiwiZ2V0TWFuZGF0b3J5RmlsdGVyIiwiZnJvbSIsImN0ZSIsImNyZWF0ZURhdGVSYW5nZUN0ZSIsImdyb3VwQnkiLCJmcm9tU3RyaW5nIiwiZ2V0VGFibGVTcWwiLCJzZWxlY3RlZENvbHVtbnMiLCJzZWxlY3QiLCJtYXAiLCJzZWxlY3RlZENvbHVtbiIsInNhZmVDb2x1bW4iLCJnZXRDb2x1bW5EZWZpbml0aW9uIiwiY29sdW1uIiwic2FmZUFnZyIsImFnZyIsImNvbHVtbkRlZmluaXRpb24iLCJjcmVhdGVBZ2dyZWdhdGVkQ29sdW1uIiwiY3JlYXRlT3V0cHV0Q29sdW1uTmFtZSIsInJhdyIsIm5hbWUiLCJ1bnNoaWZ0IiwiZ3JvdXBTdHJpbmciLCJlbXB0eSIsImxlbmd0aCIsImdyb3VwQnlGaWVsZHMiLCJwcmVwYXJlR3JvdXBCeSIsImpvaW4iLCJzZWxlY3RTdHJpbmciLCJvcmRlckJ5U3RyaW5nIiwicHJlcGFyZU9yZGVyQnlTdHJpbmciLCJvcmRlckJ5IiwiZmlsdGVyU3RyaW5nIiwiY29sdW1ucyIsImxpbWl0U3RyaW5nIiwibGltaXQiLCJpbmNsdWRlcyIsInRvTG93ZXJDYXNlIiwiY2FwaXRhbGl6ZUZpcnN0TGV0dGVyIiwiZ2V0SW50ZXJuYWxTcWwiLCJ1bmRlZmluZWQiLCJoYXNDdGUiLCJvcmRlckJ5cyIsImRpcmVjdGlvbiIsImFkZGVkQ3RlIiwidGFibGUiLCJpbnRlcm5hbENvbHVtbiIsInR5cGUiLCJpc1RpbWVSYW5nZUZpbHRlciIsImZyb21VbnNhZmUiLCJmaWx0ZXJzVW5zYWZlIiwiZ3JvdXBCeVVuc2FmZSIsInNoYXBlIiwiZmlsdGVycyIsImdyb3VwQnlDb2x1bW5zIiwieCIsIkVycm9yIiwiZ3JvdXBCeUNvbHVtbiIsImRhdGVUaW1lRmlsdGVycyIsIm1pbkRhdGVDb2x1bW4iLCJmaW5kIiwib3BlcmF0b3IiLCJtYXhEYXRlQ29sdW1uIiwic3RhcnRDb2x1bW4iLCJjdGVTdHJpbmciLCJ2YWx1ZSIsInRlbXBvcmFsVW5pdCIsIm1vZGlmaWVkRnJvbSIsInRhYmxlVW5zYWZlIiwiZm91bmRDb2x1bW4iLCJjIiwiY29uc29sZSIsImVycm9yIiwiY29sRGVmIiwiaW50ZXJuYWwiLCJvdXRwdXQiLCJyb3ciLCJuZXdSb3ciLCJrZXkiLCJ2YWwiLCJOdW1iZXIiLCJpc0RlY2ltYWwiLCJ0b051bWJlciIsIkRhdGUiLCJsb2ciLCJzdHIiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwib2JzZXJ2YXRpb25GaWx0ZXIiLCJ0cmFjZUZpbHRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/api/services/query-builder.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/services/sqlInterface.ts":
/*!*************************************************!*\
  !*** ./src/server/api/services/sqlInterface.ts ***!
  \*************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   aggregations: () => (/* binding */ aggregations),\n/* harmony export */   filterInterface: () => (/* binding */ filterInterface),\n/* harmony export */   groupByInterface: () => (/* binding */ groupByInterface),\n/* harmony export */   sqlInterface: () => (/* binding */ sqlInterface),\n/* harmony export */   temporalUnit: () => (/* binding */ temporalUnit)\n/* harmony export */ });\n/* harmony import */ var _src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/server/api/interfaces/filters */ \"(api)/./src/server/api/interfaces/filters.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_1__]);\n([_src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_0__, zod__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst temporalUnit = zod__WEBPACK_IMPORTED_MODULE_1__.z.enum([\n    \"year\",\n    \"month\",\n    \"week\",\n    \"day\",\n    \"hour\",\n    \"minute\"\n]);\nconst aggregations = zod__WEBPACK_IMPORTED_MODULE_1__.z.enum([\n    \"SUM\",\n    \"AVG\",\n    \"COUNT\",\n    \"MAX\",\n    \"MIN\",\n    \"50thPercentile\",\n    \"75thPercentile\",\n    \"90thPercentile\",\n    \"95thPercentile\",\n    \"99thPercentile\"\n]).optional();\nconst groupByInterface = zod__WEBPACK_IMPORTED_MODULE_1__.z.array(zod__WEBPACK_IMPORTED_MODULE_1__.z.discriminatedUnion(\"type\", [\n    zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n        type: zod__WEBPACK_IMPORTED_MODULE_1__.z.literal(\"datetime\"),\n        column: zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n        temporalUnit: temporalUnit\n    }),\n    zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n        type: zod__WEBPACK_IMPORTED_MODULE_1__.z.literal(\"number\"),\n        column: zod__WEBPACK_IMPORTED_MODULE_1__.z.string()\n    }),\n    zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n        type: zod__WEBPACK_IMPORTED_MODULE_1__.z.literal(\"string\"),\n        column: zod__WEBPACK_IMPORTED_MODULE_1__.z.string()\n    })\n]));\nconst orderByInterface = zod__WEBPACK_IMPORTED_MODULE_1__.z.array(zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n    column: zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n    direction: zod__WEBPACK_IMPORTED_MODULE_1__.z.enum([\n        \"ASC\",\n        \"DESC\"\n    ]),\n    agg: aggregations\n}));\nconst filterInterface = zod__WEBPACK_IMPORTED_MODULE_1__.z.array(_src_server_api_interfaces_filters__WEBPACK_IMPORTED_MODULE_0__.singleFilter);\nconst sqlInterface = zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n    from: zod__WEBPACK_IMPORTED_MODULE_1__.z.enum([\n        \"traces\",\n        \"traces_observations\",\n        \"observations\",\n        \"traces_scores\",\n        \"traces_parent_observation_scores\",\n        \"traces_observationsview\",\n        \"traces_metrics\"\n    ]),\n    filter: filterInterface.optional(),\n    groupBy: groupByInterface.optional(),\n    select: zod__WEBPACK_IMPORTED_MODULE_1__.z.array(zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n        column: zod__WEBPACK_IMPORTED_MODULE_1__.z.string(),\n        agg: aggregations\n    })),\n    orderBy: orderByInterface.optional(),\n    limit: zod__WEBPACK_IMPORTED_MODULE_1__.z.number().optional()\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9zZXJ2aWNlcy9zcWxJbnRlcmZhY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFtRTtBQUMzQztBQUVqQixNQUFNRSxlQUFlRCxrQ0FBQ0EsQ0FBQ0UsSUFBSSxDQUFDO0lBQ2pDO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNELEVBQUU7QUFFSSxNQUFNQyxlQUFlSCxrQ0FBQ0EsQ0FDMUJFLElBQUksQ0FBQztJQUNKO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0NBQ0QsRUFDQUUsUUFBUSxHQUFHO0FBRVAsTUFBTUMsbUJBQW1CTCxrQ0FBQ0EsQ0FBQ00sS0FBSyxDQUNyQ04sa0NBQUNBLENBQUNPLGtCQUFrQixDQUFDLFFBQVE7SUFDM0JQLGtDQUFDQSxDQUFDUSxNQUFNLENBQUM7UUFDUEMsTUFBTVQsa0NBQUNBLENBQUNVLE9BQU8sQ0FBQztRQUNoQkMsUUFBUVgsa0NBQUNBLENBQUNZLE1BQU07UUFDaEJYLGNBQWNBO0lBQ2hCO0lBQ0FELGtDQUFDQSxDQUFDUSxNQUFNLENBQUM7UUFBRUMsTUFBTVQsa0NBQUNBLENBQUNVLE9BQU8sQ0FBQztRQUFXQyxRQUFRWCxrQ0FBQ0EsQ0FBQ1ksTUFBTTtJQUFHO0lBQ3pEWixrQ0FBQ0EsQ0FBQ1EsTUFBTSxDQUFDO1FBQUVDLE1BQU1ULGtDQUFDQSxDQUFDVSxPQUFPLENBQUM7UUFBV0MsUUFBUVgsa0NBQUNBLENBQUNZLE1BQU07SUFBRztDQUMxRCxHQUNEO0FBRUYsTUFBTUMsbUJBQW1CYixrQ0FBQ0EsQ0FBQ00sS0FBSyxDQUM5Qk4sa0NBQUNBLENBQUNRLE1BQU0sQ0FBQztJQUNQRyxRQUFRWCxrQ0FBQ0EsQ0FBQ1ksTUFBTTtJQUNoQkUsV0FBV2Qsa0NBQUNBLENBQUNFLElBQUksQ0FBQztRQUFDO1FBQU87S0FBTztJQUNqQ2EsS0FBS1o7QUFDUDtBQUdLLE1BQU1hLGtCQUFrQmhCLGtDQUFDQSxDQUFDTSxLQUFLLENBQUNQLDRFQUFZQSxFQUFFO0FBRTlDLE1BQU1rQixlQUFlakIsa0NBQUNBLENBQUNRLE1BQU0sQ0FBQztJQUNuQ1UsTUFBTWxCLGtDQUFDQSxDQUFDRSxJQUFJLENBQUM7UUFDWDtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBQ0RpQixRQUFRSCxnQkFBZ0JaLFFBQVE7SUFDaENnQixTQUFTZixpQkFBaUJELFFBQVE7SUFDbENpQixRQUFRckIsa0NBQUNBLENBQUNNLEtBQUssQ0FDYk4sa0NBQUNBLENBQUNRLE1BQU0sQ0FBQztRQUNQRyxRQUFRWCxrQ0FBQ0EsQ0FBQ1ksTUFBTTtRQUNoQkcsS0FBS1o7SUFDUDtJQUVGbUIsU0FBU1QsaUJBQWlCVCxRQUFRO0lBQ2xDbUIsT0FBT3ZCLGtDQUFDQSxDQUFDd0IsTUFBTSxHQUFHcEIsUUFBUTtBQUM1QixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL3NlcnZlci9hcGkvc2VydmljZXMvc3FsSW50ZXJmYWNlLnRzPzhkOTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2luZ2xlRmlsdGVyIH0gZnJvbSBcIkAvc3JjL3NlcnZlci9hcGkvaW50ZXJmYWNlcy9maWx0ZXJzXCI7XG5pbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuXG5leHBvcnQgY29uc3QgdGVtcG9yYWxVbml0ID0gei5lbnVtKFtcbiAgXCJ5ZWFyXCIsXG4gIFwibW9udGhcIixcbiAgXCJ3ZWVrXCIsXG4gIFwiZGF5XCIsXG4gIFwiaG91clwiLFxuICBcIm1pbnV0ZVwiLFxuXSk7XG5cbmV4cG9ydCBjb25zdCBhZ2dyZWdhdGlvbnMgPSB6XG4gIC5lbnVtKFtcbiAgICBcIlNVTVwiLFxuICAgIFwiQVZHXCIsXG4gICAgXCJDT1VOVFwiLFxuICAgIFwiTUFYXCIsXG4gICAgXCJNSU5cIixcbiAgICBcIjUwdGhQZXJjZW50aWxlXCIsXG4gICAgXCI3NXRoUGVyY2VudGlsZVwiLFxuICAgIFwiOTB0aFBlcmNlbnRpbGVcIixcbiAgICBcIjk1dGhQZXJjZW50aWxlXCIsXG4gICAgXCI5OXRoUGVyY2VudGlsZVwiLFxuICBdKVxuICAub3B0aW9uYWwoKTtcblxuZXhwb3J0IGNvbnN0IGdyb3VwQnlJbnRlcmZhY2UgPSB6LmFycmF5KFxuICB6LmRpc2NyaW1pbmF0ZWRVbmlvbihcInR5cGVcIiwgW1xuICAgIHoub2JqZWN0KHtcbiAgICAgIHR5cGU6IHoubGl0ZXJhbChcImRhdGV0aW1lXCIpLFxuICAgICAgY29sdW1uOiB6LnN0cmluZygpLFxuICAgICAgdGVtcG9yYWxVbml0OiB0ZW1wb3JhbFVuaXQsXG4gICAgfSksXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoXCJudW1iZXJcIiksIGNvbHVtbjogei5zdHJpbmcoKSB9KSxcbiAgICB6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbChcInN0cmluZ1wiKSwgY29sdW1uOiB6LnN0cmluZygpIH0pLFxuICBdKSxcbik7XG5cbmNvbnN0IG9yZGVyQnlJbnRlcmZhY2UgPSB6LmFycmF5KFxuICB6Lm9iamVjdCh7XG4gICAgY29sdW1uOiB6LnN0cmluZygpLFxuICAgIGRpcmVjdGlvbjogei5lbnVtKFtcIkFTQ1wiLCBcIkRFU0NcIl0pLFxuICAgIGFnZzogYWdncmVnYXRpb25zLFxuICB9KSxcbik7XG5cbmV4cG9ydCBjb25zdCBmaWx0ZXJJbnRlcmZhY2UgPSB6LmFycmF5KHNpbmdsZUZpbHRlcik7XG5cbmV4cG9ydCBjb25zdCBzcWxJbnRlcmZhY2UgPSB6Lm9iamVjdCh7XG4gIGZyb206IHouZW51bShbXG4gICAgXCJ0cmFjZXNcIixcbiAgICBcInRyYWNlc19vYnNlcnZhdGlvbnNcIixcbiAgICBcIm9ic2VydmF0aW9uc1wiLFxuICAgIFwidHJhY2VzX3Njb3Jlc1wiLFxuICAgIFwidHJhY2VzX3BhcmVudF9vYnNlcnZhdGlvbl9zY29yZXNcIixcbiAgICBcInRyYWNlc19vYnNlcnZhdGlvbnN2aWV3XCIsXG4gICAgXCJ0cmFjZXNfbWV0cmljc1wiLFxuICBdKSxcbiAgZmlsdGVyOiBmaWx0ZXJJbnRlcmZhY2Uub3B0aW9uYWwoKSxcbiAgZ3JvdXBCeTogZ3JvdXBCeUludGVyZmFjZS5vcHRpb25hbCgpLFxuICBzZWxlY3Q6IHouYXJyYXkoXG4gICAgei5vYmplY3Qoe1xuICAgICAgY29sdW1uOiB6LnN0cmluZygpLFxuICAgICAgYWdnOiBhZ2dyZWdhdGlvbnMsXG4gICAgfSksXG4gICksXG4gIG9yZGVyQnk6IG9yZGVyQnlJbnRlcmZhY2Uub3B0aW9uYWwoKSxcbiAgbGltaXQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbn0pO1xuIl0sIm5hbWVzIjpbInNpbmdsZUZpbHRlciIsInoiLCJ0ZW1wb3JhbFVuaXQiLCJlbnVtIiwiYWdncmVnYXRpb25zIiwib3B0aW9uYWwiLCJncm91cEJ5SW50ZXJmYWNlIiwiYXJyYXkiLCJkaXNjcmltaW5hdGVkVW5pb24iLCJvYmplY3QiLCJ0eXBlIiwibGl0ZXJhbCIsImNvbHVtbiIsInN0cmluZyIsIm9yZGVyQnlJbnRlcmZhY2UiLCJkaXJlY3Rpb24iLCJhZ2ciLCJmaWx0ZXJJbnRlcmZhY2UiLCJzcWxJbnRlcmZhY2UiLCJmcm9tIiwiZmlsdGVyIiwiZ3JvdXBCeSIsInNlbGVjdCIsIm9yZGVyQnkiLCJsaW1pdCIsIm51bWJlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/api/services/sqlInterface.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/services/tableDefinitions.ts":
/*!*****************************************************!*\
  !*** ./src/server/api/services/tableDefinitions.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculatedTotalCost: () => (/* binding */ calculatedTotalCost),\n/* harmony export */   completionTokens: () => (/* binding */ completionTokens),\n/* harmony export */   duration: () => (/* binding */ duration),\n/* harmony export */   model: () => (/* binding */ model),\n/* harmony export */   observationId: () => (/* binding */ observationId),\n/* harmony export */   observationName: () => (/* binding */ observationName),\n/* harmony export */   observationsProjectId: () => (/* binding */ observationsProjectId),\n/* harmony export */   release: () => (/* binding */ release),\n/* harmony export */   scoreId: () => (/* binding */ scoreId),\n/* harmony export */   scoreName: () => (/* binding */ scoreName),\n/* harmony export */   startTime: () => (/* binding */ startTime),\n/* harmony export */   tableDefinitions: () => (/* binding */ tableDefinitions),\n/* harmony export */   totalTokens: () => (/* binding */ totalTokens),\n/* harmony export */   traceId: () => (/* binding */ traceId),\n/* harmony export */   traceName: () => (/* binding */ traceName),\n/* harmony export */   traceTimestamp: () => (/* binding */ traceTimestamp),\n/* harmony export */   traceUser: () => (/* binding */ traceUser),\n/* harmony export */   traceVersion: () => (/* binding */ traceVersion),\n/* harmony export */   tracesProjectId: () => (/* binding */ tracesProjectId)\n/* harmony export */ });\nconst completionTokens = {\n    name: \"completionTokens\",\n    type: \"number\",\n    internal: 'o.\"completion_tokens\"'\n};\nconst observationId = {\n    name: \"observationId\",\n    type: \"string\",\n    internal: 'o.\"id\"'\n};\nconst observationName = {\n    name: \"name\",\n    type: \"string\",\n    internal: 'o.\"name\"'\n};\nconst startTime = {\n    name: \"startTime\",\n    type: \"datetime\",\n    internal: 'o.\"start_time\"'\n};\nconst traceId = {\n    name: \"traceId\",\n    type: \"string\",\n    internal: 't.\"id\"'\n};\nconst traceVersion = {\n    name: \"version\",\n    type: \"string\",\n    internal: 't.\"version\"'\n};\nconst traceTimestamp = {\n    name: \"timestamp\",\n    type: \"string\",\n    internal: 't.\"timestamp\"'\n};\nconst scoreName = {\n    name: \"scoreName\",\n    type: \"string\",\n    internal: 's.\"name\"'\n};\nconst duration = {\n    name: \"duration\",\n    type: \"number\",\n    internal: 'EXTRACT(EPOCH FROM o.\"end_time\") - EXTRACT(EPOCH FROM o.\"start_time\")'\n};\nconst release = {\n    name: \"release\",\n    type: \"string\",\n    internal: 't.\"release\"'\n};\nconst tracesProjectId = {\n    name: \"tracesProjectId\",\n    type: \"string\",\n    internal: 't.\"project_id\"'\n};\nconst observationsProjectId = {\n    name: \"observationsProjectId\",\n    type: \"string\",\n    internal: 'o.\"project_id\"'\n};\nconst scoreId = {\n    name: \"scoreId\",\n    type: \"string\",\n    internal: 's.\"id\"'\n};\nconst traceName = {\n    name: \"traceName\",\n    type: \"string\",\n    internal: 't.\"name\"'\n};\nconst totalTokens = {\n    name: \"totalTokens\",\n    type: \"number\",\n    internal: 'o.\"total_tokens\"'\n};\nconst model = {\n    name: \"model\",\n    type: \"string\",\n    internal: 'o.\"model\"'\n};\nconst traceUser = {\n    name: \"user\",\n    type: \"string\",\n    internal: 't.\"user_id\"'\n};\nconst calculatedTotalCost = {\n    name: \"calculatedTotalCost\",\n    type: \"number\",\n    internal: 'o.\"calculated_total_cost\"'\n};\nconst tracesObservationsColumns = [\n    traceId,\n    observationId,\n    {\n        name: \"type\",\n        type: \"string\",\n        internal: 'o.\"type\"'\n    },\n    tracesProjectId,\n    observationsProjectId,\n    duration,\n    totalTokens,\n    model,\n    traceTimestamp,\n    traceUser,\n    startTime,\n    traceName,\n    observationName\n];\nconst tracesColumns = [\n    tracesProjectId,\n    traceVersion,\n    release,\n    traceId,\n    traceTimestamp,\n    traceName,\n    traceUser\n];\nconst tableDefinitions = {\n    traces: {\n        table: ` traces t`,\n        columns: tracesColumns\n    },\n    traces_observations: {\n        table: ` traces t LEFT JOIN observations o ON t.id = o.trace_id`,\n        columns: tracesObservationsColumns\n    },\n    traces_observationsview: {\n        table: ` traces t LEFT JOIN observations_view o ON t.id = o.trace_id`,\n        columns: [\n            ...tracesObservationsColumns,\n            calculatedTotalCost\n        ]\n    },\n    observations: {\n        table: ` observations_view o`,\n        columns: [\n            traceId,\n            calculatedTotalCost,\n            observationName,\n            {\n                name: \"type\",\n                type: \"string\",\n                internal: 'o.\"type\"'\n            },\n            completionTokens,\n            {\n                name: \"promptTokens\",\n                type: \"number\",\n                internal: 'o.\"prompt_tokens\"'\n            },\n            totalTokens,\n            observationId,\n            model,\n            observationsProjectId,\n            startTime,\n            {\n                name: \"endTime\",\n                type: \"datetime\",\n                internal: 'o.\"end_time\"'\n            },\n            duration\n        ]\n    },\n    traces_metrics: {\n        table: `traces_view t`,\n        columns: [\n            ...tracesColumns,\n            {\n                name: \"duration\",\n                type: \"number\",\n                internal: '\"duration\"'\n            }\n        ]\n    },\n    traces_scores: {\n        table: ` traces t JOIN scores s ON t.id = s.trace_id`,\n        columns: [\n            tracesProjectId,\n            {\n                name: \"value\",\n                type: \"number\",\n                internal: 's.\"value\"'\n            },\n            {\n                name: \"scoreName\",\n                type: \"number\",\n                internal: 's.\"name\"'\n            },\n            scoreId,\n            traceVersion,\n            traceTimestamp,\n            scoreName,\n            traceUser,\n            tracesProjectId,\n            traceName\n        ]\n    },\n    traces_parent_observation_scores: {\n        table: ` traces t LEFT JOIN observations_view o on t.\"id\" = o.\"trace_id\" and o.\"parent_observation_id\" is NULL LEFT JOIN scores s ON t.\"id\" = s.\"trace_id\"`,\n        columns: [\n            {\n                name: \"projectId\",\n                type: \"string\",\n                internal: 't.\"project_id\"'\n            },\n            {\n                name: \"value\",\n                type: \"number\",\n                internal: 's.\"value\"'\n            },\n            {\n                name: \"name\",\n                type: \"number\",\n                internal: 's.\"name\"'\n            },\n            traceVersion,\n            traceTimestamp,\n            scoreName,\n            duration,\n            release,\n            tracesProjectId,\n            observationsProjectId\n        ]\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2FwaS9zZXJ2aWNlcy90YWJsZURlZmluaXRpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLTyxNQUFNQSxtQkFBbUI7SUFDOUJDLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxVQUFVO0FBQ1osRUFBVztBQUNKLE1BQU1DLGdCQUFnQjtJQUMzQkgsTUFBTTtJQUNOQyxNQUFNO0lBQ05DLFVBQVU7QUFDWixFQUFXO0FBQ0osTUFBTUUsa0JBQWtCO0lBQzdCSixNQUFNO0lBQ05DLE1BQU07SUFDTkMsVUFBVTtBQUNaLEVBQVc7QUFDSixNQUFNRyxZQUFZO0lBQ3ZCTCxNQUFNO0lBQ05DLE1BQU07SUFDTkMsVUFBVTtBQUNaLEVBQVc7QUFDSixNQUFNSSxVQUFVO0lBQ3JCTixNQUFNO0lBQ05DLE1BQU07SUFDTkMsVUFBVTtBQUNaLEVBQVc7QUFDSixNQUFNSyxlQUFlO0lBQzFCUCxNQUFNO0lBQ05DLE1BQU07SUFDTkMsVUFBVTtBQUNaLEVBQVc7QUFDSixNQUFNTSxpQkFBaUI7SUFDNUJSLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxVQUFVO0FBQ1osRUFBVztBQUNKLE1BQU1PLFlBQVk7SUFDdkJULE1BQU07SUFDTkMsTUFBTTtJQUNOQyxVQUFVO0FBQ1osRUFBVztBQUNKLE1BQU1RLFdBQVc7SUFDdEJWLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxVQUNFO0FBQ0osRUFBVztBQUNKLE1BQU1TLFVBQVU7SUFDckJYLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxVQUFVO0FBQ1osRUFBVztBQUNKLE1BQU1VLGtCQUFrQjtJQUM3QlosTUFBTTtJQUNOQyxNQUFNO0lBQ05DLFVBQVU7QUFDWixFQUFXO0FBQ0osTUFBTVcsd0JBQXdCO0lBQ25DYixNQUFNO0lBQ05DLE1BQU07SUFDTkMsVUFBVTtBQUNaLEVBQVc7QUFDSixNQUFNWSxVQUFVO0lBQ3JCZCxNQUFNO0lBQ05DLE1BQU07SUFDTkMsVUFBVTtBQUNaLEVBQVc7QUFDSixNQUFNYSxZQUFZO0lBQ3ZCZixNQUFNO0lBQ05DLE1BQU07SUFDTkMsVUFBVTtBQUNaLEVBQVc7QUFDSixNQUFNYyxjQUFjO0lBQ3pCaEIsTUFBTTtJQUNOQyxNQUFNO0lBQ05DLFVBQVU7QUFDWixFQUFXO0FBQ0osTUFBTWUsUUFBUTtJQUNuQmpCLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxVQUFVO0FBQ1osRUFBVztBQUNKLE1BQU1nQixZQUFZO0lBQ3ZCbEIsTUFBTTtJQUNOQyxNQUFNO0lBQ05DLFVBQVU7QUFDWixFQUFXO0FBRUosTUFBTWlCLHNCQUFzQjtJQUNqQ25CLE1BQU07SUFDTkMsTUFBTTtJQUNOQyxVQUFVO0FBQ1osRUFBVztBQUVYLE1BQU1rQiw0QkFBZ0Q7SUFDcERkO0lBQ0FIO0lBQ0E7UUFBRUgsTUFBTTtRQUFRQyxNQUFNO1FBQVVDLFVBQVU7SUFBVztJQUNyRFU7SUFDQUM7SUFDQUg7SUFDQU07SUFDQUM7SUFDQVQ7SUFDQVU7SUFDQWI7SUFDQVU7SUFDQVg7Q0FDRDtBQUVELE1BQU1pQixnQkFBZ0I7SUFDcEJUO0lBQ0FMO0lBQ0FJO0lBQ0FMO0lBQ0FFO0lBQ0FPO0lBQ0FHO0NBQ0Q7QUFFTSxNQUFNSSxtQkFBcUM7SUFDaERDLFFBQVE7UUFDTkMsT0FBTyxDQUFDLFNBQVMsQ0FBQztRQUNsQkMsU0FBU0o7SUFDWDtJQUNBSyxxQkFBcUI7UUFDbkJGLE9BQU8sQ0FBQyx1REFBdUQsQ0FBQztRQUNoRUMsU0FBU0w7SUFDWDtJQUNBTyx5QkFBeUI7UUFDdkJILE9BQU8sQ0FBQyw0REFBNEQsQ0FBQztRQUNyRUMsU0FBUztlQUFJTDtZQUEyQkQ7U0FBb0I7SUFDOUQ7SUFDQVMsY0FBYztRQUNaSixPQUFPLENBQUMsb0JBQW9CLENBQUM7UUFDN0JDLFNBQVM7WUFDUG5CO1lBQ0FhO1lBQ0FmO1lBQ0E7Z0JBQUVKLE1BQU07Z0JBQVFDLE1BQU07Z0JBQVVDLFVBQVU7WUFBVztZQUNyREg7WUFDQTtnQkFDRUMsTUFBTTtnQkFDTkMsTUFBTTtnQkFDTkMsVUFBVTtZQUNaO1lBQ0FjO1lBQ0FiO1lBQ0FjO1lBQ0FKO1lBQ0FSO1lBQ0E7Z0JBQUVMLE1BQU07Z0JBQVdDLE1BQU07Z0JBQVlDLFVBQVU7WUFBZTtZQUM5RFE7U0FDRDtJQUNIO0lBQ0FtQixnQkFBZ0I7UUFDZEwsT0FBTyxDQUFDLGFBQWEsQ0FBQztRQUN0QkMsU0FBUztlQUNKSjtZQUNIO2dCQUFFckIsTUFBTTtnQkFBWUMsTUFBTTtnQkFBVUMsVUFBVTtZQUFhO1NBQzVEO0lBQ0g7SUFDQTRCLGVBQWU7UUFDYk4sT0FBTyxDQUFDLDRDQUE0QyxDQUFDO1FBQ3JEQyxTQUFTO1lBQ1BiO1lBQ0E7Z0JBQUVaLE1BQU07Z0JBQVNDLE1BQU07Z0JBQVVDLFVBQVU7WUFBWTtZQUN2RDtnQkFDRUYsTUFBTTtnQkFDTkMsTUFBTTtnQkFDTkMsVUFBVTtZQUNaO1lBQ0FZO1lBQ0FQO1lBQ0FDO1lBQ0FDO1lBQ0FTO1lBQ0FOO1lBQ0FHO1NBQ0Q7SUFDSDtJQUVBZ0Isa0NBQWtDO1FBQ2hDUCxPQUFPLENBQUMsa0pBQWtKLENBQUM7UUFDM0pDLFNBQVM7WUFDUDtnQkFBRXpCLE1BQU07Z0JBQWFDLE1BQU07Z0JBQVVDLFVBQVU7WUFBaUI7WUFDaEU7Z0JBQUVGLE1BQU07Z0JBQVNDLE1BQU07Z0JBQVVDLFVBQVU7WUFBWTtZQUN2RDtnQkFDRUYsTUFBTTtnQkFDTkMsTUFBTTtnQkFDTkMsVUFBVTtZQUNaO1lBQ0FLO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0FDO1lBQ0FDO1NBQ0Q7SUFDSDtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvc2VydmVyL2FwaS9zZXJ2aWNlcy90YWJsZURlZmluaXRpb25zLnRzP2IzMjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgdHlwZSBDb2x1bW5EZWZpbml0aW9uLFxuICB0eXBlIFRhYmxlRGVmaW5pdGlvbnMsXG59IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXBpL2ludGVyZmFjZXMvdGFibGVEZWZpbml0aW9uXCI7XG5cbmV4cG9ydCBjb25zdCBjb21wbGV0aW9uVG9rZW5zID0ge1xuICBuYW1lOiBcImNvbXBsZXRpb25Ub2tlbnNcIixcbiAgdHlwZTogXCJudW1iZXJcIixcbiAgaW50ZXJuYWw6ICdvLlwiY29tcGxldGlvbl90b2tlbnNcIicsXG59IGFzIGNvbnN0O1xuZXhwb3J0IGNvbnN0IG9ic2VydmF0aW9uSWQgPSB7XG4gIG5hbWU6IFwib2JzZXJ2YXRpb25JZFwiLFxuICB0eXBlOiBcInN0cmluZ1wiLFxuICBpbnRlcm5hbDogJ28uXCJpZFwiJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgY29uc3Qgb2JzZXJ2YXRpb25OYW1lID0ge1xuICBuYW1lOiBcIm5hbWVcIixcbiAgdHlwZTogXCJzdHJpbmdcIixcbiAgaW50ZXJuYWw6ICdvLlwibmFtZVwiJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgY29uc3Qgc3RhcnRUaW1lID0ge1xuICBuYW1lOiBcInN0YXJ0VGltZVwiLFxuICB0eXBlOiBcImRhdGV0aW1lXCIsXG4gIGludGVybmFsOiAnby5cInN0YXJ0X3RpbWVcIicsXG59IGFzIGNvbnN0O1xuZXhwb3J0IGNvbnN0IHRyYWNlSWQgPSB7XG4gIG5hbWU6IFwidHJhY2VJZFwiLFxuICB0eXBlOiBcInN0cmluZ1wiLFxuICBpbnRlcm5hbDogJ3QuXCJpZFwiJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgY29uc3QgdHJhY2VWZXJzaW9uID0ge1xuICBuYW1lOiBcInZlcnNpb25cIixcbiAgdHlwZTogXCJzdHJpbmdcIixcbiAgaW50ZXJuYWw6ICd0LlwidmVyc2lvblwiJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgY29uc3QgdHJhY2VUaW1lc3RhbXAgPSB7XG4gIG5hbWU6IFwidGltZXN0YW1wXCIsXG4gIHR5cGU6IFwic3RyaW5nXCIsXG4gIGludGVybmFsOiAndC5cInRpbWVzdGFtcFwiJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgY29uc3Qgc2NvcmVOYW1lID0ge1xuICBuYW1lOiBcInNjb3JlTmFtZVwiLFxuICB0eXBlOiBcInN0cmluZ1wiLFxuICBpbnRlcm5hbDogJ3MuXCJuYW1lXCInLFxufSBhcyBjb25zdDtcbmV4cG9ydCBjb25zdCBkdXJhdGlvbiA9IHtcbiAgbmFtZTogXCJkdXJhdGlvblwiLFxuICB0eXBlOiBcIm51bWJlclwiLFxuICBpbnRlcm5hbDpcbiAgICAnRVhUUkFDVChFUE9DSCBGUk9NIG8uXCJlbmRfdGltZVwiKSAtIEVYVFJBQ1QoRVBPQ0ggRlJPTSBvLlwic3RhcnRfdGltZVwiKScsXG59IGFzIGNvbnN0O1xuZXhwb3J0IGNvbnN0IHJlbGVhc2UgPSB7XG4gIG5hbWU6IFwicmVsZWFzZVwiLFxuICB0eXBlOiBcInN0cmluZ1wiLFxuICBpbnRlcm5hbDogJ3QuXCJyZWxlYXNlXCInLFxufSBhcyBjb25zdDtcbmV4cG9ydCBjb25zdCB0cmFjZXNQcm9qZWN0SWQgPSB7XG4gIG5hbWU6IFwidHJhY2VzUHJvamVjdElkXCIsXG4gIHR5cGU6IFwic3RyaW5nXCIsXG4gIGludGVybmFsOiAndC5cInByb2plY3RfaWRcIicsXG59IGFzIGNvbnN0O1xuZXhwb3J0IGNvbnN0IG9ic2VydmF0aW9uc1Byb2plY3RJZCA9IHtcbiAgbmFtZTogXCJvYnNlcnZhdGlvbnNQcm9qZWN0SWRcIixcbiAgdHlwZTogXCJzdHJpbmdcIixcbiAgaW50ZXJuYWw6ICdvLlwicHJvamVjdF9pZFwiJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgY29uc3Qgc2NvcmVJZCA9IHtcbiAgbmFtZTogXCJzY29yZUlkXCIsXG4gIHR5cGU6IFwic3RyaW5nXCIsXG4gIGludGVybmFsOiAncy5cImlkXCInLFxufSBhcyBjb25zdDtcbmV4cG9ydCBjb25zdCB0cmFjZU5hbWUgPSB7XG4gIG5hbWU6IFwidHJhY2VOYW1lXCIsXG4gIHR5cGU6IFwic3RyaW5nXCIsXG4gIGludGVybmFsOiAndC5cIm5hbWVcIicsXG59IGFzIGNvbnN0O1xuZXhwb3J0IGNvbnN0IHRvdGFsVG9rZW5zID0ge1xuICBuYW1lOiBcInRvdGFsVG9rZW5zXCIsXG4gIHR5cGU6IFwibnVtYmVyXCIsXG4gIGludGVybmFsOiAnby5cInRvdGFsX3Rva2Vuc1wiJyxcbn0gYXMgY29uc3Q7XG5leHBvcnQgY29uc3QgbW9kZWwgPSB7XG4gIG5hbWU6IFwibW9kZWxcIixcbiAgdHlwZTogXCJzdHJpbmdcIixcbiAgaW50ZXJuYWw6ICdvLlwibW9kZWxcIicsXG59IGFzIGNvbnN0O1xuZXhwb3J0IGNvbnN0IHRyYWNlVXNlciA9IHtcbiAgbmFtZTogXCJ1c2VyXCIsXG4gIHR5cGU6IFwic3RyaW5nXCIsXG4gIGludGVybmFsOiAndC5cInVzZXJfaWRcIicsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgY2FsY3VsYXRlZFRvdGFsQ29zdCA9IHtcbiAgbmFtZTogXCJjYWxjdWxhdGVkVG90YWxDb3N0XCIsXG4gIHR5cGU6IFwibnVtYmVyXCIsXG4gIGludGVybmFsOiAnby5cImNhbGN1bGF0ZWRfdG90YWxfY29zdFwiJyxcbn0gYXMgY29uc3Q7XG5cbmNvbnN0IHRyYWNlc09ic2VydmF0aW9uc0NvbHVtbnM6IENvbHVtbkRlZmluaXRpb25bXSA9IFtcbiAgdHJhY2VJZCxcbiAgb2JzZXJ2YXRpb25JZCxcbiAgeyBuYW1lOiBcInR5cGVcIiwgdHlwZTogXCJzdHJpbmdcIiwgaW50ZXJuYWw6ICdvLlwidHlwZVwiJyB9LFxuICB0cmFjZXNQcm9qZWN0SWQsXG4gIG9ic2VydmF0aW9uc1Byb2plY3RJZCxcbiAgZHVyYXRpb24sXG4gIHRvdGFsVG9rZW5zLFxuICBtb2RlbCxcbiAgdHJhY2VUaW1lc3RhbXAsXG4gIHRyYWNlVXNlcixcbiAgc3RhcnRUaW1lLFxuICB0cmFjZU5hbWUsXG4gIG9ic2VydmF0aW9uTmFtZSxcbl07XG5cbmNvbnN0IHRyYWNlc0NvbHVtbnMgPSBbXG4gIHRyYWNlc1Byb2plY3RJZCxcbiAgdHJhY2VWZXJzaW9uLFxuICByZWxlYXNlLFxuICB0cmFjZUlkLFxuICB0cmFjZVRpbWVzdGFtcCxcbiAgdHJhY2VOYW1lLFxuICB0cmFjZVVzZXIsXG5dO1xuXG5leHBvcnQgY29uc3QgdGFibGVEZWZpbml0aW9uczogVGFibGVEZWZpbml0aW9ucyA9IHtcbiAgdHJhY2VzOiB7XG4gICAgdGFibGU6IGAgdHJhY2VzIHRgLFxuICAgIGNvbHVtbnM6IHRyYWNlc0NvbHVtbnMsXG4gIH0sXG4gIHRyYWNlc19vYnNlcnZhdGlvbnM6IHtcbiAgICB0YWJsZTogYCB0cmFjZXMgdCBMRUZUIEpPSU4gb2JzZXJ2YXRpb25zIG8gT04gdC5pZCA9IG8udHJhY2VfaWRgLFxuICAgIGNvbHVtbnM6IHRyYWNlc09ic2VydmF0aW9uc0NvbHVtbnMsXG4gIH0sXG4gIHRyYWNlc19vYnNlcnZhdGlvbnN2aWV3OiB7XG4gICAgdGFibGU6IGAgdHJhY2VzIHQgTEVGVCBKT0lOIG9ic2VydmF0aW9uc192aWV3IG8gT04gdC5pZCA9IG8udHJhY2VfaWRgLFxuICAgIGNvbHVtbnM6IFsuLi50cmFjZXNPYnNlcnZhdGlvbnNDb2x1bW5zLCBjYWxjdWxhdGVkVG90YWxDb3N0XSxcbiAgfSxcbiAgb2JzZXJ2YXRpb25zOiB7XG4gICAgdGFibGU6IGAgb2JzZXJ2YXRpb25zX3ZpZXcgb2AsXG4gICAgY29sdW1uczogW1xuICAgICAgdHJhY2VJZCxcbiAgICAgIGNhbGN1bGF0ZWRUb3RhbENvc3QsXG4gICAgICBvYnNlcnZhdGlvbk5hbWUsXG4gICAgICB7IG5hbWU6IFwidHlwZVwiLCB0eXBlOiBcInN0cmluZ1wiLCBpbnRlcm5hbDogJ28uXCJ0eXBlXCInIH0sXG4gICAgICBjb21wbGV0aW9uVG9rZW5zLFxuICAgICAge1xuICAgICAgICBuYW1lOiBcInByb21wdFRva2Vuc1wiLFxuICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICBpbnRlcm5hbDogJ28uXCJwcm9tcHRfdG9rZW5zXCInLFxuICAgICAgfSxcbiAgICAgIHRvdGFsVG9rZW5zLFxuICAgICAgb2JzZXJ2YXRpb25JZCxcbiAgICAgIG1vZGVsLFxuICAgICAgb2JzZXJ2YXRpb25zUHJvamVjdElkLFxuICAgICAgc3RhcnRUaW1lLFxuICAgICAgeyBuYW1lOiBcImVuZFRpbWVcIiwgdHlwZTogXCJkYXRldGltZVwiLCBpbnRlcm5hbDogJ28uXCJlbmRfdGltZVwiJyB9LFxuICAgICAgZHVyYXRpb24sXG4gICAgXSxcbiAgfSxcbiAgdHJhY2VzX21ldHJpY3M6IHtcbiAgICB0YWJsZTogYHRyYWNlc192aWV3IHRgLFxuICAgIGNvbHVtbnM6IFtcbiAgICAgIC4uLnRyYWNlc0NvbHVtbnMsXG4gICAgICB7IG5hbWU6IFwiZHVyYXRpb25cIiwgdHlwZTogXCJudW1iZXJcIiwgaW50ZXJuYWw6ICdcImR1cmF0aW9uXCInIH0sXG4gICAgXSxcbiAgfSxcbiAgdHJhY2VzX3Njb3Jlczoge1xuICAgIHRhYmxlOiBgIHRyYWNlcyB0IEpPSU4gc2NvcmVzIHMgT04gdC5pZCA9IHMudHJhY2VfaWRgLFxuICAgIGNvbHVtbnM6IFtcbiAgICAgIHRyYWNlc1Byb2plY3RJZCxcbiAgICAgIHsgbmFtZTogXCJ2YWx1ZVwiLCB0eXBlOiBcIm51bWJlclwiLCBpbnRlcm5hbDogJ3MuXCJ2YWx1ZVwiJyB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiBcInNjb3JlTmFtZVwiLFxuICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICBpbnRlcm5hbDogJ3MuXCJuYW1lXCInLFxuICAgICAgfSxcbiAgICAgIHNjb3JlSWQsXG4gICAgICB0cmFjZVZlcnNpb24sXG4gICAgICB0cmFjZVRpbWVzdGFtcCxcbiAgICAgIHNjb3JlTmFtZSxcbiAgICAgIHRyYWNlVXNlcixcbiAgICAgIHRyYWNlc1Byb2plY3RJZCxcbiAgICAgIHRyYWNlTmFtZSxcbiAgICBdLFxuICB9LFxuXG4gIHRyYWNlc19wYXJlbnRfb2JzZXJ2YXRpb25fc2NvcmVzOiB7XG4gICAgdGFibGU6IGAgdHJhY2VzIHQgTEVGVCBKT0lOIG9ic2VydmF0aW9uc192aWV3IG8gb24gdC5cImlkXCIgPSBvLlwidHJhY2VfaWRcIiBhbmQgby5cInBhcmVudF9vYnNlcnZhdGlvbl9pZFwiIGlzIE5VTEwgTEVGVCBKT0lOIHNjb3JlcyBzIE9OIHQuXCJpZFwiID0gcy5cInRyYWNlX2lkXCJgLFxuICAgIGNvbHVtbnM6IFtcbiAgICAgIHsgbmFtZTogXCJwcm9qZWN0SWRcIiwgdHlwZTogXCJzdHJpbmdcIiwgaW50ZXJuYWw6ICd0LlwicHJvamVjdF9pZFwiJyB9LFxuICAgICAgeyBuYW1lOiBcInZhbHVlXCIsIHR5cGU6IFwibnVtYmVyXCIsIGludGVybmFsOiAncy5cInZhbHVlXCInIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwibmFtZVwiLFxuICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICBpbnRlcm5hbDogJ3MuXCJuYW1lXCInLFxuICAgICAgfSxcbiAgICAgIHRyYWNlVmVyc2lvbixcbiAgICAgIHRyYWNlVGltZXN0YW1wLFxuICAgICAgc2NvcmVOYW1lLFxuICAgICAgZHVyYXRpb24sXG4gICAgICByZWxlYXNlLFxuICAgICAgdHJhY2VzUHJvamVjdElkLFxuICAgICAgb2JzZXJ2YXRpb25zUHJvamVjdElkLFxuICAgIF0sXG4gIH0sXG59O1xuIl0sIm5hbWVzIjpbImNvbXBsZXRpb25Ub2tlbnMiLCJuYW1lIiwidHlwZSIsImludGVybmFsIiwib2JzZXJ2YXRpb25JZCIsIm9ic2VydmF0aW9uTmFtZSIsInN0YXJ0VGltZSIsInRyYWNlSWQiLCJ0cmFjZVZlcnNpb24iLCJ0cmFjZVRpbWVzdGFtcCIsInNjb3JlTmFtZSIsImR1cmF0aW9uIiwicmVsZWFzZSIsInRyYWNlc1Byb2plY3RJZCIsIm9ic2VydmF0aW9uc1Byb2plY3RJZCIsInNjb3JlSWQiLCJ0cmFjZU5hbWUiLCJ0b3RhbFRva2VucyIsIm1vZGVsIiwidHJhY2VVc2VyIiwiY2FsY3VsYXRlZFRvdGFsQ29zdCIsInRyYWNlc09ic2VydmF0aW9uc0NvbHVtbnMiLCJ0cmFjZXNDb2x1bW5zIiwidGFibGVEZWZpbml0aW9ucyIsInRyYWNlcyIsInRhYmxlIiwiY29sdW1ucyIsInRyYWNlc19vYnNlcnZhdGlvbnMiLCJ0cmFjZXNfb2JzZXJ2YXRpb25zdmlldyIsIm9ic2VydmF0aW9ucyIsInRyYWNlc19tZXRyaWNzIiwidHJhY2VzX3Njb3JlcyIsInRyYWNlc19wYXJlbnRfb2JzZXJ2YXRpb25fc2NvcmVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/server/api/services/tableDefinitions.ts\n");

/***/ }),

/***/ "(api)/./src/server/api/trpc.ts":
/*!********************************!*\
  !*** ./src/server/api/trpc.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createInnerTRPCContext: () => (/* binding */ createInnerTRPCContext),\n/* harmony export */   createTRPCContext: () => (/* binding */ createTRPCContext),\n/* harmony export */   createTRPCRouter: () => (/* binding */ createTRPCRouter),\n/* harmony export */   protectedGetSessionProcedure: () => (/* binding */ protectedGetSessionProcedure),\n/* harmony export */   protectedGetTraceProcedure: () => (/* binding */ protectedGetTraceProcedure),\n/* harmony export */   protectedProcedure: () => (/* binding */ protectedProcedure),\n/* harmony export */   protectedProjectProcedure: () => (/* binding */ protectedProjectProcedure),\n/* harmony export */   publicProcedure: () => (/* binding */ publicProcedure)\n/* harmony export */ });\n/* harmony import */ var _src_server_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/server/auth */ \"(api)/./src/server/auth.ts\");\n/* harmony import */ var _src_server_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/server/db */ \"(api)/./src/server/db.ts\");\n/* harmony import */ var _sentry_node__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @sentry/node */ \"@sentry/node\");\n/* harmony import */ var _sentry_node__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_sentry_node__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _trpc_server__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @trpc/server */ \"@trpc/server\");\n/* harmony import */ var superjson__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! superjson */ \"superjson\");\n/* harmony import */ var _src_utils_superjson__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/src/utils/superjson */ \"(api)/./src/utils/superjson.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_server_auth__WEBPACK_IMPORTED_MODULE_0__, _src_server_db__WEBPACK_IMPORTED_MODULE_1__, zod__WEBPACK_IMPORTED_MODULE_3__, _trpc_server__WEBPACK_IMPORTED_MODULE_4__, superjson__WEBPACK_IMPORTED_MODULE_5__, _src_utils_superjson__WEBPACK_IMPORTED_MODULE_6__]);\n([_src_server_auth__WEBPACK_IMPORTED_MODULE_0__, _src_server_db__WEBPACK_IMPORTED_MODULE_1__, zod__WEBPACK_IMPORTED_MODULE_3__, _trpc_server__WEBPACK_IMPORTED_MODULE_4__, superjson__WEBPACK_IMPORTED_MODULE_5__, _src_utils_superjson__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/**\n * YOU PROBABLY DON'T NEED TO EDIT THIS FILE, UNLESS:\n * 1. You want to modify request context (see Part 1).\n * 2. You want to create a new middleware or type of procedure (see Part 3).\n *\n * TL;DR - This is where all the tRPC server stuff is created and plugged in. The pieces you will\n * need to use are documented accordingly near the end.\n */ /**\n * 1. CONTEXT\n *\n * This section defines the \"contexts\" that are available in the backend API.\n *\n * These allow you to access things when processing a request, like the database, the session, etc.\n */ \n\n\n\n/**\n * This helper generates the \"internals\" for a tRPC context. If you need to use it, you can export\n * it from here.\n *\n * Examples of things you may need it for:\n * - testing, so we don't have to mock Next.js' req/res\n * - tRPC's `createSSGHelpers`, where we don't have req/res\n *\n * @see https://create.t3.gg/en/usage/trpc#-serverapitrpcts\n */ const createInnerTRPCContext = (opts)=>{\n    return {\n        session: opts.session,\n        prisma: _src_server_db__WEBPACK_IMPORTED_MODULE_1__.prisma,\n        DB: _src_server_db__WEBPACK_IMPORTED_MODULE_1__.DB\n    };\n};\n/**\n * This is the actual context you will use in your router. It will be used to process every request\n * that goes through your tRPC endpoint.\n *\n * @see https://trpc.io/docs/context\n */ const createTRPCContext = async (opts)=>{\n    const { req, res } = opts;\n    // Get the session from the server using the getServerSession wrapper function\n    const session = await (0,_src_server_auth__WEBPACK_IMPORTED_MODULE_0__.getServerAuthSession)({\n        req,\n        res\n    });\n    _sentry_node__WEBPACK_IMPORTED_MODULE_2__.setUser({\n        id: session?.user?.id,\n        email: session?.user?.email ?? undefined,\n        username: session?.user?.name ?? undefined\n    });\n    return createInnerTRPCContext({\n        session\n    });\n};\n/**\n * 2. INITIALIZATION\n *\n * This is where the tRPC API is initialized, connecting the context and transformer. We also parse\n * ZodErrors so that you get typesafety on the frontend if your procedure fails due to validation\n * errors on the backend.\n */ \n\n\n\n(0,_src_utils_superjson__WEBPACK_IMPORTED_MODULE_6__.setUpSuperjson)();\nconst t = _trpc_server__WEBPACK_IMPORTED_MODULE_4__.initTRPC.context().create({\n    transformer: superjson__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n    errorFormatter ({ shape, error }) {\n        return {\n            ...shape,\n            data: {\n                ...shape.data,\n                zodError: error.cause instanceof zod__WEBPACK_IMPORTED_MODULE_3__.ZodError ? error.cause.flatten() : null\n            }\n        };\n    }\n});\n/**\n * 3. ROUTER & PROCEDURE (THE IMPORTANT BIT)\n *\n * These are the pieces you use to build your tRPC API. You should import these a lot in the\n * \"/src/server/api/routers\" directory.\n */ /**\n * This is how you create new routers and sub-routers in your tRPC API.\n *\n * @see https://trpc.io/docs/router\n */ const createTRPCRouter = t.router;\n/**\n * Public (unauthenticated) procedure\n *\n * This is the base piece you use to build new queries and mutations on your tRPC API. It does not\n * guarantee that a user querying is authorized, but you can still access user session data if they\n * are logged in.\n */ const publicProcedure = t.procedure;\n/** Reusable middleware that enforces users are logged in before running the procedure. */ const enforceUserIsAuthed = t.middleware(({ ctx, next })=>{\n    if (!ctx.session || !ctx.session.user) {\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    return next({\n        ctx: {\n            // infers the `session` as non-nullable\n            session: {\n                ...ctx.session,\n                user: ctx.session.user\n            }\n        }\n    });\n});\n/**\n * Protected (authenticated) procedure\n *\n * If you want a query or mutation to ONLY be accessible to logged in users, use this. It verifies\n * the session is valid and guarantees `ctx.session.user` is not null.\n *\n * @see https://trpc.io/docs/procedures\n */ const protectedProcedure = t.procedure.use(enforceUserIsAuthed);\nconst inputProjectSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    projectId: zod__WEBPACK_IMPORTED_MODULE_3__.string()\n});\n/**\n * Protected (authenticated) procedure with project role\n */ const enforceUserIsAuthedAndProjectMember = t.middleware(({ ctx, rawInput, next })=>{\n    if (!ctx.session || !ctx.session.user) {\n        throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n            code: \"UNAUTHORIZED\"\n        });\n    }\n    const result = inputProjectSchema.safeParse(rawInput);\n    if (!result.success) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n        code: \"BAD_REQUEST\",\n        message: \"Invalid input, projectId is required\"\n    });\n    // check that the user is a member of this project\n    const projectId = result.data.projectId;\n    const sessionProject = ctx.session.user.projects.find(({ id })=>id === projectId);\n    if (!sessionProject && ctx.session.user.admin !== true) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n        code: \"UNAUTHORIZED\",\n        message: \"User is not a member of this project\"\n    });\n    return next({\n        ctx: {\n            // infers the `session` as non-nullable\n            session: {\n                ...ctx.session,\n                user: ctx.session.user,\n                projectRole: ctx.session.user.admin === true ? \"ADMIN\" : sessionProject.role,\n                projectId: projectId\n            }\n        }\n    });\n});\nconst protectedProjectProcedure = t.procedure.use(enforceUserIsAuthedAndProjectMember);\n/*\n * Protect trace-level getter routes.\n * - Users need to be member of the project to access the trace.\n * - Alternatively, the trace needs to be public.\n */ const inputTraceSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    traceId: zod__WEBPACK_IMPORTED_MODULE_3__.string()\n});\nconst enforceTraceAccess = t.middleware(async ({ ctx, rawInput, next })=>{\n    const result = inputTraceSchema.safeParse(rawInput);\n    if (!result.success) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n        code: \"BAD_REQUEST\",\n        message: \"Invalid input, traceId is required\"\n    });\n    const traceId = result.data.traceId;\n    const trace = await _src_server_db__WEBPACK_IMPORTED_MODULE_1__.prisma.trace.findFirst({\n        where: {\n            id: traceId\n        },\n        select: {\n            public: true,\n            projectId: true\n        }\n    });\n    if (!trace) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n        code: \"NOT_FOUND\",\n        message: \"Trace not found\"\n    });\n    const sessionProject = ctx.session?.user?.projects.find(({ id })=>id === trace.projectId);\n    if (!trace.public && !sessionProject && ctx.session?.user?.admin !== true) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n        code: \"UNAUTHORIZED\",\n        message: \"User is not a member of this project and this trace is not public\"\n    });\n    return next({\n        ctx: {\n            session: {\n                ...ctx.session,\n                projectRole: ctx.session?.user?.admin === true ? \"ADMIN\" : sessionProject?.role\n            }\n        }\n    });\n});\nconst protectedGetTraceProcedure = t.procedure.use(enforceTraceAccess);\n/*\n * Protect session-level getter routes.\n * - Users need to be member of the project to access the trace.\n * - Alternatively, the trace needs to be public.\n */ const inputSessionSchema = zod__WEBPACK_IMPORTED_MODULE_3__.object({\n    sessionId: zod__WEBPACK_IMPORTED_MODULE_3__.string(),\n    projectId: zod__WEBPACK_IMPORTED_MODULE_3__.string()\n});\nconst enforceSessionAccess = t.middleware(async ({ ctx, rawInput, next })=>{\n    const result = inputSessionSchema.safeParse(rawInput);\n    if (!result.success) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n        code: \"BAD_REQUEST\",\n        message: \"Invalid input, sessionId is required\"\n    });\n    const { sessionId, projectId } = result.data;\n    const session = await _src_server_db__WEBPACK_IMPORTED_MODULE_1__.prisma.traceSession.findFirst({\n        where: {\n            id: sessionId,\n            projectId\n        },\n        select: {\n            public: true\n        }\n    });\n    if (!session) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n        code: \"NOT_FOUND\",\n        message: \"Session not found\"\n    });\n    const userSessionProject = ctx.session?.user?.projects.find(({ id })=>id === projectId);\n    if (!session.public && !userSessionProject && ctx.session?.user?.admin !== true) throw new _trpc_server__WEBPACK_IMPORTED_MODULE_4__.TRPCError({\n        code: \"UNAUTHORIZED\",\n        message: \"User is not a member of this project and this session is not public\"\n    });\n    return next({\n        ctx: {\n            session: {\n                ...ctx.session,\n                projectRole: ctx.session?.user?.admin === true ? \"ADMIN\" : userSessionProject?.role\n            }\n        }\n    });\n});\nconst protectedGetSessionProcedure = t.procedure.use(enforceSessionAccess);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bURBQVNBLENBQUM7UUFDbEJ1QixNQUFNO1FBQ05ZLFNBQVM7SUFDWDtJQUVGLE1BQU0sRUFBRWtCLFNBQVMsRUFBRXpCLFNBQVMsRUFBRSxHQUFHSSxPQUFPckIsSUFBSTtJQUU1QyxNQUFNdkIsVUFBVSxNQUFNTCxrREFBTUEsQ0FBQ3dFLFlBQVksQ0FBQ1IsU0FBUyxDQUFDO1FBQ2xEQyxPQUFPO1lBQ0x2RCxJQUFJNEQ7WUFDSnpCO1FBQ0Y7UUFDQXFCLFFBQVE7WUFDTkMsUUFBUTtRQUNWO0lBQ0Y7SUFFQSxJQUFJLENBQUM5RCxTQUNILE1BQU0sSUFBSVksbURBQVNBLENBQUM7UUFDbEJ1QixNQUFNO1FBQ05ZLFNBQVM7SUFDWDtJQUVGLE1BQU1xQixxQkFBcUJuQyxJQUFJakMsT0FBTyxFQUFFTSxNQUFNMkMsU0FBU0MsS0FDckQsQ0FBQyxFQUFFN0MsRUFBRSxFQUFFLEdBQUtBLE9BQU9tQztJQUdyQixJQUNFLENBQUN4QyxRQUFROEQsTUFBTSxJQUNmLENBQUNNLHNCQUNEbkMsSUFBSWpDLE9BQU8sRUFBRU0sTUFBTTZDLFVBQVUsTUFFN0IsTUFBTSxJQUFJdkMsbURBQVNBLENBQUM7UUFDbEJ1QixNQUFNO1FBQ05ZLFNBQ0U7SUFDSjtJQUVGLE9BQU9iLEtBQUs7UUFDVkQsS0FBSztZQUNIakMsU0FBUztnQkFDUCxHQUFHaUMsSUFBSWpDLE9BQU87Z0JBQ2RvRCxhQUNFbkIsSUFBSWpDLE9BQU8sRUFBRU0sTUFBTTZDLFVBQVUsT0FDekIsVUFDQWlCLG9CQUFvQmY7WUFDNUI7UUFDRjtJQUNGO0FBQ0Y7QUFFTyxNQUFNZ0IsK0JBQ1hyRCxFQUFFYyxTQUFTLENBQUNPLEdBQUcsQ0FBQzZCLHNCQUFzQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9zZXJ2ZXIvYXBpL3RycGMudHM/MTk3MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFlPVSBQUk9CQUJMWSBET04nVCBORUVEIFRPIEVESVQgVEhJUyBGSUxFLCBVTkxFU1M6XG4gKiAxLiBZb3Ugd2FudCB0byBtb2RpZnkgcmVxdWVzdCBjb250ZXh0IChzZWUgUGFydCAxKS5cbiAqIDIuIFlvdSB3YW50IHRvIGNyZWF0ZSBhIG5ldyBtaWRkbGV3YXJlIG9yIHR5cGUgb2YgcHJvY2VkdXJlIChzZWUgUGFydCAzKS5cbiAqXG4gKiBUTDtEUiAtIFRoaXMgaXMgd2hlcmUgYWxsIHRoZSB0UlBDIHNlcnZlciBzdHVmZiBpcyBjcmVhdGVkIGFuZCBwbHVnZ2VkIGluLiBUaGUgcGllY2VzIHlvdSB3aWxsXG4gKiBuZWVkIHRvIHVzZSBhcmUgZG9jdW1lbnRlZCBhY2NvcmRpbmdseSBuZWFyIHRoZSBlbmQuXG4gKi9cblxuLyoqXG4gKiAxLiBDT05URVhUXG4gKlxuICogVGhpcyBzZWN0aW9uIGRlZmluZXMgdGhlIFwiY29udGV4dHNcIiB0aGF0IGFyZSBhdmFpbGFibGUgaW4gdGhlIGJhY2tlbmQgQVBJLlxuICpcbiAqIFRoZXNlIGFsbG93IHlvdSB0byBhY2Nlc3MgdGhpbmdzIHdoZW4gcHJvY2Vzc2luZyBhIHJlcXVlc3QsIGxpa2UgdGhlIGRhdGFiYXNlLCB0aGUgc2Vzc2lvbiwgZXRjLlxuICovXG5pbXBvcnQgeyB0eXBlIENyZWF0ZU5leHRDb250ZXh0T3B0aW9ucyB9IGZyb20gXCJAdHJwYy9zZXJ2ZXIvYWRhcHRlcnMvbmV4dFwiO1xuaW1wb3J0IHsgdHlwZSBTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aFwiO1xuXG5pbXBvcnQgeyBnZXRTZXJ2ZXJBdXRoU2Vzc2lvbiB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvYXV0aFwiO1xuaW1wb3J0IHsgREIsIHByaXNtYSB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvZGJcIjtcbmltcG9ydCAqIGFzIFNlbnRyeSBmcm9tIFwiQHNlbnRyeS9ub2RlXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcblxudHlwZSBDcmVhdGVDb250ZXh0T3B0aW9ucyA9IHtcbiAgc2Vzc2lvbjogU2Vzc2lvbiB8IG51bGw7XG59O1xuXG4vKipcbiAqIFRoaXMgaGVscGVyIGdlbmVyYXRlcyB0aGUgXCJpbnRlcm5hbHNcIiBmb3IgYSB0UlBDIGNvbnRleHQuIElmIHlvdSBuZWVkIHRvIHVzZSBpdCwgeW91IGNhbiBleHBvcnRcbiAqIGl0IGZyb20gaGVyZS5cbiAqXG4gKiBFeGFtcGxlcyBvZiB0aGluZ3MgeW91IG1heSBuZWVkIGl0IGZvcjpcbiAqIC0gdGVzdGluZywgc28gd2UgZG9uJ3QgaGF2ZSB0byBtb2NrIE5leHQuanMnIHJlcS9yZXNcbiAqIC0gdFJQQydzIGBjcmVhdGVTU0dIZWxwZXJzYCwgd2hlcmUgd2UgZG9uJ3QgaGF2ZSByZXEvcmVzXG4gKlxuICogQHNlZSBodHRwczovL2NyZWF0ZS50My5nZy9lbi91c2FnZS90cnBjIy1zZXJ2ZXJhcGl0cnBjdHNcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUlubmVyVFJQQ0NvbnRleHQgPSAob3B0czogQ3JlYXRlQ29udGV4dE9wdGlvbnMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBzZXNzaW9uOiBvcHRzLnNlc3Npb24sXG4gICAgcHJpc21hLFxuICAgIERCLFxuICB9O1xufTtcblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBhY3R1YWwgY29udGV4dCB5b3Ugd2lsbCB1c2UgaW4geW91ciByb3V0ZXIuIEl0IHdpbGwgYmUgdXNlZCB0byBwcm9jZXNzIGV2ZXJ5IHJlcXVlc3RcbiAqIHRoYXQgZ29lcyB0aHJvdWdoIHlvdXIgdFJQQyBlbmRwb2ludC5cbiAqXG4gKiBAc2VlIGh0dHBzOi8vdHJwYy5pby9kb2NzL2NvbnRleHRcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVRSUENDb250ZXh0ID0gYXN5bmMgKG9wdHM6IENyZWF0ZU5leHRDb250ZXh0T3B0aW9ucykgPT4ge1xuICBjb25zdCB7IHJlcSwgcmVzIH0gPSBvcHRzO1xuXG4gIC8vIEdldCB0aGUgc2Vzc2lvbiBmcm9tIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGdldFNlcnZlclNlc3Npb24gd3JhcHBlciBmdW5jdGlvblxuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyQXV0aFNlc3Npb24oeyByZXEsIHJlcyB9KTtcblxuICBTZW50cnkuc2V0VXNlcih7XG4gICAgaWQ6IHNlc3Npb24/LnVzZXI/LmlkLFxuICAgIGVtYWlsOiBzZXNzaW9uPy51c2VyPy5lbWFpbCA/PyB1bmRlZmluZWQsXG4gICAgdXNlcm5hbWU6IHNlc3Npb24/LnVzZXI/Lm5hbWUgPz8gdW5kZWZpbmVkLFxuICB9KTtcblxuICByZXR1cm4gY3JlYXRlSW5uZXJUUlBDQ29udGV4dCh7XG4gICAgc2Vzc2lvbixcbiAgfSk7XG59O1xuXG4vKipcbiAqIDIuIElOSVRJQUxJWkFUSU9OXG4gKlxuICogVGhpcyBpcyB3aGVyZSB0aGUgdFJQQyBBUEkgaXMgaW5pdGlhbGl6ZWQsIGNvbm5lY3RpbmcgdGhlIGNvbnRleHQgYW5kIHRyYW5zZm9ybWVyLiBXZSBhbHNvIHBhcnNlXG4gKiBab2RFcnJvcnMgc28gdGhhdCB5b3UgZ2V0IHR5cGVzYWZldHkgb24gdGhlIGZyb250ZW5kIGlmIHlvdXIgcHJvY2VkdXJlIGZhaWxzIGR1ZSB0byB2YWxpZGF0aW9uXG4gKiBlcnJvcnMgb24gdGhlIGJhY2tlbmQuXG4gKi9cbmltcG9ydCB7IGluaXRUUlBDLCBUUlBDRXJyb3IgfSBmcm9tIFwiQHRycGMvc2VydmVyXCI7XG5pbXBvcnQgc3VwZXJqc29uIGZyb20gXCJzdXBlcmpzb25cIjtcbmltcG9ydCB7IFpvZEVycm9yIH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgc2V0VXBTdXBlcmpzb24gfSBmcm9tIFwiQC9zcmMvdXRpbHMvc3VwZXJqc29uXCI7XG5cbnNldFVwU3VwZXJqc29uKCk7XG5cbmNvbnN0IHQgPSBpbml0VFJQQy5jb250ZXh0PHR5cGVvZiBjcmVhdGVUUlBDQ29udGV4dD4oKS5jcmVhdGUoe1xuICB0cmFuc2Zvcm1lcjogc3VwZXJqc29uLFxuICBlcnJvckZvcm1hdHRlcih7IHNoYXBlLCBlcnJvciB9KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnNoYXBlLFxuICAgICAgZGF0YToge1xuICAgICAgICAuLi5zaGFwZS5kYXRhLFxuICAgICAgICB6b2RFcnJvcjpcbiAgICAgICAgICBlcnJvci5jYXVzZSBpbnN0YW5jZW9mIFpvZEVycm9yID8gZXJyb3IuY2F1c2UuZmxhdHRlbigpIDogbnVsbCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfSxcbn0pO1xuXG4vKipcbiAqIDMuIFJPVVRFUiAmIFBST0NFRFVSRSAoVEhFIElNUE9SVEFOVCBCSVQpXG4gKlxuICogVGhlc2UgYXJlIHRoZSBwaWVjZXMgeW91IHVzZSB0byBidWlsZCB5b3VyIHRSUEMgQVBJLiBZb3Ugc2hvdWxkIGltcG9ydCB0aGVzZSBhIGxvdCBpbiB0aGVcbiAqIFwiL3NyYy9zZXJ2ZXIvYXBpL3JvdXRlcnNcIiBkaXJlY3RvcnkuXG4gKi9cblxuLyoqXG4gKiBUaGlzIGlzIGhvdyB5b3UgY3JlYXRlIG5ldyByb3V0ZXJzIGFuZCBzdWItcm91dGVycyBpbiB5b3VyIHRSUEMgQVBJLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly90cnBjLmlvL2RvY3Mvcm91dGVyXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVUUlBDUm91dGVyID0gdC5yb3V0ZXI7XG5cbi8qKlxuICogUHVibGljICh1bmF1dGhlbnRpY2F0ZWQpIHByb2NlZHVyZVxuICpcbiAqIFRoaXMgaXMgdGhlIGJhc2UgcGllY2UgeW91IHVzZSB0byBidWlsZCBuZXcgcXVlcmllcyBhbmQgbXV0YXRpb25zIG9uIHlvdXIgdFJQQyBBUEkuIEl0IGRvZXMgbm90XG4gKiBndWFyYW50ZWUgdGhhdCBhIHVzZXIgcXVlcnlpbmcgaXMgYXV0aG9yaXplZCwgYnV0IHlvdSBjYW4gc3RpbGwgYWNjZXNzIHVzZXIgc2Vzc2lvbiBkYXRhIGlmIHRoZXlcbiAqIGFyZSBsb2dnZWQgaW4uXG4gKi9cbmV4cG9ydCBjb25zdCBwdWJsaWNQcm9jZWR1cmUgPSB0LnByb2NlZHVyZTtcblxuLyoqIFJldXNhYmxlIG1pZGRsZXdhcmUgdGhhdCBlbmZvcmNlcyB1c2VycyBhcmUgbG9nZ2VkIGluIGJlZm9yZSBydW5uaW5nIHRoZSBwcm9jZWR1cmUuICovXG5jb25zdCBlbmZvcmNlVXNlcklzQXV0aGVkID0gdC5taWRkbGV3YXJlKCh7IGN0eCwgbmV4dCB9KSA9PiB7XG4gIGlmICghY3R4LnNlc3Npb24gfHwgIWN0eC5zZXNzaW9uLnVzZXIpIHtcbiAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogXCJVTkFVVEhPUklaRURcIiB9KTtcbiAgfVxuICByZXR1cm4gbmV4dCh7XG4gICAgY3R4OiB7XG4gICAgICAvLyBpbmZlcnMgdGhlIGBzZXNzaW9uYCBhcyBub24tbnVsbGFibGVcbiAgICAgIHNlc3Npb246IHsgLi4uY3R4LnNlc3Npb24sIHVzZXI6IGN0eC5zZXNzaW9uLnVzZXIgfSxcbiAgICB9LFxuICB9KTtcbn0pO1xuXG4vKipcbiAqIFByb3RlY3RlZCAoYXV0aGVudGljYXRlZCkgcHJvY2VkdXJlXG4gKlxuICogSWYgeW91IHdhbnQgYSBxdWVyeSBvciBtdXRhdGlvbiB0byBPTkxZIGJlIGFjY2Vzc2libGUgdG8gbG9nZ2VkIGluIHVzZXJzLCB1c2UgdGhpcy4gSXQgdmVyaWZpZXNcbiAqIHRoZSBzZXNzaW9uIGlzIHZhbGlkIGFuZCBndWFyYW50ZWVzIGBjdHguc2Vzc2lvbi51c2VyYCBpcyBub3QgbnVsbC5cbiAqXG4gKiBAc2VlIGh0dHBzOi8vdHJwYy5pby9kb2NzL3Byb2NlZHVyZXNcbiAqL1xuZXhwb3J0IGNvbnN0IHByb3RlY3RlZFByb2NlZHVyZSA9IHQucHJvY2VkdXJlLnVzZShlbmZvcmNlVXNlcklzQXV0aGVkKTtcblxuY29uc3QgaW5wdXRQcm9qZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICBwcm9qZWN0SWQ6IHouc3RyaW5nKCksXG59KTtcblxuLyoqXG4gKiBQcm90ZWN0ZWQgKGF1dGhlbnRpY2F0ZWQpIHByb2NlZHVyZSB3aXRoIHByb2plY3Qgcm9sZVxuICovXG5cbmNvbnN0IGVuZm9yY2VVc2VySXNBdXRoZWRBbmRQcm9qZWN0TWVtYmVyID0gdC5taWRkbGV3YXJlKFxuICAoeyBjdHgsIHJhd0lucHV0LCBuZXh0IH0pID0+IHtcbiAgICBpZiAoIWN0eC5zZXNzaW9uIHx8ICFjdHguc2Vzc2lvbi51c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHsgY29kZTogXCJVTkFVVEhPUklaRURcIiB9KTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBpbnB1dFByb2plY3RTY2hlbWEuc2FmZVBhcnNlKHJhd0lucHV0KTtcbiAgICBpZiAoIXJlc3VsdC5zdWNjZXNzKVxuICAgICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIGlucHV0LCBwcm9qZWN0SWQgaXMgcmVxdWlyZWRcIixcbiAgICAgIH0pO1xuXG4gICAgLy8gY2hlY2sgdGhhdCB0aGUgdXNlciBpcyBhIG1lbWJlciBvZiB0aGlzIHByb2plY3RcbiAgICBjb25zdCBwcm9qZWN0SWQgPSByZXN1bHQuZGF0YS5wcm9qZWN0SWQ7XG4gICAgY29uc3Qgc2Vzc2lvblByb2plY3QgPSBjdHguc2Vzc2lvbi51c2VyLnByb2plY3RzLmZpbmQoXG4gICAgICAoeyBpZCB9KSA9PiBpZCA9PT0gcHJvamVjdElkLFxuICAgICk7XG5cbiAgICBpZiAoIXNlc3Npb25Qcm9qZWN0ICYmIGN0eC5zZXNzaW9uLnVzZXIuYWRtaW4gIT09IHRydWUpXG4gICAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgICAgY29kZTogXCJVTkFVVEhPUklaRURcIixcbiAgICAgICAgbWVzc2FnZTogXCJVc2VyIGlzIG5vdCBhIG1lbWJlciBvZiB0aGlzIHByb2plY3RcIixcbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgY3R4OiB7XG4gICAgICAgIC8vIGluZmVycyB0aGUgYHNlc3Npb25gIGFzIG5vbi1udWxsYWJsZVxuICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgLi4uY3R4LnNlc3Npb24sXG4gICAgICAgICAgdXNlcjogY3R4LnNlc3Npb24udXNlcixcbiAgICAgICAgICBwcm9qZWN0Um9sZTpcbiAgICAgICAgICAgIGN0eC5zZXNzaW9uLnVzZXIuYWRtaW4gPT09IHRydWUgPyBcIkFETUlOXCIgOiBzZXNzaW9uUHJvamVjdCEucm9sZSxcbiAgICAgICAgICBwcm9qZWN0SWQ6IHByb2plY3RJZCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0sXG4pO1xuXG5leHBvcnQgY29uc3QgcHJvdGVjdGVkUHJvamVjdFByb2NlZHVyZSA9IHQucHJvY2VkdXJlLnVzZShcbiAgZW5mb3JjZVVzZXJJc0F1dGhlZEFuZFByb2plY3RNZW1iZXIsXG4pO1xuXG4vKlxuICogUHJvdGVjdCB0cmFjZS1sZXZlbCBnZXR0ZXIgcm91dGVzLlxuICogLSBVc2VycyBuZWVkIHRvIGJlIG1lbWJlciBvZiB0aGUgcHJvamVjdCB0byBhY2Nlc3MgdGhlIHRyYWNlLlxuICogLSBBbHRlcm5hdGl2ZWx5LCB0aGUgdHJhY2UgbmVlZHMgdG8gYmUgcHVibGljLlxuICovXG5cbmNvbnN0IGlucHV0VHJhY2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHRyYWNlSWQ6IHouc3RyaW5nKCksXG59KTtcblxuY29uc3QgZW5mb3JjZVRyYWNlQWNjZXNzID0gdC5taWRkbGV3YXJlKGFzeW5jICh7IGN0eCwgcmF3SW5wdXQsIG5leHQgfSkgPT4ge1xuICBjb25zdCByZXN1bHQgPSBpbnB1dFRyYWNlU2NoZW1hLnNhZmVQYXJzZShyYXdJbnB1dCk7XG4gIGlmICghcmVzdWx0LnN1Y2Nlc3MpXG4gICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICBtZXNzYWdlOiBcIkludmFsaWQgaW5wdXQsIHRyYWNlSWQgaXMgcmVxdWlyZWRcIixcbiAgICB9KTtcblxuICBjb25zdCB0cmFjZUlkID0gcmVzdWx0LmRhdGEudHJhY2VJZDtcblxuICBjb25zdCB0cmFjZSA9IGF3YWl0IHByaXNtYS50cmFjZS5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZDogdHJhY2VJZCxcbiAgICB9LFxuICAgIHNlbGVjdDoge1xuICAgICAgcHVibGljOiB0cnVlLFxuICAgICAgcHJvamVjdElkOiB0cnVlLFxuICAgIH0sXG4gIH0pO1xuXG4gIGlmICghdHJhY2UpXG4gICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICBjb2RlOiBcIk5PVF9GT1VORFwiLFxuICAgICAgbWVzc2FnZTogXCJUcmFjZSBub3QgZm91bmRcIixcbiAgICB9KTtcblxuICBjb25zdCBzZXNzaW9uUHJvamVjdCA9IGN0eC5zZXNzaW9uPy51c2VyPy5wcm9qZWN0cy5maW5kKFxuICAgICh7IGlkIH0pID0+IGlkID09PSB0cmFjZS5wcm9qZWN0SWQsXG4gICk7XG5cbiAgaWYgKCF0cmFjZS5wdWJsaWMgJiYgIXNlc3Npb25Qcm9qZWN0ICYmIGN0eC5zZXNzaW9uPy51c2VyPy5hZG1pbiAhPT0gdHJ1ZSlcbiAgICB0aHJvdyBuZXcgVFJQQ0Vycm9yKHtcbiAgICAgIGNvZGU6IFwiVU5BVVRIT1JJWkVEXCIsXG4gICAgICBtZXNzYWdlOlxuICAgICAgICBcIlVzZXIgaXMgbm90IGEgbWVtYmVyIG9mIHRoaXMgcHJvamVjdCBhbmQgdGhpcyB0cmFjZSBpcyBub3QgcHVibGljXCIsXG4gICAgfSk7XG5cbiAgcmV0dXJuIG5leHQoe1xuICAgIGN0eDoge1xuICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAuLi5jdHguc2Vzc2lvbixcbiAgICAgICAgcHJvamVjdFJvbGU6XG4gICAgICAgICAgY3R4LnNlc3Npb24/LnVzZXI/LmFkbWluID09PSB0cnVlID8gXCJBRE1JTlwiIDogc2Vzc2lvblByb2plY3Q/LnJvbGUsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xufSk7XG5cbmV4cG9ydCBjb25zdCBwcm90ZWN0ZWRHZXRUcmFjZVByb2NlZHVyZSA9IHQucHJvY2VkdXJlLnVzZShlbmZvcmNlVHJhY2VBY2Nlc3MpO1xuXG4vKlxuICogUHJvdGVjdCBzZXNzaW9uLWxldmVsIGdldHRlciByb3V0ZXMuXG4gKiAtIFVzZXJzIG5lZWQgdG8gYmUgbWVtYmVyIG9mIHRoZSBwcm9qZWN0IHRvIGFjY2VzcyB0aGUgdHJhY2UuXG4gKiAtIEFsdGVybmF0aXZlbHksIHRoZSB0cmFjZSBuZWVkcyB0byBiZSBwdWJsaWMuXG4gKi9cblxuY29uc3QgaW5wdXRTZXNzaW9uU2NoZW1hID0gei5vYmplY3Qoe1xuICBzZXNzaW9uSWQ6IHouc3RyaW5nKCksXG4gIHByb2plY3RJZDogei5zdHJpbmcoKSxcbn0pO1xuXG5jb25zdCBlbmZvcmNlU2Vzc2lvbkFjY2VzcyA9IHQubWlkZGxld2FyZShhc3luYyAoeyBjdHgsIHJhd0lucHV0LCBuZXh0IH0pID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gaW5wdXRTZXNzaW9uU2NoZW1hLnNhZmVQYXJzZShyYXdJbnB1dCk7XG4gIGlmICghcmVzdWx0LnN1Y2Nlc3MpXG4gICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICBtZXNzYWdlOiBcIkludmFsaWQgaW5wdXQsIHNlc3Npb25JZCBpcyByZXF1aXJlZFwiLFxuICAgIH0pO1xuXG4gIGNvbnN0IHsgc2Vzc2lvbklkLCBwcm9qZWN0SWQgfSA9IHJlc3VsdC5kYXRhO1xuXG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBwcmlzbWEudHJhY2VTZXNzaW9uLmZpbmRGaXJzdCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiBzZXNzaW9uSWQsXG4gICAgICBwcm9qZWN0SWQsXG4gICAgfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIHB1YmxpYzogdHJ1ZSxcbiAgICB9LFxuICB9KTtcblxuICBpZiAoIXNlc3Npb24pXG4gICAgdGhyb3cgbmV3IFRSUENFcnJvcih7XG4gICAgICBjb2RlOiBcIk5PVF9GT1VORFwiLFxuICAgICAgbWVzc2FnZTogXCJTZXNzaW9uIG5vdCBmb3VuZFwiLFxuICAgIH0pO1xuXG4gIGNvbnN0IHVzZXJTZXNzaW9uUHJvamVjdCA9IGN0eC5zZXNzaW9uPy51c2VyPy5wcm9qZWN0cy5maW5kKFxuICAgICh7IGlkIH0pID0+IGlkID09PSBwcm9qZWN0SWQsXG4gICk7XG5cbiAgaWYgKFxuICAgICFzZXNzaW9uLnB1YmxpYyAmJlxuICAgICF1c2VyU2Vzc2lvblByb2plY3QgJiZcbiAgICBjdHguc2Vzc2lvbj8udXNlcj8uYWRtaW4gIT09IHRydWVcbiAgKVxuICAgIHRocm93IG5ldyBUUlBDRXJyb3Ioe1xuICAgICAgY29kZTogXCJVTkFVVEhPUklaRURcIixcbiAgICAgIG1lc3NhZ2U6XG4gICAgICAgIFwiVXNlciBpcyBub3QgYSBtZW1iZXIgb2YgdGhpcyBwcm9qZWN0IGFuZCB0aGlzIHNlc3Npb24gaXMgbm90IHB1YmxpY1wiLFxuICAgIH0pO1xuXG4gIHJldHVybiBuZXh0KHtcbiAgICBjdHg6IHtcbiAgICAgIHNlc3Npb246IHtcbiAgICAgICAgLi4uY3R4LnNlc3Npb24sXG4gICAgICAgIHByb2plY3RSb2xlOlxuICAgICAgICAgIGN0eC5zZXNzaW9uPy51c2VyPy5hZG1pbiA9PT0gdHJ1ZVxuICAgICAgICAgICAgPyBcIkFETUlOXCJcbiAgICAgICAgICAgIDogdXNlclNlc3Npb25Qcm9qZWN0Py5yb2xlLFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbn0pO1xuXG5leHBvcnQgY29uc3QgcHJvdGVjdGVkR2V0U2Vzc2lvblByb2NlZHVyZSA9XG4gIHQucHJvY2VkdXJlLnVzZShlbmZvcmNlU2Vzc2lvbkFjY2Vzcyk7XG4iXSwibmFtZXMiOlsiZ2V0U2VydmVyQXV0aFNlc3Npb24iLCJEQiIsInByaXNtYSIsIlNlbnRyeSIsInoiLCJjcmVhdGVJbm5lclRSUENDb250ZXh0Iiwib3B0cyIsInNlc3Npb24iLCJjcmVhdGVUUlBDQ29udGV4dCIsInJlcSIsInJlcyIsInNldFVzZXIiLCJpZCIsInVzZXIiLCJlbWFpbCIsInVuZGVmaW5lZCIsInVzZXJuYW1lIiwibmFtZSIsImluaXRUUlBDIiwiVFJQQ0Vycm9yIiwic3VwZXJqc29uIiwiWm9kRXJyb3IiLCJzZXRVcFN1cGVyanNvbiIsInQiLCJjb250ZXh0IiwiY3JlYXRlIiwidHJhbnNmb3JtZXIiLCJlcnJvckZvcm1hdHRlciIsInNoYXBlIiwiZXJyb3IiLCJkYXRhIiwiem9kRXJyb3IiLCJjYXVzZSIsImZsYXR0ZW4iLCJjcmVhdGVUUlBDUm91dGVyIiwicm91dGVyIiwicHVibGljUHJvY2VkdXJlIiwicHJvY2VkdXJlIiwiZW5mb3JjZVVzZXJJc0F1dGhlZCIsIm1pZGRsZXdhcmUiLCJjdHgiLCJuZXh0IiwiY29kZSIsInByb3RlY3RlZFByb2NlZHVyZSIsInVzZSIsImlucHV0UHJvamVjdFNjaGVtYSIsIm9iamVjdCIsInByb2plY3RJZCIsInN0cmluZyIsImVuZm9yY2VVc2VySXNBdXRoZWRBbmRQcm9qZWN0TWVtYmVyIiwicmF3SW5wdXQiLCJyZXN1bHQiLCJzYWZlUGFyc2UiLCJzdWNjZXNzIiwibWVzc2FnZSIsInNlc3Npb25Qcm9qZWN0IiwicHJvamVjdHMiLCJmaW5kIiwiYWRtaW4iLCJwcm9qZWN0Um9sZSIsInJvbGUiLCJwcm90ZWN0ZWRQcm9qZWN0UHJvY2VkdXJlIiwiaW5wdXRUcmFjZVNjaGVtYSIsInRyYWNlSWQiLCJlbmZvcmNlVHJhY2VBY2Nlc3MiLCJ0cmFjZSIsImZpbmRGaXJzdCIsIndoZXJlIiwic2VsZWN0IiwicHVibGljIiwicHJvdGVjdGVkR2V0VHJhY2VQcm9jZWR1cmUiLCJpbnB1dFNlc3Npb25TY2hlbWEiLCJzZXNzaW9uSWQiLCJlbmZvcmNlU2Vzc2lvbkFjY2VzcyIsInRyYWNlU2Vzc2lvbiIsInVzZXJTZXNzaW9uUHJvamVjdCIsInByb3RlY3RlZEdldFNlc3Npb25Qcm9jZWR1cmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/api/trpc.ts\n");

/***/ }),

/***/ "(api)/./src/server/auth.ts":
/*!****************************!*\
  !*** ./src/server/auth.ts ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   getServerAuthSession: () => (/* binding */ getServerAuthSession)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"@next-auth/prisma-adapter\");\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _src_server_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/server/db */ \"(api)/./src/server/db.ts\");\n/* harmony import */ var _src_features_auth_lib_emailPassword__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/src/features/auth/lib/emailPassword */ \"(api)/./src/features/auth/lib/emailPassword.ts\");\n/* harmony import */ var _src_features_feature_flags_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/src/features/feature-flags/utils */ \"(api)/./src/features/feature-flags/utils.ts\");\n/* harmony import */ var _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/src/env.mjs */ \"(api)/./src/env.mjs\");\n/* harmony import */ var _src_features_auth_lib_createProjectMembershipsOnSignup__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/src/features/auth/lib/createProjectMembershipsOnSignup */ \"(api)/./src/features/auth/lib/createProjectMembershipsOnSignup.ts\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next-auth/providers/google */ \"next-auth/providers/google\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next-auth/providers/github */ \"next-auth/providers/github\");\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_github__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next-auth/providers/azure-ad */ \"next-auth/providers/azure-ad\");\n/* harmony import */ var next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_10__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_server_db__WEBPACK_IMPORTED_MODULE_2__, _src_features_auth_lib_emailPassword__WEBPACK_IMPORTED_MODULE_3__, _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__, _src_features_auth_lib_createProjectMembershipsOnSignup__WEBPACK_IMPORTED_MODULE_6__]);\n([_src_server_db__WEBPACK_IMPORTED_MODULE_2__, _src_features_auth_lib_emailPassword__WEBPACK_IMPORTED_MODULE_3__, _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__, _src_features_auth_lib_createProjectMembershipsOnSignup__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\n\n\n\n\n// Use secure cookies on https hostnames, exception for Vercel which sets NEXTAUTH_URL without the protocol\nconst useSecureCookies = _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.NEXTAUTH_URL.startsWith(\"https://\") || process.env.VERCEL === \"1\";\nconst cookieOptions = {\n    domain: _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.NEXTAUTH_COOKIE_DOMAIN ?? undefined,\n    httpOnly: true,\n    sameSite: \"lax\",\n    path: \"/\",\n    secure: useSecureCookies\n};\nconst cookieName = (name)=>[\n        useSecureCookies ? \"__Secure-\" : \"\",\n        name,\n        _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.NEXT_PUBLIC_LANGFUSE_CLOUD_REGION ? `.${_src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.NEXT_PUBLIC_LANGFUSE_CLOUD_REGION}` : \"\"\n    ].join(\"\");\nconst providers = [\n    next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_7___default()({\n        name: \"credentials\",\n        credentials: {\n            email: {\n                label: \"Email\",\n                type: \"email\",\n                placeholder: \"jsmith@example.com\"\n            },\n            password: {\n                label: \"Password\",\n                type: \"password\"\n            }\n        },\n        async authorize (credentials, _req) {\n            if (!credentials) throw new Error(\"No credentials\");\n            if (_src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_DISABLE_USERNAME_PASSWORD === \"true\") throw new Error(\"Sign in with email and password is disabled for this instance. Please use SSO.\");\n            const blockedDomains = _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_DOMAINS_WITH_SSO_ENFORCEMENT?.split(\",\") ?? [];\n            const domain = credentials.email.split(\"@\")[1]?.toLowerCase();\n            if (domain && blockedDomains.includes(domain)) {\n                throw new Error(\"Sign in with email and password is disabled for this domain. Please use SSO.\");\n            }\n            const dbUser = await _src_server_db__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n                where: {\n                    email: credentials.email.toLowerCase()\n                }\n            });\n            if (!dbUser) throw new Error(\"Invalid credentials\");\n            if (dbUser.password === null) throw new Error(\"Invalid credentials\");\n            const isValidPassword = await (0,_src_features_auth_lib_emailPassword__WEBPACK_IMPORTED_MODULE_3__.verifyPassword)(credentials.password, dbUser.password);\n            if (!isValidPassword) throw new Error(\"Invalid credentials\");\n            const userObj = {\n                id: dbUser.id,\n                name: dbUser.name,\n                email: dbUser.email,\n                image: dbUser.image,\n                emailVerified: dbUser.emailVerified,\n                featureFlags: (0,_src_features_feature_flags_utils__WEBPACK_IMPORTED_MODULE_4__.parseFlags)(dbUser.featureFlags),\n                projects: []\n            };\n            return userObj;\n        }\n    })\n];\nif (_src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_GOOGLE_CLIENT_ID && _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_GOOGLE_CLIENT_SECRET) providers.push(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_8___default()({\n    clientId: _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_GOOGLE_CLIENT_ID,\n    clientSecret: _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_GOOGLE_CLIENT_SECRET,\n    allowDangerousEmailAccountLinking: true\n}));\nif (_src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_GITHUB_CLIENT_ID && _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_GITHUB_CLIENT_SECRET) providers.push(next_auth_providers_github__WEBPACK_IMPORTED_MODULE_9___default()({\n    clientId: _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_GITHUB_CLIENT_ID,\n    clientSecret: _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_GITHUB_CLIENT_SECRET,\n    allowDangerousEmailAccountLinking: true\n}));\nif (_src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_AZURE_AD_CLIENT_ID && _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_AZURE_AD_CLIENT_SECRET && _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_AZURE_AD_TENANT_ID) providers.push(next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_10___default()({\n    clientId: _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_AZURE_AD_CLIENT_ID,\n    clientSecret: _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_AZURE_AD_CLIENT_SECRET,\n    tenantId: _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_AZURE_AD_TENANT_ID,\n    allowDangerousEmailAccountLinking: _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.AUTH_AZURE_ALLOW_ACCOUNT_LINKING === \"true\"\n}));\n// Extend Prisma Adapter\nconst prismaAdapter = (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_1__.PrismaAdapter)(_src_server_db__WEBPACK_IMPORTED_MODULE_2__.prisma);\nconst extendedPrismaAdapter = {\n    ...prismaAdapter,\n    async createUser (profile) {\n        if (!prismaAdapter.createUser) throw new Error(\"createUser not implemented\");\n        if (_src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.NEXT_PUBLIC_SIGN_UP_DISABLED === \"true\") {\n            throw new Error(\"Sign up is disabled.\");\n        }\n        if (!profile.email) {\n            throw new Error(\"Cannot create db user as login profile does not contain an email: \" + JSON.stringify(profile));\n        }\n        const user = await prismaAdapter.createUser(profile);\n        await (0,_src_features_auth_lib_createProjectMembershipsOnSignup__WEBPACK_IMPORTED_MODULE_6__.createProjectMembershipsOnSignup)(user);\n        return user;\n    }\n};\n/**\n * Options for NextAuth.js used to configure adapters, providers, callbacks, etc.\n *\n * @see https://next-auth.js.org/configuration/options\n */ const authOptions = {\n    session: {\n        strategy: \"jwt\"\n    },\n    callbacks: {\n        async session ({ session, token }) {\n            const dbUser = await _src_server_db__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n                where: {\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    email: token.email.toLowerCase()\n                },\n                select: {\n                    id: true,\n                    name: true,\n                    email: true,\n                    image: true,\n                    featureFlags: true,\n                    admin: true,\n                    memberships: {\n                        include: {\n                            project: true\n                        }\n                    }\n                }\n            });\n            return {\n                ...session,\n                user: dbUser !== null ? {\n                    ...session.user,\n                    id: dbUser.id,\n                    name: dbUser.name,\n                    email: dbUser.email,\n                    image: dbUser.image,\n                    admin: dbUser.admin,\n                    projects: dbUser.memberships.map((membership)=>({\n                            id: membership.project.id,\n                            name: membership.project.name,\n                            role: membership.role\n                        })),\n                    featureFlags: (0,_src_features_feature_flags_utils__WEBPACK_IMPORTED_MODULE_4__.parseFlags)(dbUser.featureFlags)\n                } : null\n            };\n        }\n    },\n    adapter: extendedPrismaAdapter,\n    providers,\n    pages: {\n        signIn: \"/auth/sign-in\",\n        ..._src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.NEXT_PUBLIC_LANGFUSE_CLOUD_REGION ? {\n            newUser: \"/onboarding\"\n        } : {}\n    },\n    cookies: {\n        sessionToken: {\n            name: cookieName(\"next-auth.session-token\"),\n            options: cookieOptions\n        },\n        csrfToken: {\n            name: cookieName(\"next-auth.csrf-token\"),\n            options: cookieOptions\n        },\n        callbackUrl: {\n            name: cookieName(\"next-auth.callback-url\"),\n            options: cookieOptions\n        },\n        state: {\n            name: cookieName(\"next-auth.state\"),\n            options: cookieOptions\n        },\n        nonce: {\n            name: cookieName(\"next-auth.nonce\"),\n            options: cookieOptions\n        },\n        pkceCodeVerifier: {\n            name: cookieName(\"next-auth.pkce.code_verifier\"),\n            options: cookieOptions\n        }\n    },\n    events: {\n        createUser: async ({ user })=>{\n            if (_src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.LANGFUSE_NEW_USER_SIGNUP_WEBHOOK && _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.NEXT_PUBLIC_LANGFUSE_CLOUD_REGION && _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.NEXT_PUBLIC_LANGFUSE_CLOUD_REGION !== \"STAGING\") {\n                await fetch(_src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.LANGFUSE_NEW_USER_SIGNUP_WEBHOOK, {\n                    method: \"POST\",\n                    body: JSON.stringify({\n                        name: user.name,\n                        email: user.email,\n                        cloudRegion: _src_env_mjs__WEBPACK_IMPORTED_MODULE_5__.env.NEXT_PUBLIC_LANGFUSE_CLOUD_REGION,\n                        userId: user.id\n                    }),\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            }\n        }\n    }\n};\n/**\n * Wrapper for `getServerSession` so that you don't need to import the `authOptions` in every file.\n *\n * @see https://next-auth.js.org/configuration/nextjs\n */ const getServerAuthSession = (ctx)=>{\n    return (0,next_auth__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(ctx.req, ctx.res, authOptions);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1tQjtBQUN1QztBQUNqQjtBQUM4QjtBQUNQO0FBQzVCO0FBQ3dFO0FBSzFDO0FBQ1Y7QUFDQTtBQUNHO0FBRTNELDJHQUEyRztBQUMzRyxNQUFNVyxtQkFDSk4sNkNBQUdBLENBQUNPLFlBQVksQ0FBQ0MsVUFBVSxDQUFDLGVBQWVDLFFBQVFULEdBQUcsQ0FBQ1UsTUFBTSxLQUFLO0FBRXBFLE1BQU1DLGdCQUFnQjtJQUNwQkMsUUFBUVosNkNBQUdBLENBQUNhLHNCQUFzQixJQUFJQztJQUN0Q0MsVUFBVTtJQUNWQyxVQUFVO0lBQ1ZDLE1BQU07SUFDTkMsUUFBUVo7QUFDVjtBQUVBLE1BQU1hLGFBQWEsQ0FBQ0MsT0FDbEI7UUFDRWQsbUJBQW1CLGNBQWM7UUFDakNjO1FBQ0FwQiw2Q0FBR0EsQ0FBQ3FCLGlDQUFpQyxHQUNqQyxDQUFDLENBQUMsRUFBRXJCLDZDQUFHQSxDQUFDcUIsaUNBQWlDLENBQUMsQ0FBQyxHQUMzQztLQUNMLENBQUNDLElBQUksQ0FBQztBQUVULE1BQU1DLFlBQXdCO0lBQzVCckIsc0VBQW1CQSxDQUFDO1FBQ2xCa0IsTUFBTTtRQUNOSSxhQUFhO1lBQ1hDLE9BQU87Z0JBQ0xDLE9BQU87Z0JBQ1BDLE1BQU07Z0JBQ05DLGFBQWE7WUFDZjtZQUNBQyxVQUFVO2dCQUFFSCxPQUFPO2dCQUFZQyxNQUFNO1lBQVc7UUFDbEQ7UUFDQSxNQUFNRyxXQUFVTixXQUFXLEVBQUVPLElBQUk7WUFDL0IsSUFBSSxDQUFDUCxhQUFhLE1BQU0sSUFBSVEsTUFBTTtZQUNsQyxJQUFJaEMsNkNBQUdBLENBQUNpQyw4QkFBOEIsS0FBSyxRQUN6QyxNQUFNLElBQUlELE1BQ1I7WUFHSixNQUFNRSxpQkFDSmxDLDZDQUFHQSxDQUFDbUMsaUNBQWlDLEVBQUVDLE1BQU0sUUFBUSxFQUFFO1lBQ3pELE1BQU14QixTQUFTWSxZQUFZQyxLQUFLLENBQUNXLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFQztZQUNoRCxJQUFJekIsVUFBVXNCLGVBQWVJLFFBQVEsQ0FBQzFCLFNBQVM7Z0JBQzdDLE1BQU0sSUFBSW9CLE1BQ1I7WUFFSjtZQUVBLE1BQU1PLFNBQVMsTUFBTTFDLGtEQUFNQSxDQUFDMkMsSUFBSSxDQUFDQyxVQUFVLENBQUM7Z0JBQzFDQyxPQUFPO29CQUNMakIsT0FBT0QsWUFBWUMsS0FBSyxDQUFDWSxXQUFXO2dCQUN0QztZQUNGO1lBRUEsSUFBSSxDQUFDRSxRQUFRLE1BQU0sSUFBSVAsTUFBTTtZQUM3QixJQUFJTyxPQUFPVixRQUFRLEtBQUssTUFBTSxNQUFNLElBQUlHLE1BQU07WUFFOUMsTUFBTVcsa0JBQWtCLE1BQU03QyxvRkFBY0EsQ0FDMUMwQixZQUFZSyxRQUFRLEVBQ3BCVSxPQUFPVixRQUFRO1lBRWpCLElBQUksQ0FBQ2MsaUJBQWlCLE1BQU0sSUFBSVgsTUFBTTtZQUV0QyxNQUFNWSxVQUFnQjtnQkFDcEJDLElBQUlOLE9BQU9NLEVBQUU7Z0JBQ2J6QixNQUFNbUIsT0FBT25CLElBQUk7Z0JBQ2pCSyxPQUFPYyxPQUFPZCxLQUFLO2dCQUNuQnFCLE9BQU9QLE9BQU9PLEtBQUs7Z0JBQ25CQyxlQUFlUixPQUFPUSxhQUFhO2dCQUNuQ0MsY0FBY2pELDZFQUFVQSxDQUFDd0MsT0FBT1MsWUFBWTtnQkFDNUNDLFVBQVUsRUFBRTtZQUNkO1lBRUEsT0FBT0w7UUFDVDtJQUNGO0NBQ0Q7QUFFRCxJQUFJNUMsNkNBQUdBLENBQUNrRCxxQkFBcUIsSUFBSWxELDZDQUFHQSxDQUFDbUQseUJBQXlCLEVBQzVENUIsVUFBVTZCLElBQUksQ0FDWmpELGlFQUFjQSxDQUFDO0lBQ2JrRCxVQUFVckQsNkNBQUdBLENBQUNrRCxxQkFBcUI7SUFDbkNJLGNBQWN0RCw2Q0FBR0EsQ0FBQ21ELHlCQUF5QjtJQUMzQ0ksbUNBQW1DO0FBQ3JDO0FBR0osSUFBSXZELDZDQUFHQSxDQUFDd0QscUJBQXFCLElBQUl4RCw2Q0FBR0EsQ0FBQ3lELHlCQUF5QixFQUM1RGxDLFVBQVU2QixJQUFJLENBQ1poRCxpRUFBY0EsQ0FBQztJQUNiaUQsVUFBVXJELDZDQUFHQSxDQUFDd0QscUJBQXFCO0lBQ25DRixjQUFjdEQsNkNBQUdBLENBQUN5RCx5QkFBeUI7SUFDM0NGLG1DQUFtQztBQUNyQztBQUdKLElBQ0V2RCw2Q0FBR0EsQ0FBQzBELHVCQUF1QixJQUMzQjFELDZDQUFHQSxDQUFDMkQsMkJBQTJCLElBQy9CM0QsNkNBQUdBLENBQUM0RCx1QkFBdUIsRUFFM0JyQyxVQUFVNkIsSUFBSSxDQUNaL0Msb0VBQWVBLENBQUM7SUFDZGdELFVBQVVyRCw2Q0FBR0EsQ0FBQzBELHVCQUF1QjtJQUNyQ0osY0FBY3RELDZDQUFHQSxDQUFDMkQsMkJBQTJCO0lBQzdDRSxVQUFVN0QsNkNBQUdBLENBQUM0RCx1QkFBdUI7SUFDckNMLG1DQUNFdkQsNkNBQUdBLENBQUM4RCxnQ0FBZ0MsS0FBSztBQUM3QztBQUdKLHdCQUF3QjtBQUN4QixNQUFNQyxnQkFBZ0JuRSx3RUFBYUEsQ0FBQ0Msa0RBQU1BO0FBQzFDLE1BQU1tRSx3QkFBaUM7SUFDckMsR0FBR0QsYUFBYTtJQUNoQixNQUFNRSxZQUFXQyxPQUFPO1FBQ3RCLElBQUksQ0FBQ0gsY0FBY0UsVUFBVSxFQUMzQixNQUFNLElBQUlqQyxNQUFNO1FBQ2xCLElBQUloQyw2Q0FBR0EsQ0FBQ21FLDRCQUE0QixLQUFLLFFBQVE7WUFDL0MsTUFBTSxJQUFJbkMsTUFBTTtRQUNsQjtRQUNBLElBQUksQ0FBQ2tDLFFBQVF6QyxLQUFLLEVBQUU7WUFDbEIsTUFBTSxJQUFJTyxNQUNSLHVFQUNFb0MsS0FBS0MsU0FBUyxDQUFDSDtRQUVyQjtRQUVBLE1BQU0xQixPQUFPLE1BQU11QixjQUFjRSxVQUFVLENBQUNDO1FBRTVDLE1BQU1qRSx5SEFBZ0NBLENBQUN1QztRQUV2QyxPQUFPQTtJQUNUO0FBQ0Y7QUFFQTs7OztDQUlDLEdBQ00sTUFBTThCLGNBQStCO0lBQzFDQyxTQUFTO1FBQ1BDLFVBQVU7SUFDWjtJQUNBQyxXQUFXO1FBQ1QsTUFBTUYsU0FBUSxFQUFFQSxPQUFPLEVBQUVHLEtBQUssRUFBRTtZQUM5QixNQUFNbkMsU0FBUyxNQUFNMUMsa0RBQU1BLENBQUMyQyxJQUFJLENBQUNDLFVBQVUsQ0FBQztnQkFDMUNDLE9BQU87b0JBQ0wsb0VBQW9FO29CQUNwRWpCLE9BQU9pRCxNQUFNakQsS0FBSyxDQUFFWSxXQUFXO2dCQUNqQztnQkFDQXNDLFFBQVE7b0JBQ045QixJQUFJO29CQUNKekIsTUFBTTtvQkFDTkssT0FBTztvQkFDUHFCLE9BQU87b0JBQ1BFLGNBQWM7b0JBQ2Q0QixPQUFPO29CQUNQQyxhQUFhO3dCQUNYQyxTQUFTOzRCQUNQQyxTQUFTO3dCQUNYO29CQUNGO2dCQUNGO1lBQ0Y7WUFFQSxPQUFPO2dCQUNMLEdBQUdSLE9BQU87Z0JBQ1YvQixNQUNFRCxXQUFXLE9BQ1A7b0JBQ0UsR0FBR2dDLFFBQVEvQixJQUFJO29CQUNmSyxJQUFJTixPQUFPTSxFQUFFO29CQUNiekIsTUFBTW1CLE9BQU9uQixJQUFJO29CQUNqQkssT0FBT2MsT0FBT2QsS0FBSztvQkFDbkJxQixPQUFPUCxPQUFPTyxLQUFLO29CQUNuQjhCLE9BQU9yQyxPQUFPcUMsS0FBSztvQkFDbkIzQixVQUFVVixPQUFPc0MsV0FBVyxDQUFDRyxHQUFHLENBQUMsQ0FBQ0MsYUFBZ0I7NEJBQ2hEcEMsSUFBSW9DLFdBQVdGLE9BQU8sQ0FBQ2xDLEVBQUU7NEJBQ3pCekIsTUFBTTZELFdBQVdGLE9BQU8sQ0FBQzNELElBQUk7NEJBQzdCOEQsTUFBTUQsV0FBV0MsSUFBSTt3QkFDdkI7b0JBQ0FsQyxjQUFjakQsNkVBQVVBLENBQUN3QyxPQUFPUyxZQUFZO2dCQUM5QyxJQUNBO1lBQ1I7UUFDRjtJQUNGO0lBQ0FtQyxTQUFTbkI7SUFDVHpDO0lBQ0E2RCxPQUFPO1FBQ0xDLFFBQVE7UUFDUixHQUFJckYsNkNBQUdBLENBQUNxQixpQ0FBaUMsR0FDckM7WUFDRWlFLFNBQVM7UUFDWCxJQUNBLENBQUMsQ0FBQztJQUNSO0lBQ0FDLFNBQVM7UUFDUEMsY0FBYztZQUNacEUsTUFBTUQsV0FBVztZQUNqQnNFLFNBQVM5RTtRQUNYO1FBQ0ErRSxXQUFXO1lBQ1R0RSxNQUFNRCxXQUFXO1lBQ2pCc0UsU0FBUzlFO1FBQ1g7UUFDQWdGLGFBQWE7WUFDWHZFLE1BQU1ELFdBQVc7WUFDakJzRSxTQUFTOUU7UUFDWDtRQUNBaUYsT0FBTztZQUNMeEUsTUFBTUQsV0FBVztZQUNqQnNFLFNBQVM5RTtRQUNYO1FBQ0FrRixPQUFPO1lBQ0x6RSxNQUFNRCxXQUFXO1lBQ2pCc0UsU0FBUzlFO1FBQ1g7UUFDQW1GLGtCQUFrQjtZQUNoQjFFLE1BQU1ELFdBQVc7WUFDakJzRSxTQUFTOUU7UUFDWDtJQUNGO0lBQ0FvRixRQUFRO1FBQ045QixZQUFZLE9BQU8sRUFBRXpCLElBQUksRUFBRTtZQUN6QixJQUNFeEMsNkNBQUdBLENBQUNnRyxnQ0FBZ0MsSUFDcENoRyw2Q0FBR0EsQ0FBQ3FCLGlDQUFpQyxJQUNyQ3JCLDZDQUFHQSxDQUFDcUIsaUNBQWlDLEtBQUssV0FDMUM7Z0JBQ0EsTUFBTTRFLE1BQU1qRyw2Q0FBR0EsQ0FBQ2dHLGdDQUFnQyxFQUFFO29CQUNoREUsUUFBUTtvQkFDUkMsTUFBTS9CLEtBQUtDLFNBQVMsQ0FBQzt3QkFDbkJqRCxNQUFNb0IsS0FBS3BCLElBQUk7d0JBQ2ZLLE9BQU9lLEtBQUtmLEtBQUs7d0JBQ2pCMkUsYUFBYXBHLDZDQUFHQSxDQUFDcUIsaUNBQWlDO3dCQUNsRGdGLFFBQVE3RCxLQUFLSyxFQUFFO29CQUVqQjtvQkFDQXlELFNBQVM7d0JBQ1AsZ0JBQWdCO29CQUNsQjtnQkFDRjtZQUNGO1FBQ0Y7SUFDRjtBQUNGLEVBQUU7QUFFRjs7OztDQUlDLEdBQ00sTUFBTUMsdUJBQXVCLENBQUNDO0lBSW5DLE9BQU83RywyREFBZ0JBLENBQUM2RyxJQUFJQyxHQUFHLEVBQUVELElBQUlFLEdBQUcsRUFBRXBDO0FBQzVDLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvc2VydmVyL2F1dGgudHM/MjJiYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHQgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IHtcbiAgZ2V0U2VydmVyU2Vzc2lvbixcbiAgdHlwZSBVc2VyLFxuICB0eXBlIE5leHRBdXRoT3B0aW9ucyxcbiAgdHlwZSBTZXNzaW9uLFxufSBmcm9tIFwibmV4dC1hdXRoXCI7XG5pbXBvcnQgeyBQcmlzbWFBZGFwdGVyIH0gZnJvbSBcIkBuZXh0LWF1dGgvcHJpc21hLWFkYXB0ZXJcIjtcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gXCJAL3NyYy9zZXJ2ZXIvZGJcIjtcbmltcG9ydCB7IHZlcmlmeVBhc3N3b3JkIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL2F1dGgvbGliL2VtYWlsUGFzc3dvcmRcIjtcbmltcG9ydCB7IHBhcnNlRmxhZ3MgfSBmcm9tIFwiQC9zcmMvZmVhdHVyZXMvZmVhdHVyZS1mbGFncy91dGlsc1wiO1xuaW1wb3J0IHsgZW52IH0gZnJvbSBcIkAvc3JjL2Vudi5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZVByb2plY3RNZW1iZXJzaGlwc09uU2lnbnVwIH0gZnJvbSBcIkAvc3JjL2ZlYXR1cmVzL2F1dGgvbGliL2NyZWF0ZVByb2plY3RNZW1iZXJzaGlwc09uU2lnbnVwXCI7XG5pbXBvcnQgeyB0eXBlIEFkYXB0ZXIgfSBmcm9tIFwibmV4dC1hdXRoL2FkYXB0ZXJzXCI7XG5cbi8vIFByb3ZpZGVyc1xuaW1wb3J0IHsgdHlwZSBQcm92aWRlciB9IGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzXCI7XG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiO1xuaW1wb3J0IEdvb2dsZVByb3ZpZGVyIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2dvb2dsZVwiO1xuaW1wb3J0IEdpdEh1YlByb3ZpZGVyIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2dpdGh1YlwiO1xuaW1wb3J0IEF6dXJlQURQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9henVyZS1hZFwiO1xuXG4vLyBVc2Ugc2VjdXJlIGNvb2tpZXMgb24gaHR0cHMgaG9zdG5hbWVzLCBleGNlcHRpb24gZm9yIFZlcmNlbCB3aGljaCBzZXRzIE5FWFRBVVRIX1VSTCB3aXRob3V0IHRoZSBwcm90b2NvbFxuY29uc3QgdXNlU2VjdXJlQ29va2llcyA9XG4gIGVudi5ORVhUQVVUSF9VUkwuc3RhcnRzV2l0aChcImh0dHBzOi8vXCIpIHx8IHByb2Nlc3MuZW52LlZFUkNFTCA9PT0gXCIxXCI7XG5cbmNvbnN0IGNvb2tpZU9wdGlvbnMgPSB7XG4gIGRvbWFpbjogZW52Lk5FWFRBVVRIX0NPT0tJRV9ET01BSU4gPz8gdW5kZWZpbmVkLFxuICBodHRwT25seTogdHJ1ZSxcbiAgc2FtZVNpdGU6IFwibGF4XCIsXG4gIHBhdGg6IFwiL1wiLFxuICBzZWN1cmU6IHVzZVNlY3VyZUNvb2tpZXMsXG59O1xuXG5jb25zdCBjb29raWVOYW1lID0gKG5hbWU6IHN0cmluZykgPT5cbiAgW1xuICAgIHVzZVNlY3VyZUNvb2tpZXMgPyBcIl9fU2VjdXJlLVwiIDogXCJcIixcbiAgICBuYW1lLFxuICAgIGVudi5ORVhUX1BVQkxJQ19MQU5HRlVTRV9DTE9VRF9SRUdJT05cbiAgICAgID8gYC4ke2Vudi5ORVhUX1BVQkxJQ19MQU5HRlVTRV9DTE9VRF9SRUdJT059YFxuICAgICAgOiBcIlwiLFxuICBdLmpvaW4oXCJcIik7XG5cbmNvbnN0IHByb3ZpZGVyczogUHJvdmlkZXJbXSA9IFtcbiAgQ3JlZGVudGlhbHNQcm92aWRlcih7XG4gICAgbmFtZTogXCJjcmVkZW50aWFsc1wiLFxuICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICBlbWFpbDoge1xuICAgICAgICBsYWJlbDogXCJFbWFpbFwiLFxuICAgICAgICB0eXBlOiBcImVtYWlsXCIsXG4gICAgICAgIHBsYWNlaG9sZGVyOiBcImpzbWl0aEBleGFtcGxlLmNvbVwiLFxuICAgICAgfSxcbiAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiB9LFxuICAgIH0sXG4gICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzLCBfcmVxKSB7XG4gICAgICBpZiAoIWNyZWRlbnRpYWxzKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBjcmVkZW50aWFsc1wiKTtcbiAgICAgIGlmIChlbnYuQVVUSF9ESVNBQkxFX1VTRVJOQU1FX1BBU1NXT1JEID09PSBcInRydWVcIilcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiU2lnbiBpbiB3aXRoIGVtYWlsIGFuZCBwYXNzd29yZCBpcyBkaXNhYmxlZCBmb3IgdGhpcyBpbnN0YW5jZS4gUGxlYXNlIHVzZSBTU08uXCIsXG4gICAgICAgICk7XG5cbiAgICAgIGNvbnN0IGJsb2NrZWREb21haW5zID1cbiAgICAgICAgZW52LkFVVEhfRE9NQUlOU19XSVRIX1NTT19FTkZPUkNFTUVOVD8uc3BsaXQoXCIsXCIpID8/IFtdO1xuICAgICAgY29uc3QgZG9tYWluID0gY3JlZGVudGlhbHMuZW1haWwuc3BsaXQoXCJAXCIpWzFdPy50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGRvbWFpbiAmJiBibG9ja2VkRG9tYWlucy5pbmNsdWRlcyhkb21haW4pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIlNpZ24gaW4gd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmQgaXMgZGlzYWJsZWQgZm9yIHRoaXMgZG9tYWluLiBQbGVhc2UgdXNlIFNTTy5cIixcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGJVc2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFkYlVzZXIpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY3JlZGVudGlhbHNcIik7XG4gICAgICBpZiAoZGJVc2VyLnBhc3N3b3JkID09PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNyZWRlbnRpYWxzXCIpO1xuXG4gICAgICBjb25zdCBpc1ZhbGlkUGFzc3dvcmQgPSBhd2FpdCB2ZXJpZnlQYXNzd29yZChcbiAgICAgICAgY3JlZGVudGlhbHMucGFzc3dvcmQsXG4gICAgICAgIGRiVXNlci5wYXNzd29yZCxcbiAgICAgICk7XG4gICAgICBpZiAoIWlzVmFsaWRQYXNzd29yZCkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjcmVkZW50aWFsc1wiKTtcblxuICAgICAgY29uc3QgdXNlck9iajogVXNlciA9IHtcbiAgICAgICAgaWQ6IGRiVXNlci5pZCxcbiAgICAgICAgbmFtZTogZGJVc2VyLm5hbWUsXG4gICAgICAgIGVtYWlsOiBkYlVzZXIuZW1haWwsXG4gICAgICAgIGltYWdlOiBkYlVzZXIuaW1hZ2UsXG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6IGRiVXNlci5lbWFpbFZlcmlmaWVkLFxuICAgICAgICBmZWF0dXJlRmxhZ3M6IHBhcnNlRmxhZ3MoZGJVc2VyLmZlYXR1cmVGbGFncyksXG4gICAgICAgIHByb2plY3RzOiBbXSxcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiB1c2VyT2JqO1xuICAgIH0sXG4gIH0pLFxuXTtcblxuaWYgKGVudi5BVVRIX0dPT0dMRV9DTElFTlRfSUQgJiYgZW52LkFVVEhfR09PR0xFX0NMSUVOVF9TRUNSRVQpXG4gIHByb3ZpZGVycy5wdXNoKFxuICAgIEdvb2dsZVByb3ZpZGVyKHtcbiAgICAgIGNsaWVudElkOiBlbnYuQVVUSF9HT09HTEVfQ0xJRU5UX0lELFxuICAgICAgY2xpZW50U2VjcmV0OiBlbnYuQVVUSF9HT09HTEVfQ0xJRU5UX1NFQ1JFVCxcbiAgICAgIGFsbG93RGFuZ2Vyb3VzRW1haWxBY2NvdW50TGlua2luZzogdHJ1ZSxcbiAgICB9KSxcbiAgKTtcblxuaWYgKGVudi5BVVRIX0dJVEhVQl9DTElFTlRfSUQgJiYgZW52LkFVVEhfR0lUSFVCX0NMSUVOVF9TRUNSRVQpXG4gIHByb3ZpZGVycy5wdXNoKFxuICAgIEdpdEh1YlByb3ZpZGVyKHtcbiAgICAgIGNsaWVudElkOiBlbnYuQVVUSF9HSVRIVUJfQ0xJRU5UX0lELFxuICAgICAgY2xpZW50U2VjcmV0OiBlbnYuQVVUSF9HSVRIVUJfQ0xJRU5UX1NFQ1JFVCxcbiAgICAgIGFsbG93RGFuZ2Vyb3VzRW1haWxBY2NvdW50TGlua2luZzogdHJ1ZSxcbiAgICB9KSxcbiAgKTtcblxuaWYgKFxuICBlbnYuQVVUSF9BWlVSRV9BRF9DTElFTlRfSUQgJiZcbiAgZW52LkFVVEhfQVpVUkVfQURfQ0xJRU5UX1NFQ1JFVCAmJlxuICBlbnYuQVVUSF9BWlVSRV9BRF9URU5BTlRfSURcbilcbiAgcHJvdmlkZXJzLnB1c2goXG4gICAgQXp1cmVBRFByb3ZpZGVyKHtcbiAgICAgIGNsaWVudElkOiBlbnYuQVVUSF9BWlVSRV9BRF9DTElFTlRfSUQsXG4gICAgICBjbGllbnRTZWNyZXQ6IGVudi5BVVRIX0FaVVJFX0FEX0NMSUVOVF9TRUNSRVQsXG4gICAgICB0ZW5hbnRJZDogZW52LkFVVEhfQVpVUkVfQURfVEVOQU5UX0lELFxuICAgICAgYWxsb3dEYW5nZXJvdXNFbWFpbEFjY291bnRMaW5raW5nOlxuICAgICAgICBlbnYuQVVUSF9BWlVSRV9BTExPV19BQ0NPVU5UX0xJTktJTkcgPT09IFwidHJ1ZVwiLFxuICAgIH0pLFxuICApO1xuXG4vLyBFeHRlbmQgUHJpc21hIEFkYXB0ZXJcbmNvbnN0IHByaXNtYUFkYXB0ZXIgPSBQcmlzbWFBZGFwdGVyKHByaXNtYSk7XG5jb25zdCBleHRlbmRlZFByaXNtYUFkYXB0ZXI6IEFkYXB0ZXIgPSB7XG4gIC4uLnByaXNtYUFkYXB0ZXIsXG4gIGFzeW5jIGNyZWF0ZVVzZXIocHJvZmlsZSkge1xuICAgIGlmICghcHJpc21hQWRhcHRlci5jcmVhdGVVc2VyKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY3JlYXRlVXNlciBub3QgaW1wbGVtZW50ZWRcIik7XG4gICAgaWYgKGVudi5ORVhUX1BVQkxJQ19TSUdOX1VQX0RJU0FCTEVEID09PSBcInRydWVcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2lnbiB1cCBpcyBkaXNhYmxlZC5cIik7XG4gICAgfVxuICAgIGlmICghcHJvZmlsZS5lbWFpbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkNhbm5vdCBjcmVhdGUgZGIgdXNlciBhcyBsb2dpbiBwcm9maWxlIGRvZXMgbm90IGNvbnRhaW4gYW4gZW1haWw6IFwiICtcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcm9maWxlKSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYUFkYXB0ZXIuY3JlYXRlVXNlcihwcm9maWxlKTtcblxuICAgIGF3YWl0IGNyZWF0ZVByb2plY3RNZW1iZXJzaGlwc09uU2lnbnVwKHVzZXIpO1xuXG4gICAgcmV0dXJuIHVzZXI7XG4gIH0sXG59O1xuXG4vKipcbiAqIE9wdGlvbnMgZm9yIE5leHRBdXRoLmpzIHVzZWQgdG8gY29uZmlndXJlIGFkYXB0ZXJzLCBwcm92aWRlcnMsIGNhbGxiYWNrcywgZXRjLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly9uZXh0LWF1dGguanMub3JnL2NvbmZpZ3VyYXRpb24vb3B0aW9uc1xuICovXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnM6IE5leHRBdXRoT3B0aW9ucyA9IHtcbiAgc2Vzc2lvbjoge1xuICAgIHN0cmF0ZWd5OiBcImp3dFwiLFxuICB9LFxuICBjYWxsYmFja3M6IHtcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4gfSk6IFByb21pc2U8U2Vzc2lvbj4ge1xuICAgICAgY29uc3QgZGJVc2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICBlbWFpbDogdG9rZW4uZW1haWwhLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgICAgaW1hZ2U6IHRydWUsXG4gICAgICAgICAgZmVhdHVyZUZsYWdzOiB0cnVlLFxuICAgICAgICAgIGFkbWluOiB0cnVlLFxuICAgICAgICAgIG1lbWJlcnNoaXBzOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHByb2plY3Q6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc2Vzc2lvbixcbiAgICAgICAgdXNlcjpcbiAgICAgICAgICBkYlVzZXIgIT09IG51bGxcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIC4uLnNlc3Npb24udXNlcixcbiAgICAgICAgICAgICAgICBpZDogZGJVc2VyLmlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IGRiVXNlci5uYW1lLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBkYlVzZXIuZW1haWwsXG4gICAgICAgICAgICAgICAgaW1hZ2U6IGRiVXNlci5pbWFnZSxcbiAgICAgICAgICAgICAgICBhZG1pbjogZGJVc2VyLmFkbWluLFxuICAgICAgICAgICAgICAgIHByb2plY3RzOiBkYlVzZXIubWVtYmVyc2hpcHMubWFwKChtZW1iZXJzaGlwKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgaWQ6IG1lbWJlcnNoaXAucHJvamVjdC5pZCxcbiAgICAgICAgICAgICAgICAgIG5hbWU6IG1lbWJlcnNoaXAucHJvamVjdC5uYW1lLFxuICAgICAgICAgICAgICAgICAgcm9sZTogbWVtYmVyc2hpcC5yb2xlLFxuICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICBmZWF0dXJlRmxhZ3M6IHBhcnNlRmxhZ3MoZGJVc2VyLmZlYXR1cmVGbGFncyksXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogbnVsbCxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcbiAgYWRhcHRlcjogZXh0ZW5kZWRQcmlzbWFBZGFwdGVyLFxuICBwcm92aWRlcnMsXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiBcIi9hdXRoL3NpZ24taW5cIixcbiAgICAuLi4oZW52Lk5FWFRfUFVCTElDX0xBTkdGVVNFX0NMT1VEX1JFR0lPTlxuICAgICAgPyB7XG4gICAgICAgICAgbmV3VXNlcjogXCIvb25ib2FyZGluZ1wiLFxuICAgICAgICB9XG4gICAgICA6IHt9KSxcbiAgfSxcbiAgY29va2llczoge1xuICAgIHNlc3Npb25Ub2tlbjoge1xuICAgICAgbmFtZTogY29va2llTmFtZShcIm5leHQtYXV0aC5zZXNzaW9uLXRva2VuXCIpLFxuICAgICAgb3B0aW9uczogY29va2llT3B0aW9ucyxcbiAgICB9LFxuICAgIGNzcmZUb2tlbjoge1xuICAgICAgbmFtZTogY29va2llTmFtZShcIm5leHQtYXV0aC5jc3JmLXRva2VuXCIpLFxuICAgICAgb3B0aW9uczogY29va2llT3B0aW9ucyxcbiAgICB9LFxuICAgIGNhbGxiYWNrVXJsOiB7XG4gICAgICBuYW1lOiBjb29raWVOYW1lKFwibmV4dC1hdXRoLmNhbGxiYWNrLXVybFwiKSxcbiAgICAgIG9wdGlvbnM6IGNvb2tpZU9wdGlvbnMsXG4gICAgfSxcbiAgICBzdGF0ZToge1xuICAgICAgbmFtZTogY29va2llTmFtZShcIm5leHQtYXV0aC5zdGF0ZVwiKSxcbiAgICAgIG9wdGlvbnM6IGNvb2tpZU9wdGlvbnMsXG4gICAgfSxcbiAgICBub25jZToge1xuICAgICAgbmFtZTogY29va2llTmFtZShcIm5leHQtYXV0aC5ub25jZVwiKSxcbiAgICAgIG9wdGlvbnM6IGNvb2tpZU9wdGlvbnMsXG4gICAgfSxcbiAgICBwa2NlQ29kZVZlcmlmaWVyOiB7XG4gICAgICBuYW1lOiBjb29raWVOYW1lKFwibmV4dC1hdXRoLnBrY2UuY29kZV92ZXJpZmllclwiKSxcbiAgICAgIG9wdGlvbnM6IGNvb2tpZU9wdGlvbnMsXG4gICAgfSxcbiAgfSxcbiAgZXZlbnRzOiB7XG4gICAgY3JlYXRlVXNlcjogYXN5bmMgKHsgdXNlciB9KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGVudi5MQU5HRlVTRV9ORVdfVVNFUl9TSUdOVVBfV0VCSE9PSyAmJlxuICAgICAgICBlbnYuTkVYVF9QVUJMSUNfTEFOR0ZVU0VfQ0xPVURfUkVHSU9OICYmXG4gICAgICAgIGVudi5ORVhUX1BVQkxJQ19MQU5HRlVTRV9DTE9VRF9SRUdJT04gIT09IFwiU1RBR0lOR1wiXG4gICAgICApIHtcbiAgICAgICAgYXdhaXQgZmV0Y2goZW52LkxBTkdGVVNFX05FV19VU0VSX1NJR05VUF9XRUJIT09LLCB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgIGNsb3VkUmVnaW9uOiBlbnYuTkVYVF9QVUJMSUNfTEFOR0ZVU0VfQ0xPVURfUkVHSU9OLFxuICAgICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICAgICAgLy8gcmVmZXJyYWxTb3VyY2U6IC4uLlxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gIH0sXG59O1xuXG4vKipcbiAqIFdyYXBwZXIgZm9yIGBnZXRTZXJ2ZXJTZXNzaW9uYCBzbyB0aGF0IHlvdSBkb24ndCBuZWVkIHRvIGltcG9ydCB0aGUgYGF1dGhPcHRpb25zYCBpbiBldmVyeSBmaWxlLlxuICpcbiAqIEBzZWUgaHR0cHM6Ly9uZXh0LWF1dGguanMub3JnL2NvbmZpZ3VyYXRpb24vbmV4dGpzXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRTZXJ2ZXJBdXRoU2Vzc2lvbiA9IChjdHg6IHtcbiAgcmVxOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVxXCJdO1xuICByZXM6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXNcIl07XG59KSA9PiB7XG4gIHJldHVybiBnZXRTZXJ2ZXJTZXNzaW9uKGN0eC5yZXEsIGN0eC5yZXMsIGF1dGhPcHRpb25zKTtcbn07XG4iXSwibmFtZXMiOlsiZ2V0U2VydmVyU2Vzc2lvbiIsIlByaXNtYUFkYXB0ZXIiLCJwcmlzbWEiLCJ2ZXJpZnlQYXNzd29yZCIsInBhcnNlRmxhZ3MiLCJlbnYiLCJjcmVhdGVQcm9qZWN0TWVtYmVyc2hpcHNPblNpZ251cCIsIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJHb29nbGVQcm92aWRlciIsIkdpdEh1YlByb3ZpZGVyIiwiQXp1cmVBRFByb3ZpZGVyIiwidXNlU2VjdXJlQ29va2llcyIsIk5FWFRBVVRIX1VSTCIsInN0YXJ0c1dpdGgiLCJwcm9jZXNzIiwiVkVSQ0VMIiwiY29va2llT3B0aW9ucyIsImRvbWFpbiIsIk5FWFRBVVRIX0NPT0tJRV9ET01BSU4iLCJ1bmRlZmluZWQiLCJodHRwT25seSIsInNhbWVTaXRlIiwicGF0aCIsInNlY3VyZSIsImNvb2tpZU5hbWUiLCJuYW1lIiwiTkVYVF9QVUJMSUNfTEFOR0ZVU0VfQ0xPVURfUkVHSU9OIiwiam9pbiIsInByb3ZpZGVycyIsImNyZWRlbnRpYWxzIiwiZW1haWwiLCJsYWJlbCIsInR5cGUiLCJwbGFjZWhvbGRlciIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwiX3JlcSIsIkVycm9yIiwiQVVUSF9ESVNBQkxFX1VTRVJOQU1FX1BBU1NXT1JEIiwiYmxvY2tlZERvbWFpbnMiLCJBVVRIX0RPTUFJTlNfV0lUSF9TU09fRU5GT1JDRU1FTlQiLCJzcGxpdCIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJkYlVzZXIiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaXNWYWxpZFBhc3N3b3JkIiwidXNlck9iaiIsImlkIiwiaW1hZ2UiLCJlbWFpbFZlcmlmaWVkIiwiZmVhdHVyZUZsYWdzIiwicHJvamVjdHMiLCJBVVRIX0dPT0dMRV9DTElFTlRfSUQiLCJBVVRIX0dPT0dMRV9DTElFTlRfU0VDUkVUIiwicHVzaCIsImNsaWVudElkIiwiY2xpZW50U2VjcmV0IiwiYWxsb3dEYW5nZXJvdXNFbWFpbEFjY291bnRMaW5raW5nIiwiQVVUSF9HSVRIVUJfQ0xJRU5UX0lEIiwiQVVUSF9HSVRIVUJfQ0xJRU5UX1NFQ1JFVCIsIkFVVEhfQVpVUkVfQURfQ0xJRU5UX0lEIiwiQVVUSF9BWlVSRV9BRF9DTElFTlRfU0VDUkVUIiwiQVVUSF9BWlVSRV9BRF9URU5BTlRfSUQiLCJ0ZW5hbnRJZCIsIkFVVEhfQVpVUkVfQUxMT1dfQUNDT1VOVF9MSU5LSU5HIiwicHJpc21hQWRhcHRlciIsImV4dGVuZGVkUHJpc21hQWRhcHRlciIsImNyZWF0ZVVzZXIiLCJwcm9maWxlIiwiTkVYVF9QVUJMSUNfU0lHTl9VUF9ESVNBQkxFRCIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdXRoT3B0aW9ucyIsInNlc3Npb24iLCJzdHJhdGVneSIsImNhbGxiYWNrcyIsInRva2VuIiwic2VsZWN0IiwiYWRtaW4iLCJtZW1iZXJzaGlwcyIsImluY2x1ZGUiLCJwcm9qZWN0IiwibWFwIiwibWVtYmVyc2hpcCIsInJvbGUiLCJhZGFwdGVyIiwicGFnZXMiLCJzaWduSW4iLCJuZXdVc2VyIiwiY29va2llcyIsInNlc3Npb25Ub2tlbiIsIm9wdGlvbnMiLCJjc3JmVG9rZW4iLCJjYWxsYmFja1VybCIsInN0YXRlIiwibm9uY2UiLCJwa2NlQ29kZVZlcmlmaWVyIiwiZXZlbnRzIiwiTEFOR0ZVU0VfTkVXX1VTRVJfU0lHTlVQX1dFQkhPT0siLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJjbG91ZFJlZ2lvbiIsInVzZXJJZCIsImhlYWRlcnMiLCJnZXRTZXJ2ZXJBdXRoU2Vzc2lvbiIsImN0eCIsInJlcSIsInJlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/server/auth.ts\n");

/***/ }),

/***/ "(api)/./src/server/db.ts":
/*!**************************!*\
  !*** ./src/server/db.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DB: () => (/* binding */ DB),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"kysely\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _src_env_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/src/env.mjs */ \"(api)/./src/env.mjs\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([kysely__WEBPACK_IMPORTED_MODULE_0__, _src_env_mjs__WEBPACK_IMPORTED_MODULE_2__]);\n([kysely__WEBPACK_IMPORTED_MODULE_0__, _src_env_mjs__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n// Instantiated according to the Prisma documentation\n// https://www.prisma.io/docs/orm/more/help-and-troubleshooting/help-articles/nextjs-prisma-client-dev-practices\nconst prismaClientSingleton = ()=>{\n    return new _prisma_client__WEBPACK_IMPORTED_MODULE_1__.PrismaClient({\n        log: _src_env_mjs__WEBPACK_IMPORTED_MODULE_2__.env.NODE_ENV === \"development\" ? [\n            \"query\",\n            \"error\",\n            \"warn\"\n        ] : [\n            \"error\",\n            \"warn\"\n        ]\n    });\n};\nconst prisma = globalThis.prisma ?? prismaClientSingleton();\nif (true) globalThis.prisma = prisma;\nconst DB = new kysely__WEBPACK_IMPORTED_MODULE_0__.Kysely({\n    dialect: {\n        createAdapter: ()=>new kysely__WEBPACK_IMPORTED_MODULE_0__.PostgresAdapter(),\n        createDriver: ()=>new kysely__WEBPACK_IMPORTED_MODULE_0__.DummyDriver(),\n        createIntrospector: (db)=>new kysely__WEBPACK_IMPORTED_MODULE_0__.PostgresIntrospector(db),\n        createQueryCompiler: ()=>new kysely__WEBPACK_IMPORTED_MODULE_0__.PostgresQueryCompiler()\n    }\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvc2VydmVyL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQU1nQjtBQUc4QjtBQUNWO0FBRXBDLHFEQUFxRDtBQUNyRCxnSEFBZ0g7QUFFaEgsTUFBTU8sd0JBQXdCO0lBQzVCLE9BQU8sSUFBSUYsd0RBQVlBLENBQUM7UUFDdEJHLEtBQ0VGLDZDQUFHQSxDQUFDRyxRQUFRLEtBQUssZ0JBQ2I7WUFBQztZQUFTO1lBQVM7U0FBTyxHQUMxQjtZQUFDO1lBQVM7U0FBTztJQUN6QjtBQUNGO0FBT08sTUFBTUMsU0FBU0MsV0FBV0QsTUFBTSxJQUFJSCx3QkFBd0I7QUFFbkUsSUFBSUssSUFBcUMsRUFBRUQsV0FBV0QsTUFBTSxHQUFHQTtBQUN4RCxNQUFNRyxLQUFLLElBQUlaLDBDQUFNQSxDQUFXO0lBQ3JDYSxTQUFTO1FBQ1BDLGVBQWUsSUFBTSxJQUFJYixtREFBZUE7UUFDeENjLGNBQWMsSUFBTSxJQUFJaEIsK0NBQVdBO1FBQ25DaUIsb0JBQW9CLENBQUNDLEtBQU8sSUFBSWYsd0RBQW9CQSxDQUFDZTtRQUNyREMscUJBQXFCLElBQU0sSUFBSWYseURBQXFCQTtJQUN0RDtBQUNGLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvc2VydmVyL2RiLnRzP2FhNmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRHVtbXlEcml2ZXIsXG4gIEt5c2VseSxcbiAgUG9zdGdyZXNBZGFwdGVyLFxuICBQb3N0Z3Jlc0ludHJvc3BlY3RvcixcbiAgUG9zdGdyZXNRdWVyeUNvbXBpbGVyLFxufSBmcm9tIFwia3lzZWx5XCI7XG5pbXBvcnQgeyB0eXBlIERCIGFzIERhdGFiYXNlIH0gZnJvbSBcIkAvcHJpc21hL2dlbmVyYXRlZC90eXBlc1wiO1xuXG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcbmltcG9ydCB7IGVudiB9IGZyb20gXCJAL3NyYy9lbnYubWpzXCI7XG5cbi8vIEluc3RhbnRpYXRlZCBhY2NvcmRpbmcgdG8gdGhlIFByaXNtYSBkb2N1bWVudGF0aW9uXG4vLyBodHRwczovL3d3dy5wcmlzbWEuaW8vZG9jcy9vcm0vbW9yZS9oZWxwLWFuZC10cm91Ymxlc2hvb3RpbmcvaGVscC1hcnRpY2xlcy9uZXh0anMtcHJpc21hLWNsaWVudC1kZXYtcHJhY3RpY2VzXG5cbmNvbnN0IHByaXNtYUNsaWVudFNpbmdsZXRvbiA9ICgpID0+IHtcbiAgcmV0dXJuIG5ldyBQcmlzbWFDbGllbnQoe1xuICAgIGxvZzpcbiAgICAgIGVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiXG4gICAgICAgID8gW1wicXVlcnlcIiwgXCJlcnJvclwiLCBcIndhcm5cIl1cbiAgICAgICAgOiBbXCJlcnJvclwiLCBcIndhcm5cIl0sXG4gIH0pO1xufTtcblxuZGVjbGFyZSBnbG9iYWwge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdmFyXG4gIHZhciBwcmlzbWE6IHVuZGVmaW5lZCB8IFJldHVyblR5cGU8dHlwZW9mIHByaXNtYUNsaWVudFNpbmdsZXRvbj47XG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxUaGlzLnByaXNtYSA/PyBwcmlzbWFDbGllbnRTaW5nbGV0b24oKTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikgZ2xvYmFsVGhpcy5wcmlzbWEgPSBwcmlzbWE7XG5leHBvcnQgY29uc3QgREIgPSBuZXcgS3lzZWx5PERhdGFiYXNlPih7XG4gIGRpYWxlY3Q6IHtcbiAgICBjcmVhdGVBZGFwdGVyOiAoKSA9PiBuZXcgUG9zdGdyZXNBZGFwdGVyKCksXG4gICAgY3JlYXRlRHJpdmVyOiAoKSA9PiBuZXcgRHVtbXlEcml2ZXIoKSxcbiAgICBjcmVhdGVJbnRyb3NwZWN0b3I6IChkYikgPT4gbmV3IFBvc3RncmVzSW50cm9zcGVjdG9yKGRiKSxcbiAgICBjcmVhdGVRdWVyeUNvbXBpbGVyOiAoKSA9PiBuZXcgUG9zdGdyZXNRdWVyeUNvbXBpbGVyKCksXG4gIH0sXG59KTtcbiJdLCJuYW1lcyI6WyJEdW1teURyaXZlciIsIkt5c2VseSIsIlBvc3RncmVzQWRhcHRlciIsIlBvc3RncmVzSW50cm9zcGVjdG9yIiwiUG9zdGdyZXNRdWVyeUNvbXBpbGVyIiwiUHJpc21hQ2xpZW50IiwiZW52IiwicHJpc21hQ2xpZW50U2luZ2xldG9uIiwibG9nIiwiTk9ERV9FTlYiLCJwcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJvY2VzcyIsIkRCIiwiZGlhbGVjdCIsImNyZWF0ZUFkYXB0ZXIiLCJjcmVhdGVEcml2ZXIiLCJjcmVhdGVJbnRyb3NwZWN0b3IiLCJkYiIsImNyZWF0ZVF1ZXJ5Q29tcGlsZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/server/db.ts\n");

/***/ }),

/***/ "(api)/./src/utils/dates.ts":
/*!****************************!*\
  !*** ./src/utils/dates.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatIntervalSeconds: () => (/* binding */ formatIntervalSeconds),\n/* harmony export */   intervalInSeconds: () => (/* binding */ intervalInSeconds),\n/* harmony export */   setBeginningOfDay: () => (/* binding */ setBeginningOfDay),\n/* harmony export */   setEndOfDay: () => (/* binding */ setEndOfDay),\n/* harmony export */   utcDateOffsetByDays: () => (/* binding */ utcDateOffsetByDays)\n/* harmony export */ });\nconst utcDateOffsetByDays = (days)=>{\n    const date = new Date();\n    date.setUTCHours(0, 0, 0, 0);\n    date.setUTCDate(date.getUTCDate() + days);\n    return date;\n};\nconst setBeginningOfDay = (date)=>{\n    date.setHours(0, 0, 0, 0);\n    return date;\n};\nconst setEndOfDay = (date)=>{\n    date.setHours(23, 59, 59, 999);\n    return date;\n};\nconst intervalInSeconds = (start, end)=>end ? (end.getTime() - start.getTime()) / 1000 : 0;\nconst formatIntervalSeconds = (seconds, scale = 2)=>{\n    const hrs = Math.floor(seconds / 3600);\n    const mins = Math.floor(seconds % 3600 / 60);\n    const secs = Math.floor(seconds % 60);\n    const pad = (num)=>`00${num}`.slice(2);\n    if (hrs > 0) return `${hrs}h ${pad(mins)}m ${pad(secs)}s`;\n    if (mins > 0) return `${mins}m ${pad(secs)}s`;\n    return `${seconds.toFixed(scale)}s`;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvdXRpbHMvZGF0ZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBTyxNQUFNQSxzQkFBc0IsQ0FBQ0M7SUFDbEMsTUFBTUMsT0FBTyxJQUFJQztJQUNqQkQsS0FBS0UsV0FBVyxDQUFDLEdBQUcsR0FBRyxHQUFHO0lBQzFCRixLQUFLRyxVQUFVLENBQUNILEtBQUtJLFVBQVUsS0FBS0w7SUFDcEMsT0FBT0M7QUFDVCxFQUFFO0FBRUssTUFBTUssb0JBQW9CLENBQUNMO0lBQ2hDQSxLQUFLTSxRQUFRLENBQUMsR0FBRyxHQUFHLEdBQUc7SUFDdkIsT0FBT047QUFDVCxFQUFFO0FBRUssTUFBTU8sY0FBYyxDQUFDUDtJQUMxQkEsS0FBS00sUUFBUSxDQUFDLElBQUksSUFBSSxJQUFJO0lBQzFCLE9BQU9OO0FBQ1QsRUFBRTtBQUVLLE1BQU1RLG9CQUFvQixDQUFDQyxPQUFhQyxNQUM3Q0EsTUFBTSxDQUFDQSxJQUFJQyxPQUFPLEtBQUtGLE1BQU1FLE9BQU8sRUFBQyxJQUFLLE9BQU8sRUFBRTtBQUU5QyxNQUFNQyx3QkFBd0IsQ0FBQ0MsU0FBaUJDLFFBQWdCLENBQUM7SUFDdEUsTUFBTUMsTUFBTUMsS0FBS0MsS0FBSyxDQUFDSixVQUFVO0lBQ2pDLE1BQU1LLE9BQU9GLEtBQUtDLEtBQUssQ0FBQyxVQUFXLE9BQVE7SUFDM0MsTUFBTUUsT0FBT0gsS0FBS0MsS0FBSyxDQUFDSixVQUFVO0lBQ2xDLE1BQU1PLE1BQU0sQ0FBQ0MsTUFBZ0IsQ0FBQyxFQUFFLEVBQUVBLElBQUksQ0FBQyxDQUFDQyxLQUFLLENBQUM7SUFFOUMsSUFBSVAsTUFBTSxHQUFHLE9BQU8sQ0FBQyxFQUFFQSxJQUFJLEVBQUUsRUFBRUssSUFBSUYsTUFBTSxFQUFFLEVBQUVFLElBQUlELE1BQU0sQ0FBQyxDQUFDO0lBQ3pELElBQUlELE9BQU8sR0FBRyxPQUFPLENBQUMsRUFBRUEsS0FBSyxFQUFFLEVBQUVFLElBQUlELE1BQU0sQ0FBQyxDQUFDO0lBQzdDLE9BQU8sQ0FBQyxFQUFFTixRQUFRVSxPQUFPLENBQUNULE9BQU8sQ0FBQyxDQUFDO0FBQ3JDLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWIvLi9zcmMvdXRpbHMvZGF0ZXMudHM/ZTA2MCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgdXRjRGF0ZU9mZnNldEJ5RGF5cyA9IChkYXlzOiBudW1iZXIpID0+IHtcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gIGRhdGUuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7XG4gIGRhdGUuc2V0VVRDRGF0ZShkYXRlLmdldFVUQ0RhdGUoKSArIGRheXMpO1xuICByZXR1cm4gZGF0ZTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRCZWdpbm5pbmdPZkRheSA9IChkYXRlOiBEYXRlKSA9PiB7XG4gIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBkYXRlO1xufTtcblxuZXhwb3J0IGNvbnN0IHNldEVuZE9mRGF5ID0gKGRhdGU6IERhdGUpID0+IHtcbiAgZGF0ZS5zZXRIb3VycygyMywgNTksIDU5LCA5OTkpO1xuICByZXR1cm4gZGF0ZTtcbn07XG5cbmV4cG9ydCBjb25zdCBpbnRlcnZhbEluU2Vjb25kcyA9IChzdGFydDogRGF0ZSwgZW5kOiBEYXRlIHwgbnVsbCkgPT5cbiAgZW5kID8gKGVuZC5nZXRUaW1lKCkgLSBzdGFydC5nZXRUaW1lKCkpIC8gMTAwMCA6IDA7XG5cbmV4cG9ydCBjb25zdCBmb3JtYXRJbnRlcnZhbFNlY29uZHMgPSAoc2Vjb25kczogbnVtYmVyLCBzY2FsZTogbnVtYmVyID0gMikgPT4ge1xuICBjb25zdCBocnMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyAzNjAwKTtcbiAgY29uc3QgbWlucyA9IE1hdGguZmxvb3IoKHNlY29uZHMgJSAzNjAwKSAvIDYwKTtcbiAgY29uc3Qgc2VjcyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAlIDYwKTtcbiAgY29uc3QgcGFkID0gKG51bTogbnVtYmVyKSA9PiBgMDAke251bX1gLnNsaWNlKDIpO1xuXG4gIGlmIChocnMgPiAwKSByZXR1cm4gYCR7aHJzfWggJHtwYWQobWlucyl9bSAke3BhZChzZWNzKX1zYDtcbiAgaWYgKG1pbnMgPiAwKSByZXR1cm4gYCR7bWluc31tICR7cGFkKHNlY3MpfXNgO1xuICByZXR1cm4gYCR7c2Vjb25kcy50b0ZpeGVkKHNjYWxlKX1zYDtcbn07XG4iXSwibmFtZXMiOlsidXRjRGF0ZU9mZnNldEJ5RGF5cyIsImRheXMiLCJkYXRlIiwiRGF0ZSIsInNldFVUQ0hvdXJzIiwic2V0VVRDRGF0ZSIsImdldFVUQ0RhdGUiLCJzZXRCZWdpbm5pbmdPZkRheSIsInNldEhvdXJzIiwic2V0RW5kT2ZEYXkiLCJpbnRlcnZhbEluU2Vjb25kcyIsInN0YXJ0IiwiZW5kIiwiZ2V0VGltZSIsImZvcm1hdEludGVydmFsU2Vjb25kcyIsInNlY29uZHMiLCJzY2FsZSIsImhycyIsIk1hdGgiLCJmbG9vciIsIm1pbnMiLCJzZWNzIiwicGFkIiwibnVtIiwic2xpY2UiLCJ0b0ZpeGVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/utils/dates.ts\n");

/***/ }),

/***/ "(api)/./src/utils/instrumentation.ts":
/*!**************************************!*\
  !*** ./src/utils/instrumentation.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   instrument: () => (/* binding */ instrument),\n/* harmony export */   instrumentAsync: () => (/* binding */ instrumentAsync)\n/* harmony export */ });\n/* harmony import */ var _sentry_nextjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sentry/nextjs */ \"@sentry/nextjs\");\n/* harmony import */ var _sentry_nextjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_sentry_nextjs__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction instrument(ctx, callback) {\n    if (process.env.NEXT_PUBLIC_SENTRY_DSN) {\n        return _sentry_nextjs__WEBPACK_IMPORTED_MODULE_0__.startSpan(ctx, callback);\n    } else {\n        return callback();\n    }\n}\nasync function instrumentAsync(ctx, callback) {\n    if (process.env.NEXT_PUBLIC_SENTRY_DSN) {\n        return _sentry_nextjs__WEBPACK_IMPORTED_MODULE_0__.startSpan(ctx, async (span)=>{\n            return callback(span);\n        });\n    } else {\n        return callback();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvdXRpbHMvaW5zdHJ1bWVudGF0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDeUM7QUFJbEMsU0FBU0MsV0FDZEMsR0FBcUIsRUFDckJDLFFBQXVCO0lBRXZCLElBQUlDLFFBQVFDLEdBQUcsQ0FBQ0Msc0JBQXNCLEVBQUU7UUFDdEMsT0FBT04scURBQWdCLENBQUNFLEtBQUtDO0lBQy9CLE9BQU87UUFDTCxPQUFPQTtJQUNUO0FBQ0Y7QUFJTyxlQUFlSyxnQkFDcEJOLEdBQXFCLEVBQ3JCQyxRQUE0QjtJQUU1QixJQUFJQyxRQUFRQyxHQUFHLENBQUNDLHNCQUFzQixFQUFFO1FBQ3RDLE9BQU9OLHFEQUFnQixDQUFDRSxLQUFLLE9BQU9PO1lBQ2xDLE9BQU9OLFNBQVNNO1FBQ2xCO0lBQ0YsT0FBTztRQUNMLE9BQU9OO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy91dGlscy9pbnN0cnVtZW50YXRpb24udHM/YTM2MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0eXBlIFNwYW4gfSBmcm9tIFwiQHNlbnRyeS9uZXh0anMvdHlwZXMvc2VydmVyXCI7XG5pbXBvcnQgKiBhcyBTZW50cnkgZnJvbSBcIkBzZW50cnkvbmV4dGpzXCI7XG5cbnR5cGUgQ2FsbGJhY2tGbjxUPiA9IChzcGFuPzogU3BhbikgPT4gVDtcblxuZXhwb3J0IGZ1bmN0aW9uIGluc3RydW1lbnQ8VD4oXG4gIGN0eDogeyBuYW1lOiBzdHJpbmcgfSxcbiAgY2FsbGJhY2s6IENhbGxiYWNrRm48VD4sXG4pOiBUIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NFTlRSWV9EU04pIHtcbiAgICByZXR1cm4gU2VudHJ5LnN0YXJ0U3BhbihjdHgsIGNhbGxiYWNrKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY2FsbGJhY2soKTtcbiAgfVxufVxuXG50eXBlIENhbGxiYWNrQXN5bmNGbjxUPiA9IChzcGFuPzogU3BhbikgPT4gUHJvbWlzZTxUPjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluc3RydW1lbnRBc3luYzxUPihcbiAgY3R4OiB7IG5hbWU6IHN0cmluZyB9LFxuICBjYWxsYmFjazogQ2FsbGJhY2tBc3luY0ZuPFQ+LFxuKTogUHJvbWlzZTxUPiB7XG4gIGlmIChwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TRU5UUllfRFNOKSB7XG4gICAgcmV0dXJuIFNlbnRyeS5zdGFydFNwYW4oY3R4LCBhc3luYyAoc3BhbikgPT4ge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKHNwYW4pO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjYWxsYmFjaygpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiU2VudHJ5IiwiaW5zdHJ1bWVudCIsImN0eCIsImNhbGxiYWNrIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NFTlRSWV9EU04iLCJzdGFydFNwYW4iLCJpbnN0cnVtZW50QXN5bmMiLCJzcGFuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/utils/instrumentation.ts\n");

/***/ }),

/***/ "(api)/./src/utils/superjson.ts":
/*!********************************!*\
  !*** ./src/utils/superjson.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setUpSuperjson: () => (/* binding */ setUpSuperjson)\n/* harmony export */ });\n/* harmony import */ var decimal_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! decimal.js */ \"decimal.js\");\n/* harmony import */ var superjson__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! superjson */ \"superjson\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([decimal_js__WEBPACK_IMPORTED_MODULE_0__, superjson__WEBPACK_IMPORTED_MODULE_1__]);\n([decimal_js__WEBPACK_IMPORTED_MODULE_0__, superjson__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst setUpSuperjson = ()=>{\n    superjson__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerCustom({\n        isApplicable: (v)=>decimal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isDecimal(v),\n        serialize: (v)=>v.toJSON(),\n        deserialize: (v)=>new decimal_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](v)\n    }, \"decimal.js\");\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvdXRpbHMvc3VwZXJqc29uLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpQztBQUNDO0FBRTNCLE1BQU1FLGlCQUFpQjtJQUM1QkQsZ0VBQXdCLENBQ3RCO1FBQ0VHLGNBQWMsQ0FBQ0MsSUFBb0JMLDREQUFpQixDQUFDSztRQUNyREUsV0FBVyxDQUFDRixJQUFNQSxFQUFFRyxNQUFNO1FBQzFCQyxhQUFhLENBQUNKLElBQU0sSUFBSUwsa0RBQU9BLENBQUNLO0lBQ2xDLEdBQ0E7QUFFSixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViLy4vc3JjL3V0aWxzL3N1cGVyanNvbi50cz83ZDlkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEZWNpbWFsIGZyb20gXCJkZWNpbWFsLmpzXCI7XG5pbXBvcnQgc3VwZXJqc29uIGZyb20gXCJzdXBlcmpzb25cIjtcblxuZXhwb3J0IGNvbnN0IHNldFVwU3VwZXJqc29uID0gKCkgPT4ge1xuICBzdXBlcmpzb24ucmVnaXN0ZXJDdXN0b208RGVjaW1hbCwgc3RyaW5nPihcbiAgICB7XG4gICAgICBpc0FwcGxpY2FibGU6ICh2KTogdiBpcyBEZWNpbWFsID0+IERlY2ltYWwuaXNEZWNpbWFsKHYpLFxuICAgICAgc2VyaWFsaXplOiAodikgPT4gdi50b0pTT04oKSxcbiAgICAgIGRlc2VyaWFsaXplOiAodikgPT4gbmV3IERlY2ltYWwodiksXG4gICAgfSxcbiAgICBcImRlY2ltYWwuanNcIixcbiAgKTtcbn07XG4iXSwibmFtZXMiOlsiRGVjaW1hbCIsInN1cGVyanNvbiIsInNldFVwU3VwZXJqc29uIiwicmVnaXN0ZXJDdXN0b20iLCJpc0FwcGxpY2FibGUiLCJ2IiwiaXNEZWNpbWFsIiwic2VyaWFsaXplIiwidG9KU09OIiwiZGVzZXJpYWxpemUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/utils/superjson.ts\n");

/***/ }),

/***/ "(api)/./src/utils/zod.ts":
/*!**************************!*\
  !*** ./src/utils/zod.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NonEmptyString: () => (/* binding */ NonEmptyString),\n/* harmony export */   jsonSchema: () => (/* binding */ jsonSchema),\n/* harmony export */   noHtmlCheck: () => (/* binding */ noHtmlCheck),\n/* harmony export */   noHtmlRegex: () => (/* binding */ noHtmlRegex),\n/* harmony export */   paginationZod: () => (/* binding */ paginationZod)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__]);\nzod__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// to be used for Prisma JSON type\n// @see: https://github.com/colinhacks/zod#json-type\n// For root-level literals where null is not allowed\nconst rootLiteralSchema = zod__WEBPACK_IMPORTED_MODULE_0__.union([\n    zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    zod__WEBPACK_IMPORTED_MODULE_0__.boolean()\n]);\n// For nested literals where null is allowed\nconst nestedLiteralSchema = zod__WEBPACK_IMPORTED_MODULE_0__.union([\n    zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n    zod__WEBPACK_IMPORTED_MODULE_0__.boolean(),\n    zod__WEBPACK_IMPORTED_MODULE_0__[\"null\"]()\n]);\n// Here, you define the schema recursively\nconst jsonSchemaNullable = zod__WEBPACK_IMPORTED_MODULE_0__.lazy(()=>zod__WEBPACK_IMPORTED_MODULE_0__.union([\n        nestedLiteralSchema,\n        zod__WEBPACK_IMPORTED_MODULE_0__.array(jsonSchemaNullable),\n        zod__WEBPACK_IMPORTED_MODULE_0__.record(jsonSchemaNullable)\n    ]));\n// Root schema that does not allow nulls at the root level\nconst jsonSchema = zod__WEBPACK_IMPORTED_MODULE_0__.lazy(()=>zod__WEBPACK_IMPORTED_MODULE_0__.union([\n        rootLiteralSchema,\n        zod__WEBPACK_IMPORTED_MODULE_0__.array(jsonSchemaNullable),\n        zod__WEBPACK_IMPORTED_MODULE_0__.record(jsonSchemaNullable)\n    ]));\nconst paginationZod = {\n    page: zod__WEBPACK_IMPORTED_MODULE_0__.preprocess((x)=>x === \"\" ? undefined : x, zod__WEBPACK_IMPORTED_MODULE_0__.coerce.number().default(1)),\n    limit: zod__WEBPACK_IMPORTED_MODULE_0__.preprocess((x)=>x === \"\" ? undefined : x, zod__WEBPACK_IMPORTED_MODULE_0__.coerce.number().lte(100).default(50))\n};\nconst noHtmlRegex = /<[^>]*>/;\nconst noHtmlCheck = (value)=>!noHtmlRegex.test(value);\nconst NonEmptyString = zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvdXRpbHMvem9kLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUF5QjtBQUV6QixrQ0FBa0M7QUFDbEMsb0RBQW9EO0FBRXBELG9EQUFvRDtBQUNwRCxNQUFNQyxvQkFBb0JELHNDQUFPLENBQUM7SUFBQ0EsdUNBQVE7SUFBSUEsdUNBQVE7SUFBSUEsd0NBQVM7Q0FBRztBQUV2RSw0Q0FBNEM7QUFDNUMsTUFBTU0sc0JBQXNCTixzQ0FBTyxDQUFDO0lBQ2xDQSx1Q0FBUTtJQUNSQSx1Q0FBUTtJQUNSQSx3Q0FBUztJQUNUQSx3Q0FBTTtDQUNQO0FBUUQsMENBQTBDO0FBQzFDLE1BQU1RLHFCQUE0Q1IscUNBQU0sQ0FBQyxJQUN2REEsc0NBQU8sQ0FBQztRQUNOTTtRQUNBTixzQ0FBTyxDQUFDUTtRQUNSUix1Q0FBUSxDQUFDUTtLQUNWO0FBR0gsMERBQTBEO0FBQ25ELE1BQU1JLGFBQThCWixxQ0FBTSxDQUFDLElBQ2hEQSxzQ0FBTyxDQUFDO1FBQ05DO1FBQ0FELHNDQUFPLENBQUNRO1FBQ1JSLHVDQUFRLENBQUNRO0tBQ1YsR0FDRDtBQUVLLE1BQU1LLGdCQUFnQjtJQUMzQkMsTUFBTWQsMkNBQVksQ0FDaEIsQ0FBQ2dCLElBQU9BLE1BQU0sS0FBS0MsWUFBWUQsR0FDL0JoQix1Q0FBUSxDQUFDSSxNQUFNLEdBQUdlLE9BQU8sQ0FBQztJQUU1QkMsT0FBT3BCLDJDQUFZLENBQ2pCLENBQUNnQixJQUFPQSxNQUFNLEtBQUtDLFlBQVlELEdBQy9CaEIsdUNBQVEsQ0FBQ0ksTUFBTSxHQUFHaUIsR0FBRyxDQUFDLEtBQUtGLE9BQU8sQ0FBQztBQUV2QyxFQUFFO0FBRUssTUFBTUcsY0FBYyxVQUFVO0FBQzlCLE1BQU1DLGNBQWMsQ0FBQ0MsUUFBa0IsQ0FBQ0YsWUFBWUcsSUFBSSxDQUFDRCxPQUFPO0FBRWhFLE1BQU1FLGlCQUFpQjFCLHVDQUFRLEdBQUcyQixHQUFHLENBQUMsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy91dGlscy96b2QudHM/ZjE4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcblxuLy8gdG8gYmUgdXNlZCBmb3IgUHJpc21hIEpTT04gdHlwZVxuLy8gQHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2NvbGluaGFja3Mvem9kI2pzb24tdHlwZVxuXG4vLyBGb3Igcm9vdC1sZXZlbCBsaXRlcmFscyB3aGVyZSBudWxsIGlzIG5vdCBhbGxvd2VkXG5jb25zdCByb290TGl0ZXJhbFNjaGVtYSA9IHoudW5pb24oW3ouc3RyaW5nKCksIHoubnVtYmVyKCksIHouYm9vbGVhbigpXSk7XG5cbi8vIEZvciBuZXN0ZWQgbGl0ZXJhbHMgd2hlcmUgbnVsbCBpcyBhbGxvd2VkXG5jb25zdCBuZXN0ZWRMaXRlcmFsU2NoZW1hID0gei51bmlvbihbXG4gIHouc3RyaW5nKCksXG4gIHoubnVtYmVyKCksXG4gIHouYm9vbGVhbigpLFxuICB6Lm51bGwoKSxcbl0pO1xuXG50eXBlIFJvb3QgPSB6LmluZmVyPHR5cGVvZiByb290TGl0ZXJhbFNjaGVtYT47XG50eXBlIExpdGVyYWwgPSB6LmluZmVyPHR5cGVvZiBuZXN0ZWRMaXRlcmFsU2NoZW1hPjtcblxudHlwZSBKc29uTmVzdGVkID0gTGl0ZXJhbCB8IHsgW2tleTogc3RyaW5nXTogSnNvbk5lc3RlZCB9IHwgSnNvbk5lc3RlZFtdO1xudHlwZSBKc29uID0gUm9vdCB8IHsgW2tleTogc3RyaW5nXTogSnNvbk5lc3RlZCB9IHwgSnNvbk5lc3RlZFtdO1xuXG4vLyBIZXJlLCB5b3UgZGVmaW5lIHRoZSBzY2hlbWEgcmVjdXJzaXZlbHlcbmNvbnN0IGpzb25TY2hlbWFOdWxsYWJsZTogei5ab2RUeXBlPEpzb25OZXN0ZWQ+ID0gei5sYXp5KCgpID0+XG4gIHoudW5pb24oW1xuICAgIG5lc3RlZExpdGVyYWxTY2hlbWEsXG4gICAgei5hcnJheShqc29uU2NoZW1hTnVsbGFibGUpLFxuICAgIHoucmVjb3JkKGpzb25TY2hlbWFOdWxsYWJsZSksXG4gIF0pLFxuKTtcblxuLy8gUm9vdCBzY2hlbWEgdGhhdCBkb2VzIG5vdCBhbGxvdyBudWxscyBhdCB0aGUgcm9vdCBsZXZlbFxuZXhwb3J0IGNvbnN0IGpzb25TY2hlbWE6IHouWm9kVHlwZTxKc29uPiA9IHoubGF6eSgoKSA9PlxuICB6LnVuaW9uKFtcbiAgICByb290TGl0ZXJhbFNjaGVtYSxcbiAgICB6LmFycmF5KGpzb25TY2hlbWFOdWxsYWJsZSksXG4gICAgei5yZWNvcmQoanNvblNjaGVtYU51bGxhYmxlKSxcbiAgXSksXG4pO1xuXG5leHBvcnQgY29uc3QgcGFnaW5hdGlvblpvZCA9IHtcbiAgcGFnZTogei5wcmVwcm9jZXNzKFxuICAgICh4KSA9PiAoeCA9PT0gXCJcIiA/IHVuZGVmaW5lZCA6IHgpLFxuICAgIHouY29lcmNlLm51bWJlcigpLmRlZmF1bHQoMSksXG4gICksXG4gIGxpbWl0OiB6LnByZXByb2Nlc3MoXG4gICAgKHgpID0+ICh4ID09PSBcIlwiID8gdW5kZWZpbmVkIDogeCksXG4gICAgei5jb2VyY2UubnVtYmVyKCkubHRlKDEwMCkuZGVmYXVsdCg1MCksXG4gICksXG59O1xuXG5leHBvcnQgY29uc3Qgbm9IdG1sUmVnZXggPSAvPFtePl0qPi87XG5leHBvcnQgY29uc3Qgbm9IdG1sQ2hlY2sgPSAodmFsdWU6IHN0cmluZykgPT4gIW5vSHRtbFJlZ2V4LnRlc3QodmFsdWUpO1xuXG5leHBvcnQgY29uc3QgTm9uRW1wdHlTdHJpbmcgPSB6LnN0cmluZygpLm1pbigxKTtcbiJdLCJuYW1lcyI6WyJ6Iiwicm9vdExpdGVyYWxTY2hlbWEiLCJ1bmlvbiIsInN0cmluZyIsIm51bWJlciIsImJvb2xlYW4iLCJuZXN0ZWRMaXRlcmFsU2NoZW1hIiwibnVsbCIsImpzb25TY2hlbWFOdWxsYWJsZSIsImxhenkiLCJhcnJheSIsInJlY29yZCIsImpzb25TY2hlbWEiLCJwYWdpbmF0aW9uWm9kIiwicGFnZSIsInByZXByb2Nlc3MiLCJ4IiwidW5kZWZpbmVkIiwiY29lcmNlIiwiZGVmYXVsdCIsImxpbWl0IiwibHRlIiwibm9IdG1sUmVnZXgiLCJub0h0bWxDaGVjayIsInZhbHVlIiwidGVzdCIsIk5vbkVtcHR5U3RyaW5nIiwibWluIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/utils/zod.ts\n");

/***/ }),

/***/ "(api)/./src/env.mjs":
/*!*********************!*\
  !*** ./src/env.mjs ***!
  \*********************/
/***/ ((__webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   env: () => (/* binding */ env)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var _t3_oss_env_nextjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @t3-oss/env-nextjs */ \"@t3-oss/env-nextjs\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_0__, _t3_oss_env_nextjs__WEBPACK_IMPORTED_MODULE_1__]);\n([zod__WEBPACK_IMPORTED_MODULE_0__, _t3_oss_env_nextjs__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst env = (0,_t3_oss_env_nextjs__WEBPACK_IMPORTED_MODULE_1__.createEnv)({\n    /**\n   * Specify your server-side environment variables schema here. This way you can ensure the app\n   * isn't built with invalid env vars.\n   */ server: {\n        DATABASE_URL: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().url(),\n        NODE_ENV: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n            \"development\",\n            \"test\",\n            \"production\"\n        ]),\n        NEXTAUTH_SECRET:  false ? 0 : zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1).optional(),\n        SEED_SECRET_KEY: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1).optional(),\n        NEXTAUTH_URL: zod__WEBPACK_IMPORTED_MODULE_0__.z.preprocess(// This makes Vercel deployments not fail if you don't set NEXTAUTH_URL\n        // Since NextAuth.js automatically uses the VERCEL_URL if present.\n        (str)=>process.env.VERCEL_URL && process.env.VERCEL_URL !== \"\" ? process.env.VERCEL_URL : str, // VERCEL_URL doesn't include `https` so it can't be validated as a URL\n        process.env.VERCEL ? zod__WEBPACK_IMPORTED_MODULE_0__.z.string().min(1) : zod__WEBPACK_IMPORTED_MODULE_0__.z.string().url()),\n        NEXTAUTH_COOKIE_DOMAIN: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        LANGFUSE_TEAM_SLACK_WEBHOOK: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().url().optional(),\n        LANGFUSE_TEAM_BETTERSTACK_TOKEN: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        LANGFUSE_NEW_USER_SIGNUP_WEBHOOK: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().url().optional(),\n        // Add `.min(1) on ID and SECRET if you want to make sure they're not empty\n        LANGFUSE_ENABLE_EXPERIMENTAL_FEATURES: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n            \"true\",\n            \"false\"\n        ]).optional(),\n        SALT: zod__WEBPACK_IMPORTED_MODULE_0__.z.string({\n            required_error: \"A strong Salt is required to encrypt API keys securely. See: https://langfuse.com/docs/deployment/self-host#deploy-the-container\"\n        }),\n        // Add newly signed up users to default project with role\n        LANGFUSE_DEFAULT_PROJECT_ID: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        LANGFUSE_DEFAULT_PROJECT_ROLE: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n            \"ADMIN\",\n            \"MEMBER\",\n            \"VIEWER\"\n        ]).optional(),\n        // AUTH\n        AUTH_GOOGLE_CLIENT_ID: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        AUTH_GOOGLE_CLIENT_SECRET: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        AUTH_GITHUB_CLIENT_ID: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        AUTH_GITHUB_CLIENT_SECRET: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        AUTH_AZURE_AD_CLIENT_ID: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        AUTH_AZURE_AD_CLIENT_SECRET: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        AUTH_AZURE_AD_TENANT_ID: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        AUTH_AZURE_ALLOW_ACCOUNT_LINKING: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n            \"true\",\n            \"false\"\n        ]).optional(),\n        AUTH_DOMAINS_WITH_SSO_ENFORCEMENT: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        AUTH_DISABLE_USERNAME_PASSWORD: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n            \"true\",\n            \"false\"\n        ]).optional(),\n        // EMAIL\n        EMAIL_FROM_ADDRESS: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        SMTP_CONNECTION_URL: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        // S3\n        S3_ENDPOINT: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        S3_ACCESS_KEY_ID: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        S3_SECRET_ACCESS_KEY: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        S3_BUCKET_NAME: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        S3_REGION: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        // Database exports\n        DB_EXPORT_PAGE_SIZE: zod__WEBPACK_IMPORTED_MODULE_0__.z.number().optional()\n    },\n    /**\n   * Specify your client-side environment variables schema here. This way you can ensure the app\n   * isn't built with invalid env vars. To expose them to the client, prefix them with\n   * `NEXT_PUBLIC_`.\n   */ client: {\n        // NEXT_PUBLIC_CLIENTVAR: z.string().min(1),\n        NEXT_PUBLIC_LANGFUSE_CLOUD_REGION: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n            \"US\",\n            \"EU\",\n            \"STAGING\"\n        ]).optional(),\n        NEXT_PUBLIC_DEMO_PROJECT_ID: zod__WEBPACK_IMPORTED_MODULE_0__.z.string().optional(),\n        NEXT_PUBLIC_SIGN_UP_DISABLED: zod__WEBPACK_IMPORTED_MODULE_0__.z.enum([\n            \"true\",\n            \"false\"\n        ]).optional()\n    },\n    /**\n   * You can't destruct `process.env` as a regular object in the Next.js edge runtimes (e.g.\n   * middlewares) or client-side so we need to destruct manually.\n   */ runtimeEnv: {\n        SEED_SECRET_KEY: process.env.SEED_SECRET_KEY,\n        NEXT_PUBLIC_DEMO_PROJECT_ID: process.env.NEXT_PUBLIC_DEMO_PROJECT_ID,\n        DATABASE_URL: process.env.DATABASE_URL,\n        NODE_ENV: \"development\",\n        NEXTAUTH_SECRET: process.env.NEXTAUTH_SECRET,\n        NEXTAUTH_COOKIE_DOMAIN: process.env.NEXTAUTH_COOKIE_DOMAIN,\n        NEXTAUTH_URL: process.env.NEXTAUTH_URL,\n        NEXT_PUBLIC_LANGFUSE_CLOUD_REGION: process.env.NEXT_PUBLIC_LANGFUSE_CLOUD_REGION,\n        NEXT_PUBLIC_SIGN_UP_DISABLED: process.env.NEXT_PUBLIC_SIGN_UP_DISABLED,\n        LANGFUSE_ENABLE_EXPERIMENTAL_FEATURES: process.env.LANGFUSE_ENABLE_EXPERIMENTAL_FEATURES,\n        LANGFUSE_TEAM_SLACK_WEBHOOK: process.env.LANGFUSE_TEAM_SLACK_WEBHOOK,\n        LANGFUSE_TEAM_BETTERSTACK_TOKEN: process.env.LANGFUSE_TEAM_BETTERSTACK_TOKEN,\n        LANGFUSE_NEW_USER_SIGNUP_WEBHOOK: process.env.LANGFUSE_NEW_USER_SIGNUP_WEBHOOK,\n        SALT: process.env.SALT,\n        // Default project and role\n        LANGFUSE_DEFAULT_PROJECT_ID: process.env.LANGFUSE_DEFAULT_PROJECT_ID,\n        LANGFUSE_DEFAULT_PROJECT_ROLE: process.env.LANGFUSE_DEFAULT_PROJECT_ROLE,\n        // AUTH\n        AUTH_GOOGLE_CLIENT_ID: process.env.AUTH_GOOGLE_CLIENT_ID,\n        AUTH_GOOGLE_CLIENT_SECRET: process.env.AUTH_GOOGLE_CLIENT_SECRET,\n        AUTH_GITHUB_CLIENT_ID: process.env.AUTH_GITHUB_CLIENT_ID,\n        AUTH_GITHUB_CLIENT_SECRET: process.env.AUTH_GITHUB_CLIENT_SECRET,\n        AUTH_AZURE_AD_CLIENT_ID: process.env.AUTH_AZURE_AD_CLIENT_ID,\n        AUTH_AZURE_AD_CLIENT_SECRET: process.env.AUTH_AZURE_AD_CLIENT_SECRET,\n        AUTH_AZURE_AD_TENANT_ID: process.env.AUTH_AZURE_AD_TENANT_ID,\n        AUTH_AZURE_ALLOW_ACCOUNT_LINKING: process.env.AUTH_AZURE_ALLOW_ACCOUNT_LINKING,\n        AUTH_DOMAINS_WITH_SSO_ENFORCEMENT: process.env.AUTH_DOMAINS_WITH_SSO_ENFORCEMENT,\n        AUTH_DISABLE_USERNAME_PASSWORD: process.env.AUTH_DISABLE_USERNAME_PASSWORD,\n        // Email\n        EMAIL_FROM_ADDRESS: process.env.EMAIL_FROM_ADDRESS,\n        SMTP_CONNECTION_URL: process.env.SMTP_CONNECTION_URL,\n        // S3\n        S3_ENDPOINT: process.env.S3_ENDPOINT,\n        S3_ACCESS_KEY_ID: process.env.S3_ACCESS_KEY_ID,\n        S3_SECRET_ACCESS_KEY: process.env.S3_SECRET_ACCESS_KEY,\n        S3_BUCKET_NAME: process.env.S3_BUCKET_NAME,\n        S3_REGION: process.env.S3_REGION,\n        // Database exports\n        DB_EXPORT_PAGE_SIZE: process.env.DB_EXPORT_PAGE_SIZE\n    },\n    // Skip validation in Docker builds\n    // DOCKER_BUILD is set in Dockerfile\n    skipValidation: process.env.DOCKER_BUILD === \"1\"\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzBDLFNBQVM7UUFDaEMsbUJBQW1CO1FBQ25CQyxxQkFBcUJuQyxRQUFRUixHQUFHLENBQUMyQyxtQkFBbUI7SUFDdEQ7SUFDQSxtQ0FBbUM7SUFDbkMsb0NBQW9DO0lBQ3BDTyxnQkFBZ0IxQyxRQUFRUixHQUFHLENBQUNtRCxZQUFZLEtBQUs7QUFDL0MsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYi8uL3NyYy9lbnYubWpzP2MzYjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUVudiB9IGZyb20gXCJAdDMtb3NzL2Vudi1uZXh0anNcIjtcblxuZXhwb3J0IGNvbnN0IGVudiA9IGNyZWF0ZUVudih7XG4gIC8qKlxuICAgKiBTcGVjaWZ5IHlvdXIgc2VydmVyLXNpZGUgZW52aXJvbm1lbnQgdmFyaWFibGVzIHNjaGVtYSBoZXJlLiBUaGlzIHdheSB5b3UgY2FuIGVuc3VyZSB0aGUgYXBwXG4gICAqIGlzbid0IGJ1aWx0IHdpdGggaW52YWxpZCBlbnYgdmFycy5cbiAgICovXG4gIHNlcnZlcjoge1xuICAgIERBVEFCQVNFX1VSTDogei5zdHJpbmcoKS51cmwoKSxcbiAgICBOT0RFX0VOVjogei5lbnVtKFtcImRldmVsb3BtZW50XCIsIFwidGVzdFwiLCBcInByb2R1Y3Rpb25cIl0pLFxuICAgIE5FWFRBVVRIX1NFQ1JFVDpcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIlxuICAgICAgICA/IHouc3RyaW5nKCkubWluKDEpXG4gICAgICAgIDogei5zdHJpbmcoKS5taW4oMSkub3B0aW9uYWwoKSxcbiAgICBTRUVEX1NFQ1JFVF9LRVk6IHouc3RyaW5nKCkubWluKDEpLm9wdGlvbmFsKCksXG4gICAgTkVYVEFVVEhfVVJMOiB6LnByZXByb2Nlc3MoXG4gICAgICAvLyBUaGlzIG1ha2VzIFZlcmNlbCBkZXBsb3ltZW50cyBub3QgZmFpbCBpZiB5b3UgZG9uJ3Qgc2V0IE5FWFRBVVRIX1VSTFxuICAgICAgLy8gU2luY2UgTmV4dEF1dGguanMgYXV0b21hdGljYWxseSB1c2VzIHRoZSBWRVJDRUxfVVJMIGlmIHByZXNlbnQuXG4gICAgICAoc3RyKSA9PlxuICAgICAgICBwcm9jZXNzLmVudi5WRVJDRUxfVVJMICYmIHByb2Nlc3MuZW52LlZFUkNFTF9VUkwgIT09IFwiXCJcbiAgICAgICAgICA/IHByb2Nlc3MuZW52LlZFUkNFTF9VUkxcbiAgICAgICAgICA6IHN0cixcbiAgICAgIC8vIFZFUkNFTF9VUkwgZG9lc24ndCBpbmNsdWRlIGBodHRwc2Agc28gaXQgY2FuJ3QgYmUgdmFsaWRhdGVkIGFzIGEgVVJMXG4gICAgICBwcm9jZXNzLmVudi5WRVJDRUwgPyB6LnN0cmluZygpLm1pbigxKSA6IHouc3RyaW5nKCkudXJsKCksXG4gICAgKSxcbiAgICBORVhUQVVUSF9DT09LSUVfRE9NQUlOOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgTEFOR0ZVU0VfVEVBTV9TTEFDS19XRUJIT09LOiB6LnN0cmluZygpLnVybCgpLm9wdGlvbmFsKCksXG4gICAgTEFOR0ZVU0VfVEVBTV9CRVRURVJTVEFDS19UT0tFTjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIExBTkdGVVNFX05FV19VU0VSX1NJR05VUF9XRUJIT09LOiB6LnN0cmluZygpLnVybCgpLm9wdGlvbmFsKCksXG4gICAgLy8gQWRkIGAubWluKDEpIG9uIElEIGFuZCBTRUNSRVQgaWYgeW91IHdhbnQgdG8gbWFrZSBzdXJlIHRoZXkncmUgbm90IGVtcHR5XG4gICAgTEFOR0ZVU0VfRU5BQkxFX0VYUEVSSU1FTlRBTF9GRUFUVVJFUzogei5lbnVtKFtcInRydWVcIiwgXCJmYWxzZVwiXSkub3B0aW9uYWwoKSxcbiAgICBTQUxUOiB6LnN0cmluZyh7XG4gICAgICByZXF1aXJlZF9lcnJvcjpcbiAgICAgICAgXCJBIHN0cm9uZyBTYWx0IGlzIHJlcXVpcmVkIHRvIGVuY3J5cHQgQVBJIGtleXMgc2VjdXJlbHkuIFNlZTogaHR0cHM6Ly9sYW5nZnVzZS5jb20vZG9jcy9kZXBsb3ltZW50L3NlbGYtaG9zdCNkZXBsb3ktdGhlLWNvbnRhaW5lclwiLFxuICAgIH0pLFxuICAgIC8vIEFkZCBuZXdseSBzaWduZWQgdXAgdXNlcnMgdG8gZGVmYXVsdCBwcm9qZWN0IHdpdGggcm9sZVxuICAgIExBTkdGVVNFX0RFRkFVTFRfUFJPSkVDVF9JRDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIExBTkdGVVNFX0RFRkFVTFRfUFJPSkVDVF9ST0xFOiB6XG4gICAgICAuZW51bShbXCJBRE1JTlwiLCBcIk1FTUJFUlwiLCBcIlZJRVdFUlwiXSlcbiAgICAgIC5vcHRpb25hbCgpLFxuICAgIC8vIEFVVEhcbiAgICBBVVRIX0dPT0dMRV9DTElFTlRfSUQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBBVVRIX0dPT0dMRV9DTElFTlRfU0VDUkVUOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgQVVUSF9HSVRIVUJfQ0xJRU5UX0lEOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgQVVUSF9HSVRIVUJfQ0xJRU5UX1NFQ1JFVDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIEFVVEhfQVpVUkVfQURfQ0xJRU5UX0lEOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgQVVUSF9BWlVSRV9BRF9DTElFTlRfU0VDUkVUOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgQVVUSF9BWlVSRV9BRF9URU5BTlRfSUQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBBVVRIX0FaVVJFX0FMTE9XX0FDQ09VTlRfTElOS0lORzogei5lbnVtKFtcInRydWVcIiwgXCJmYWxzZVwiXSkub3B0aW9uYWwoKSxcbiAgICBBVVRIX0RPTUFJTlNfV0lUSF9TU09fRU5GT1JDRU1FTlQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBBVVRIX0RJU0FCTEVfVVNFUk5BTUVfUEFTU1dPUkQ6IHouZW51bShbXCJ0cnVlXCIsIFwiZmFsc2VcIl0pLm9wdGlvbmFsKCksXG4gICAgLy8gRU1BSUxcbiAgICBFTUFJTF9GUk9NX0FERFJFU1M6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBTTVRQX0NPTk5FQ1RJT05fVVJMOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgLy8gUzNcbiAgICBTM19FTkRQT0lOVDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIFMzX0FDQ0VTU19LRVlfSUQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBTM19TRUNSRVRfQUNDRVNTX0tFWTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIFMzX0JVQ0tFVF9OQU1FOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgUzNfUkVHSU9OOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgLy8gRGF0YWJhc2UgZXhwb3J0c1xuICAgIERCX0VYUE9SVF9QQUdFX1NJWkU6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgfSxcblxuICAvKipcbiAgICogU3BlY2lmeSB5b3VyIGNsaWVudC1zaWRlIGVudmlyb25tZW50IHZhcmlhYmxlcyBzY2hlbWEgaGVyZS4gVGhpcyB3YXkgeW91IGNhbiBlbnN1cmUgdGhlIGFwcFxuICAgKiBpc24ndCBidWlsdCB3aXRoIGludmFsaWQgZW52IHZhcnMuIFRvIGV4cG9zZSB0aGVtIHRvIHRoZSBjbGllbnQsIHByZWZpeCB0aGVtIHdpdGhcbiAgICogYE5FWFRfUFVCTElDX2AuXG4gICAqL1xuICBjbGllbnQ6IHtcbiAgICAvLyBORVhUX1BVQkxJQ19DTElFTlRWQVI6IHouc3RyaW5nKCkubWluKDEpLFxuICAgIE5FWFRfUFVCTElDX0xBTkdGVVNFX0NMT1VEX1JFR0lPTjogelxuICAgICAgLmVudW0oW1wiVVNcIiwgXCJFVVwiLCBcIlNUQUdJTkdcIl0pXG4gICAgICAub3B0aW9uYWwoKSxcbiAgICBORVhUX1BVQkxJQ19ERU1PX1BST0pFQ1RfSUQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBORVhUX1BVQkxJQ19TSUdOX1VQX0RJU0FCTEVEOiB6LmVudW0oW1widHJ1ZVwiLCBcImZhbHNlXCJdKS5vcHRpb25hbCgpLFxuICB9LFxuXG4gIC8qKlxuICAgKiBZb3UgY2FuJ3QgZGVzdHJ1Y3QgYHByb2Nlc3MuZW52YCBhcyBhIHJlZ3VsYXIgb2JqZWN0IGluIHRoZSBOZXh0LmpzIGVkZ2UgcnVudGltZXMgKGUuZy5cbiAgICogbWlkZGxld2FyZXMpIG9yIGNsaWVudC1zaWRlIHNvIHdlIG5lZWQgdG8gZGVzdHJ1Y3QgbWFudWFsbHkuXG4gICAqL1xuICBydW50aW1lRW52OiB7XG4gICAgU0VFRF9TRUNSRVRfS0VZOiBwcm9jZXNzLmVudi5TRUVEX1NFQ1JFVF9LRVksXG4gICAgTkVYVF9QVUJMSUNfREVNT19QUk9KRUNUX0lEOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19ERU1PX1BST0pFQ1RfSUQsXG4gICAgREFUQUJBU0VfVVJMOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwsXG4gICAgTk9ERV9FTlY6IHByb2Nlc3MuZW52Lk5PREVfRU5WLFxuICAgIE5FWFRBVVRIX1NFQ1JFVDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVULFxuICAgIE5FWFRBVVRIX0NPT0tJRV9ET01BSU46IHByb2Nlc3MuZW52Lk5FWFRBVVRIX0NPT0tJRV9ET01BSU4sXG4gICAgTkVYVEFVVEhfVVJMOiBwcm9jZXNzLmVudi5ORVhUQVVUSF9VUkwsXG4gICAgTkVYVF9QVUJMSUNfTEFOR0ZVU0VfQ0xPVURfUkVHSU9OOlxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfTEFOR0ZVU0VfQ0xPVURfUkVHSU9OLFxuICAgIE5FWFRfUFVCTElDX1NJR05fVVBfRElTQUJMRUQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NJR05fVVBfRElTQUJMRUQsXG4gICAgTEFOR0ZVU0VfRU5BQkxFX0VYUEVSSU1FTlRBTF9GRUFUVVJFUzpcbiAgICAgIHByb2Nlc3MuZW52LkxBTkdGVVNFX0VOQUJMRV9FWFBFUklNRU5UQUxfRkVBVFVSRVMsXG4gICAgTEFOR0ZVU0VfVEVBTV9TTEFDS19XRUJIT09LOiBwcm9jZXNzLmVudi5MQU5HRlVTRV9URUFNX1NMQUNLX1dFQkhPT0ssXG4gICAgTEFOR0ZVU0VfVEVBTV9CRVRURVJTVEFDS19UT0tFTjpcbiAgICAgIHByb2Nlc3MuZW52LkxBTkdGVVNFX1RFQU1fQkVUVEVSU1RBQ0tfVE9LRU4sXG4gICAgTEFOR0ZVU0VfTkVXX1VTRVJfU0lHTlVQX1dFQkhPT0s6XG4gICAgICBwcm9jZXNzLmVudi5MQU5HRlVTRV9ORVdfVVNFUl9TSUdOVVBfV0VCSE9PSyxcbiAgICBTQUxUOiBwcm9jZXNzLmVudi5TQUxULFxuICAgIC8vIERlZmF1bHQgcHJvamVjdCBhbmQgcm9sZVxuICAgIExBTkdGVVNFX0RFRkFVTFRfUFJPSkVDVF9JRDogcHJvY2Vzcy5lbnYuTEFOR0ZVU0VfREVGQVVMVF9QUk9KRUNUX0lELFxuICAgIExBTkdGVVNFX0RFRkFVTFRfUFJPSkVDVF9ST0xFOiBwcm9jZXNzLmVudi5MQU5HRlVTRV9ERUZBVUxUX1BST0pFQ1RfUk9MRSxcbiAgICAvLyBBVVRIXG4gICAgQVVUSF9HT09HTEVfQ0xJRU5UX0lEOiBwcm9jZXNzLmVudi5BVVRIX0dPT0dMRV9DTElFTlRfSUQsXG4gICAgQVVUSF9HT09HTEVfQ0xJRU5UX1NFQ1JFVDogcHJvY2Vzcy5lbnYuQVVUSF9HT09HTEVfQ0xJRU5UX1NFQ1JFVCxcbiAgICBBVVRIX0dJVEhVQl9DTElFTlRfSUQ6IHByb2Nlc3MuZW52LkFVVEhfR0lUSFVCX0NMSUVOVF9JRCxcbiAgICBBVVRIX0dJVEhVQl9DTElFTlRfU0VDUkVUOiBwcm9jZXNzLmVudi5BVVRIX0dJVEhVQl9DTElFTlRfU0VDUkVULFxuICAgIEFVVEhfQVpVUkVfQURfQ0xJRU5UX0lEOiBwcm9jZXNzLmVudi5BVVRIX0FaVVJFX0FEX0NMSUVOVF9JRCxcbiAgICBBVVRIX0FaVVJFX0FEX0NMSUVOVF9TRUNSRVQ6IHByb2Nlc3MuZW52LkFVVEhfQVpVUkVfQURfQ0xJRU5UX1NFQ1JFVCxcbiAgICBBVVRIX0FaVVJFX0FEX1RFTkFOVF9JRDogcHJvY2Vzcy5lbnYuQVVUSF9BWlVSRV9BRF9URU5BTlRfSUQsXG4gICAgQVVUSF9BWlVSRV9BTExPV19BQ0NPVU5UX0xJTktJTkc6XG4gICAgICBwcm9jZXNzLmVudi5BVVRIX0FaVVJFX0FMTE9XX0FDQ09VTlRfTElOS0lORyxcbiAgICBBVVRIX0RPTUFJTlNfV0lUSF9TU09fRU5GT1JDRU1FTlQ6XG4gICAgICBwcm9jZXNzLmVudi5BVVRIX0RPTUFJTlNfV0lUSF9TU09fRU5GT1JDRU1FTlQsXG4gICAgQVVUSF9ESVNBQkxFX1VTRVJOQU1FX1BBU1NXT1JEOiBwcm9jZXNzLmVudi5BVVRIX0RJU0FCTEVfVVNFUk5BTUVfUEFTU1dPUkQsXG4gICAgLy8gRW1haWxcbiAgICBFTUFJTF9GUk9NX0FERFJFU1M6IHByb2Nlc3MuZW52LkVNQUlMX0ZST01fQUREUkVTUyxcbiAgICBTTVRQX0NPTk5FQ1RJT05fVVJMOiBwcm9jZXNzLmVudi5TTVRQX0NPTk5FQ1RJT05fVVJMLFxuICAgIC8vIFMzXG4gICAgUzNfRU5EUE9JTlQ6IHByb2Nlc3MuZW52LlMzX0VORFBPSU5ULFxuICAgIFMzX0FDQ0VTU19LRVlfSUQ6IHByb2Nlc3MuZW52LlMzX0FDQ0VTU19LRVlfSUQsXG4gICAgUzNfU0VDUkVUX0FDQ0VTU19LRVk6IHByb2Nlc3MuZW52LlMzX1NFQ1JFVF9BQ0NFU1NfS0VZLFxuICAgIFMzX0JVQ0tFVF9OQU1FOiBwcm9jZXNzLmVudi5TM19CVUNLRVRfTkFNRSxcbiAgICBTM19SRUdJT046IHByb2Nlc3MuZW52LlMzX1JFR0lPTixcbiAgICAvLyBEYXRhYmFzZSBleHBvcnRzXG4gICAgREJfRVhQT1JUX1BBR0VfU0laRTogcHJvY2Vzcy5lbnYuREJfRVhQT1JUX1BBR0VfU0laRSxcbiAgfSxcbiAgLy8gU2tpcCB2YWxpZGF0aW9uIGluIERvY2tlciBidWlsZHNcbiAgLy8gRE9DS0VSX0JVSUxEIGlzIHNldCBpbiBEb2NrZXJmaWxlXG4gIHNraXBWYWxpZGF0aW9uOiBwcm9jZXNzLmVudi5ET0NLRVJfQlVJTEQgPT09IFwiMVwiLFxufSk7XG4iXSwibmFtZXMiOlsieiIsImNyZWF0ZUVudiIsImVudiIsInNlcnZlciIsIkRBVEFCQVNFX1VSTCIsInN0cmluZyIsInVybCIsIk5PREVfRU5WIiwiZW51bSIsIk5FWFRBVVRIX1NFQ1JFVCIsInByb2Nlc3MiLCJtaW4iLCJvcHRpb25hbCIsIlNFRURfU0VDUkVUX0tFWSIsIk5FWFRBVVRIX1VSTCIsInByZXByb2Nlc3MiLCJzdHIiLCJWRVJDRUxfVVJMIiwiVkVSQ0VMIiwiTkVYVEFVVEhfQ09PS0lFX0RPTUFJTiIsIkxBTkdGVVNFX1RFQU1fU0xBQ0tfV0VCSE9PSyIsIkxBTkdGVVNFX1RFQU1fQkVUVEVSU1RBQ0tfVE9LRU4iLCJMQU5HRlVTRV9ORVdfVVNFUl9TSUdOVVBfV0VCSE9PSyIsIkxBTkdGVVNFX0VOQUJMRV9FWFBFUklNRU5UQUxfRkVBVFVSRVMiLCJTQUxUIiwicmVxdWlyZWRfZXJyb3IiLCJMQU5HRlVTRV9ERUZBVUxUX1BST0pFQ1RfSUQiLCJMQU5HRlVTRV9ERUZBVUxUX1BST0pFQ1RfUk9MRSIsIkFVVEhfR09PR0xFX0NMSUVOVF9JRCIsIkFVVEhfR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJBVVRIX0dJVEhVQl9DTElFTlRfSUQiLCJBVVRIX0dJVEhVQl9DTElFTlRfU0VDUkVUIiwiQVVUSF9BWlVSRV9BRF9DTElFTlRfSUQiLCJBVVRIX0FaVVJFX0FEX0NMSUVOVF9TRUNSRVQiLCJBVVRIX0FaVVJFX0FEX1RFTkFOVF9JRCIsIkFVVEhfQVpVUkVfQUxMT1dfQUNDT1VOVF9MSU5LSU5HIiwiQVVUSF9ET01BSU5TX1dJVEhfU1NPX0VORk9SQ0VNRU5UIiwiQVVUSF9ESVNBQkxFX1VTRVJOQU1FX1BBU1NXT1JEIiwiRU1BSUxfRlJPTV9BRERSRVNTIiwiU01UUF9DT05ORUNUSU9OX1VSTCIsIlMzX0VORFBPSU5UIiwiUzNfQUNDRVNTX0tFWV9JRCIsIlMzX1NFQ1JFVF9BQ0NFU1NfS0VZIiwiUzNfQlVDS0VUX05BTUUiLCJTM19SRUdJT04iLCJEQl9FWFBPUlRfUEFHRV9TSVpFIiwibnVtYmVyIiwiY2xpZW50IiwiTkVYVF9QVUJMSUNfTEFOR0ZVU0VfQ0xPVURfUkVHSU9OIiwiTkVYVF9QVUJMSUNfREVNT19QUk9KRUNUX0lEIiwiTkVYVF9QVUJMSUNfU0lHTl9VUF9ESVNBQkxFRCIsInJ1bnRpbWVFbnYiLCJza2lwVmFsaWRhdGlvbiIsIkRPQ0tFUl9CVUlMRCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/env.mjs\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/../node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ftrpc%2F%5Btrpc%5D&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Ftrpc%2F%5Btrpc%5D.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();