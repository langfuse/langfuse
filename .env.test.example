# Test Environment Configuration Example
# Copy this file to .env.test and customize as needed for local test database isolation
# This file demonstrates how to configure tests to use separate databases

# Prisma - Test Database (separate from development)
# https://www.prisma.io/docs/reference/database-reference/connection-urls#env
DIRECT_URL="postgresql://postgres:postgres@localhost:5432/langfuse_test"
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/langfuse_test"

# ClickHouse - Test Database (separate from development)
CLICKHOUSE_MIGRATION_URL="clickhouse://localhost:9000"
CLICKHOUSE_URL="http://localhost:8123"
CLICKHOUSE_USER="clickhouse"
CLICKHOUSE_PASSWORD="clickhouse"
CLICKHOUSE_DB="test"
CLICKHOUSE_CLUSTER_ENABLED="false"

# Redis - Test Environment (using database 1 for isolation)
REDIS_HOST="127.0.0.1"
REDIS_PORT=6379
REDIS_AUTH="myredissecret"
# Use database 1 for tests (default is 0 for development)
REDIS_CONNECTION_STRING="redis://:myredissecret@127.0.0.1:6379/1"

# Next Auth
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="secret"

# Langfuse Cloud Environment
NEXT_PUBLIC_LANGFUSE_CLOUD_REGION="DEV"

# Langfuse experimental features
LANGFUSE_ENABLE_EXPERIMENTAL_FEATURES="true"

# Salt for API key hashing
SALT="salt"

# Email (can be empty for tests)
EMAIL_FROM_ADDRESS=""
SMTP_CONNECTION_URL=""

# S3 Batch Exports - Test Environment
LANGFUSE_S3_BATCH_EXPORT_ENABLED=true
LANGFUSE_S3_BATCH_EXPORT_BUCKET=langfuse-test
LANGFUSE_S3_BATCH_EXPORT_ACCESS_KEY_ID=minio
LANGFUSE_S3_BATCH_EXPORT_SECRET_ACCESS_KEY=miniosecret
LANGFUSE_S3_BATCH_EXPORT_REGION=us-east-1
LANGFUSE_S3_BATCH_EXPORT_ENDPOINT=http://localhost:9090
LANGFUSE_S3_BATCH_EXPORT_FORCE_PATH_STYLE=true
LANGFUSE_S3_BATCH_EXPORT_PREFIX=test-exports/

# S3 Media Upload - Test Environment
LANGFUSE_S3_MEDIA_UPLOAD_BUCKET=langfuse-test
LANGFUSE_S3_MEDIA_UPLOAD_ACCESS_KEY_ID=minio
LANGFUSE_S3_MEDIA_UPLOAD_SECRET_ACCESS_KEY=miniosecret
LANGFUSE_S3_MEDIA_UPLOAD_REGION=us-east-1
LANGFUSE_S3_MEDIA_UPLOAD_ENDPOINT=http://localhost:9090
LANGFUSE_S3_MEDIA_UPLOAD_FORCE_PATH_STYLE=true
LANGFUSE_S3_MEDIA_UPLOAD_PREFIX=test-media/

# S3 Event Bucket Upload - Test Environment
LANGFUSE_S3_EVENT_UPLOAD_BUCKET=langfuse-test
LANGFUSE_S3_EVENT_UPLOAD_ACCESS_KEY_ID=minio
LANGFUSE_S3_EVENT_UPLOAD_SECRET_ACCESS_KEY=miniosecret
LANGFUSE_S3_EVENT_UPLOAD_REGION=us-east-1
LANGFUSE_S3_EVENT_UPLOAD_ENDPOINT=http://localhost:9090
LANGFUSE_S3_EVENT_UPLOAD_FORCE_PATH_STYLE=true
LANGFUSE_S3_EVENT_UPLOAD_PREFIX=test-events/

# Encryption key (generate with: openssl rand -hex 32)
ENCRYPTION_KEY=0000000000000000000000000000000000000000000000000000000000000000

# Speed up local development
NEXT_PUBLIC_LANGFUSE_RUN_NEXT_INIT="false"

# For faster test execution, you can reduce queue delays:
#LANGFUSE_INGESTION_QUEUE_DELAY_MS=10
#LANGFUSE_INGESTION_CLICKHOUSE_WRITE_INTERVAL_MS=10
