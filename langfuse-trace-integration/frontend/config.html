<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LangFuse é…ç½®å‘å¯¼</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f7fa;
      }
      .config-guide {
        background: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .step {
        margin-bottom: 30px;
        padding: 20px;
        border-left: 4px solid #007bff;
        background-color: #f8f9fa;
      }
      .step h3 {
        margin-top: 0;
        color: #2c3e50;
      }
      .code-block {
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 4px;
        padding: 15px;
        margin: 10px 0;
        font-family: "Monaco", "Menlo", monospace;
        font-size: 14px;
      }
      .status-indicator {
        display: inline-block;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: bold;
      }
      .status-success {
        background-color: #d4edda;
        color: #155724;
      }
      .status-error {
        background-color: #f8d7da;
        color: #721c24;
      }
      .status-warning {
        background-color: #fff3cd;
        color: #856404;
      }
      .btn {
        display: inline-block;
        padding: 10px 20px;
        margin: 5px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        text-decoration: none;
        font-size: 14px;
      }
      .btn-primary {
        background-color: #007bff;
        color: white;
      }
      .btn-secondary {
        background-color: #6c757d;
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="config-guide">
      <h1>ğŸ”§ LangFuse é…ç½®å‘å¯¼</h1>
      <p>æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å®Œæˆ LangFuse Trace ç›‘æ§é›†æˆçš„é…ç½®ã€‚</p>

      <div class="step">
        <h3>1. è·å– LangFuse é¡¹ç›®ä¿¡æ¯</h3>
        <p>è®¿é—®æ‚¨çš„ LangFuse å®ä¾‹ï¼Œè·å–ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
        <ul>
          <li>
            <strong>é¡¹ç›® ID (PROJECT_ID)</strong>: åœ¨é¡¹ç›®è®¾ç½®æˆ– URL ä¸­æ‰¾åˆ°
          </li>
          <li><strong>API å¯†é’¥</strong>: å·²åœ¨é…ç½®ä¸­</li>
          <li><strong>æœåŠ¡å™¨åœ°å€</strong>: å·²åœ¨é…ç½®ä¸­</li>
        </ul>
        <p>
          <strong>ç¤ºä¾‹é¡¹ç›® ID æ ¼å¼</strong>:
          <code>cloramnkj0002jz088vzn1ja4</code>
        </p>
      </div>

      <div class="step">
        <h3>2. æ›´æ–°é…ç½®æ–‡ä»¶</h3>
        <p>ç¼–è¾‘ <code>backend/.env</code> æ–‡ä»¶ï¼š</p>
        <div class="code-block">
          # å°†è¿™ä¸€è¡Œï¼š LANGFUSE_PROJECT_ID=your_project_id_here #
          æ›¿æ¢ä¸ºæ‚¨çš„å®é™…é¡¹ç›® IDï¼š LANGFUSE_PROJECT_ID=æ‚¨çš„å®é™…é¡¹ç›®ID
        </div>
      </div>

      <div class="step">
        <h3>3. é‡å¯æœåŠ¡</h3>
        <p>é…ç½®æ›´æ–°åï¼Œéœ€è¦é‡å¯åç«¯æœåŠ¡ï¼š</p>
        <div class="code-block">
          # åœæ­¢å½“å‰æœåŠ¡ (å¦‚æœæ­£åœ¨è¿è¡Œ) pkill -f "node.*server.js" #
          é‡æ–°å¯åŠ¨åç«¯æœåŠ¡ cd backend npm start
        </div>
      </div>

      <div class="step">
        <h3>4. éªŒè¯é…ç½®</h3>
        <p>è¿è¡Œé…ç½®æµ‹è¯•ï¼š</p>
        <div class="code-block">./test-config.sh</div>
        <p>
          æœŸæœ›çœ‹åˆ°ï¼š<span class="status-indicator status-success"
            >âœ… LangFuse API è¿æ¥æˆåŠŸ</span
          >
        </p>
      </div>

      <div class="step">
        <h3>5. å¼€å§‹ä½¿ç”¨</h3>
        <p>é…ç½®å®Œæˆåï¼Œè®¿é—®å‰ç«¯ç•Œé¢ï¼š</p>
        <a href="http://localhost:8080" class="btn btn-primary"
          >ğŸš€ æ‰“å¼€ç›‘æ§ç•Œé¢</a
        >
        <p>æ‚¨å°†çœ‹åˆ°å®Œæ•´çš„ LangFuse Trace ç›‘æ§åŠŸèƒ½ã€‚</p>
      </div>

      <div class="step">
        <h3>å½“å‰çŠ¶æ€</h3>
        <p>
          <span class="status-indicator status-success"
            >âœ… åç«¯æœåŠ¡å™¨è¿è¡Œä¸­</span
          >
          <span class="status-indicator status-success">âœ… å‰ç«¯é¡µé¢æ­£å¸¸</span>
          <span class="status-indicator status-error"
            >âŒ ç­‰å¾… PROJECT_ID é…ç½®</span
          >
        </p>
      </div>

      <div class="step">
        <h3>æ•…éšœæ’é™¤</h3>
        <h4>è¿‡æ»¤åŠŸèƒ½è¯´æ˜ï¼š</h4>
        <ul>
          <li><strong>æœç´¢æ¡†</strong>ï¼šæ”¯æŒ trace åç§°å’Œ ID çš„å…¨æ–‡æœç´¢</li>
          <li><strong>Trace åç§°</strong>ï¼šä¸“é—¨è¿‡æ»¤ trace åç§°</li>
          <li><strong>ç”¨æˆ· ID</strong>ï¼šæŒ‰ç”¨æˆ·è¿‡æ»¤ trace</li>
          <li><strong>æ—¶é—´èŒƒå›´</strong>ï¼šæŒ‰åˆ›å»ºæ—¶é—´è¿‡æ»¤</li>
          <li><strong>å®æ—¶è¿‡æ»¤</strong>ï¼šæ¼”ç¤ºæ¨¡å¼ä¸‹è¾“å…¥æ—¶è‡ªåŠ¨è¿‡æ»¤</li>
        </ul>

        <h4>å¦‚æœä»ç„¶é‡åˆ° 401 é”™è¯¯ï¼š</h4>
        <ul>
          <li>ç¡®è®¤ PROJECT_ID æ ¼å¼æ­£ç¡®</li>
          <li>æ£€æŸ¥ API å¯†é’¥æ˜¯å¦å¯¹è¯¥é¡¹ç›®æœ‰æ•ˆ</li>
          <li>ç¡®è®¤ LangFuse æœåŠ¡å™¨å¯è®¿é—®</li>
          <li>æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®</li>
        </ul>

        <h4>å¸¸ç”¨å‘½ä»¤ï¼š</h4>
        <div class="code-block">
          # æµ‹è¯•åç«¯å¥åº· curl http://localhost:3002/api/health # æµ‹è¯• API è¿æ¥
          curl "http://localhost:3002/api/traces?page=1&limit=1" # æŸ¥çœ‹æœåŠ¡æ—¥å¿—
          cd backend && npm start # æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º
        </div>
      </div>
    </div>
  </body>
</html>
